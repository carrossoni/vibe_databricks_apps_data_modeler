function dT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rj={exports:{}},Qu={},Tj={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),fT=Symbol.for("react.portal"),pT=Symbol.for("react.fragment"),hT=Symbol.for("react.strict_mode"),mT=Symbol.for("react.profiler"),gT=Symbol.for("react.provider"),yT=Symbol.for("react.context"),vT=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),_T=Symbol.for("react.memo"),wT=Symbol.for("react.lazy"),A_=Symbol.iterator;function bT(e){return e===null||typeof e!="object"?null:(e=A_&&e[A_]||e["@@iterator"],typeof e=="function"?e:null)}var Nj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kj=Object.assign,Aj={};function ki(e,t,n){this.props=e,this.context=t,this.refs=Aj,this.updater=n||Nj}ki.prototype.isReactComponent={};ki.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ki.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dj(){}Dj.prototype=ki.prototype;function sv(e,t,n){this.props=e,this.context=t,this.refs=Aj,this.updater=n||Nj}var lv=sv.prototype=new Dj;lv.constructor=sv;kj(lv,ki.prototype);lv.isPureReactComponent=!0;var D_=Array.isArray,Pj=Object.prototype.hasOwnProperty,cv={current:null},Ij={key:!0,ref:!0,__self:!0,__source:!0};function Mj(e,t,n){var r,o={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Pj.call(t,r)&&!Ij.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:yl,type:e,key:a,ref:i,props:o,_owner:cv.current}}function CT(e,t){return{$$typeof:yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uv(e){return typeof e=="object"&&e!==null&&e.$$typeof===yl}function ST(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var P_=/\/+/g;function Rf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ST(""+e.key):t.toString(36)}function Mc(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case yl:case fT:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Rf(i,0):r,D_(o)?(n="",e!=null&&(n=e.replace(P_,"$&/")+"/"),Mc(o,t,n,"",function(u){return u})):o!=null&&(uv(o)&&(o=CT(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(P_,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",D_(e))for(var s=0;s<e.length;s++){a=e[s];var c=r+Rf(a,s);i+=Mc(a,t,n,c,o)}else if(c=bT(e),typeof c=="function")for(e=c.call(e),s=0;!(a=e.next()).done;)a=a.value,c=r+Rf(a,s++),i+=Mc(a,t,n,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Gl(e,t,n){if(e==null)return e;var r=[],o=0;return Mc(e,r,"","",function(a){return t.call(n,a,o++)}),r}function jT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},Oc={transition:null},ET={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:cv};Ze.Children={map:Gl,forEach:function(e,t,n){Gl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gl(e,function(){t++}),t},toArray:function(e){return Gl(e,function(t){return t})||[]},only:function(e){if(!uv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ze.Component=ki;Ze.Fragment=pT;Ze.Profiler=mT;Ze.PureComponent=sv;Ze.StrictMode=hT;Ze.Suspense=xT;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ET;Ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kj({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=cv.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)Pj.call(t,c)&&!Ij.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:yl,type:e.type,key:o,ref:a,props:r,_owner:i}};Ze.createContext=function(e){return e={$$typeof:yT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gT,_context:e},e.Consumer=e};Ze.createElement=Mj;Ze.createFactory=function(e){var t=Mj.bind(null,e);return t.type=e,t};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(e){return{$$typeof:vT,render:e}};Ze.isValidElement=uv;Ze.lazy=function(e){return{$$typeof:wT,_payload:{_status:-1,_result:e},_init:jT}};Ze.memo=function(e,t){return{$$typeof:_T,type:e,compare:t===void 0?null:t}};Ze.startTransition=function(e){var t=Oc.transition;Oc.transition={};try{e()}finally{Oc.transition=t}};Ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ze.useCallback=function(e,t){return rn.current.useCallback(e,t)};Ze.useContext=function(e){return rn.current.useContext(e)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};Ze.useEffect=function(e,t){return rn.current.useEffect(e,t)};Ze.useId=function(){return rn.current.useId()};Ze.useImperativeHandle=function(e,t,n){return rn.current.useImperativeHandle(e,t,n)};Ze.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};Ze.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};Ze.useMemo=function(e,t){return rn.current.useMemo(e,t)};Ze.useReducer=function(e,t,n){return rn.current.useReducer(e,t,n)};Ze.useRef=function(e){return rn.current.useRef(e)};Ze.useState=function(e){return rn.current.useState(e)};Ze.useSyncExternalStore=function(e,t,n){return rn.current.useSyncExternalStore(e,t,n)};Ze.useTransition=function(){return rn.current.useTransition()};Ze.version="18.2.0";Tj.exports=Ze;var f=Tj.exports;const re=gl(f),$T=dT({__proto__:null,default:re},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT=f,TT=Symbol.for("react.element"),NT=Symbol.for("react.fragment"),kT=Object.prototype.hasOwnProperty,AT=RT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DT={key:!0,ref:!0,__self:!0,__source:!0};function Oj(e,t,n){var r,o={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)kT.call(t,r)&&!DT.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:TT,type:e,key:a,ref:i,props:o,_owner:AT.current}}Qu.Fragment=NT;Qu.jsx=Oj;Qu.jsxs=Oj;Rj.exports=Qu;var l=Rj.exports,C1={},Lj={exports:{}},Nn={},Fj={exports:{}},zj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,A){var z=I.length;I.push(A);e:for(;0<z;){var U=z-1>>>1,F=I[U];if(0<o(F,A))I[U]=A,I[z]=F,z=U;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var A=I[0],z=I.pop();if(z!==A){I[0]=z;e:for(var U=0,F=I.length,B=F>>>1;U<B;){var X=2*(U+1)-1,Q=I[X],J=X+1,ee=I[J];if(0>o(Q,z))J<F&&0>o(ee,Q)?(I[U]=ee,I[J]=z,U=J):(I[U]=Q,I[X]=z,U=X);else if(J<F&&0>o(ee,z))I[U]=ee,I[J]=z,U=J;else break e}}return A}function o(I,A){var z=I.sortIndex-A.sortIndex;return z!==0?z:I.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var c=[],u=[],d=1,p=null,m=3,h=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=I)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function b(I){if(y=!1,_(I),!g)if(n(c)!==null)g=!0,j(S);else{var A=n(u);A!==null&&P(b,A.startTime-I)}}function S(I,A){g=!1,y&&(y=!1,v(T),T=-1),h=!0;var z=m;try{for(_(A),p=n(c);p!==null&&(!(p.expirationTime>A)||I&&!L());){var U=p.callback;if(typeof U=="function"){p.callback=null,m=p.priorityLevel;var F=U(p.expirationTime<=A);A=e.unstable_now(),typeof F=="function"?p.callback=F:p===n(c)&&r(c),_(A)}else r(c);p=n(c)}if(p!==null)var B=!0;else{var X=n(u);X!==null&&P(b,X.startTime-A),B=!1}return B}finally{p=null,m=z,h=!1}}var $=!1,N=null,T=-1,C=5,D=-1;function L(){return!(e.unstable_now()-D<C)}function K(){if(N!==null){var I=e.unstable_now();D=I;var A=!0;try{A=N(!0,I)}finally{A?H():($=!1,N=null)}}else $=!1}var H;if(typeof x=="function")H=function(){x(K)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,V=M.port2;M.port1.onmessage=K,H=function(){V.postMessage(null)}}else H=function(){w(K,0)};function j(I){N=I,$||($=!0,H())}function P(I,A){T=w(function(){I(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,j(S))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var z=m;m=A;try{return I()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,A){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=m;m=I;try{return A()}finally{m=z}},e.unstable_scheduleCallback=function(I,A,z){var U=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,I={id:d++,callback:A,priorityLevel:I,startTime:z,expirationTime:F,sortIndex:-1},z>U?(I.sortIndex=z,t(u,I),n(c)===null&&I===n(u)&&(y?(v(T),T=-1):y=!0,P(b,z-U))):(I.sortIndex=F,t(c,I),g||h||(g=!0,j(S))),I},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(I){var A=m;return function(){var z=m;m=A;try{return I.apply(this,arguments)}finally{m=z}}}})(zj);Fj.exports=zj;var PT=Fj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj=f,Rn=PT;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bj=new Set,Ls={};function va(e,t){hi(e,t),hi(e+"Capture",t)}function hi(e,t){for(Ls[e]=t,e=0;e<t.length;e++)Bj.add(t[e])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S1=Object.prototype.hasOwnProperty,IT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I_={},M_={};function MT(e){return S1.call(M_,e)?!0:S1.call(I_,e)?!1:IT.test(e)?M_[e]=!0:(I_[e]=!0,!1)}function OT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LT(e,t,n,r){if(t===null||typeof t>"u"||OT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,r,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ut[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ut[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ut[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ut[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ut[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ut[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ut[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ut[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ut[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var dv=/[\-:]([a-z])/g;function fv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dv,fv);Ut[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dv,fv);Ut[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dv,fv);Ut[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ut[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ut[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function pv(e,t,n,r){var o=Ut.hasOwnProperty(t)?Ut[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LT(t,n,o,r)&&(n=null),r||o===null?MT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zr=qj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),Ha=Symbol.for("react.portal"),Ua=Symbol.for("react.fragment"),hv=Symbol.for("react.strict_mode"),j1=Symbol.for("react.profiler"),Vj=Symbol.for("react.provider"),Hj=Symbol.for("react.context"),mv=Symbol.for("react.forward_ref"),E1=Symbol.for("react.suspense"),$1=Symbol.for("react.suspense_list"),gv=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),Uj=Symbol.for("react.offscreen"),O_=Symbol.iterator;function Zi(e){return e===null||typeof e!="object"?null:(e=O_&&e[O_]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Object.assign,Tf;function hs(e){if(Tf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Tf=t&&t[1]||""}return`
`+Tf+e}var Nf=!1;function kf(e,t){if(!e||Nf)return"";Nf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),a=r.stack.split(`
`),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(i!==1||s!==1)do if(i--,s--,0>s||o[i]!==a[s]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=s);break}}}finally{Nf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hs(e):""}function FT(e){switch(e.tag){case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 2:case 15:return e=kf(e.type,!1),e;case 11:return e=kf(e.type.render,!1),e;case 1:return e=kf(e.type,!0),e;default:return""}}function R1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ua:return"Fragment";case Ha:return"Portal";case j1:return"Profiler";case hv:return"StrictMode";case E1:return"Suspense";case $1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hj:return(e.displayName||"Context")+".Consumer";case Vj:return(e._context.displayName||"Context")+".Provider";case mv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gv:return t=e.displayName||null,t!==null?t:R1(e.type)||"Memo";case uo:t=e._payload,e=e._init;try{return R1(e(t))}catch{}}return null}function zT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R1(t);case 8:return t===hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ao(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qT(e){var t=Gj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kl(e){e._valueTracker||(e._valueTracker=qT(e))}function Wj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ou(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function T1(e,t){var n=t.checked;return bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function L_(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ao(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kj(e,t){t=t.checked,t!=null&&pv(e,"checked",t,!1)}function N1(e,t){Kj(e,t);var n=Ao(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?k1(e,t.type,n):t.hasOwnProperty("defaultValue")&&k1(e,t.type,Ao(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function F_(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function k1(e,t,n){(t!=="number"||ou(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ms=Array.isArray;function oi(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ao(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function A1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function z_(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ve(92));if(ms(n)){if(1<n.length)throw Error(ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ao(n)}}function Yj(e,t){var n=Ao(t.value),r=Ao(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function q_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yl,Zj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yl=Yl||document.createElement("div"),Yl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BT=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(e){BT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rs[t]=Rs[e]})});function Qj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rs.hasOwnProperty(e)&&Rs[e]?(""+t).trim():t+"px"}function Jj(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Qj(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var VT=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P1(e,t){if(t){if(VT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function I1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M1=null;function yv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var O1=null,ai=null,ii=null;function B_(e){if(e=_l(e)){if(typeof O1!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=rd(t),O1(e.stateNode,e.type,t))}}function eE(e){ai?ii?ii.push(e):ii=[e]:ai=e}function tE(){if(ai){var e=ai,t=ii;if(ii=ai=null,B_(e),t)for(e=0;e<t.length;e++)B_(t[e])}}function nE(e,t){return e(t)}function rE(){}var Af=!1;function oE(e,t,n){if(Af)return e(t,n);Af=!0;try{return nE(e,t,n)}finally{Af=!1,(ai!==null||ii!==null)&&(rE(),tE())}}function zs(e,t){var n=e.stateNode;if(n===null)return null;var r=rd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ve(231,t,typeof n));return n}var L1=!1;if(zr)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){L1=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{L1=!1}function HT(e,t,n,r,o,a,i,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ts=!1,au=null,iu=!1,F1=null,UT={onError:function(e){Ts=!0,au=e}};function GT(e,t,n,r,o,a,i,s,c){Ts=!1,au=null,HT.apply(UT,arguments)}function WT(e,t,n,r,o,a,i,s,c){if(GT.apply(this,arguments),Ts){if(Ts){var u=au;Ts=!1,au=null}else throw Error(ve(198));iu||(iu=!0,F1=u)}}function xa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function aE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function V_(e){if(xa(e)!==e)throw Error(ve(188))}function KT(e){var t=e.alternate;if(!t){if(t=xa(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return V_(o),e;if(a===r)return V_(o),t;a=a.sibling}throw Error(ve(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i){for(s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?e:t}function iE(e){return e=KT(e),e!==null?sE(e):null}function sE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sE(e);if(t!==null)return t;e=e.sibling}return null}var lE=Rn.unstable_scheduleCallback,H_=Rn.unstable_cancelCallback,YT=Rn.unstable_shouldYield,XT=Rn.unstable_requestPaint,jt=Rn.unstable_now,ZT=Rn.unstable_getCurrentPriorityLevel,vv=Rn.unstable_ImmediatePriority,cE=Rn.unstable_UserBlockingPriority,su=Rn.unstable_NormalPriority,QT=Rn.unstable_LowPriority,uE=Rn.unstable_IdlePriority,Ju=null,vr=null;function JT(e){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Ju,e,void 0,(e.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:nN,eN=Math.log,tN=Math.LN2;function nN(e){return e>>>=0,e===0?32:31-(eN(e)/tN|0)|0}var Xl=64,Zl=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var s=i&~o;s!==0?r=gs(s):(a&=i,a!==0&&(r=gs(a)))}else i=n&~o,i!==0?r=gs(i):a!==0&&(r=gs(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tr(t),o=1<<n,r|=e[n],t&=~o;return r}function rN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-tr(a),s=1<<i,c=o[i];c===-1?(!(s&n)||s&r)&&(o[i]=rN(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}}function z1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dE(){var e=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),e}function Df(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tr(t),e[t]=n}function aN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-tr(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function xv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ut=0;function fE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pE,_v,hE,mE,gE,q1=!1,Ql=[],bo=null,Co=null,So=null,qs=new Map,Bs=new Map,mo=[],iN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U_(e,t){switch(e){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bs.delete(t.pointerId)}}function Ji(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=_l(t),t!==null&&_v(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function sN(e,t,n,r,o){switch(t){case"focusin":return bo=Ji(bo,e,t,n,r,o),!0;case"dragenter":return Co=Ji(Co,e,t,n,r,o),!0;case"mouseover":return So=Ji(So,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return qs.set(a,Ji(qs.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Bs.set(a,Ji(Bs.get(a)||null,e,t,n,r,o)),!0}return!1}function yE(e){var t=Qo(e.target);if(t!==null){var n=xa(t);if(n!==null){if(t=n.tag,t===13){if(t=aE(n),t!==null){e.blockedOn=t,gE(e.priority,function(){hE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=B1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);M1=r,n.target.dispatchEvent(r),M1=null}else return t=_l(n),t!==null&&_v(t),e.blockedOn=n,!1;t.shift()}return!0}function G_(e,t,n){Lc(e)&&n.delete(t)}function lN(){q1=!1,bo!==null&&Lc(bo)&&(bo=null),Co!==null&&Lc(Co)&&(Co=null),So!==null&&Lc(So)&&(So=null),qs.forEach(G_),Bs.forEach(G_)}function es(e,t){e.blockedOn===t&&(e.blockedOn=null,q1||(q1=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,lN)))}function Vs(e){function t(o){return es(o,e)}if(0<Ql.length){es(Ql[0],e);for(var n=1;n<Ql.length;n++){var r=Ql[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bo!==null&&es(bo,e),Co!==null&&es(Co,e),So!==null&&es(So,e),qs.forEach(t),Bs.forEach(t),n=0;n<mo.length;n++)r=mo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mo.length&&(n=mo[0],n.blockedOn===null);)yE(n),n.blockedOn===null&&mo.shift()}var si=Zr.ReactCurrentBatchConfig,cu=!0;function cN(e,t,n,r){var o=ut,a=si.transition;si.transition=null;try{ut=1,wv(e,t,n,r)}finally{ut=o,si.transition=a}}function uN(e,t,n,r){var o=ut,a=si.transition;si.transition=null;try{ut=4,wv(e,t,n,r)}finally{ut=o,si.transition=a}}function wv(e,t,n,r){if(cu){var o=B1(e,t,n,r);if(o===null)Vf(e,t,r,uu,n),U_(e,r);else if(sN(o,e,t,n,r))r.stopPropagation();else if(U_(e,r),t&4&&-1<iN.indexOf(e)){for(;o!==null;){var a=_l(o);if(a!==null&&pE(a),a=B1(e,t,n,r),a===null&&Vf(e,t,r,uu,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else Vf(e,t,r,null,n)}}var uu=null;function B1(e,t,n,r){if(uu=null,e=yv(r),e=Qo(e),e!==null)if(t=xa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=aE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uu=e,null}function vE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZT()){case vv:return 1;case cE:return 4;case su:case QT:return 16;case uE:return 536870912;default:return 16}default:return 16}}var vo=null,bv=null,Fc=null;function xE(){if(Fc)return Fc;var e,t=bv,n=t.length,r,o="value"in vo?vo.value:vo.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[a-r];r++);return Fc=o.slice(e,1<r?1-r:void 0)}function zc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jl(){return!0}function W_(){return!1}function kn(e){function t(n,r,o,a,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Jl:W_,this.isPropagationStopped=W_,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),t}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cv=kn(Ai),xl=bt({},Ai,{view:0,detail:0}),dN=kn(xl),Pf,If,ts,ed=bt({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&e.type==="mousemove"?(Pf=e.screenX-ts.screenX,If=e.screenY-ts.screenY):If=Pf=0,ts=e),Pf)},movementY:function(e){return"movementY"in e?e.movementY:If}}),K_=kn(ed),fN=bt({},ed,{dataTransfer:0}),pN=kn(fN),hN=bt({},xl,{relatedTarget:0}),Mf=kn(hN),mN=bt({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),gN=kn(mN),yN=bt({},Ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vN=kn(yN),xN=bt({},Ai,{data:0}),Y_=kn(xN),_N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bN[e])?!!t[e]:!1}function Sv(){return CN}var SN=bt({},xl,{key:function(e){if(e.key){var t=_N[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sv,charCode:function(e){return e.type==="keypress"?zc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jN=kn(SN),EN=bt({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X_=kn(EN),$N=bt({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sv}),RN=kn($N),TN=bt({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),NN=kn(TN),kN=bt({},ed,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AN=kn(kN),DN=[9,13,27,32],jv=zr&&"CompositionEvent"in window,Ns=null;zr&&"documentMode"in document&&(Ns=document.documentMode);var PN=zr&&"TextEvent"in window&&!Ns,_E=zr&&(!jv||Ns&&8<Ns&&11>=Ns),Z_=" ",Q_=!1;function wE(e,t){switch(e){case"keyup":return DN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ga=!1;function IN(e,t){switch(e){case"compositionend":return bE(t);case"keypress":return t.which!==32?null:(Q_=!0,Z_);case"textInput":return e=t.data,e===Z_&&Q_?null:e;default:return null}}function MN(e,t){if(Ga)return e==="compositionend"||!jv&&wE(e,t)?(e=xE(),Fc=bv=vo=null,Ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _E&&t.locale!=="ko"?null:t.data;default:return null}}var ON={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ON[e.type]:t==="textarea"}function CE(e,t,n,r){eE(r),t=du(t,"onChange"),0<t.length&&(n=new Cv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ks=null,Hs=null;function LN(e){PE(e,0)}function td(e){var t=Ya(e);if(Wj(t))return e}function FN(e,t){if(e==="change")return t}var SE=!1;if(zr){var Of;if(zr){var Lf="oninput"in document;if(!Lf){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),Lf=typeof ew.oninput=="function"}Of=Lf}else Of=!1;SE=Of&&(!document.documentMode||9<document.documentMode)}function tw(){ks&&(ks.detachEvent("onpropertychange",jE),Hs=ks=null)}function jE(e){if(e.propertyName==="value"&&td(Hs)){var t=[];CE(t,Hs,e,yv(e)),oE(LN,t)}}function zN(e,t,n){e==="focusin"?(tw(),ks=t,Hs=n,ks.attachEvent("onpropertychange",jE)):e==="focusout"&&tw()}function qN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return td(Hs)}function BN(e,t){if(e==="click")return td(t)}function VN(e,t){if(e==="input"||e==="change")return td(t)}function HN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sr=typeof Object.is=="function"?Object.is:HN;function Us(e,t){if(sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!S1.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function nw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rw(e,t){var n=nw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nw(n)}}function EE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $E(){for(var e=window,t=ou();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ou(e.document)}return t}function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UN(e){var t=$E(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&EE(n.ownerDocument.documentElement,n)){if(r!==null&&Ev(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=rw(n,a);var i=rw(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GN=zr&&"documentMode"in document&&11>=document.documentMode,Wa=null,V1=null,As=null,H1=!1;function ow(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;H1||Wa==null||Wa!==ou(r)||(r=Wa,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),As&&Us(As,r)||(As=r,r=du(V1,"onSelect"),0<r.length&&(t=new Cv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wa)))}function ec(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ka={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},Ff={},RE={};zr&&(RE=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function nd(e){if(Ff[e])return Ff[e];if(!Ka[e])return e;var t=Ka[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RE)return Ff[e]=t[n];return e}var TE=nd("animationend"),NE=nd("animationiteration"),kE=nd("animationstart"),AE=nd("transitionend"),DE=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){DE.set(e,t),va(t,[e])}for(var zf=0;zf<aw.length;zf++){var qf=aw[zf],WN=qf.toLowerCase(),KN=qf[0].toUpperCase()+qf.slice(1);Lo(WN,"on"+KN)}Lo(TE,"onAnimationEnd");Lo(NE,"onAnimationIteration");Lo(kE,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(AE,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function iw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,WT(r,t,void 0,e),e.currentTarget=null}function PE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==a&&o.isPropagationStopped())break e;iw(o,s,u),a=c}else for(i=0;i<r.length;i++){if(s=r[i],c=s.instance,u=s.currentTarget,s=s.listener,c!==a&&o.isPropagationStopped())break e;iw(o,s,u),a=c}}}if(iu)throw e=F1,iu=!1,F1=null,e}function mt(e,t){var n=t[Y1];n===void 0&&(n=t[Y1]=new Set);var r=e+"__bubble";n.has(r)||(IE(t,e,2,!1),n.add(r))}function Bf(e,t,n){var r=0;t&&(r|=4),IE(n,e,r,t)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Gs(e){if(!e[tc]){e[tc]=!0,Bj.forEach(function(n){n!=="selectionchange"&&(YN.has(n)||Bf(n,!1,e),Bf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tc]||(t[tc]=!0,Bf("selectionchange",!1,t))}}function IE(e,t,n,r){switch(vE(t)){case 1:var o=cN;break;case 4:o=uN;break;default:o=wv}n=o.bind(null,t,n,e),o=void 0,!L1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Vf(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;s!==null;){if(i=Qo(s),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}s=s.parentNode}}r=r.return}oE(function(){var u=a,d=yv(n),p=[];e:{var m=DE.get(e);if(m!==void 0){var h=Cv,g=e;switch(e){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":h=jN;break;case"focusin":g="focus",h=Mf;break;case"focusout":g="blur",h=Mf;break;case"beforeblur":case"afterblur":h=Mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=K_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=pN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=RN;break;case TE:case NE:case kE:h=gN;break;case AE:h=NN;break;case"scroll":h=dN;break;case"wheel":h=AN;break;case"copy":case"cut":case"paste":h=vN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=X_}var y=(t&4)!==0,w=!y&&e==="scroll",v=y?m!==null?m+"Capture":null:m;y=[];for(var x=u,_;x!==null;){_=x;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,v!==null&&(b=zs(x,v),b!=null&&y.push(Ws(x,b,_)))),w)break;x=x.return}0<y.length&&(m=new h(m,g,null,n,d),p.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==M1&&(g=n.relatedTarget||n.fromElement)&&(Qo(g)||g[qr]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?Qo(g):null,g!==null&&(w=xa(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(y=K_,b="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=X_,b="onPointerLeave",v="onPointerEnter",x="pointer"),w=h==null?m:Ya(h),_=g==null?m:Ya(g),m=new y(b,x+"leave",h,n,d),m.target=w,m.relatedTarget=_,b=null,Qo(d)===u&&(y=new y(v,x+"enter",g,n,d),y.target=_,y.relatedTarget=w,b=y),w=b,h&&g)t:{for(y=h,v=g,x=0,_=y;_;_=ka(_))x++;for(_=0,b=v;b;b=ka(b))_++;for(;0<x-_;)y=ka(y),x--;for(;0<_-x;)v=ka(v),_--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=ka(y),v=ka(v)}y=null}else y=null;h!==null&&sw(p,m,h,y,!1),g!==null&&w!==null&&sw(p,w,g,y,!0)}}e:{if(m=u?Ya(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var S=FN;else if(J_(m))if(SE)S=VN;else{S=qN;var $=zN}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=BN);if(S&&(S=S(e,u))){CE(p,S,n,d);break e}$&&$(e,m,u),e==="focusout"&&($=m._wrapperState)&&$.controlled&&m.type==="number"&&k1(m,"number",m.value)}switch($=u?Ya(u):window,e){case"focusin":(J_($)||$.contentEditable==="true")&&(Wa=$,V1=u,As=null);break;case"focusout":As=V1=Wa=null;break;case"mousedown":H1=!0;break;case"contextmenu":case"mouseup":case"dragend":H1=!1,ow(p,n,d);break;case"selectionchange":if(GN)break;case"keydown":case"keyup":ow(p,n,d)}var N;if(jv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ga?wE(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(_E&&n.locale!=="ko"&&(Ga||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ga&&(N=xE()):(vo=d,bv="value"in vo?vo.value:vo.textContent,Ga=!0)),$=du(u,T),0<$.length&&(T=new Y_(T,e,null,n,d),p.push({event:T,listeners:$}),N?T.data=N:(N=bE(n),N!==null&&(T.data=N)))),(N=PN?IN(e,n):MN(e,n))&&(u=du(u,"onBeforeInput"),0<u.length&&(d=new Y_("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=N))}PE(p,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function du(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=zs(e,n),a!=null&&r.unshift(Ws(e,a,o)),a=zs(e,t),a!=null&&r.push(Ws(e,a,o))),e=e.return}return r}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sw(e,t,n,r,o){for(var a=t._reactName,i=[];n!==null&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&u!==null&&(s=u,o?(c=zs(n,a),c!=null&&i.unshift(Ws(n,c,s))):o||(c=zs(n,a),c!=null&&i.push(Ws(n,c,s)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var XN=/\r\n?/g,ZN=/\u0000|\uFFFD/g;function lw(e){return(typeof e=="string"?e:""+e).replace(XN,`
`).replace(ZN,"")}function nc(e,t,n){if(t=lw(t),lw(e)!==t&&n)throw Error(ve(425))}function fu(){}var U1=null,G1=null;function W1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var K1=typeof setTimeout=="function"?setTimeout:void 0,QN=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,JN=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(e){return cw.resolve(null).then(e).catch(ek)}:K1;function ek(e){setTimeout(function(){throw e})}function Hf(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Vs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Vs(t)}function jo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Di=Math.random().toString(36).slice(2),hr="__reactFiber$"+Di,Ks="__reactProps$"+Di,qr="__reactContainer$"+Di,Y1="__reactEvents$"+Di,tk="__reactListeners$"+Di,nk="__reactHandles$"+Di;function Qo(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qr]||n[hr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=uw(e);e!==null;){if(n=e[hr])return n;e=uw(e)}return t}e=n,n=e.parentNode}return null}function _l(e){return e=e[hr]||e[qr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ya(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function rd(e){return e[Ks]||null}var X1=[],Xa=-1;function Fo(e){return{current:e}}function gt(e){0>Xa||(e.current=X1[Xa],X1[Xa]=null,Xa--)}function ft(e,t){Xa++,X1[Xa]=e.current,e.current=t}var Do={},Zt=Fo(Do),pn=Fo(!1),ua=Do;function mi(e,t){var n=e.type.contextTypes;if(!n)return Do;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function hn(e){return e=e.childContextTypes,e!=null}function pu(){gt(pn),gt(Zt)}function dw(e,t,n){if(Zt.current!==Do)throw Error(ve(168));ft(Zt,t),ft(pn,n)}function ME(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ve(108,zT(e)||"Unknown",o));return bt({},n,r)}function hu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Do,ua=Zt.current,ft(Zt,e),ft(pn,pn.current),!0}function fw(e,t,n){var r=e.stateNode;if(!r)throw Error(ve(169));n?(e=ME(e,t,ua),r.__reactInternalMemoizedMergedChildContext=e,gt(pn),gt(Zt),ft(Zt,e)):gt(pn),ft(pn,n)}var Nr=null,od=!1,Uf=!1;function OE(e){Nr===null?Nr=[e]:Nr.push(e)}function rk(e){od=!0,OE(e)}function zo(){if(!Uf&&Nr!==null){Uf=!0;var e=0,t=ut;try{var n=Nr;for(ut=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Nr=null,od=!1}catch(o){throw Nr!==null&&(Nr=Nr.slice(e+1)),lE(vv,zo),o}finally{ut=t,Uf=!1}}return null}var Za=[],Qa=0,mu=null,gu=0,An=[],Dn=0,da=null,Ar=1,Dr="";function Ko(e,t){Za[Qa++]=gu,Za[Qa++]=mu,mu=e,gu=t}function LE(e,t,n){An[Dn++]=Ar,An[Dn++]=Dr,An[Dn++]=da,da=e;var r=Ar;e=Dr;var o=32-tr(r)-1;r&=~(1<<o),n+=1;var a=32-tr(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Ar=1<<32-tr(t)+o|n<<o|r,Dr=a+e}else Ar=1<<a|n<<o|r,Dr=e}function $v(e){e.return!==null&&(Ko(e,1),LE(e,1,0))}function Rv(e){for(;e===mu;)mu=Za[--Qa],Za[Qa]=null,gu=Za[--Qa],Za[Qa]=null;for(;e===da;)da=An[--Dn],An[Dn]=null,Dr=An[--Dn],An[Dn]=null,Ar=An[--Dn],An[Dn]=null}var En=null,Sn=null,vt=!1,Jn=null;function FE(e,t){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,En=e,Sn=jo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,En=e,Sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=da!==null?{id:Ar,overflow:Dr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,En=e,Sn=null,!0):!1;default:return!1}}function Z1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Q1(e){if(vt){var t=Sn;if(t){var n=t;if(!pw(e,t)){if(Z1(e))throw Error(ve(418));t=jo(n.nextSibling);var r=En;t&&pw(e,t)?FE(r,n):(e.flags=e.flags&-4097|2,vt=!1,En=e)}}else{if(Z1(e))throw Error(ve(418));e.flags=e.flags&-4097|2,vt=!1,En=e}}}function hw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;En=e}function rc(e){if(e!==En)return!1;if(!vt)return hw(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!W1(e.type,e.memoizedProps)),t&&(t=Sn)){if(Z1(e))throw zE(),Error(ve(418));for(;t;)FE(e,t),t=jo(t.nextSibling)}if(hw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Sn=jo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Sn=null}}else Sn=En?jo(e.stateNode.nextSibling):null;return!0}function zE(){for(var e=Sn;e;)e=jo(e.nextSibling)}function gi(){Sn=En=null,vt=!1}function Tv(e){Jn===null?Jn=[e]:Jn.push(e)}var ok=Zr.ReactCurrentBatchConfig;function Xn(e,t){if(e&&e.defaultProps){t=bt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var yu=Fo(null),vu=null,Ja=null,Nv=null;function kv(){Nv=Ja=vu=null}function Av(e){var t=yu.current;gt(yu),e._currentValue=t}function J1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function li(e,t){vu=e,Nv=Ja=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(un=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(Nv!==e)if(e={context:e,memoizedValue:t,next:null},Ja===null){if(vu===null)throw Error(ve(308));Ja=e,vu.dependencies={lanes:0,firstContext:e}}else Ja=Ja.next=e;return t}var Jo=null;function Dv(e){Jo===null?Jo=[e]:Jo.push(e)}function qE(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Dv(t)):(n.next=o.next,o.next=n),t.interleaved=n,Br(e,r)}function Br(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fo=!1;function Pv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Eo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Br(e,n)}return o=r.interleaved,o===null?(t.next=t,Dv(r)):(t.next=o.next,o.next=t),r.interleaved=t,Br(e,n)}function qc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xv(e,n)}}function mw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xu(e,t,n,r){var o=e.updateQueue;fo=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var c=s,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==i&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=c))}if(a!==null){var p=o.baseState;i=0,d=u=c=null,s=a;do{var m=s.lane,h=s.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(m=t,h=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){p=g.call(h,p,m);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,m=typeof g=="function"?g.call(h,p,m):g,m==null)break e;p=bt({},p,m);break e;case 2:fo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[s]:m.push(s))}else h={eventTime:h,lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=h,c=p):d=d.next=h,i|=m;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;m=s,s=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(d===null&&(c=p),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);pa|=i,e.lanes=i,e.memoizedState=p}}function gw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ve(191,o));o.call(r)}}}var VE=new qj.Component().refs;function ey(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:bt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ad={isMounted:function(e){return(e=e._reactInternals)?xa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tn(),o=Ro(e),a=Or(r,o);a.payload=t,n!=null&&(a.callback=n),t=Eo(e,a,o),t!==null&&(nr(t,e,o,r),qc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tn(),o=Ro(e),a=Or(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Eo(e,a,o),t!==null&&(nr(t,e,o,r),qc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tn(),r=Ro(e),o=Or(n,r);o.tag=2,t!=null&&(o.callback=t),t=Eo(e,o,r),t!==null&&(nr(t,e,r,n),qc(t,e,r))}};function yw(e,t,n,r,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!Us(n,r)||!Us(o,a):!0}function HE(e,t,n){var r=!1,o=Do,a=t.contextType;return typeof a=="object"&&a!==null?a=Bn(a):(o=hn(t)?ua:Zt.current,r=t.contextTypes,a=(r=r!=null)?mi(e,o):Do),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ad,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function vw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ad.enqueueReplaceState(t,t.state,null)}function ty(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=VE,Pv(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Bn(a):(a=hn(t)?ua:Zt.current,o.context=mi(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ey(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ad.enqueueReplaceState(o,o.state,null),xu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var s=o.refs;s===VE&&(s=o.refs={}),i===null?delete s[a]:s[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,e))}return e}function oc(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xw(e){var t=e._init;return t(e._payload)}function UE(e){function t(v,x){if(e){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function o(v,x){return v=To(v,x),v.index=0,v.sibling=null,v}function a(v,x,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,x,_,b){return x===null||x.tag!==6?(x=Qf(_,v.mode,b),x.return=v,x):(x=o(x,_),x.return=v,x)}function c(v,x,_,b){var S=_.type;return S===Ua?d(v,x,_.props.children,b,_.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===uo&&xw(S)===x.type)?(b=o(x,_.props),b.ref=ns(v,x,_),b.return=v,b):(b=Wc(_.type,_.key,_.props,null,v.mode,b),b.ref=ns(v,x,_),b.return=v,b)}function u(v,x,_,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Jf(_,v.mode,b),x.return=v,x):(x=o(x,_.children||[]),x.return=v,x)}function d(v,x,_,b,S){return x===null||x.tag!==7?(x=ia(_,v.mode,b,S),x.return=v,x):(x=o(x,_),x.return=v,x)}function p(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Qf(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wl:return _=Wc(x.type,x.key,x.props,null,v.mode,_),_.ref=ns(v,null,x),_.return=v,_;case Ha:return x=Jf(x,v.mode,_),x.return=v,x;case uo:var b=x._init;return p(v,b(x._payload),_)}if(ms(x)||Zi(x))return x=ia(x,v.mode,_,null),x.return=v,x;oc(v,x)}return null}function m(v,x,_,b){var S=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:s(v,x,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wl:return _.key===S?c(v,x,_,b):null;case Ha:return _.key===S?u(v,x,_,b):null;case uo:return S=_._init,m(v,x,S(_._payload),b)}if(ms(_)||Zi(_))return S!==null?null:d(v,x,_,b,null);oc(v,_)}return null}function h(v,x,_,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(_)||null,s(x,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wl:return v=v.get(b.key===null?_:b.key)||null,c(x,v,b,S);case Ha:return v=v.get(b.key===null?_:b.key)||null,u(x,v,b,S);case uo:var $=b._init;return h(v,x,_,$(b._payload),S)}if(ms(b)||Zi(b))return v=v.get(_)||null,d(x,v,b,S,null);oc(x,b)}return null}function g(v,x,_,b){for(var S=null,$=null,N=x,T=x=0,C=null;N!==null&&T<_.length;T++){N.index>T?(C=N,N=null):C=N.sibling;var D=m(v,N,_[T],b);if(D===null){N===null&&(N=C);break}e&&N&&D.alternate===null&&t(v,N),x=a(D,x,T),$===null?S=D:$.sibling=D,$=D,N=C}if(T===_.length)return n(v,N),vt&&Ko(v,T),S;if(N===null){for(;T<_.length;T++)N=p(v,_[T],b),N!==null&&(x=a(N,x,T),$===null?S=N:$.sibling=N,$=N);return vt&&Ko(v,T),S}for(N=r(v,N);T<_.length;T++)C=h(N,v,T,_[T],b),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?T:C.key),x=a(C,x,T),$===null?S=C:$.sibling=C,$=C);return e&&N.forEach(function(L){return t(v,L)}),vt&&Ko(v,T),S}function y(v,x,_,b){var S=Zi(_);if(typeof S!="function")throw Error(ve(150));if(_=S.call(_),_==null)throw Error(ve(151));for(var $=S=null,N=x,T=x=0,C=null,D=_.next();N!==null&&!D.done;T++,D=_.next()){N.index>T?(C=N,N=null):C=N.sibling;var L=m(v,N,D.value,b);if(L===null){N===null&&(N=C);break}e&&N&&L.alternate===null&&t(v,N),x=a(L,x,T),$===null?S=L:$.sibling=L,$=L,N=C}if(D.done)return n(v,N),vt&&Ko(v,T),S;if(N===null){for(;!D.done;T++,D=_.next())D=p(v,D.value,b),D!==null&&(x=a(D,x,T),$===null?S=D:$.sibling=D,$=D);return vt&&Ko(v,T),S}for(N=r(v,N);!D.done;T++,D=_.next())D=h(N,v,T,D.value,b),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?T:D.key),x=a(D,x,T),$===null?S=D:$.sibling=D,$=D);return e&&N.forEach(function(K){return t(v,K)}),vt&&Ko(v,T),S}function w(v,x,_,b){if(typeof _=="object"&&_!==null&&_.type===Ua&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Wl:e:{for(var S=_.key,$=x;$!==null;){if($.key===S){if(S=_.type,S===Ua){if($.tag===7){n(v,$.sibling),x=o($,_.props.children),x.return=v,v=x;break e}}else if($.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===uo&&xw(S)===$.type){n(v,$.sibling),x=o($,_.props),x.ref=ns(v,$,_),x.return=v,v=x;break e}n(v,$);break}else t(v,$);$=$.sibling}_.type===Ua?(x=ia(_.props.children,v.mode,b,_.key),x.return=v,v=x):(b=Wc(_.type,_.key,_.props,null,v.mode,b),b.ref=ns(v,x,_),b.return=v,v=b)}return i(v);case Ha:e:{for($=_.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(v,x.sibling),x=o(x,_.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=Jf(_,v.mode,b),x.return=v,v=x}return i(v);case uo:return $=_._init,w(v,x,$(_._payload),b)}if(ms(_))return g(v,x,_,b);if(Zi(_))return y(v,x,_,b);oc(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(v,x.sibling),x=o(x,_),x.return=v,v=x):(n(v,x),x=Qf(_,v.mode,b),x.return=v,v=x),i(v)):n(v,x)}return w}var yi=UE(!0),GE=UE(!1),wl={},xr=Fo(wl),Ys=Fo(wl),Xs=Fo(wl);function ea(e){if(e===wl)throw Error(ve(174));return e}function Iv(e,t){switch(ft(Xs,t),ft(Ys,e),ft(xr,wl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:D1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=D1(t,e)}gt(xr),ft(xr,t)}function vi(){gt(xr),gt(Ys),gt(Xs)}function WE(e){ea(Xs.current);var t=ea(xr.current),n=D1(t,e.type);t!==n&&(ft(Ys,e),ft(xr,n))}function Mv(e){Ys.current===e&&(gt(xr),gt(Ys))}var _t=Fo(0);function _u(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gf=[];function Ov(){for(var e=0;e<Gf.length;e++)Gf[e]._workInProgressVersionPrimary=null;Gf.length=0}var Bc=Zr.ReactCurrentDispatcher,Wf=Zr.ReactCurrentBatchConfig,fa=0,wt=null,Dt=null,Ot=null,wu=!1,Ds=!1,Zs=0,ak=0;function Wt(){throw Error(ve(321))}function Lv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Fv(e,t,n,r,o,a){if(fa=a,wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bc.current=e===null||e.memoizedState===null?ck:uk,e=n(r,o),Ds){a=0;do{if(Ds=!1,Zs=0,25<=a)throw Error(ve(301));a+=1,Ot=Dt=null,t.updateQueue=null,Bc.current=dk,e=n(r,o)}while(Ds)}if(Bc.current=bu,t=Dt!==null&&Dt.next!==null,fa=0,Ot=Dt=wt=null,wu=!1,t)throw Error(ve(300));return e}function zv(){var e=Zs!==0;return Zs=0,e}function pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?wt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Vn(){if(Dt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=Ot===null?wt.memoizedState:Ot.next;if(t!==null)Ot=t,Dt=e;else{if(e===null)throw Error(ve(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ot===null?wt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function Qs(e,t){return typeof t=="function"?t(e):t}function Kf(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=Dt,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var s=i=null,c=null,u=a;do{var d=u.lane;if((fa&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=p,i=r):c=c.next=p,wt.lanes|=d,pa|=d}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=s,sr(r,t.memoizedState)||(un=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,wt.lanes|=a,pa|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yf(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);sr(a,t.memoizedState)||(un=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function KE(){}function YE(e,t){var n=wt,r=Vn(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,un=!0),r=r.queue,qv(QE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Js(9,ZE.bind(null,n,r,o,t),void 0,null),Lt===null)throw Error(ve(349));fa&30||XE(n,t,o)}return o}function XE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ZE(e,t,n,r){t.value=n,t.getSnapshot=r,JE(t)&&e$(e)}function QE(e,t,n){return n(function(){JE(t)&&e$(e)})}function JE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch{return!0}}function e$(e){var t=Br(e,1);t!==null&&nr(t,e,1,-1)}function _w(e){var t=pr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=lk.bind(null,wt,e),[t.memoizedState,e]}function Js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function t$(){return Vn().memoizedState}function Vc(e,t,n,r){var o=pr();wt.flags|=e,o.memoizedState=Js(1|t,n,void 0,r===void 0?null:r)}function id(e,t,n,r){var o=Vn();r=r===void 0?null:r;var a=void 0;if(Dt!==null){var i=Dt.memoizedState;if(a=i.destroy,r!==null&&Lv(r,i.deps)){o.memoizedState=Js(t,n,a,r);return}}wt.flags|=e,o.memoizedState=Js(1|t,n,a,r)}function ww(e,t){return Vc(8390656,8,e,t)}function qv(e,t){return id(2048,8,e,t)}function n$(e,t){return id(4,2,e,t)}function r$(e,t){return id(4,4,e,t)}function o$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a$(e,t,n){return n=n!=null?n.concat([e]):null,id(4,4,o$.bind(null,t,e),n)}function Bv(){}function i$(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function s$(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function l$(e,t,n){return fa&21?(sr(n,t)||(n=dE(),wt.lanes|=n,pa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,un=!0),e.memoizedState=n)}function ik(e,t){var n=ut;ut=n!==0&&4>n?n:4,e(!0);var r=Wf.transition;Wf.transition={};try{e(!1),t()}finally{ut=n,Wf.transition=r}}function c$(){return Vn().memoizedState}function sk(e,t,n){var r=Ro(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u$(e))d$(t,n);else if(n=qE(e,t,n,r),n!==null){var o=tn();nr(n,e,r,o),f$(n,t,r)}}function lk(e,t,n){var r=Ro(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u$(e))d$(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var c=t.interleaved;c===null?(o.next=o,Dv(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=qE(e,t,o,r),n!==null&&(o=tn(),nr(n,e,r,o),f$(n,t,r))}}function u$(e){var t=e.alternate;return e===wt||t!==null&&t===wt}function d$(e,t){Ds=wu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function f$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xv(e,n)}}var bu={readContext:Bn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},ck={readContext:Bn,useCallback:function(e,t){return pr().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:ww,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vc(4194308,4,o$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vc(4,2,e,t)},useMemo:function(e,t){var n=pr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sk.bind(null,wt,e),[r.memoizedState,e]},useRef:function(e){var t=pr();return e={current:e},t.memoizedState=e},useState:_w,useDebugValue:Bv,useDeferredValue:function(e){return pr().memoizedState=e},useTransition:function(){var e=_w(!1),t=e[0];return e=ik.bind(null,e[1]),pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wt,o=pr();if(vt){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=t(),Lt===null)throw Error(ve(349));fa&30||XE(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ww(QE.bind(null,r,a,e),[e]),r.flags|=2048,Js(9,ZE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=pr(),t=Lt.identifierPrefix;if(vt){var n=Dr,r=Ar;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ak++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uk={readContext:Bn,useCallback:i$,useContext:Bn,useEffect:qv,useImperativeHandle:a$,useInsertionEffect:n$,useLayoutEffect:r$,useMemo:s$,useReducer:Kf,useRef:t$,useState:function(){return Kf(Qs)},useDebugValue:Bv,useDeferredValue:function(e){var t=Vn();return l$(t,Dt.memoizedState,e)},useTransition:function(){var e=Kf(Qs)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:KE,useSyncExternalStore:YE,useId:c$,unstable_isNewReconciler:!1},dk={readContext:Bn,useCallback:i$,useContext:Bn,useEffect:qv,useImperativeHandle:a$,useInsertionEffect:n$,useLayoutEffect:r$,useMemo:s$,useReducer:Yf,useRef:t$,useState:function(){return Yf(Qs)},useDebugValue:Bv,useDeferredValue:function(e){var t=Vn();return Dt===null?t.memoizedState=e:l$(t,Dt.memoizedState,e)},useTransition:function(){var e=Yf(Qs)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:KE,useSyncExternalStore:YE,useId:c$,unstable_isNewReconciler:!1};function xi(e,t){try{var n="",r=t;do n+=FT(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Xf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ny(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fk=typeof WeakMap=="function"?WeakMap:Map;function p$(e,t,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Su||(Su=!0,fy=r),ny(e,t)},n}function h$(e,t,n){n=Or(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ny(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ny(e,t),typeof r!="function"&&($o===null?$o=new Set([this]):$o.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function bw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fk;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ek.bind(null,e,t,n),t.then(e,e))}function Cw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sw(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Or(-1,1),t.tag=2,Eo(n,t,1))),n.lanes|=1),e)}var pk=Zr.ReactCurrentOwner,un=!1;function Qt(e,t,n,r){t.child=e===null?GE(t,null,n,r):yi(t,e.child,n,r)}function jw(e,t,n,r,o){n=n.render;var a=t.ref;return li(t,o),r=Fv(e,t,n,r,a,o),n=zv(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vr(e,t,o)):(vt&&n&&$v(t),t.flags|=1,Qt(e,t,r,o),t.child)}function Ew(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!Xv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,m$(e,t,a,r,o)):(e=Wc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Us,n(i,r)&&e.ref===t.ref)return Vr(e,t,o)}return t.flags|=1,e=To(a,r),e.ref=t.ref,e.return=t,t.child=e}function m$(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(Us(a,r)&&e.ref===t.ref)if(un=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(un=!0);else return t.lanes=e.lanes,Vr(e,t,o)}return ry(e,t,n,r,o)}function g$(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ti,wn),wn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(ti,wn),wn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ft(ti,wn),wn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ft(ti,wn),wn|=r;return Qt(e,t,o,n),t.child}function y$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ry(e,t,n,r,o){var a=hn(n)?ua:Zt.current;return a=mi(t,a),li(t,o),n=Fv(e,t,n,r,a,o),r=zv(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vr(e,t,o)):(vt&&r&&$v(t),t.flags|=1,Qt(e,t,n,o),t.child)}function $w(e,t,n,r,o){if(hn(n)){var a=!0;hu(t)}else a=!1;if(li(t,o),t.stateNode===null)Hc(e,t),HE(t,n,r),ty(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bn(u):(u=hn(n)?ua:Zt.current,u=mi(t,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==r||c!==u)&&vw(t,i,r,u),fo=!1;var m=t.memoizedState;i.state=m,xu(t,r,i,o),c=t.memoizedState,s!==r||m!==c||pn.current||fo?(typeof d=="function"&&(ey(t,n,d,r),c=t.memoizedState),(s=fo||yw(t,n,s,r,m,c,u))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,BE(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Xn(t.type,s),i.props=u,p=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=hn(n)?ua:Zt.current,c=mi(t,c));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==p||m!==c)&&vw(t,i,r,c),fo=!1,m=t.memoizedState,i.state=m,xu(t,r,i,o);var g=t.memoizedState;s!==p||m!==g||pn.current||fo?(typeof h=="function"&&(ey(t,n,h,r),g=t.memoizedState),(u=fo||yw(t,n,u,r,m,g,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return oy(e,t,n,r,a,o)}function oy(e,t,n,r,o,a){y$(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&fw(t,n,!1),Vr(e,t,a);r=t.stateNode,pk.current=t;var s=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=yi(t,e.child,null,a),t.child=yi(t,null,s,a)):Qt(e,t,s,a),t.memoizedState=r.state,o&&fw(t,n,!0),t.child}function v$(e){var t=e.stateNode;t.pendingContext?dw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dw(e,t.context,!1),Iv(e,t.containerInfo)}function Rw(e,t,n,r,o){return gi(),Tv(o),t.flags|=256,Qt(e,t,n,r),t.child}var ay={dehydrated:null,treeContext:null,retryLane:0};function iy(e){return{baseLanes:e,cachePool:null,transitions:null}}function x$(e,t,n){var r=t.pendingProps,o=_t.current,a=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ft(_t,o&1),e===null)return Q1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=cd(i,r,0,null),e=ia(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=iy(n),t.memoizedState=ay,e):Vv(t,i));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return hk(e,t,i,r,s,o,n);if(a){a=r.fallback,i=t.mode,o=e.child,s=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=To(o,c),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?a=To(s,a):(a=ia(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?iy(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=ay,r}return a=e.child,e=a.sibling,r=To(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vv(e,t){return t=cd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ac(e,t,n,r){return r!==null&&Tv(r),yi(t,e.child,null,n),e=Vv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hk(e,t,n,r,o,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Xf(Error(ve(422))),ac(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=cd({mode:"visible",children:r.children},o,0,null),a=ia(a,o,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&yi(t,e.child,null,i),t.child.memoizedState=iy(i),t.memoizedState=ay,a);if(!(t.mode&1))return ac(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(ve(419)),r=Xf(a,r,void 0),ac(e,t,i,r)}if(s=(i&e.childLanes)!==0,un||s){if(r=Lt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Br(e,o),nr(r,e,o,-1))}return Yv(),r=Xf(Error(ve(421))),ac(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=$k.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Sn=jo(o.nextSibling),En=t,vt=!0,Jn=null,e!==null&&(An[Dn++]=Ar,An[Dn++]=Dr,An[Dn++]=da,Ar=e.id,Dr=e.overflow,da=t),t=Vv(t,r.children),t.flags|=4096,t)}function Tw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),J1(e.return,t,n)}function Zf(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function _$(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Qt(e,t,r.children,n),r=_t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tw(e,n,t);else if(e.tag===19)Tw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(_t,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&_u(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Zf(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&_u(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Zf(t,!0,n,null,a);break;case"together":Zf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,n=To(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=To(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mk(e,t,n){switch(t.tag){case 3:v$(t),gi();break;case 5:WE(t);break;case 1:hn(t.type)&&hu(t);break;case 4:Iv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ft(yu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(_t,_t.current&1),t.flags|=128,null):n&t.child.childLanes?x$(e,t,n):(ft(_t,_t.current&1),e=Vr(e,t,n),e!==null?e.sibling:null);ft(_t,_t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _$(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ft(_t,_t.current),r)break;return null;case 22:case 23:return t.lanes=0,g$(e,t,n)}return Vr(e,t,n)}var w$,sy,b$,C$;w$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sy=function(){};b$=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ea(xr.current);var a=null;switch(n){case"input":o=T1(e,o),r=T1(e,r),a=[];break;case"select":o=bt({},o,{value:void 0}),r=bt({},r,{value:void 0}),a=[];break;case"textarea":o=A1(e,o),r=A1(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fu)}P1(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var s=o[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(s=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&mt("scroll",e),a||s===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};C$=function(e,t,n,r){n!==r&&(t.flags|=4)};function rs(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gk(e,t,n){var r=t.pendingProps;switch(Rv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(t),null;case 1:return hn(t.type)&&pu(),Kt(t),null;case 3:return r=t.stateNode,vi(),gt(pn),gt(Zt),Ov(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jn!==null&&(my(Jn),Jn=null))),sy(e,t),Kt(t),null;case 5:Mv(t);var o=ea(Xs.current);if(n=t.type,e!==null&&t.stateNode!=null)b$(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ve(166));return Kt(t),null}if(e=ea(xr.current),rc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hr]=t,r[Ks]=a,e=(t.mode&1)!==0,n){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(o=0;o<ys.length;o++)mt(ys[o],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":L_(r,a),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},mt("invalid",r);break;case"textarea":z_(r,a),mt("invalid",r)}P1(n,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&nc(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&nc(r.textContent,s,e),o=["children",""+s]):Ls.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&mt("scroll",r)}switch(n){case"input":Kl(r),F_(r,a,!0);break;case"textarea":Kl(r),q_(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=fu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xj(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[hr]=t,e[Ks]=r,w$(e,t,!1,!1),t.stateNode=e;e:{switch(i=I1(n,r),n){case"dialog":mt("cancel",e),mt("close",e),o=r;break;case"iframe":case"object":case"embed":mt("load",e),o=r;break;case"video":case"audio":for(o=0;o<ys.length;o++)mt(ys[o],e);o=r;break;case"source":mt("error",e),o=r;break;case"img":case"image":case"link":mt("error",e),mt("load",e),o=r;break;case"details":mt("toggle",e),o=r;break;case"input":L_(e,r),o=T1(e,r),mt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=bt({},r,{value:void 0}),mt("invalid",e);break;case"textarea":z_(e,r),o=A1(e,r),mt("invalid",e);break;default:o=r}P1(n,o),s=o;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="style"?Jj(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zj(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fs(e,c):typeof c=="number"&&Fs(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ls.hasOwnProperty(a)?c!=null&&a==="onScroll"&&mt("scroll",e):c!=null&&pv(e,a,c,i))}switch(n){case"input":Kl(e),F_(e,r,!1);break;case"textarea":Kl(e),q_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ao(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?oi(e,!!r.multiple,a,!1):r.defaultValue!=null&&oi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Kt(t),null;case 6:if(e&&t.stateNode!=null)C$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ve(166));if(n=ea(Xs.current),ea(xr.current),rc(t)){if(r=t.stateNode,n=t.memoizedProps,r[hr]=t,(a=r.nodeValue!==n)&&(e=En,e!==null))switch(e.tag){case 3:nc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=t,t.stateNode=r}return Kt(t),null;case 13:if(gt(_t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Sn!==null&&t.mode&1&&!(t.flags&128))zE(),gi(),t.flags|=98560,a=!1;else if(a=rc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ve(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ve(317));a[hr]=t}else gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Kt(t),a=!1}else Jn!==null&&(my(Jn),Jn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?Pt===0&&(Pt=3):Yv())),t.updateQueue!==null&&(t.flags|=4),Kt(t),null);case 4:return vi(),sy(e,t),e===null&&Gs(t.stateNode.containerInfo),Kt(t),null;case 10:return Av(t.type._context),Kt(t),null;case 17:return hn(t.type)&&pu(),Kt(t),null;case 19:if(gt(_t),a=t.memoizedState,a===null)return Kt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)rs(a,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=_u(e),i!==null){for(t.flags|=128,rs(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ft(_t,_t.current&1|2),t.child}e=e.sibling}a.tail!==null&&jt()>_i&&(t.flags|=128,r=!0,rs(a,!1),t.lanes=4194304)}else{if(!r)if(e=_u(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!vt)return Kt(t),null}else 2*jt()-a.renderingStartTime>_i&&n!==1073741824&&(t.flags|=128,r=!0,rs(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=jt(),t.sibling=null,n=_t.current,ft(_t,r?n&1|2:n&1),t):(Kt(t),null);case 22:case 23:return Kv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wn&1073741824&&(Kt(t),t.subtreeFlags&6&&(t.flags|=8192)):Kt(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function yk(e,t){switch(Rv(t),t.tag){case 1:return hn(t.type)&&pu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vi(),gt(pn),gt(Zt),Ov(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mv(t),null;case 13:if(gt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(_t),null;case 4:return vi(),null;case 10:return Av(t.type._context),null;case 22:case 23:return Kv(),null;case 24:return null;default:return null}}var ic=!1,Yt=!1,vk=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ei(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ct(e,t,r)}else n.current=null}function ly(e,t,n){try{n()}catch(r){Ct(e,t,r)}}var Nw=!1;function xk(e,t){if(U1=cu,e=$E(),Ev(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,s=-1,c=-1,u=0,d=0,p=e,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(s=i+o),p!==a||r!==0&&p.nodeType!==3||(c=i+r),p.nodeType===3&&(i+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===e)break t;if(m===n&&++u===o&&(s=i),m===a&&++d===r&&(c=i),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(G1={focusedElem:e,selectionRange:n},cu=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Xn(t.type,y),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(b){Ct(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return g=Nw,Nw=!1,g}function Ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&ly(t,n,a)}o=o.next}while(o!==r)}}function sd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function S$(e){var t=e.alternate;t!==null&&(e.alternate=null,S$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hr],delete t[Ks],delete t[Y1],delete t[tk],delete t[nk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function j$(e){return e.tag===5||e.tag===3||e.tag===4}function kw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||j$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fu));else if(r!==4&&(e=e.child,e!==null))for(uy(e,t,n),e=e.sibling;e!==null;)uy(e,t,n),e=e.sibling}function dy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dy(e,t,n),e=e.sibling;e!==null;)dy(e,t,n),e=e.sibling}var qt=null,Zn=!1;function ao(e,t,n){for(n=n.child;n!==null;)E$(e,t,n),n=n.sibling}function E$(e,t,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:Yt||ei(n,t);case 6:var r=qt,o=Zn;qt=null,ao(e,t,n),qt=r,Zn=o,qt!==null&&(Zn?(e=qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Zn?(e=qt,n=n.stateNode,e.nodeType===8?Hf(e.parentNode,n):e.nodeType===1&&Hf(e,n),Vs(e)):Hf(qt,n.stateNode));break;case 4:r=qt,o=Zn,qt=n.stateNode.containerInfo,Zn=!0,ao(e,t,n),qt=r,Zn=o;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ly(n,t,i),o=o.next}while(o!==r)}ao(e,t,n);break;case 1:if(!Yt&&(ei(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ct(n,t,s)}ao(e,t,n);break;case 21:ao(e,t,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,ao(e,t,n),Yt=r):ao(e,t,n);break;default:ao(e,t,n)}}function Aw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vk),t.forEach(function(r){var o=Rk.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Yn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:qt=s.stateNode,Zn=!1;break e;case 3:qt=s.stateNode.containerInfo,Zn=!0;break e;case 4:qt=s.stateNode.containerInfo,Zn=!0;break e}s=s.return}if(qt===null)throw Error(ve(160));E$(a,i,o),qt=null,Zn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){Ct(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$$(t,e),t=t.sibling}function $$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yn(t,e),fr(e),r&4){try{Ps(3,e,e.return),sd(3,e)}catch(y){Ct(e,e.return,y)}try{Ps(5,e,e.return)}catch(y){Ct(e,e.return,y)}}break;case 1:Yn(t,e),fr(e),r&512&&n!==null&&ei(n,n.return);break;case 5:if(Yn(t,e),fr(e),r&512&&n!==null&&ei(n,n.return),e.flags&32){var o=e.stateNode;try{Fs(o,"")}catch(y){Ct(e,e.return,y)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Kj(o,a),I1(s,i);var u=I1(s,a);for(i=0;i<c.length;i+=2){var d=c[i],p=c[i+1];d==="style"?Jj(o,p):d==="dangerouslySetInnerHTML"?Zj(o,p):d==="children"?Fs(o,p):pv(o,d,p,u)}switch(s){case"input":N1(o,a);break;case"textarea":Yj(o,a);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?oi(o,!!a.multiple,h,!1):m!==!!a.multiple&&(a.defaultValue!=null?oi(o,!!a.multiple,a.defaultValue,!0):oi(o,!!a.multiple,a.multiple?[]:"",!1))}o[Ks]=a}catch(y){Ct(e,e.return,y)}}break;case 6:if(Yn(t,e),fr(e),r&4){if(e.stateNode===null)throw Error(ve(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(y){Ct(e,e.return,y)}}break;case 3:if(Yn(t,e),fr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(y){Ct(e,e.return,y)}break;case 4:Yn(t,e),fr(e);break;case 13:Yn(t,e),fr(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Gv=jt())),r&4&&Aw(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Yt=(u=Yt)||d,Yn(t,e),Yt=u):Yn(t,e),fr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ke=e,d=e.child;d!==null;){for(p=ke=d;ke!==null;){switch(m=ke,h=m.child,m.tag){case 0:case 11:case 14:case 15:Ps(4,m,m.return);break;case 1:ei(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Ct(r,n,y)}}break;case 5:ei(m,m.return);break;case 22:if(m.memoizedState!==null){Pw(p);continue}}h!==null?(h.return=m,ke=h):Pw(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{o=p.stateNode,u?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=p.stateNode,c=p.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=Qj("display",i))}catch(y){Ct(e,e.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(y){Ct(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yn(t,e),fr(e),r&4&&Aw(e);break;case 21:break;default:Yn(t,e),fr(e)}}function fr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(j$(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Fs(o,""),r.flags&=-33);var a=kw(e);dy(e,a,o);break;case 3:case 4:var i=r.stateNode.containerInfo,s=kw(e);uy(e,s,i);break;default:throw Error(ve(161))}}catch(c){Ct(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _k(e,t,n){ke=e,R$(e)}function R$(e,t,n){for(var r=(e.mode&1)!==0;ke!==null;){var o=ke,a=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ic;if(!i){var s=o.alternate,c=s!==null&&s.memoizedState!==null||Yt;s=ic;var u=Yt;if(ic=i,(Yt=c)&&!u)for(ke=o;ke!==null;)i=ke,c=i.child,i.tag===22&&i.memoizedState!==null?Iw(o):c!==null?(c.return=i,ke=c):Iw(o);for(;a!==null;)ke=a,R$(a),a=a.sibling;ke=o,ic=s,Yt=u}Dw(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,ke=a):Dw(e)}}function Dw(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yt||sd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Xn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&gw(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gw(t,i,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Vs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Yt||t.flags&512&&cy(t)}catch(m){Ct(t,t.return,m)}}if(t===e){ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,ke=n;break}ke=t.return}}function Pw(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ke=n;break}ke=t.return}}function Iw(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sd(4,t)}catch(c){Ct(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Ct(t,o,c)}}var a=t.return;try{cy(t)}catch(c){Ct(t,a,c)}break;case 5:var i=t.return;try{cy(t)}catch(c){Ct(t,i,c)}}}catch(c){Ct(t,t.return,c)}if(t===e){ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ke=s;break}ke=t.return}}var wk=Math.ceil,Cu=Zr.ReactCurrentDispatcher,Hv=Zr.ReactCurrentOwner,Fn=Zr.ReactCurrentBatchConfig,rt=0,Lt=null,Rt=null,Ht=0,wn=0,ti=Fo(0),Pt=0,el=null,pa=0,ld=0,Uv=0,Is=null,cn=null,Gv=0,_i=1/0,Rr=null,Su=!1,fy=null,$o=null,sc=!1,xo=null,ju=0,Ms=0,py=null,Uc=-1,Gc=0;function tn(){return rt&6?jt():Uc!==-1?Uc:Uc=jt()}function Ro(e){return e.mode&1?rt&2&&Ht!==0?Ht&-Ht:ok.transition!==null?(Gc===0&&(Gc=dE()),Gc):(e=ut,e!==0||(e=window.event,e=e===void 0?16:vE(e.type)),e):1}function nr(e,t,n,r){if(50<Ms)throw Ms=0,py=null,Error(ve(185));vl(e,n,r),(!(rt&2)||e!==Lt)&&(e===Lt&&(!(rt&2)&&(ld|=n),Pt===4&&go(e,Ht)),mn(e,r),n===1&&rt===0&&!(t.mode&1)&&(_i=jt()+500,od&&zo()))}function mn(e,t){var n=e.callbackNode;oN(e,t);var r=lu(e,e===Lt?Ht:0);if(r===0)n!==null&&H_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&H_(n),t===1)e.tag===0?rk(Mw.bind(null,e)):OE(Mw.bind(null,e)),JN(function(){!(rt&6)&&zo()}),n=null;else{switch(fE(r)){case 1:n=vv;break;case 4:n=cE;break;case 16:n=su;break;case 536870912:n=uE;break;default:n=su}n=M$(n,T$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function T$(e,t){if(Uc=-1,Gc=0,rt&6)throw Error(ve(327));var n=e.callbackNode;if(ci()&&e.callbackNode!==n)return null;var r=lu(e,e===Lt?Ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Eu(e,r);else{t=r;var o=rt;rt|=2;var a=k$();(Lt!==e||Ht!==t)&&(Rr=null,_i=jt()+500,aa(e,t));do try{Sk();break}catch(s){N$(e,s)}while(!0);kv(),Cu.current=a,rt=o,Rt!==null?t=0:(Lt=null,Ht=0,t=Pt)}if(t!==0){if(t===2&&(o=z1(e),o!==0&&(r=o,t=hy(e,o))),t===1)throw n=el,aa(e,0),go(e,r),mn(e,jt()),n;if(t===6)go(e,r);else{if(o=e.current.alternate,!(r&30)&&!bk(o)&&(t=Eu(e,r),t===2&&(a=z1(e),a!==0&&(r=a,t=hy(e,a))),t===1))throw n=el,aa(e,0),go(e,r),mn(e,jt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ve(345));case 2:Yo(e,cn,Rr);break;case 3:if(go(e,r),(r&130023424)===r&&(t=Gv+500-jt(),10<t)){if(lu(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){tn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=K1(Yo.bind(null,e,cn,Rr),t);break}Yo(e,cn,Rr);break;case 4:if(go(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-tr(r);a=1<<i,i=t[i],i>o&&(o=i),r&=~a}if(r=o,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wk(r/1960))-r,10<r){e.timeoutHandle=K1(Yo.bind(null,e,cn,Rr),r);break}Yo(e,cn,Rr);break;case 5:Yo(e,cn,Rr);break;default:throw Error(ve(329))}}}return mn(e,jt()),e.callbackNode===n?T$.bind(null,e):null}function hy(e,t){var n=Is;return e.current.memoizedState.isDehydrated&&(aa(e,t).flags|=256),e=Eu(e,t),e!==2&&(t=cn,cn=n,t!==null&&my(t)),e}function my(e){cn===null?cn=e:cn.push.apply(cn,e)}function bk(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function go(e,t){for(t&=~Uv,t&=~ld,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tr(t),r=1<<n;e[n]=-1,t&=~r}}function Mw(e){if(rt&6)throw Error(ve(327));ci();var t=lu(e,0);if(!(t&1))return mn(e,jt()),null;var n=Eu(e,t);if(e.tag!==0&&n===2){var r=z1(e);r!==0&&(t=r,n=hy(e,r))}if(n===1)throw n=el,aa(e,0),go(e,t),mn(e,jt()),n;if(n===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yo(e,cn,Rr),mn(e,jt()),null}function Wv(e,t){var n=rt;rt|=1;try{return e(t)}finally{rt=n,rt===0&&(_i=jt()+500,od&&zo())}}function ha(e){xo!==null&&xo.tag===0&&!(rt&6)&&ci();var t=rt;rt|=1;var n=Fn.transition,r=ut;try{if(Fn.transition=null,ut=1,e)return e()}finally{ut=r,Fn.transition=n,rt=t,!(rt&6)&&zo()}}function Kv(){wn=ti.current,gt(ti)}function aa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,QN(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(Rv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pu();break;case 3:vi(),gt(pn),gt(Zt),Ov();break;case 5:Mv(r);break;case 4:vi();break;case 13:gt(_t);break;case 19:gt(_t);break;case 10:Av(r.type._context);break;case 22:case 23:Kv()}n=n.return}if(Lt=e,Rt=e=To(e.current,null),Ht=wn=t,Pt=0,el=null,Uv=ld=pa=0,cn=Is=null,Jo!==null){for(t=0;t<Jo.length;t++)if(n=Jo[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=o,r.next=i}n.pending=r}Jo=null}return e}function N$(e,t){do{var n=Rt;try{if(kv(),Bc.current=bu,wu){for(var r=wt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}wu=!1}if(fa=0,Ot=Dt=wt=null,Ds=!1,Zs=0,Hv.current=null,n===null||n.return===null){Pt=1,el=t,Rt=null;break}e:{var a=e,i=n.return,s=n,c=t;if(t=Ht,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=s,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Cw(i);if(h!==null){h.flags&=-257,Sw(h,i,s,a,t),h.mode&1&&bw(a,u,t),t=h,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){bw(a,u,t),Yv();break e}c=Error(ve(426))}}else if(vt&&s.mode&1){var w=Cw(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Sw(w,i,s,a,t),Tv(xi(c,s));break e}}a=c=xi(c,s),Pt!==4&&(Pt=2),Is===null?Is=[a]:Is.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=p$(a,c,t);mw(a,v);break e;case 1:s=c;var x=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($o===null||!$o.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=h$(a,s,t);mw(a,b);break e}}a=a.return}while(a!==null)}D$(n)}catch(S){t=S,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function k$(){var e=Cu.current;return Cu.current=bu,e===null?bu:e}function Yv(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Lt===null||!(pa&268435455)&&!(ld&268435455)||go(Lt,Ht)}function Eu(e,t){var n=rt;rt|=2;var r=k$();(Lt!==e||Ht!==t)&&(Rr=null,aa(e,t));do try{Ck();break}catch(o){N$(e,o)}while(!0);if(kv(),rt=n,Cu.current=r,Rt!==null)throw Error(ve(261));return Lt=null,Ht=0,Pt}function Ck(){for(;Rt!==null;)A$(Rt)}function Sk(){for(;Rt!==null&&!YT();)A$(Rt)}function A$(e){var t=I$(e.alternate,e,wn);e.memoizedProps=e.pendingProps,t===null?D$(e):Rt=t,Hv.current=null}function D$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yk(n,t),n!==null){n.flags&=32767,Rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,Rt=null;return}}else if(n=gk(n,t,wn),n!==null){Rt=n;return}if(t=t.sibling,t!==null){Rt=t;return}Rt=t=e}while(t!==null);Pt===0&&(Pt=5)}function Yo(e,t,n){var r=ut,o=Fn.transition;try{Fn.transition=null,ut=1,jk(e,t,n,r)}finally{Fn.transition=o,ut=r}return null}function jk(e,t,n,r){do ci();while(xo!==null);if(rt&6)throw Error(ve(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(aN(e,a),e===Lt&&(Rt=Lt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sc||(sc=!0,M$(su,function(){return ci(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Fn.transition,Fn.transition=null;var i=ut;ut=1;var s=rt;rt|=4,Hv.current=null,xk(e,n),$$(n,e),UN(G1),cu=!!U1,G1=U1=null,e.current=n,_k(n),XT(),rt=s,ut=i,Fn.transition=a}else e.current=n;if(sc&&(sc=!1,xo=e,ju=o),a=e.pendingLanes,a===0&&($o=null),JT(n.stateNode),mn(e,jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Su)throw Su=!1,e=fy,fy=null,e;return ju&1&&e.tag!==0&&ci(),a=e.pendingLanes,a&1?e===py?Ms++:(Ms=0,py=e):Ms=0,zo(),null}function ci(){if(xo!==null){var e=fE(ju),t=Fn.transition,n=ut;try{if(Fn.transition=null,ut=16>e?16:e,xo===null)var r=!1;else{if(e=xo,xo=null,ju=0,rt&6)throw Error(ve(331));var o=rt;for(rt|=4,ke=e.current;ke!==null;){var a=ke,i=a.child;if(ke.flags&16){var s=a.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:Ps(8,d,a)}var p=d.child;if(p!==null)p.return=d,ke=p;else for(;ke!==null;){d=ke;var m=d.sibling,h=d.return;if(S$(d),d===u){ke=null;break}if(m!==null){m.return=h,ke=m;break}ke=h}}}var g=a.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ke=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ke=i;else e:for(;ke!==null;){if(a=ke,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ps(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ke=v;break e}ke=a.return}}var x=e.current;for(ke=x;ke!==null;){i=ke;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,ke=_;else e:for(i=x;ke!==null;){if(s=ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:sd(9,s)}}catch(S){Ct(s,s.return,S)}if(s===i){ke=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,ke=b;break e}ke=s.return}}if(rt=o,zo(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Ju,e)}catch{}r=!0}return r}finally{ut=n,Fn.transition=t}}return!1}function Ow(e,t,n){t=xi(n,t),t=p$(e,t,1),e=Eo(e,t,1),t=tn(),e!==null&&(vl(e,1,t),mn(e,t))}function Ct(e,t,n){if(e.tag===3)Ow(e,e,n);else for(;t!==null;){if(t.tag===3){Ow(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($o===null||!$o.has(r))){e=xi(n,e),e=h$(t,e,1),t=Eo(t,e,1),e=tn(),t!==null&&(vl(t,1,e),mn(t,e));break}}t=t.return}}function Ek(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=tn(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(Ht&n)===n&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>jt()-Gv?aa(e,0):Uv|=n),mn(e,t)}function P$(e,t){t===0&&(e.mode&1?(t=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):t=1);var n=tn();e=Br(e,t),e!==null&&(vl(e,t,n),mn(e,n))}function $k(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P$(e,n)}function Rk(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(t),P$(e,n)}var I$;I$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pn.current)un=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return un=!1,mk(e,t,n);un=!!(e.flags&131072)}else un=!1,vt&&t.flags&1048576&&LE(t,gu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hc(e,t),e=t.pendingProps;var o=mi(t,Zt.current);li(t,n),o=Fv(null,t,r,e,o,n);var a=zv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hn(r)?(a=!0,hu(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Pv(t),o.updater=ad,t.stateNode=o,o._reactInternals=t,ty(t,r,e,n),t=oy(null,t,r,!0,a,n)):(t.tag=0,vt&&a&&$v(t),Qt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Nk(r),e=Xn(r,e),o){case 0:t=ry(null,t,r,e,n);break e;case 1:t=$w(null,t,r,e,n);break e;case 11:t=jw(null,t,r,e,n);break e;case 14:t=Ew(null,t,r,Xn(r.type,e),n);break e}throw Error(ve(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Xn(r,o),ry(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Xn(r,o),$w(e,t,r,o,n);case 3:e:{if(v$(t),e===null)throw Error(ve(387));r=t.pendingProps,a=t.memoizedState,o=a.element,BE(e,t),xu(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=xi(Error(ve(423)),t),t=Rw(e,t,r,n,o);break e}else if(r!==o){o=xi(Error(ve(424)),t),t=Rw(e,t,r,n,o);break e}else for(Sn=jo(t.stateNode.containerInfo.firstChild),En=t,vt=!0,Jn=null,n=GE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gi(),r===o){t=Vr(e,t,n);break e}Qt(e,t,r,n)}t=t.child}return t;case 5:return WE(t),e===null&&Q1(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,W1(r,o)?i=null:a!==null&&W1(r,a)&&(t.flags|=32),y$(e,t),Qt(e,t,i,n),t.child;case 6:return e===null&&Q1(t),null;case 13:return x$(e,t,n);case 4:return Iv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yi(t,null,r,n):Qt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Xn(r,o),jw(e,t,r,o,n);case 7:return Qt(e,t,t.pendingProps,n),t.child;case 8:return Qt(e,t,t.pendingProps.children,n),t.child;case 12:return Qt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,ft(yu,r._currentValue),r._currentValue=i,a!==null)if(sr(a.value,i)){if(a.children===o.children&&!pn.current){t=Vr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){i=a.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Or(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),J1(a.return,n,t),s.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ve(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),J1(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Qt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,li(t,n),o=Bn(o),r=r(o),t.flags|=1,Qt(e,t,r,n),t.child;case 14:return r=t.type,o=Xn(r,t.pendingProps),o=Xn(r.type,o),Ew(e,t,r,o,n);case 15:return m$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Xn(r,o),Hc(e,t),t.tag=1,hn(r)?(e=!0,hu(t)):e=!1,li(t,n),HE(t,r,o),ty(t,r,o,n),oy(null,t,r,!0,e,n);case 19:return _$(e,t,n);case 22:return g$(e,t,n)}throw Error(ve(156,t.tag))};function M$(e,t){return lE(e,t)}function Tk(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,n,r){return new Tk(e,t,n,r)}function Xv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nk(e){if(typeof e=="function")return Xv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mv)return 11;if(e===gv)return 14}return 2}function To(e,t){var n=e.alternate;return n===null?(n=In(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wc(e,t,n,r,o,a){var i=2;if(r=e,typeof e=="function")Xv(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ua:return ia(n.children,o,a,t);case hv:i=8,o|=8;break;case j1:return e=In(12,n,t,o|2),e.elementType=j1,e.lanes=a,e;case E1:return e=In(13,n,t,o),e.elementType=E1,e.lanes=a,e;case $1:return e=In(19,n,t,o),e.elementType=$1,e.lanes=a,e;case Uj:return cd(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vj:i=10;break e;case Hj:i=9;break e;case mv:i=11;break e;case gv:i=14;break e;case uo:i=16,r=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=In(i,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function ia(e,t,n,r){return e=In(7,e,r,t),e.lanes=n,e}function cd(e,t,n,r){return e=In(22,e,r,t),e.elementType=Uj,e.lanes=n,e.stateNode={isHidden:!1},e}function Qf(e,t,n){return e=In(6,e,null,t),e.lanes=n,e}function Jf(e,t,n){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kk(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Df(0),this.expirationTimes=Df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Df(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Zv(e,t,n,r,o,a,i,s,c){return e=new kk(e,t,n,s,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=In(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pv(a),e}function Ak(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ha,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function O$(e){if(!e)return Do;e=e._reactInternals;e:{if(xa(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var n=e.type;if(hn(n))return ME(e,n,t)}return t}function L$(e,t,n,r,o,a,i,s,c){return e=Zv(n,r,!0,e,o,a,i,s,c),e.context=O$(null),n=e.current,r=tn(),o=Ro(n),a=Or(r,o),a.callback=t??null,Eo(n,a,o),e.current.lanes=o,vl(e,o,r),mn(e,r),e}function ud(e,t,n,r){var o=t.current,a=tn(),i=Ro(o);return n=O$(n),t.context===null?t.context=n:t.pendingContext=n,t=Or(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Eo(o,t,i),e!==null&&(nr(e,o,i,a),qc(e,o,i)),i}function $u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qv(e,t){Lw(e,t),(e=e.alternate)&&Lw(e,t)}function Dk(){return null}var F$=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jv(e){this._internalRoot=e}dd.prototype.render=Jv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));ud(e,t,null,null)};dd.prototype.unmount=Jv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ha(function(){ud(null,e,null,null)}),t[qr]=null}};function dd(e){this._internalRoot=e}dd.prototype.unstable_scheduleHydration=function(e){if(e){var t=mE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mo.length&&t!==0&&t<mo[n].priority;n++);mo.splice(n,0,e),n===0&&yE(e)}};function ex(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function Pk(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var u=$u(i);a.call(u)}}var i=L$(t,r,e,0,null,!1,!1,"",Fw);return e._reactRootContainer=i,e[qr]=i.current,Gs(e.nodeType===8?e.parentNode:e),ha(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var u=$u(c);s.call(u)}}var c=Zv(e,0,!1,null,null,!1,!1,"",Fw);return e._reactRootContainer=c,e[qr]=c.current,Gs(e.nodeType===8?e.parentNode:e),ha(function(){ud(t,c,n,r)}),c}function pd(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var s=o;o=function(){var c=$u(i);s.call(c)}}ud(t,i,e,o)}else i=Pk(n,t,e,o,r);return $u(i)}pE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gs(t.pendingLanes);n!==0&&(xv(t,n|1),mn(t,jt()),!(rt&6)&&(_i=jt()+500,zo()))}break;case 13:ha(function(){var r=Br(e,1);if(r!==null){var o=tn();nr(r,e,1,o)}}),Qv(e,1)}};_v=function(e){if(e.tag===13){var t=Br(e,134217728);if(t!==null){var n=tn();nr(t,e,134217728,n)}Qv(e,134217728)}};hE=function(e){if(e.tag===13){var t=Ro(e),n=Br(e,t);if(n!==null){var r=tn();nr(n,e,t,r)}Qv(e,t)}};mE=function(){return ut};gE=function(e,t){var n=ut;try{return ut=e,t()}finally{ut=n}};O1=function(e,t,n){switch(t){case"input":if(N1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=rd(r);if(!o)throw Error(ve(90));Wj(r),N1(r,o)}}}break;case"textarea":Yj(e,n);break;case"select":t=n.value,t!=null&&oi(e,!!n.multiple,t,!1)}};nE=Wv;rE=ha;var Ik={usingClientEntryPoint:!1,Events:[_l,Ya,rd,eE,tE,Wv]},os={findFiberByHostInstance:Qo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mk={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iE(e),e===null?null:e.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||Dk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Ju=lc.inject(Mk),vr=lc}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ik;Nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ex(t))throw Error(ve(200));return Ak(e,t,null,n)};Nn.createRoot=function(e,t){if(!ex(e))throw Error(ve(299));var n=!1,r="",o=F$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Zv(e,1,!1,null,null,n,!1,r,o),e[qr]=t.current,Gs(e.nodeType===8?e.parentNode:e),new Jv(t)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=iE(t),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return ha(e)};Nn.hydrate=function(e,t,n){if(!fd(t))throw Error(ve(200));return pd(null,e,t,!0,n)};Nn.hydrateRoot=function(e,t,n){if(!ex(e))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",i=F$;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=L$(t,null,e,1,n??null,o,!1,a,i),e[qr]=t.current,Gs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new dd(t)};Nn.render=function(e,t,n){if(!fd(t))throw Error(ve(200));return pd(null,e,t,!1,n)};Nn.unmountComponentAtNode=function(e){if(!fd(e))throw Error(ve(40));return e._reactRootContainer?(ha(function(){pd(null,null,e,!1,function(){e._reactRootContainer=null,e[qr]=null})}),!0):!1};Nn.unstable_batchedUpdates=Wv;Nn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fd(n))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return pd(e,t,n,!1,r)};Nn.version="18.2.0-next-9e3b772b8-20220608";function z$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z$)}catch(e){console.error(e)}}z$(),Lj.exports=Nn;var _a=Lj.exports;const Ok=gl(_a);var zw=_a;C1.createRoot=zw.createRoot,C1.hydrateRoot=zw.hydrateRoot;var q$={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(a=o(a,r(s)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var s in a)t.call(a,s)&&a[s]&&(i=o(i,s));return i}function o(a,i){return i?a?a+" "+i:a+i:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(q$);var Lk=q$.exports;const qe=gl(Lk);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}function Re(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Fk(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function hd(...e){return t=>e.forEach(n=>Fk(n,t))}function et(...e){return f.useCallback(hd(...e),e)}function zk(e,t){const n=f.createContext(t);function r(a){const{children:i,...s}=a,c=f.useMemo(()=>s,Object.values(s));return f.createElement(n.Provider,{value:c},i)}function o(a){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return r.displayName=e+"Provider",[r,o]}function vn(e,t=[]){let n=[];function r(a,i){const s=f.createContext(i),c=n.length;n=[...n,i];function u(p){const{scope:m,children:h,...g}=p,y=(m==null?void 0:m[e][c])||s,w=f.useMemo(()=>g,Object.values(g));return f.createElement(y.Provider,{value:w},h)}function d(p,m){const h=(m==null?void 0:m[e][c])||s,g=f.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const o=()=>{const a=n.map(i=>f.createContext(i));return function(s){const c=(s==null?void 0:s[e])||a;return f.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return o.scopeName=e,[r,qk(o,...t)]}function qk(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=r.reduce((s,{useScope:c,scopeName:u})=>{const p=c(a)[`__scope${u}`];return{...s,...p}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}const nn=f.forwardRef((e,t)=>{const{children:n,...r}=e,o=f.Children.toArray(n),a=o.find(Bk);if(a){const i=a.props.children,s=o.map(c=>c===a?f.Children.count(i)>1?f.Children.only(null):f.isValidElement(i)?i.props.children:null:c);return f.createElement(gy,ce({},r,{ref:t}),f.isValidElement(i)?f.cloneElement(i,void 0,s):null)}return f.createElement(gy,ce({},r,{ref:t}),n)});nn.displayName="Slot";const gy=f.forwardRef((e,t)=>{const{children:n,...r}=e;return f.isValidElement(n)?f.cloneElement(n,{...Vk(r,n.props),ref:t?hd(t,n.ref):n.ref}):f.Children.count(n)>1?f.Children.only(null):null});gy.displayName="SlotClone";const Pi=({children:e})=>f.createElement(f.Fragment,null,e);function Bk(e){return f.isValidElement(e)&&e.type===Pi}function Vk(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...s)=>{a(...s),o(...s)}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}const Hk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=Hk.reduce((e,t)=>{const n=f.forwardRef((r,o)=>{const{asChild:a,...i}=r,s=a?nn:t;return f.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),f.createElement(s,ce({},i,{ref:o}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function B$(e,t){e&&_a.flushSync(()=>e.dispatchEvent(t))}function Tt(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Uk(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e);f.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const yy="dismissableLayer.update",Gk="dismissableLayer.pointerDownOutside",Wk="dismissableLayer.focusOutside";let qw;const Kk=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tx=f.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:c,...u}=e,d=f.useContext(Kk),[p,m]=f.useState(null),h=(n=p==null?void 0:p.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,g]=f.useState({}),y=et(t,T=>m(T)),w=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(v),_=p?w.indexOf(p):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,S=_>=x,$=Yk(T=>{const C=T.target,D=[...d.branches].some(L=>L.contains(C));!S||D||(a==null||a(T),s==null||s(T),T.defaultPrevented||c==null||c())},h),N=Xk(T=>{const C=T.target;[...d.branches].some(L=>L.contains(C))||(i==null||i(T),s==null||s(T),T.defaultPrevented||c==null||c())},h);return Uk(T=>{_===d.layers.size-1&&(o==null||o(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},h),f.useEffect(()=>{if(p)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(qw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),Bw(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=qw)}},[p,h,r,d]),f.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),Bw())},[p,d]),f.useEffect(()=>{const T=()=>g({});return document.addEventListener(yy,T),()=>document.removeEventListener(yy,T)},[]),f.createElement(He.div,ce({},u,{ref:y,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,$.onPointerDownCapture)}))});function Yk(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e),r=f.useRef(!1),o=f.useRef(()=>{});return f.useEffect(()=>{const a=s=>{if(s.target&&!r.current){let d=function(){V$(Gk,n,u,{discrete:!0})};var c=d;const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=d,t.addEventListener("click",o.current,{once:!0})):d()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Xk(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e),r=f.useRef(!1);return f.useEffect(()=>{const o=a=>{a.target&&!r.current&&V$(Wk,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Bw(){const e=new CustomEvent(yy);document.dispatchEvent(e)}function V$(e,t,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?B$(o,a):o.dispatchEvent(a)}const Hn=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},Zk=$T.useId||(()=>{});let Qk=0;function zn(e){const[t,n]=f.useState(Zk());return Hn(()=>{e||n(r=>r??String(Qk++))},[e]),e||(t?`radix-${t}`:"")}const Jk=["top","right","bottom","left"],Po=Math.min,Cn=Math.max,Ru=Math.round,cc=Math.floor,Io=e=>({x:e,y:e}),eA={left:"right",right:"left",bottom:"top",top:"bottom"},tA={start:"end",end:"start"};function vy(e,t,n){return Cn(e,Po(t,n))}function Hr(e,t){return typeof e=="function"?e(t):e}function Ur(e){return e.split("-")[0]}function Ii(e){return e.split("-")[1]}function nx(e){return e==="x"?"y":"x"}function rx(e){return e==="y"?"height":"width"}function Mi(e){return["top","bottom"].includes(Ur(e))?"y":"x"}function ox(e){return nx(Mi(e))}function nA(e,t,n){n===void 0&&(n=!1);const r=Ii(e),o=ox(e),a=rx(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Tu(i)),[i,Tu(i)]}function rA(e){const t=Tu(e);return[xy(e),t,xy(t)]}function xy(e){return e.replace(/start|end/g,t=>tA[t])}function oA(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function aA(e,t,n,r){const o=Ii(e);let a=oA(Ur(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(xy)))),a}function Tu(e){return e.replace(/left|right|bottom|top/g,t=>eA[t])}function iA(e){return{top:0,right:0,bottom:0,left:0,...e}}function H$(e){return typeof e!="number"?iA(e):{top:e,right:e,bottom:e,left:e}}function Nu(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Vw(e,t,n){let{reference:r,floating:o}=e;const a=Mi(t),i=ox(t),s=rx(i),c=Ur(t),u=a==="y",d=r.x+r.width/2-o.width/2,p=r.y+r.height/2-o.height/2,m=r[s]/2-o[s]/2;let h;switch(c){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:p};break;case"left":h={x:r.x-o.width,y:p};break;default:h={x:r.x,y:r.y}}switch(Ii(t)){case"start":h[i]-=m*(n&&u?-1:1);break;case"end":h[i]+=m*(n&&u?-1:1);break}return h}const sA=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:p}=Vw(u,r,c),m=r,h={},g=0;for(let y=0;y<s.length;y++){const{name:w,fn:v}=s[y],{x,y:_,data:b,reset:S}=await v({x:d,y:p,initialPlacement:r,placement:m,strategy:o,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=x??d,p=_??p,h={...h,[w]:{...h[w],...b}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):S.rects),{x:d,y:p}=Vw(u,m,c)),y=-1)}return{x:d,y:p,placement:m,strategy:o,middlewareData:h}};async function tl(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:h=0}=Hr(t,e),g=H$(h),w=s[m?p==="floating"?"reference":"floating":p],v=Nu(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:c})),x=p==="floating"?{...i.floating,x:r,y:o}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),b=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Nu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:_,strategy:c}):x);return{top:(v.top-S.top+g.top)/b.y,bottom:(S.bottom-v.bottom+g.bottom)/b.y,left:(v.left-S.left+g.left)/b.x,right:(S.right-v.right+g.right)/b.x}}const lA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:u,padding:d=0}=Hr(e,t)||{};if(u==null)return{};const p=H$(d),m={x:n,y:r},h=ox(o),g=rx(h),y=await i.getDimensions(u),w=h==="y",v=w?"top":"left",x=w?"bottom":"right",_=w?"clientHeight":"clientWidth",b=a.reference[g]+a.reference[h]-m[h]-a.floating[g],S=m[h]-a.reference[h],$=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=$?$[_]:0;(!N||!await(i.isElement==null?void 0:i.isElement($)))&&(N=s.floating[_]||a.floating[g]);const T=b/2-S/2,C=N/2-y[g]/2-1,D=Po(p[v],C),L=Po(p[x],C),K=D,H=N-y[g]-L,M=N/2-y[g]/2+T,V=vy(K,M,H),j=!c.arrow&&Ii(o)!=null&&M!==V&&a.reference[g]/2-(M<K?D:L)-y[g]/2<0,P=j?M<K?M-K:M-H:0;return{[h]:m[h]+P,data:{[h]:V,centerOffset:M-V-P,...j&&{alignmentOffset:P}},reset:j}}}),cA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...w}=Hr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Ur(o),x=Ur(s)===s,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),b=m||(x||!y?[Tu(s)]:rA(s));!m&&g!=="none"&&b.push(...aA(s,y,g,_));const S=[s,...b],$=await tl(t,w),N=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&N.push($[v]),p){const K=nA(o,i,_);N.push($[K[0]],$[K[1]])}if(T=[...T,{placement:o,overflows:N}],!N.every(K=>K<=0)){var C,D;const K=(((C=a.flip)==null?void 0:C.index)||0)+1,H=S[K];if(H)return{data:{index:K,overflows:T},reset:{placement:H}};let M=(D=T.filter(V=>V.overflows[0]<=0).sort((V,j)=>V.overflows[1]-j.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(h){case"bestFit":{var L;const V=(L=T.map(j=>[j.placement,j.overflows.filter(P=>P>0).reduce((P,I)=>P+I,0)]).sort((j,P)=>j[1]-P[1])[0])==null?void 0:L[0];V&&(M=V);break}case"initialPlacement":M=s;break}if(o!==M)return{reset:{placement:M}}}return{}}}};function Hw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Uw(e){return Jk.some(t=>e[t]>=0)}const uA=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Hr(e,t);switch(r){case"referenceHidden":{const a=await tl(t,{...o,elementContext:"reference"}),i=Hw(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Uw(i)}}}case"escaped":{const a=await tl(t,{...o,altBoundary:!0}),i=Hw(a,n.floating);return{data:{escapedOffsets:i,escaped:Uw(i)}}}default:return{}}}}};async function dA(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ur(n),s=Ii(n),c=Mi(n)==="y",u=["left","top"].includes(i)?-1:1,d=a&&c?-1:1,p=Hr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:g}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return s&&typeof g=="number"&&(h=s==="end"?g*-1:g),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const fA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await dA(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},pA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...c}=Hr(e,t),u={x:n,y:r},d=await tl(t,c),p=Mi(Ur(o)),m=nx(p);let h=u[m],g=u[p];if(a){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",x=h+d[w],_=h-d[v];h=vy(x,h,_)}if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",x=g+d[w],_=g-d[v];g=vy(x,g,_)}const y=s.fn({...t,[m]:h,[p]:g});return{...y,data:{x:y.x-n,y:y.y-r}}}}},hA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:u=!0}=Hr(e,t),d={x:n,y:r},p=Mi(o),m=nx(p);let h=d[m],g=d[p];const y=Hr(s,t),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=m==="y"?"height":"width",b=a.reference[m]-a.floating[_]+w.mainAxis,S=a.reference[m]+a.reference[_]-w.mainAxis;h<b?h=b:h>S&&(h=S)}if(u){var v,x;const _=m==="y"?"width":"height",b=["top","left"].includes(Ur(o)),S=a.reference[p]-a.floating[_]+(b&&((v=i.offset)==null?void 0:v[p])||0)+(b?0:w.crossAxis),$=a.reference[p]+a.reference[_]+(b?0:((x=i.offset)==null?void 0:x[p])||0)-(b?w.crossAxis:0);g<S?g=S:g>$&&(g=$)}return{[m]:h,[p]:g}}}},mA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=Hr(e,t),c=await tl(t,s),u=Ur(n),d=Ii(n),p=Mi(n)==="y",{width:m,height:h}=r.floating;let g,y;u==="top"||u==="bottom"?(g=u,y=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=u,g=d==="end"?"top":"bottom");const w=h-c[g],v=m-c[y],x=!t.middlewareData.shift;let _=w,b=v;if(p){const $=m-c.left-c.right;b=d||x?Po(v,$):$}else{const $=h-c.top-c.bottom;_=d||x?Po(w,$):$}if(x&&!d){const $=Cn(c.left,0),N=Cn(c.right,0),T=Cn(c.top,0),C=Cn(c.bottom,0);p?b=m-2*($!==0||N!==0?$+N:Cn(c.left,c.right)):_=h-2*(T!==0||C!==0?T+C:Cn(c.top,c.bottom))}await i({...t,availableWidth:b,availableHeight:_});const S=await o.getDimensions(a.floating);return m!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Mo(e){return U$(e)?(e.nodeName||"").toLowerCase():"#document"}function $n(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qr(e){var t;return(t=(U$(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function U$(e){return e instanceof Node||e instanceof $n(e).Node}function Gr(e){return e instanceof Element||e instanceof $n(e).Element}function wr(e){return e instanceof HTMLElement||e instanceof $n(e).HTMLElement}function Gw(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $n(e).ShadowRoot}function bl(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Un(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function gA(e){return["table","td","th"].includes(Mo(e))}function ax(e){const t=ix(),n=Un(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yA(e){let t=wi(e);for(;wr(t)&&!md(t);){if(ax(t))return t;t=wi(t)}return null}function ix(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function md(e){return["html","body","#document"].includes(Mo(e))}function Un(e){return $n(e).getComputedStyle(e)}function gd(e){return Gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function wi(e){if(Mo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Gw(e)&&e.host||Qr(e);return Gw(t)?t.host:t}function G$(e){const t=wi(e);return md(t)?e.ownerDocument?e.ownerDocument.body:e.body:wr(t)&&bl(t)?t:G$(t)}function nl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=G$(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=$n(o);return a?t.concat(i,i.visualViewport||[],bl(o)?o:[],i.frameElement&&n?nl(i.frameElement):[]):t.concat(o,nl(o,[],n))}function W$(e){const t=Un(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=wr(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=Ru(n)!==a||Ru(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function sx(e){return Gr(e)?e:e.contextElement}function ui(e){const t=sx(e);if(!wr(t))return Io(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=W$(t);let i=(a?Ru(n.width):n.width)/r,s=(a?Ru(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const vA=Io(0);function K$(e){const t=$n(e);return!ix()||!t.visualViewport?vA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xA(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$n(e)?!1:t}function ma(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=sx(e);let i=Io(1);t&&(r?Gr(r)&&(i=ui(r)):i=ui(e));const s=xA(a,n,r)?K$(a):Io(0);let c=(o.left+s.x)/i.x,u=(o.top+s.y)/i.y,d=o.width/i.x,p=o.height/i.y;if(a){const m=$n(a),h=r&&Gr(r)?$n(r):r;let g=m,y=g.frameElement;for(;y&&r&&h!==g;){const w=ui(y),v=y.getBoundingClientRect(),x=Un(y),_=v.left+(y.clientLeft+parseFloat(x.paddingLeft))*w.x,b=v.top+(y.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,p*=w.y,c+=_,u+=b,g=$n(y),y=g.frameElement}}return Nu({width:d,height:p,x:c,y:u})}const _A=[":popover-open",":modal"];function Y$(e){return _A.some(t=>{try{return e.matches(t)}catch{return!1}})}function wA(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=Qr(r),s=t?Y$(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Io(1);const d=Io(0),p=wr(r);if((p||!p&&!a)&&((Mo(r)!=="body"||bl(i))&&(c=gd(r)),wr(r))){const m=ma(r);u=ui(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function bA(e){return Array.from(e.getClientRects())}function X$(e){return ma(Qr(e)).left+gd(e).scrollLeft}function CA(e){const t=Qr(e),n=gd(e),r=e.ownerDocument.body,o=Cn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Cn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+X$(e);const s=-n.scrollTop;return Un(r).direction==="rtl"&&(i+=Cn(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function SA(e,t){const n=$n(e),r=Qr(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const u=ix();(!u||u&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function jA(e,t){const n=ma(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=wr(e)?ui(e):Io(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,u=r*a.y;return{width:i,height:s,x:c,y:u}}function Ww(e,t,n){let r;if(t==="viewport")r=SA(e,n);else if(t==="document")r=CA(Qr(e));else if(Gr(t))r=jA(t,n);else{const o=K$(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return Nu(r)}function Z$(e,t){const n=wi(e);return n===t||!Gr(n)||md(n)?!1:Un(n).position==="fixed"||Z$(n,t)}function EA(e,t){const n=t.get(e);if(n)return n;let r=nl(e,[],!1).filter(s=>Gr(s)&&Mo(s)!=="body"),o=null;const a=Un(e).position==="fixed";let i=a?wi(e):e;for(;Gr(i)&&!md(i);){const s=Un(i),c=ax(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||bl(i)&&!c&&Z$(e,i))?r=r.filter(d=>d!==i):o=s,i=wi(i)}return t.set(e,r),r}function $A(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?EA(t,this._c):[].concat(n),r],s=i[0],c=i.reduce((u,d)=>{const p=Ww(t,d,o);return u.top=Cn(p.top,u.top),u.right=Po(p.right,u.right),u.bottom=Po(p.bottom,u.bottom),u.left=Cn(p.left,u.left),u},Ww(t,s,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function RA(e){const{width:t,height:n}=W$(e);return{width:t,height:n}}function TA(e,t,n){const r=wr(t),o=Qr(t),a=n==="fixed",i=ma(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=Io(0);if(r||!r&&!a)if((Mo(t)!=="body"||bl(o))&&(s=gd(t)),r){const p=ma(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else o&&(c.x=X$(o));const u=i.left+s.scrollLeft-c.x,d=i.top+s.scrollTop-c.y;return{x:u,y:d,width:i.width,height:i.height}}function Kw(e,t){return!wr(e)||Un(e).position==="fixed"?null:t?t(e):e.offsetParent}function Q$(e,t){const n=$n(e);if(!wr(e)||Y$(e))return n;let r=Kw(e,t);for(;r&&gA(r)&&Un(r).position==="static";)r=Kw(r,t);return r&&(Mo(r)==="html"||Mo(r)==="body"&&Un(r).position==="static"&&!ax(r))?n:r||yA(e)||n}const NA=async function(e){const t=this.getOffsetParent||Q$,n=this.getDimensions;return{reference:TA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function kA(e){return Un(e).direction==="rtl"}const AA={convertOffsetParentRelativeRectToViewportRelativeRect:wA,getDocumentElement:Qr,getClippingRect:$A,getOffsetParent:Q$,getElementRects:NA,getClientRects:bA,getDimensions:RA,getScale:ui,isElement:Gr,isRTL:kA};function DA(e,t){let n=null,r;const o=Qr(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:p,height:m}=e.getBoundingClientRect();if(s||t(),!p||!m)return;const h=cc(d),g=cc(o.clientWidth-(u+p)),y=cc(o.clientHeight-(d+m)),w=cc(u),x={rootMargin:-h+"px "+-g+"px "+-y+"px "+-w+"px",threshold:Cn(0,Po(1,c))||1};let _=!0;function b(S){const $=S[0].intersectionRatio;if($!==c){if(!_)return i();$?i(!1,$):r=setTimeout(()=>{i(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(b,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,x)}n.observe(e)}return i(!0),a}function PA(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=sx(e),d=o||a?[...u?nl(u):[],...nl(t)]:[];d.forEach(v=>{o&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const p=u&&s?DA(u,n):null;let m=-1,h=null;i&&(h=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?ma(e):null;c&&w();function w(){const v=ma(e);y&&(v.x!==y.x||v.y!==y.y||v.width!==y.width||v.height!==y.height)&&n(),y=v,g=requestAnimationFrame(w)}return n(),()=>{var v;d.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),p==null||p(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const IA=pA,MA=cA,OA=mA,LA=uA,Yw=lA,FA=hA,zA=(e,t,n)=>{const r=new Map,o={platform:AA,...n},a={...o.platform,_c:r};return sA(e,t,{...o,platform:a})},qA=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Yw({element:r.current,padding:o}).fn(n):{}:r?Yw({element:r,padding:o}).fn(n):{}}}};var Kc=typeof document<"u"?f.useLayoutEffect:f.useEffect;function ku(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ku(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!ku(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function J$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Xw(e,t){const n=J$(e);return Math.round(t*n)/n}function Zw(e){const t=f.useRef(e);return Kc(()=>{t.current=e}),t}function BA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:u}=e,[d,p]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=f.useState(r);ku(m,r)||h(r);const[g,y]=f.useState(null),[w,v]=f.useState(null),x=f.useCallback(P=>{P!==$.current&&($.current=P,y(P))},[]),_=f.useCallback(P=>{P!==N.current&&(N.current=P,v(P))},[]),b=a||g,S=i||w,$=f.useRef(null),N=f.useRef(null),T=f.useRef(d),C=c!=null,D=Zw(c),L=Zw(o),K=f.useCallback(()=>{if(!$.current||!N.current)return;const P={placement:t,strategy:n,middleware:m};L.current&&(P.platform=L.current),zA($.current,N.current,P).then(I=>{const A={...I,isPositioned:!0};H.current&&!ku(T.current,A)&&(T.current=A,_a.flushSync(()=>{p(A)}))})},[m,t,n,L]);Kc(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,p(P=>({...P,isPositioned:!1})))},[u]);const H=f.useRef(!1);Kc(()=>(H.current=!0,()=>{H.current=!1}),[]),Kc(()=>{if(b&&($.current=b),S&&(N.current=S),b&&S){if(D.current)return D.current(b,S,K);K()}},[b,S,K,D,C]);const M=f.useMemo(()=>({reference:$,floating:N,setReference:x,setFloating:_}),[x,_]),V=f.useMemo(()=>({reference:b,floating:S}),[b,S]),j=f.useMemo(()=>{const P={position:n,left:0,top:0};if(!V.floating)return P;const I=Xw(V.floating,d.x),A=Xw(V.floating,d.y);return s?{...P,transform:"translate("+I+"px, "+A+"px)",...J$(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:A}},[n,s,V.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:K,refs:M,elements:V,floatingStyles:j}),[d,K,M,V,j])}function lx(e){const[t,n]=f.useState(void 0);return Hn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,s=u.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const e4="Popper",[t4,Oi]=vn(e4),[VA,n4]=t4(e4),HA=e=>{const{__scopePopper:t,children:n}=e,[r,o]=f.useState(null);return f.createElement(VA,{scope:t,anchor:r,onAnchorChange:o},n)},UA="PopperAnchor",GA=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=n4(UA,n),i=f.useRef(null),s=et(t,i);return f.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.createElement(He.div,ce({},o,{ref:s}))}),r4="PopperContent",[WA,xee]=t4(r4),KA=f.forwardRef((e,t)=>{var n,r,o,a,i,s,c,u;const{__scopePopper:d,side:p="bottom",sideOffset:m=0,align:h="center",alignOffset:g=0,arrowPadding:y=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:_="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:$,...N}=e,T=n4(r4,d),[C,D]=f.useState(null),L=et(t,oe=>D(oe)),[K,H]=f.useState(null),M=lx(K),V=(n=M==null?void 0:M.width)!==null&&n!==void 0?n:0,j=(r=M==null?void 0:M.height)!==null&&r!==void 0?r:0,P=p+(h!=="center"?"-"+h:""),I=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},A=Array.isArray(v)?v:[v],z=A.length>0,U={padding:I,boundary:A.filter(YA),altBoundary:z},{refs:F,floatingStyles:B,placement:X,isPositioned:Q,middlewareData:J}=BA({strategy:"fixed",placement:P,whileElementsMounted:(...oe)=>PA(...oe,{animationFrame:S==="always"}),elements:{reference:T.anchor},middleware:[fA({mainAxis:m+j,alignmentAxis:g}),w&&IA({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?FA():void 0,...U}),w&&MA({...U}),OA({...U,apply:({elements:oe,rects:E,availableWidth:q,availableHeight:k})=>{const{width:G,height:Y}=E.reference,Z=oe.floating.style;Z.setProperty("--radix-popper-available-width",`${q}px`),Z.setProperty("--radix-popper-available-height",`${k}px`),Z.setProperty("--radix-popper-anchor-width",`${G}px`),Z.setProperty("--radix-popper-anchor-height",`${Y}px`)}}),K&&qA({element:K,padding:y}),XA({arrowWidth:V,arrowHeight:j}),b&&LA({strategy:"referenceHidden",...U})]}),[ee,ie]=o4(X),fe=Tt($);Hn(()=>{Q&&(fe==null||fe())},[Q,fe]);const ue=(o=J.arrow)===null||o===void 0?void 0:o.x,Ce=(a=J.arrow)===null||a===void 0?void 0:a.y,me=((i=J.arrow)===null||i===void 0?void 0:i.centerOffset)!==0,[Oe,Fe]=f.useState();return Hn(()=>{C&&Fe(window.getComputedStyle(C).zIndex)},[C]),f.createElement("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:Q?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(s=J.transformOrigin)===null||s===void 0?void 0:s.x,(c=J.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},f.createElement(WA,{scope:d,placedSide:ee,onArrowChange:H,arrowX:ue,arrowY:Ce,shouldHideArrow:me},f.createElement(He.div,ce({"data-side":ee,"data-align":ie},N,{ref:L,style:{...N.style,animation:Q?void 0:"none",opacity:(u=J.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function YA(e){return e!==null}const XA=e=>({name:"transformOrigin",options:e,fn(t){var n,r,o,a,i;const{placement:s,rects:c,middlewareData:u}=t,p=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,m=p?0:e.arrowWidth,h=p?0:e.arrowHeight,[g,y]=o4(s),w={start:"0%",center:"50%",end:"100%"}[y],v=((r=(o=u.arrow)===null||o===void 0?void 0:o.x)!==null&&r!==void 0?r:0)+m/2,x=((a=(i=u.arrow)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0)+h/2;let _="",b="";return g==="bottom"?(_=p?w:`${v}px`,b=`${-h}px`):g==="top"?(_=p?w:`${v}px`,b=`${c.floating.height+h}px`):g==="right"?(_=`${-h}px`,b=p?w:`${x}px`):g==="left"&&(_=`${c.floating.width+h}px`,b=p?w:`${x}px`),{data:{x:_,y:b}}}});function o4(e){const[t,n="center"]=e.split("-");return[t,n]}const cx=HA,a4=GA,i4=KA,ux=f.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...o}=e;return r?Ok.createPortal(f.createElement(He.div,ce({},o,{ref:t})),r):null});function ZA(e,t){return f.useReducer((n,r)=>{const o=t[n][r];return o??n},e)}const an=e=>{const{present:t,children:n}=e,r=QA(t),o=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=et(r.ref,o.ref);return typeof n=="function"||r.isPresent?f.cloneElement(o,{ref:a}):null};an.displayName="Presence";function QA(e){const[t,n]=f.useState(),r=f.useRef({}),o=f.useRef(e),a=f.useRef("none"),i=e?"mounted":"unmounted",[s,c]=ZA(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=uc(r.current);a.current=s==="mounted"?u:"none"},[s]),Hn(()=>{const u=r.current,d=o.current;if(d!==e){const m=a.current,h=uc(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Hn(()=>{if(t){const u=p=>{const h=uc(r.current).includes(p.animationName);p.target===t&&h&&_a.flushSync(()=>c("ANIMATION_END"))},d=p=>{p.target===t&&(a.current=uc(r.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:f.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function uc(e){return(e==null?void 0:e.animationName)||"none"}function Wr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=JA({defaultProp:t,onChange:n}),a=e!==void 0,i=a?e:r,s=Tt(n),c=f.useCallback(u=>{if(a){const p=typeof u=="function"?u(e):u;p!==e&&s(p)}else o(u)},[a,e,o,s]);return[i,c]}function JA({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,o=f.useRef(r),a=Tt(t);return f.useEffect(()=>{o.current!==r&&(a(r),o.current=r)},[r,o,a]),n}const eD=f.forwardRef((e,t)=>f.createElement(He.span,ce({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),[yd,_ee]=vn("Tooltip",[Oi]);Oi();const tD="TooltipProvider",nD=700,[rD,wee]=yd(tD),oD=e=>{const{__scopeTooltip:t,delayDuration:n=nD,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=f.useState(!0),c=f.useRef(!1),u=f.useRef(0);return f.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),f.createElement(rD,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(u.current),s(!1)},[]),onClose:f.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:f.useCallback(d=>{c.current=d},[]),disableHoverableContent:o},a)},s4="Tooltip";yd(s4);const aD="TooltipPortal";yd(aD,{forceMount:void 0});yd(s4,{isInside:!1});const iD=oD,l4=f.createContext(void 0),sD=e=>{const{dir:t,children:n}=e;return f.createElement(l4.Provider,{value:t},n)};function Li(e){const t=f.useContext(l4);return e||t||"ltr"}const lD=["tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","brown","orange"],cD=["sky","mint","lime","yellow","amber"],uD=["gold","bronze"],dD=[...lD,...cD,...uD],fD="gray",pD=["mauve","slate","sage","olive","sand"],hD=[fD,...pD];function mD(e){switch(e){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand"}}const gD=["inherit","light","dark"],yD=[...dD,"gray"],vD=[...hD,"auto"],xD=["solid","translucent"],_D=["none","small","medium","large","full"],wD=["90%","95%","100%","105%","110%"],Jt={hasBackground:{type:"boolean",default:!0},appearance:{type:"enum",values:gD,default:"inherit"},accentColor:{type:"enum",values:yD,default:"indigo"},grayColor:{type:"enum",values:vD,default:"auto"},panelBackground:{type:"enum",values:xD,default:"translucent"},radius:{type:"enum",values:_D,default:"medium"},scaling:{type:"enum",values:wD,default:"100%"}};function c4(e){return e==="gray"?"gray":mD(e)}const Aa=()=>{},Au=f.createContext(void 0);function u4(){const e=f.useContext(Au);if(e===void 0)throw new Error("`useThemeContext` must be used within a `Theme`");return e}const wa=f.forwardRef((e,t)=>f.useContext(Au)===void 0?f.createElement(iD,null,f.createElement(sD,{dir:"ltr"},f.createElement(d4,{...e,ref:t}))):f.createElement(dx,{...e,ref:t}));wa.displayName="Theme";const d4=f.forwardRef((e,t)=>{const{appearance:n=Jt.appearance.default,accentColor:r=Jt.accentColor.default,grayColor:o=Jt.grayColor.default,panelBackground:a=Jt.panelBackground.default,radius:i=Jt.radius.default,scaling:s=Jt.scaling.default,hasBackground:c=Jt.hasBackground.default,...u}=e,[d,p]=f.useState(n);f.useEffect(()=>p(n),[n]);const[m,h]=f.useState(r);f.useEffect(()=>h(r),[r]);const[g,y]=f.useState(o);f.useEffect(()=>y(o),[o]);const[w,v]=f.useState(a);f.useEffect(()=>v(a),[a]);const[x,_]=f.useState(i);f.useEffect(()=>_(i),[i]);const[b,S]=f.useState(s);f.useEffect(()=>S(s),[s]);const $=f.memo(({appearance:T})=>f.createElement("script",{dangerouslySetInnerHTML:{__html:`!(function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');d.style.colorScheme='${T}';c.add('${T}');}catch(e){}})();`}}),()=>!0);$.displayName="ExplicitRootAppearanceScript",f.useEffect(()=>bD(n),[n]);const N=g==="auto"?c4(m):g;return f.createElement(f.Fragment,null,d!=="inherit"&&f.createElement($,{appearance:d}),c&&f.createElement("style",{dangerouslySetInnerHTML:{__html:`
:root, .light, .light-theme { --color-page-background: white; }
.dark, .dark-theme { --color-page-background: var(--${N}-1); }
body { background-color: var(--color-page-background); }
`}}),f.createElement(dx,{...u,ref:t,isRoot:!0,hasBackground:c,appearance:d,accentColor:m,grayColor:g,panelBackground:w,radius:x,scaling:b,onAppearanceChange:p,onAccentColorChange:h,onGrayColorChange:y,onPanelBackgroundChange:v,onRadiusChange:_,onScalingChange:S}))});d4.displayName="ThemeRoot";const dx=f.forwardRef((e,t)=>{var n,r,o,a,i,s;const c=f.useContext(Au),{asChild:u,isRoot:d,hasBackground:p,appearance:m=(n=c==null?void 0:c.appearance)!==null&&n!==void 0?n:Jt.appearance.default,accentColor:h=(r=c==null?void 0:c.accentColor)!==null&&r!==void 0?r:Jt.accentColor.default,grayColor:g=(o=c==null?void 0:c.resolvedGrayColor)!==null&&o!==void 0?o:Jt.grayColor.default,panelBackground:y=(a=c==null?void 0:c.panelBackground)!==null&&a!==void 0?a:Jt.panelBackground.default,radius:w=(i=c==null?void 0:c.radius)!==null&&i!==void 0?i:Jt.radius.default,scaling:v=(s=c==null?void 0:c.scaling)!==null&&s!==void 0?s:Jt.scaling.default,onAppearanceChange:x=Aa,onAccentColorChange:_=Aa,onGrayColorChange:b=Aa,onPanelBackgroundChange:S=Aa,onRadiusChange:$=Aa,onScalingChange:N=Aa,...T}=e,C=u?nn:"div",D=g==="auto"?c4(h):g,L=e.appearance!==void 0&&e.appearance!=="inherit",K=e.grayColor!==void 0,H=!d&&(p===!0||p!==!1&&(L||K));return f.createElement(Au.Provider,{value:f.useMemo(()=>({appearance:m,accentColor:h,grayColor:g,resolvedGrayColor:D,panelBackground:y,radius:w,scaling:v,onAppearanceChange:x,onAccentColorChange:_,onGrayColorChange:b,onPanelBackgroundChange:S,onRadiusChange:$,onScalingChange:N}),[m,h,g,D,y,w,v,x,_,b,S,$,N])},f.createElement(C,{"data-is-root-theme":d?"true":"false","data-accent-color":h,"data-gray-color":D,"data-has-background":H?"true":"false","data-panel-background":y,"data-radius":w,"data-scaling":v,ref:t,...T,className:qe("radix-themes",{light:!d&&m==="light",dark:!d&&m==="dark"},T.className)}))});dx.displayName="ThemeImpl";function bD(e){if(e==="inherit")return;const t=document.documentElement;(t.classList.contains("light-theme")||t.classList.contains("dark-theme"))&&(t.classList.remove("light-theme","dark-theme"),t.style.colorScheme=e,t.classList.add(`${e}-theme`)),(t.classList.contains("light")||t.classList.contains("dark"))&&(t.classList.remove("light","dark"),t.style.colorScheme=e,t.classList.add(e))}const CD=["none","inline","inline-block","block"],SD={display:{type:"enum",values:CD,default:void 0,responsive:!0}},xn={type:"enum",values:Jt.accentColor.values,default:void 0},qo={type:"boolean",default:void 0};function $e(e,t="",n){var r,o,a,i;const s=[];if(typeof e=="object"){for(const c of Object.keys(e))if(c in e){const u=(r=e[c])===null||r===void 0?void 0:r.toString(),d=u==null?void 0:u.startsWith("-"),p=t===""?"":"-",m=d?`-${t}`:t,h=d?u==null?void 0:u.substring(1):u;if(h===void 0)continue;const g=(o=n==null?void 0:n[h])!==null&&o!==void 0?o:h,y=c==="initial"?`${m}${p}${g}`:`${c}:${m}${p}${g}`;s.push(y)}}if(typeof e=="string"){const c=e.startsWith("-"),u=t===""?"":"-",d=c?`-${t}`:t,p=c?e.substring(1):e,m=(a=n==null?void 0:n[p])!==null&&a!==void 0?a:p;s.push(`${d}${u}${m}`)}if(typeof e=="boolean"){const c=t===""?"":"-",u=e.toString(),d=(i=n==null?void 0:n[u])!==null&&i!==void 0?i:u;s.push(`${t}${c}${d}`)}return s.join(" ")}function Qw(e){return typeof e=="object"}const Uo=["0","1","2","3","4","5","6","7","8","9"],jD={p:{type:"enum",values:Uo,default:void 0,responsive:!0},px:{type:"enum",values:Uo,default:void 0,responsive:!0},py:{type:"enum",values:Uo,default:void 0,responsive:!0},pt:{type:"enum",values:Uo,default:void 0,responsive:!0},pr:{type:"enum",values:Uo,default:void 0,responsive:!0},pb:{type:"enum",values:Uo,default:void 0,responsive:!0},pl:{type:"enum",values:Uo,default:void 0,responsive:!0}};function fx(e){const{p:t=Bt.p.default,px:n=Bt.px.default,py:r=Bt.py.default,pt:o=Bt.pt.default,pr:a=Bt.pr.default,pb:i=Bt.pb.default,pl:s=Bt.pl.default,...c}=e;return{p:t,px:n,py:r,pt:o,pr:a,pb:i,pl:s,rest:c}}function px(e){return[$e(e.p,"rt-r-p"),$e(e.px,"rt-r-px"),$e(e.py,"rt-r-py"),$e(e.pt,"rt-r-pt"),$e(e.pr,"rt-r-pr"),$e(e.pb,"rt-r-pb"),$e(e.pl,"rt-r-pl")].filter(Boolean).join(" ")}const ED=["static","relative","absolute","fixed","sticky"],as=["auto","0","50%","100%"],Jw=["auto","min-content","max-content","100%","0","1","2","3","4","5","6","7","8","9"],$D=["0","1"],RD=["0","1"],Bt={...jD,position:{type:"enum",values:ED,default:void 0,responsive:!0},inset:{type:"enum",values:as,default:void 0,responsive:!0},top:{type:"enum",values:as,default:void 0,responsive:!0},right:{type:"enum",values:as,default:void 0,responsive:!0},bottom:{type:"enum",values:as,default:void 0,responsive:!0},left:{type:"enum",values:as,default:void 0,responsive:!0},width:{type:"enum",values:Jw,default:void 0,responsive:!0},height:{type:"enum",values:Jw,default:void 0,responsive:!0},shrink:{type:"enum",values:$D,default:void 0,responsive:!0},grow:{type:"enum",values:RD,default:void 0,responsive:!0}};function hx(e){const{rest:t,...n}=fx(e),{position:r=Bt.position.default,width:o=Bt.width.default,height:a=Bt.height.default,inset:i=Bt.inset.default,top:s=Bt.top.default,bottom:c=Bt.bottom.default,left:u=Bt.left.default,right:d=Bt.right.default,shrink:p=Bt.shrink.default,grow:m=Bt.grow.default,...h}=t;return{...n,position:r,width:o,height:a,inset:i,top:s,bottom:c,left:u,right:d,shrink:p,grow:m,rest:h}}function mx(e){return[px(e),$e(e.position,"rt-r-position"),$e(e.shrink,"rt-r-fs"),$e(e.grow,"rt-r-fg"),$e(e.width,"rt-r-w"),$e(e.height,"rt-r-h"),$e(e.inset,"rt-r-inset"),$e(e.top,"rt-r-top"),$e(e.bottom,"rt-r-bottom"),$e(e.left,"rt-r-left"),$e(e.right,"rt-r-right")].filter(Boolean).join(" ")}const TD=["normal","start","end","both"],f4={type:"enum",values:TD,default:void 0,responsive:!0},Go=["auto","0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],Wo={m:{type:"enum",values:Go,default:void 0,responsive:!0},mx:{type:"enum",values:Go,default:void 0,responsive:!0},my:{type:"enum",values:Go,default:void 0,responsive:!0},mt:{type:"enum",values:Go,default:void 0,responsive:!0},mr:{type:"enum",values:Go,default:void 0,responsive:!0},mb:{type:"enum",values:Go,default:void 0,responsive:!0},ml:{type:"enum",values:Go,default:void 0,responsive:!0}};function It(e){const{m:t=Wo.m.default,mx:n=Wo.mx.default,my:r=Wo.my.default,mt:o=Wo.mt.default,mr:a=Wo.mr.default,mb:i=Wo.mb.default,ml:s=Wo.ml.default,...c}=e;return{m:t,mx:n,my:r,mt:o,mr:a,mb:i,ml:s,rest:c}}function zt(e){return[$e(e.m,"rt-r-m"),$e(e.mx,"rt-r-mx"),$e(e.my,"rt-r-my"),$e(e.mt,"rt-r-mt"),$e(e.mr,"rt-r-mr"),$e(e.mb,"rt-r-mb"),$e(e.ml,"rt-r-ml")].filter(Boolean).join(" ")}const Cl={type:"enum",values:Jt.radius.values,default:void 0},ND=["left","center","right"],p4={type:"enum",values:ND,default:void 0,responsive:!0},kD=["light","regular","medium","bold"],h4={type:"enum",values:kD,default:void 0,responsive:!0};function eb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const te=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{rest:o,...a}=hx(n),{className:i,asChild:s,display:c=SD.display.default,...u}=o,d=s?nn:"div";return f.createElement(d,{...u,ref:t,className:qe("rt-Box",i,$e(c,"rt-r-display"),mx(a),zt(r))})});te.displayName="Box";const AD=["none","inline-flex","flex"],DD=["row","column","row-reverse","column-reverse"],PD=["start","center","end","baseline","stretch"],ID=["start","center","end","between"],MD=["nowrap","wrap","wrap-reverse"],OD=["0","1","2","3","4","5","6","7","8","9"],Xo={display:{type:"enum",values:AD,default:"flex",responsive:!0},direction:{type:"enum",values:DD,default:void 0,responsive:!0},align:{type:"enum",values:PD,default:void 0,responsive:!0},justify:{type:"enum",values:ID,default:"start",responsive:!0},wrap:{type:"enum",values:MD,default:void 0,responsive:!0},gap:{type:"enum",values:OD,default:void 0,responsive:!0}},O=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{rest:o,...a}=hx(n),{className:i,asChild:s,display:c=Xo.display.default,direction:u=Xo.direction.default,align:d=Xo.align.default,justify:p=Xo.justify.default,wrap:m=Xo.wrap.default,gap:h=Xo.gap.default,...g}=o,y=s?nn:"div";return f.createElement(y,{...g,ref:t,className:qe("rt-Flex",i,$e(c,"rt-r-display"),$e(u,"rt-r-fd"),$e(d,"rt-r-ai"),$e(p,"rt-r-jc",{between:"space-between"}),$e(m,"rt-r-fw"),$e(h,"rt-r-gap"),mx(a),zt(r))})});O.displayName="Flex";const LD=["none","inline-grid","grid"],FD=["row","column","dense","row-dense","column-dense"],zD=["start","center","end","baseline","stretch"],qD=["start","center","end","between"],ep=["0","1","2","3","4","5","6","7","8","9"],jr={display:{type:"enum",values:LD,default:void 0,responsive:!0},columns:{type:"string",default:void 0,responsive:!0},rows:{type:"string",default:void 0,responsive:!0},flow:{type:"enum",values:FD,default:void 0,responsive:!0},align:{type:"enum",values:zD,default:void 0,responsive:!0},justify:{type:"enum",values:qD,default:void 0,responsive:!0},gap:{type:"enum",values:ep,default:void 0,responsive:!0},gapX:{type:"enum",values:ep,default:void 0,responsive:!0},gapY:{type:"enum",values:ep,default:void 0,responsive:!0}},ta=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{rest:o,...a}=hx(n),{className:i,asChild:s,display:c=jr.display.default,columns:u=jr.columns.default,rows:d=jr.rows.default,flow:p=jr.flow.default,align:m=jr.align.default,justify:h=jr.justify.default,gap:g=jr.gap.default,gapX:y=jr.gapX.default,gapY:w=jr.gapY.default,style:v,...x}=o,_=s?nn:"div";let b={...v};if(typeof u=="string"&&(b={"--grid-template-columns-initial":dc(u),...b}),typeof d=="string"&&(b={"--grid-template-rows-initial":dc(d),...b}),Qw(u))for(const S in u)eb(u,S)&&(b={[`--grid-template-columns-${S}`]:dc(u[S]),...b});if(Qw(d))for(const S in d)eb(d,S)&&(b={[`--grid-template-rows-${S}`]:dc(d[S]),...b});return f.createElement(_,{...x,ref:t,className:qe("rt-Grid",i,$e(c,"rt-r-display"),$e(p,"rt-r-gaf"),$e(m,"rt-r-ai"),$e(h,"rt-r-jc",{between:"space-between"}),$e(g,"rt-r-gap"),$e(y,"rt-r-cg"),$e(w,"rt-r-rg"),mx(a),zt(r)),style:Object.keys(b).length?b:void 0})});ta.displayName="Grid";function dc(e){return e!=null&&e.match(/^\d+$/)?`repeat(${e}, minmax(0, 1fr))`:e}const BD=["1","2","3","4","5","6","7","8","9"],Da={size:{type:"enum",values:BD,default:"6",responsive:!0},weight:{...h4,default:"bold"},align:p4,trim:f4,color:xn,highContrast:qo},Et=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{children:o,className:a,asChild:i=!1,as:s="h1",size:c=Da.size.default,weight:u=Da.weight.default,align:d=Da.align.default,trim:p=Da.trim.default,color:m=Da.color.default,highContrast:h=Da.highContrast.default,...g}=n;return f.createElement(nn,{"data-accent-color":m,...g,ref:t,className:qe("rt-Heading",a,$e(c,"rt-r-size"),$e(u,"rt-r-weight"),$e(d,"rt-r-ta"),$e(p,"rt-r-lt"),{"rt-high-contrast":h},zt(r))},i?o:f.createElement(s,null,o))});Et.displayName="Heading";const VD=["1","2","3","4","5","6","7","8","9"],Pa={size:{type:"enum",values:VD,default:void 0,responsive:!0},weight:h4,align:p4,trim:f4,color:xn,highContrast:qo},R=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{children:o,className:a,asChild:i=!1,as:s="span",size:c=Pa.size.default,weight:u=Pa.weight.default,align:d=Pa.align.default,trim:p=Pa.trim.default,color:m=Pa.color.default,highContrast:h=Pa.highContrast.default,...g}=n;return f.createElement(nn,{"data-accent-color":m,...g,ref:t,className:qe("rt-Text",a,$e(c,"rt-r-size"),$e(u,"rt-r-weight"),$e(d,"rt-r-ta"),$e(p,"rt-r-lt"),{"rt-high-contrast":h},zt(r))},i?o:f.createElement(s,null,o))});R.displayName="Text";function gx(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const m4="Checkbox",[HD,bee]=vn(m4),[UD,GD]=HD(m4),WD=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:u,...d}=e,[p,m]=f.useState(null),h=et(t,_=>m(_)),g=f.useRef(!1),y=p?!!p.closest("form"):!0,[w=!1,v]=Wr({prop:o,defaultProp:a,onChange:u}),x=f.useRef(w);return f.useEffect(()=>{const _=p==null?void 0:p.form;if(_){const b=()=>v(x.current);return _.addEventListener("reset",b),()=>_.removeEventListener("reset",b)}},[p,v]),f.createElement(UD,{scope:n,state:w,disabled:s},f.createElement(He.button,ce({type:"button",role:"checkbox","aria-checked":sa(w)?"mixed":w,"aria-required":i,"data-state":g4(w),"data-disabled":s?"":void 0,disabled:s,value:c},d,{ref:h,onKeyDown:Re(e.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Re(e.onClick,_=>{v(b=>sa(b)?!0:!b),y&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})})),y&&f.createElement(XD,{control:p,bubbles:!g.current,name:r,value:c,checked:w,required:i,disabled:s,style:{transform:"translateX(-100%)"}}))}),KD="CheckboxIndicator",YD=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=GD(KD,n);return f.createElement(an,{present:r||sa(a.state)||a.state===!0},f.createElement(He.span,ce({"data-state":g4(a.state),"data-disabled":a.disabled?"":void 0},o,{ref:t,style:{pointerEvents:"none",...e.style}})))}),XD=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,a=f.useRef(null),i=gx(n),s=lx(t);return f.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==n&&p){const m=new Event("click",{bubbles:r});c.indeterminate=sa(n),p.call(c,sa(n)?!1:n),c.dispatchEvent(m)}},[i,n,r]),f.createElement("input",ce({type:"checkbox","aria-hidden":!0,defaultChecked:sa(n)?!1:n},o,{tabIndex:-1,ref:a,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function sa(e){return e==="indeterminate"}function g4(e){return sa(e)?"indeterminate":e?"checked":"unchecked"}const ZD=WD,QD=YD,JD=["1","2","3"],eP=["classic","surface","soft"],fc={size:{type:"enum",values:JD,default:"2",responsive:!0},variant:{type:"enum",values:eP,default:"surface"},color:xn,highContrast:qo},Sl=f.forwardRef(({color:e="currentColor",...t},n)=>f.createElement("svg",{width:"9",height:"9",viewBox:"0 0 9 9",fill:e,xmlns:"http://www.w3.org/2000/svg",...t,ref:n},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.53547 0.62293C8.88226 0.849446 8.97976 1.3142 8.75325 1.66099L4.5083 8.1599C4.38833 8.34356 4.19397 8.4655 3.9764 8.49358C3.75883 8.52167 3.53987 8.45309 3.3772 8.30591L0.616113 5.80777C0.308959 5.52987 0.285246 5.05559 0.563148 4.74844C0.84105 4.44128 1.31533 4.41757 1.62249 4.69547L3.73256 6.60459L7.49741 0.840706C7.72393 0.493916 8.18868 0.396414 8.53547 0.62293Z"})));Sl.displayName="ThickCheckIcon";const y4=f.forwardRef(({color:e="currentColor",...t},n)=>f.createElement("svg",{width:"9",height:"9",viewBox:"0 0 9 9",fill:e,xmlns:"http://www.w3.org/2000/svg",...t,ref:n},f.createElement("path",{d:"M0.135232 3.15803C0.324102 2.95657 0.640521 2.94637 0.841971 3.13523L4.5 6.56464L8.158 3.13523C8.3595 2.94637 8.6759 2.95657 8.8648 3.15803C9.0536 3.35949 9.0434 3.67591 8.842 3.86477L4.84197 7.6148C4.64964 7.7951 4.35036 7.7951 4.15803 7.6148L0.158031 3.86477C-0.0434285 3.67591 -0.0536285 3.35949 0.135232 3.15803Z"})));y4.displayName="ChevronDownIcon";const v4=f.forwardRef(({color:e="currentColor",...t},n)=>f.createElement("svg",{width:"9",height:"9",viewBox:"0 0 9 9",fill:e,xmlns:"http://www.w3.org/2000/svg",...t,ref:n},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.23826 0.201711C3.54108 -0.0809141 4.01567 -0.0645489 4.29829 0.238264L7.79829 3.98826C8.06724 4.27642 8.06724 4.72359 7.79829 5.01174L4.29829 8.76174C4.01567 9.06455 3.54108 9.08092 3.23826 8.79829C2.93545 8.51567 2.91909 8.04108 3.20171 7.73826L6.22409 4.5L3.20171 1.26174C2.91909 0.958928 2.93545 0.484337 3.23826 0.201711Z"})));v4.displayName="ThickChevronRightIcon";const tP=f.forwardRef(({color:e="currentColor",...t},n)=>f.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,ref:n},f.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:e,fillRule:"evenodd",clipRule:"evenodd"})));tP.displayName="InfoCircledIcon";const Vt=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,style:a,size:i=fc.size.default,variant:s=fc.variant.default,color:c=fc.color.default,highContrast:u=fc.highContrast.default,...d}=n;return f.createElement("span",{className:qe("rt-CheckboxRoot",o,$e(i,"rt-r-size"),zt(r)),style:a},f.createElement(ZD,{"data-accent-color":c,...d,ref:t,className:qe("rt-reset","rt-CheckboxButton",`rt-variant-${s}`,{"rt-high-contrast":u})},f.createElement(QD,{className:"rt-CheckboxIndicator"},f.createElement(Sl,{className:"rt-CheckboxIndicatorIcon"}))))});Vt.displayName="Checkbox";function yx(e){const t=e+"CollectionProvider",[n,r]=vn(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:g,children:y}=h,w=re.useRef(null),v=re.useRef(new Map).current;return re.createElement(o,{scope:g,itemMap:v,collectionRef:w},y)},s=e+"CollectionSlot",c=re.forwardRef((h,g)=>{const{scope:y,children:w}=h,v=a(s,y),x=et(g,v.collectionRef);return re.createElement(nn,{ref:x},w)}),u=e+"CollectionItemSlot",d="data-radix-collection-item",p=re.forwardRef((h,g)=>{const{scope:y,children:w,...v}=h,x=re.useRef(null),_=et(g,x),b=a(u,y);return re.useEffect(()=>(b.itemMap.set(x,{ref:x,...v}),()=>void b.itemMap.delete(x))),re.createElement(nn,{[d]:"",ref:_},w)});function m(h){const g=a(e+"CollectionConsumer",h);return re.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((b,S)=>v.indexOf(b.ref.current)-v.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:c,ItemSlot:p},m,r]}const tp="rovingFocusGroup.onEntryFocus",nP={bubbles:!1,cancelable:!0},vx="RovingFocusGroup",[_y,x4,rP]=yx(vx),[oP,Fi]=vn(vx,[rP]),[aP,iP]=oP(vx),sP=f.forwardRef((e,t)=>f.createElement(_y.Provider,{scope:e.__scopeRovingFocusGroup},f.createElement(_y.Slot,{scope:e.__scopeRovingFocusGroup},f.createElement(lP,ce({},e,{ref:t}))))),lP=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:u,...d}=e,p=f.useRef(null),m=et(t,p),h=Li(a),[g=null,y]=Wr({prop:i,defaultProp:s,onChange:c}),[w,v]=f.useState(!1),x=Tt(u),_=x4(n),b=f.useRef(!1),[S,$]=f.useState(0);return f.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(tp,x),()=>N.removeEventListener(tp,x)},[x]),f.createElement(aP,{scope:n,orientation:r,dir:h,loop:o,currentTabStopId:g,onItemFocus:f.useCallback(N=>y(N),[y]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>$(N=>N+1),[]),onFocusableItemRemove:f.useCallback(()=>$(N=>N-1),[])},f.createElement(He.div,ce({tabIndex:w||S===0?-1:0,"data-orientation":r},d,{ref:m,style:{outline:"none",...e.style},onMouseDown:Re(e.onMouseDown,()=>{b.current=!0}),onFocus:Re(e.onFocus,N=>{const T=!b.current;if(N.target===N.currentTarget&&T&&!w){const C=new CustomEvent(tp,nP);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const D=_().filter(V=>V.focusable),L=D.find(V=>V.active),K=D.find(V=>V.id===g),M=[L,K,...D].filter(Boolean).map(V=>V.ref.current);_4(M)}}b.current=!1}),onBlur:Re(e.onBlur,()=>v(!1))})))}),cP="RovingFocusGroupItem",uP=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=zn(),c=a||s,u=iP(cP,n),d=u.currentTabStopId===c,p=x4(n),{onFocusableItemAdd:m,onFocusableItemRemove:h}=u;return f.useEffect(()=>{if(r)return m(),()=>h()},[r,m,h]),f.createElement(_y.ItemSlot,{scope:n,id:c,focusable:r,active:o},f.createElement(He.span,ce({tabIndex:d?0:-1,"data-orientation":u.orientation},i,{ref:t,onMouseDown:Re(e.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:Re(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Re(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=pP(g,u.orientation,u.dir);if(y!==void 0){g.preventDefault();let v=p().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=u.loop?hP(v,x+1):v.slice(x+1)}setTimeout(()=>_4(v))}})})))}),dP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fP(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pP(e,t,n){const r=fP(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return dP[r]}function _4(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function hP(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const xx=sP,_x=uP,w4="Radio",[mP,b4]=vn(w4),[gP,yP]=mP(w4),vP=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:a,disabled:i,value:s="on",onCheck:c,...u}=e,[d,p]=f.useState(null),m=et(t,y=>p(y)),h=f.useRef(!1),g=d?!!d.closest("form"):!0;return f.createElement(gP,{scope:n,checked:o,disabled:i},f.createElement(He.button,ce({type:"button",role:"radio","aria-checked":o,"data-state":C4(o),"data-disabled":i?"":void 0,disabled:i,value:s},u,{ref:m,onClick:Re(e.onClick,y=>{o||c==null||c(),g&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})),g&&f.createElement(wP,{control:d,bubbles:!h.current,name:r,value:s,checked:o,required:a,disabled:i,style:{transform:"translateX(-100%)"}}))}),xP="RadioIndicator",_P=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,a=yP(xP,n);return f.createElement(an,{present:r||a.checked},f.createElement(He.span,ce({"data-state":C4(a.checked),"data-disabled":a.disabled?"":void 0},o,{ref:t})))}),wP=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,a=f.useRef(null),i=gx(n),s=lx(t);return f.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==n&&p){const m=new Event("click",{bubbles:r});p.call(c,n),c.dispatchEvent(m)}},[i,n,r]),f.createElement("input",ce({type:"radio","aria-hidden":!0,defaultChecked:n},o,{tabIndex:-1,ref:a,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function C4(e){return e?"checked":"unchecked"}const bP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S4="RadioGroup",[CP,Cee]=vn(S4,[Fi,b4]),j4=Fi(),E4=b4(),[SP,jP]=CP(S4),EP=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:a,required:i=!1,disabled:s=!1,orientation:c,dir:u,loop:d=!0,onValueChange:p,...m}=e,h=j4(n),g=Li(u),[y,w]=Wr({prop:a,defaultProp:o,onChange:p});return f.createElement(SP,{scope:n,name:r,required:i,disabled:s,value:y,onValueChange:w},f.createElement(xx,ce({asChild:!0},h,{orientation:c,dir:g,loop:d}),f.createElement(He.div,ce({role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":s?"":void 0,dir:g},m,{ref:t}))))}),$P="RadioGroupItem",RP=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,a=jP($P,n),i=a.disabled||r,s=j4(n),c=E4(n),u=f.useRef(null),d=et(t,u),p=a.value===o.value,m=f.useRef(!1);return f.useEffect(()=>{const h=y=>{bP.includes(y.key)&&(m.current=!0)},g=()=>m.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),f.createElement(_x,ce({asChild:!0},s,{focusable:!i,active:p}),f.createElement(vP,ce({disabled:i,required:a.required,checked:p},c,o,{name:a.name,ref:d,onCheck:()=>a.onValueChange(o.value),onKeyDown:Re(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Re(o.onFocus,()=>{var h;m.current&&((h=u.current)===null||h===void 0||h.click())})})))}),TP=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=E4(n);return f.createElement(_P,ce({},o,r,{ref:t}))}),NP=EP,kP=RP,AP=TP,DP=["1","2","3"],PP=["classic","surface","soft"],pc={size:{type:"enum",values:DP,default:"2",responsive:!0},variant:{type:"enum",values:PP,default:"surface"},color:xn,highContrast:qo},$4=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,size:a=pc.size.default,variant:i=pc.variant.default,color:s=pc.color.default,highContrast:c=pc.highContrast.default,...u}=n;return f.createElement(NP,{"data-accent-color":s,...u,ref:t,className:qe("rt-RadioGroupRoot",o,$e(a,"rt-r-size"),`rt-variant-${i}`,{"rt-high-contrast":c},zt(r))})});$4.displayName="RadioGroupRoot";const R4=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,style:a,...i}=n;return f.createElement("span",{className:qe("rt-RadioGroupItem",o,zt(r)),style:a},f.createElement(kP,{...i,ref:t,className:qe("rt-reset","rt-RadioGroupButton")},f.createElement(AP,{className:"rt-RadioGroupIndicator"})))});R4.displayName="RadioGroupItem";const np=Object.assign({},{Root:$4,Item:R4});function wy(e,[t,n]){return Math.min(n,Math.max(t,e))}let rp=0;function wx(){f.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:tb()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:tb()),rp++,()=>{rp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),rp--}},[])}function tb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const op="focusScope.autoFocusOnMount",ap="focusScope.autoFocusOnUnmount",nb={bubbles:!1,cancelable:!0},bx=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=f.useState(null),u=Tt(o),d=Tt(a),p=f.useRef(null),m=et(t,y=>c(y)),h=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let x=function($){if(h.paused||!s)return;const N=$.target;s.contains(N)?p.current=N:co(p.current,{select:!0})},_=function($){if(h.paused||!s)return;const N=$.relatedTarget;N!==null&&(s.contains(N)||co(p.current,{select:!0}))},b=function($){if(document.activeElement===document.body)for(const T of $)T.removedNodes.length>0&&co(s)};var y=x,w=_,v=b;document.addEventListener("focusin",x),document.addEventListener("focusout",_);const S=new MutationObserver(b);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,h.paused]),f.useEffect(()=>{if(s){ob.add(h);const y=document.activeElement;if(!s.contains(y)){const v=new CustomEvent(op,nb);s.addEventListener(op,u),s.dispatchEvent(v),v.defaultPrevented||(IP(zP(T4(s)),{select:!0}),document.activeElement===y&&co(s))}return()=>{s.removeEventListener(op,u),setTimeout(()=>{const v=new CustomEvent(ap,nb);s.addEventListener(ap,d),s.dispatchEvent(v),v.defaultPrevented||co(y??document.body,{select:!0}),s.removeEventListener(ap,d),ob.remove(h)},0)}}},[s,u,d,h]);const g=f.useCallback(y=>{if(!n&&!r||h.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const x=y.currentTarget,[_,b]=MP(x);_&&b?!y.shiftKey&&v===b?(y.preventDefault(),n&&co(_,{select:!0})):y.shiftKey&&v===_&&(y.preventDefault(),n&&co(b,{select:!0})):v===x&&y.preventDefault()}},[n,r,h.paused]);return f.createElement(He.div,ce({tabIndex:-1},i,{ref:m,onKeyDown:g}))});function IP(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(co(r,{select:t}),document.activeElement!==n)return}function MP(e){const t=T4(e),n=rb(t,e),r=rb(t.reverse(),e);return[n,r]}function T4(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function rb(e,t){for(const n of e)if(!OP(n,{upTo:t}))return n}function OP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function LP(e){return e instanceof HTMLInputElement&&"select"in e}function co(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&LP(e)&&t&&e.select()}}const ob=FP();function FP(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ab(e,t),e.unshift(t)},remove(t){var n;e=ab(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function ab(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function zP(e){return e.filter(t=>t.tagName!=="A")}var qP=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ia=new WeakMap,hc=new WeakMap,mc={},ip=0,N4=function(e){return e&&(e.host||N4(e.parentNode))},BP=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=N4(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},VP=function(e,t,n,r){var o=BP(t,Array.isArray(e)?e:[e]);mc[n]||(mc[n]=new WeakMap);var a=mc[n],i=[],s=new Set,c=new Set(o),u=function(p){!p||s.has(p)||(s.add(p),u(p.parentNode))};o.forEach(u);var d=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(s.has(m))d(m);else{var h=m.getAttribute(r),g=h!==null&&h!=="false",y=(Ia.get(m)||0)+1,w=(a.get(m)||0)+1;Ia.set(m,y),a.set(m,w),i.push(m),y===1&&g&&hc.set(m,!0),w===1&&m.setAttribute(n,"true"),g||m.setAttribute(r,"true")}})};return d(t),s.clear(),ip++,function(){i.forEach(function(p){var m=Ia.get(p)-1,h=a.get(p)-1;Ia.set(p,m),a.set(p,h),m||(hc.has(p)||p.removeAttribute(r),hc.delete(p)),h||p.removeAttribute(n)}),ip--,ip||(Ia=new WeakMap,Ia=new WeakMap,hc=new WeakMap,mc={})}},Cx=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||qP(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),VP(r,o,n,"aria-hidden")):function(){return null}},mr=function(){return mr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mr.apply(this,arguments)};function k4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function HP(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Yc="right-scroll-bar-position",Xc="width-before-scroll-bar",UP="with-scroll-bars-hidden",GP="--removed-body-scroll-bar-size";function sp(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function WP(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var ib=new WeakMap;function KP(e,t){var n=WP(t||null,function(r){return e.forEach(function(o){return sp(o,r)})});return f.useLayoutEffect(function(){var r=ib.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||sp(s,null)}),a.forEach(function(s){o.has(s)||sp(s,i)})}ib.set(n,e)},[e]),n}function YP(e){return e}function XP(e,t){t===void 0&&(t=YP);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return o}function ZP(e){e===void 0&&(e={});var t=XP(null);return t.options=mr({async:!0,ssr:!1},e),t}var A4=function(e){var t=e.sideCar,n=k4(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,mr({},n))};A4.isSideCarExport=!0;function QP(e,t){return e.useMedium(t),A4}var D4=ZP(),lp=function(){},vd=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:lp,onWheelCapture:lp,onTouchMoveCapture:lp}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,p=e.shards,m=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,x=k4(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=m,b=KP([n,t]),S=mr(mr({},x),o);return f.createElement(f.Fragment,null,d&&f.createElement(_,{sideCar:D4,removeScrollBar:u,shards:p,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n}),i?f.cloneElement(f.Children.only(s),mr(mr({},S),{ref:b})):f.createElement(v,mr({},S,{className:c,ref:b}),s))});vd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vd.classNames={fullWidth:Xc,zeroRight:Yc};var JP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=JP();return t&&e.setAttribute("nonce",t),e}function tI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rI=function(){var e=0,t=null;return{add:function(n){e==0&&(t=eI())&&(tI(t,n),nI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oI=function(){var e=rI();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},P4=function(){var e=oI(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},aI={left:0,top:0,right:0,gap:0},cp=function(e){return parseInt(e||"",10)||0},iI=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[cp(n),cp(r),cp(o)]},sI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return aI;var t=iI(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},lI=P4(),Du="data-scroll-locked",cI=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(UP,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Du,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yc,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Xc,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Yc," .").concat(Yc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xc," .").concat(Xc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Du,`] {
    `).concat(GP,": ").concat(s,`px;
  }
`)},uI=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r,a=f.useMemo(function(){return sI(o)},[o]);return f.useEffect(function(){return document.body.setAttribute(Du,""),function(){document.body.removeAttribute(Du)}},[]),f.createElement(lI,{styles:cI(a,!t,o,n?"":"!important")})},by=!1;if(typeof window<"u")try{var gc=Object.defineProperty({},"passive",{get:function(){return by=!0,!0}});window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{by=!1}var Ma=by?{passive:!1}:!1,dI=function(e){return e.tagName==="TEXTAREA"},I4=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!dI(e)&&n[t]==="visible")},fI=function(e){return I4(e,"overflowY")},pI=function(e){return I4(e,"overflowX")},sb=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=M4(e,n);if(r){var o=O4(e,n),a=o[1],i=o[2];if(a>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},hI=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},mI=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},M4=function(e,t){return e==="v"?fI(t):pI(t)},O4=function(e,t){return e==="v"?hI(t):mI(t)},gI=function(e,t){return e==="h"&&t==="rtl"?-1:1},yI=function(e,t,n,r,o){var a=gI(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),u=!1,d=i>0,p=0,m=0;do{var h=O4(e,s),g=h[0],y=h[1],w=h[2],v=y-w-a*g;(g||v)&&M4(e,s)&&(p+=v,m+=g),s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(d&&(o&&p===0||!o&&i>p)||!d&&(o&&m===0||!o&&-i>m))&&(u=!0),u},yc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},lb=function(e){return[e.deltaX,e.deltaY]},cb=function(e){return e&&"current"in e?e.current:e},vI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},xI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_I=0,Oa=[];function wI(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),o=f.useState(_I++)[0],a=f.useState(function(){return P4()})[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=HP([e.lockRef.current],(e.shards||[]).map(cb),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=f.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!i.current.allowPinchZoom;var v=yc(y),x=n.current,_="deltaX"in y?y.deltaX:x[0]-v[0],b="deltaY"in y?y.deltaY:x[1]-v[1],S,$=y.target,N=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in y&&N==="h"&&$.type==="range")return!1;var T=sb(N,$);if(!T)return!0;if(T?S=N:(S=N==="v"?"h":"v",T=sb(N,$)),!T)return!1;if(!r.current&&"changedTouches"in y&&(_||b)&&(r.current=S),!S)return!0;var C=r.current||S;return yI(C,w,y,C==="h"?_:b,!0)},[]),c=f.useCallback(function(y){var w=y;if(!(!Oa.length||Oa[Oa.length-1]!==a)){var v="deltaY"in w?lb(w):yc(w),x=t.current.filter(function(S){return S.name===w.type&&S.target===w.target&&vI(S.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(cb).filter(Boolean).filter(function(S){return S.contains(w.target)}),b=_.length>0?s(w,_[0]):!i.current.noIsolation;b&&w.cancelable&&w.preventDefault()}}},[]),u=f.useCallback(function(y,w,v,x){var _={name:y,delta:w,target:v,should:x};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(b){return b!==_})},1)},[]),d=f.useCallback(function(y){n.current=yc(y),r.current=void 0},[]),p=f.useCallback(function(y){u(y.type,lb(y),y.target,s(y,e.lockRef.current))},[]),m=f.useCallback(function(y){u(y.type,yc(y),y.target,s(y,e.lockRef.current))},[]);f.useEffect(function(){return Oa.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ma),document.addEventListener("touchmove",c,Ma),document.addEventListener("touchstart",d,Ma),function(){Oa=Oa.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Ma),document.removeEventListener("touchmove",c,Ma),document.removeEventListener("touchstart",d,Ma)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:xI(o)}):null,h?f.createElement(uI,{gapMode:"margin"}):null)}const bI=QP(D4,wI);var L4=f.forwardRef(function(e,t){return f.createElement(vd,mr({},e,{ref:t,sideCar:bI}))});L4.classNames=vd.classNames;const Sx=L4,CI=[" ","Enter","ArrowUp","ArrowDown"],SI=[" ","Enter"],xd="Select",[_d,jx,jI]=yx(xd),[zi,See]=vn(xd,[jI,Oi]),Ex=Oi(),[EI,ba]=zi(xd),[$I,RI]=zi(xd),TI=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:u,name:d,autoComplete:p,disabled:m,required:h}=e,g=Ex(t),[y,w]=f.useState(null),[v,x]=f.useState(null),[_,b]=f.useState(!1),S=Li(u),[$=!1,N]=Wr({prop:r,defaultProp:o,onChange:a}),[T,C]=Wr({prop:i,defaultProp:s,onChange:c}),D=f.useRef(null),L=y?!!y.closest("form"):!0,[K,H]=f.useState(new Set),M=Array.from(K).map(V=>V.props.value).join(";");return f.createElement(cx,g,f.createElement(EI,{required:h,scope:t,trigger:y,onTriggerChange:w,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:b,contentId:zn(),value:T,onValueChange:C,open:$,onOpenChange:N,dir:S,triggerPointerDownPosRef:D,disabled:m},f.createElement(_d.Provider,{scope:t},f.createElement($I,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(V=>{H(j=>new Set(j).add(V))},[]),onNativeOptionRemove:f.useCallback(V=>{H(j=>{const P=new Set(j);return P.delete(V),P})},[])},n)),L?f.createElement(B4,{key:M,"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:p,value:T,onChange:V=>C(V.target.value),disabled:m},T===void 0?f.createElement("option",{value:""}):null,Array.from(K)):null))},NI="SelectTrigger",kI=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Ex(n),i=ba(NI,n),s=i.disabled||r,c=et(t,i.onTriggerChange),u=jx(n),[d,p,m]=V4(g=>{const y=u().filter(x=>!x.disabled),w=y.find(x=>x.value===i.value),v=H4(y,g,w);v!==void 0&&i.onValueChange(v.value)}),h=()=>{s||(i.onOpenChange(!0),m())};return f.createElement(a4,ce({asChild:!0},a),f.createElement(He.button,ce({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":q4(i.value)?"":void 0},o,{ref:c,onClick:Re(o.onClick,g=>{g.currentTarget.focus()}),onPointerDown:Re(o.onPointerDown,g=>{const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&(h(),i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)},g.preventDefault())}),onKeyDown:Re(o.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(y&&g.key===" ")&&CI.includes(g.key)&&(h(),g.preventDefault())})})))}),AI="SelectValue",DI=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=ba(AI,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,p=et(t,c.onValueNodeChange);return Hn(()=>{u(d)},[u,d]),f.createElement(He.span,ce({},s,{ref:p,style:{pointerEvents:"none"}}),q4(c.value)?f.createElement(f.Fragment,null,i):a)}),PI=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return f.createElement(He.span,ce({"aria-hidden":!0},o,{ref:t}),r||"▼")}),II=e=>f.createElement(ux,ce({asChild:!0},e)),bi="SelectContent",MI=f.forwardRef((e,t)=>{const n=ba(bi,e.__scopeSelect),[r,o]=f.useState();if(Hn(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?_a.createPortal(f.createElement(F4,{scope:e.__scopeSelect},f.createElement(_d.Slot,{scope:e.__scopeSelect},f.createElement("div",null,e.children))),a):null}return f.createElement(OI,ce({},e,{ref:t}))}),Tr=10,[F4,wd]=zi(bi),OI=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:m,collisionPadding:h,sticky:g,hideWhenDetached:y,avoidCollisions:w,...v}=e,x=ba(bi,n),[_,b]=f.useState(null),[S,$]=f.useState(null),N=et(t,ee=>b(ee)),[T,C]=f.useState(null),[D,L]=f.useState(null),K=jx(n),[H,M]=f.useState(!1),V=f.useRef(!1);f.useEffect(()=>{if(_)return Cx(_)},[_]),wx();const j=f.useCallback(ee=>{const[ie,...fe]=K().map(me=>me.ref.current),[ue]=fe.slice(-1),Ce=document.activeElement;for(const me of ee)if(me===Ce||(me==null||me.scrollIntoView({block:"nearest"}),me===ie&&S&&(S.scrollTop=0),me===ue&&S&&(S.scrollTop=S.scrollHeight),me==null||me.focus(),document.activeElement!==Ce))return},[K,S]),P=f.useCallback(()=>j([T,_]),[j,T,_]);f.useEffect(()=>{H&&P()},[H,P]);const{onOpenChange:I,triggerPointerDownPosRef:A}=x;f.useEffect(()=>{if(_){let ee={x:0,y:0};const ie=ue=>{var Ce,me,Oe,Fe;ee={x:Math.abs(Math.round(ue.pageX)-((Ce=(me=A.current)===null||me===void 0?void 0:me.x)!==null&&Ce!==void 0?Ce:0)),y:Math.abs(Math.round(ue.pageY)-((Oe=(Fe=A.current)===null||Fe===void 0?void 0:Fe.y)!==null&&Oe!==void 0?Oe:0))}},fe=ue=>{ee.x<=10&&ee.y<=10?ue.preventDefault():_.contains(ue.target)||I(!1),document.removeEventListener("pointermove",ie),A.current=null};return A.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",fe,{capture:!0})}}},[_,I,A]),f.useEffect(()=>{const ee=()=>I(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[I]);const[z,U]=V4(ee=>{const ie=K().filter(Ce=>!Ce.disabled),fe=ie.find(Ce=>Ce.ref.current===document.activeElement),ue=H4(ie,ee,fe);ue&&setTimeout(()=>ue.ref.current.focus())}),F=f.useCallback((ee,ie,fe)=>{const ue=!V.current&&!fe;(x.value!==void 0&&x.value===ie||ue)&&(C(ee),ue&&(V.current=!0))},[x.value]),B=f.useCallback(()=>_==null?void 0:_.focus(),[_]),X=f.useCallback((ee,ie,fe)=>{const ue=!V.current&&!fe;(x.value!==void 0&&x.value===ie||ue)&&L(ee)},[x.value]),Q=r==="popper"?ub:LI,J=Q===ub?{side:s,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:m,collisionPadding:h,sticky:g,hideWhenDetached:y,avoidCollisions:w}:{};return f.createElement(F4,{scope:n,content:_,viewport:S,onViewportChange:$,itemRefCallback:F,selectedItem:T,onItemLeave:B,itemTextRefCallback:X,focusSelectedItem:P,selectedItemText:D,position:r,isPositioned:H,searchRef:z},f.createElement(Sx,{as:nn,allowPinchZoom:!0},f.createElement(bx,{asChild:!0,trapped:x.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:Re(o,ee=>{var ie;(ie=x.trigger)===null||ie===void 0||ie.focus({preventScroll:!0}),ee.preventDefault()})},f.createElement(tx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>x.onOpenChange(!1)},f.createElement(Q,ce({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ee=>ee.preventDefault()},v,J,{onPlaced:()=>M(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Re(v.onKeyDown,ee=>{const ie=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!ie&&ee.key.length===1&&U(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let ue=K().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const Ce=ee.target,me=ue.indexOf(Ce);ue=ue.slice(me+1)}setTimeout(()=>j(ue)),ee.preventDefault()}})}))))))}),LI=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=ba(bi,n),i=wd(bi,n),[s,c]=f.useState(null),[u,d]=f.useState(null),p=et(t,N=>d(N)),m=jx(n),h=f.useRef(!1),g=f.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=i,_=f.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&u&&y&&w&&v){const N=a.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(a.dir!=="rtl"){const Ce=D.left-T.left,me=C.left-Ce,Oe=N.left-me,Fe=N.width+Oe,oe=Math.max(Fe,T.width),E=window.innerWidth-Tr,q=wy(me,[Tr,E-oe]);s.style.minWidth=Fe+"px",s.style.left=q+"px"}else{const Ce=T.right-D.right,me=window.innerWidth-C.right-Ce,Oe=window.innerWidth-N.right-me,Fe=N.width+Oe,oe=Math.max(Fe,T.width),E=window.innerWidth-Tr,q=wy(me,[Tr,E-oe]);s.style.minWidth=Fe+"px",s.style.right=q+"px"}const L=m(),K=window.innerHeight-Tr*2,H=y.scrollHeight,M=window.getComputedStyle(u),V=parseInt(M.borderTopWidth,10),j=parseInt(M.paddingTop,10),P=parseInt(M.borderBottomWidth,10),I=parseInt(M.paddingBottom,10),A=V+j+H+I+P,z=Math.min(w.offsetHeight*5,A),U=window.getComputedStyle(y),F=parseInt(U.paddingTop,10),B=parseInt(U.paddingBottom,10),X=N.top+N.height/2-Tr,Q=K-X,J=w.offsetHeight/2,ee=w.offsetTop+J,ie=V+j+ee,fe=A-ie;if(ie<=X){const Ce=w===L[L.length-1].ref.current;s.style.bottom="0px";const me=u.clientHeight-y.offsetTop-y.offsetHeight,Oe=Math.max(Q,J+(Ce?B:0)+me+P),Fe=ie+Oe;s.style.height=Fe+"px"}else{const Ce=w===L[0].ref.current;s.style.top="0px";const Oe=Math.max(X,V+y.offsetTop+(Ce?F:0)+J)+fe;s.style.height=Oe+"px",y.scrollTop=ie-X+y.offsetTop}s.style.margin=`${Tr}px 0`,s.style.minHeight=z+"px",s.style.maxHeight=K+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[m,a.trigger,a.valueNode,s,u,y,w,v,a.dir,r]);Hn(()=>_(),[_]);const[b,S]=f.useState();Hn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const $=f.useCallback(N=>{N&&g.current===!0&&(_(),x==null||x(),g.current=!1)},[_,x]);return f.createElement(FI,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:h,onScrollButtonChange:$},f.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b}},f.createElement(He.div,ce({},o,{ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}}))))}),ub=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Tr,...a}=e,i=Ex(n);return f.createElement(i4,ce({},i,a,{ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[FI,zI]=zi(bi,{}),db="SelectViewport",qI=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=wd(db,n),a=zI(db,n),i=et(t,o.onViewportChange),s=f.useRef(0);return f.createElement(f.Fragment,null,f.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),f.createElement(_d.Slot,{scope:n},f.createElement(He.div,ce({"data-radix-select-viewport":"",role:"presentation"},r,{ref:i,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Re(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&d){const m=Math.abs(s.current-u.scrollTop);if(m>0){const h=window.innerHeight-Tr*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),w=Math.max(g,y);if(w<h){const v=w+m,x=Math.min(h,v),_=v-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=_>0?_:0,d.style.justifyContent="flex-end")}}}s.current=u.scrollTop})}))))}),BI="SelectGroup",[VI,HI]=zi(BI),UI=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=zn();return f.createElement(VI,{scope:n,id:o},f.createElement(He.div,ce({role:"group","aria-labelledby":o},r,{ref:t})))}),GI="SelectLabel",WI=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=HI(GI,n);return f.createElement(He.div,ce({id:o.id},r,{ref:t}))}),Cy="SelectItem",[KI,z4]=zi(Cy),YI=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=ba(Cy,n),c=wd(Cy,n),u=s.value===r,[d,p]=f.useState(a??""),[m,h]=f.useState(!1),g=et(t,v=>{var x;return(x=c.itemRefCallback)===null||x===void 0?void 0:x.call(c,v,r,o)}),y=zn(),w=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.createElement(KI,{scope:n,value:r,disabled:o,textId:y,isSelected:u,onItemTextChange:f.useCallback(v=>{p(x=>{var _;return x||((_=v==null?void 0:v.textContent)!==null&&_!==void 0?_:"").trim()})},[])},f.createElement(_d.ItemSlot,{scope:n,value:r,disabled:o,textValue:d},f.createElement(He.div,ce({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i,{ref:g,onFocus:Re(i.onFocus,()=>h(!0)),onBlur:Re(i.onBlur,()=>h(!1)),onPointerUp:Re(i.onPointerUp,w),onPointerMove:Re(i.onPointerMove,v=>{if(o){var x;(x=c.onItemLeave)===null||x===void 0||x.call(c)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(i.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var x;(x=c.onItemLeave)===null||x===void 0||x.call(c)}}),onKeyDown:Re(i.onKeyDown,v=>{var x;((x=c.searchRef)===null||x===void 0?void 0:x.current)!==""&&v.key===" "||(SI.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),vc="SelectItemText",XI=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=ba(vc,n),s=wd(vc,n),c=z4(vc,n),u=RI(vc,n),[d,p]=f.useState(null),m=et(t,v=>p(v),c.onItemTextChange,v=>{var x;return(x=s.itemTextRefCallback)===null||x===void 0?void 0:x.call(s,v,c.value,c.disabled)}),h=d==null?void 0:d.textContent,g=f.useMemo(()=>f.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},h),[c.disabled,c.value,h]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return Hn(()=>(y(g),()=>w(g)),[y,w,g]),f.createElement(f.Fragment,null,f.createElement(He.span,ce({id:c.textId},a,{ref:m})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?_a.createPortal(a.children,i.valueNode):null)}),ZI="SelectItemIndicator",QI=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return z4(ZI,n).isSelected?f.createElement(He.span,ce({"aria-hidden":!0},r,{ref:t})):null}),JI=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return f.createElement(He.div,ce({"aria-hidden":!0},r,{ref:t}))});function q4(e){return e===""||e===void 0}const B4=f.forwardRef((e,t)=>{const{value:n,...r}=e,o=f.useRef(null),a=et(t,o),i=gx(n);return f.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&d){const p=new Event("change",{bubbles:!0});d.call(s,n),s.dispatchEvent(p)}},[i,n]),f.createElement(eD,{asChild:!0},f.createElement("select",ce({},r,{ref:a,defaultValue:n})))});B4.displayName="BubbleSelect";function V4(e){const t=Tt(e),n=f.useRef(""),r=f.useRef(0),o=f.useCallback(i=>{const s=n.current+i;t(s),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function H4(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=eM(e,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function eM(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const tM=TI,nM=kI,rM=DI,oM=PI,aM=II,iM=MI,sM=qI,lM=UI,cM=WI,uM=YI,dM=XI,fM=QI,pM=JI;function hM(e,t){return f.useReducer((n,r)=>{const o=t[n][r];return o??n},e)}const U4="ScrollArea",[G4,jee]=vn(U4),[mM,Gn]=G4(U4),gM=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:a=600,...i}=e,[s,c]=f.useState(null),[u,d]=f.useState(null),[p,m]=f.useState(null),[h,g]=f.useState(null),[y,w]=f.useState(null),[v,x]=f.useState(0),[_,b]=f.useState(0),[S,$]=f.useState(!1),[N,T]=f.useState(!1),C=et(t,L=>c(L)),D=Li(o);return f.createElement(mM,{scope:n,type:r,dir:D,scrollHideDelay:a,scrollArea:s,viewport:u,onViewportChange:d,content:p,onContentChange:m,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:$,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:T,onCornerWidthChange:x,onCornerHeightChange:b},f.createElement(He.div,ce({dir:D},i,{ref:C,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),yM="ScrollAreaViewport",vM=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...o}=e,a=Gn(yM,n),i=f.useRef(null),s=et(t,i,a.onViewportChange);return f.createElement(f.Fragment,null,f.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),f.createElement(He.div,ce({"data-radix-scroll-area-viewport":""},o,{ref:s,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style}}),f.createElement("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Jr="ScrollAreaScrollbar",xM=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gn(Jr,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,s=e.orientation==="horizontal";return f.useEffect(()=>(s?a(!0):i(!0),()=>{s?a(!1):i(!1)}),[s,a,i]),o.type==="hover"?f.createElement(_M,ce({},r,{ref:t,forceMount:n})):o.type==="scroll"?f.createElement(wM,ce({},r,{ref:t,forceMount:n})):o.type==="auto"?f.createElement(W4,ce({},r,{ref:t,forceMount:n})):o.type==="always"?f.createElement($x,ce({},r,{ref:t})):null}),_M=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gn(Jr,e.__scopeScrollArea),[a,i]=f.useState(!1);return f.useEffect(()=>{const s=o.scrollArea;let c=0;if(s){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),f.createElement(an,{present:n||a},f.createElement(W4,ce({"data-state":a?"visible":"hidden"},r,{ref:t})))}),wM=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gn(Jr,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Cd(()=>c("SCROLL_END"),100),[s,c]=hM("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>c("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,o.scrollHideDelay,c]),f.useEffect(()=>{const u=o.viewport,d=a?"scrollLeft":"scrollTop";if(u){let p=u[d];const m=()=>{const h=u[d];p!==h&&(c("SCROLL"),i()),p=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[o.viewport,a,c,i]),f.createElement(an,{present:n||s!=="hidden"},f.createElement($x,ce({"data-state":s==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:Re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})))}),W4=f.forwardRef((e,t)=>{const n=Gn(Jr,e.__scopeScrollArea),{forceMount:r,...o}=e,[a,i]=f.useState(!1),s=e.orientation==="horizontal",c=Cd(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(s?u:d)}},10);return Ci(n.viewport,c),Ci(n.content,c),f.createElement(an,{present:r||a},f.createElement($x,ce({"data-state":a?"visible":"hidden"},o,{ref:t})))}),$x=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Gn(Jr,e.__scopeScrollArea),a=f.useRef(null),i=f.useRef(0),[s,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Z4(s.viewport,s.content),d={...r,sizes:s,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function p(m,h){return TM(m,i.current,s,h)}return n==="horizontal"?f.createElement(bM,ce({},d,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const m=o.viewport.scrollLeft,h=fb(m,s,o.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollLeft=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollLeft=p(m,o.dir))}})):n==="vertical"?f.createElement(CM,ce({},d,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const m=o.viewport.scrollTop,h=fb(m,s);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollTop=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollTop=p(m))}})):null}),bM=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Gn(Jr,e.__scopeScrollArea),[i,s]=f.useState(),c=f.useRef(null),u=et(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&s(getComputedStyle(c.current))},[c]),f.createElement(Y4,ce({"data-orientation":"horizontal"},o,{ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":bd(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,p)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),J4(m,p)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Pu(i.paddingLeft),paddingEnd:Pu(i.paddingRight)}})}}))}),CM=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Gn(Jr,e.__scopeScrollArea),[i,s]=f.useState(),c=f.useRef(null),u=et(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&s(getComputedStyle(c.current))},[c]),f.createElement(Y4,ce({"data-orientation":"vertical"},o,{ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":bd(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,p)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),J4(m,p)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Pu(i.paddingTop),paddingEnd:Pu(i.paddingBottom)}})}}))}),[SM,K4]=G4(Jr),Y4=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:s,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:p,...m}=e,h=Gn(Jr,n),[g,y]=f.useState(null),w=et(t,C=>y(C)),v=f.useRef(null),x=f.useRef(""),_=h.viewport,b=r.content-r.viewport,S=Tt(d),$=Tt(c),N=Cd(p,10);function T(C){if(v.current){const D=C.clientX-v.current.left,L=C.clientY-v.current.top;u({x:D,y:L})}}return f.useEffect(()=>{const C=D=>{const L=D.target;(g==null?void 0:g.contains(L))&&S(D,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[_,g,b,S]),f.useEffect($,[r,$]),Ci(g,N),Ci(h.content,N),f.createElement(SM,{scope:n,scrollbar:g,hasThumb:o,onThumbChange:Tt(a),onThumbPointerUp:Tt(i),onThumbPositionChange:$,onThumbPointerDown:Tt(s)},f.createElement(He.div,ce({},m,{ref:w,style:{position:"absolute",...m.style},onPointerDown:Re(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),v.current=g.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(C))}),onPointerMove:Re(e.onPointerMove,T),onPointerUp:Re(e.onPointerUp,C=>{const D=C.target;D.hasPointerCapture(C.pointerId)&&D.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=x.current,h.viewport&&(h.viewport.style.scrollBehavior=""),v.current=null})})))}),Sy="ScrollAreaThumb",jM=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=K4(Sy,e.__scopeScrollArea);return f.createElement(an,{present:n||o.hasThumb},f.createElement(EM,ce({ref:t},r)))}),EM=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,a=Gn(Sy,n),i=K4(Sy,n),{onThumbPositionChange:s}=i,c=et(t,p=>i.onThumbChange(p)),u=f.useRef(),d=Cd(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const p=a.viewport;if(p){const m=()=>{if(d(),!u.current){const h=NM(p,s);u.current=h,s()}};return s(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[a.viewport,d,s]),f.createElement(He.div,ce({"data-state":i.hasThumb?"visible":"hidden"},o,{ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Re(e.onPointerDownCapture,p=>{const h=p.target.getBoundingClientRect(),g=p.clientX-h.left,y=p.clientY-h.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:Re(e.onPointerUp,i.onThumbPointerUp)}))}),X4="ScrollAreaCorner",$M=f.forwardRef((e,t)=>{const n=Gn(X4,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?f.createElement(RM,ce({},e,{ref:t})):null}),RM=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Gn(X4,n),[a,i]=f.useState(0),[s,c]=f.useState(0),u=!!(a&&s);return Ci(o.scrollbarX,()=>{var d;const p=((d=o.scrollbarX)===null||d===void 0?void 0:d.offsetHeight)||0;o.onCornerHeightChange(p),c(p)}),Ci(o.scrollbarY,()=>{var d;const p=((d=o.scrollbarY)===null||d===void 0?void 0:d.offsetWidth)||0;o.onCornerWidthChange(p),i(p)}),u?f.createElement(He.div,ce({},r,{ref:t,style:{width:a,height:s,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function Pu(e){return e?parseInt(e,10):0}function Z4(e,t){const n=e/t;return isNaN(n)?0:n}function bd(e){const t=Z4(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function TM(e,t,n,r="ltr"){const o=bd(n),a=o/2,i=t||a,s=o-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-s,d=n.content-n.viewport,p=r==="ltr"?[0,d]:[d*-1,0];return Q4([c,u],p)(e)}function fb(e,t,n="ltr"){const r=bd(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-o,i=t.content-t.viewport,s=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=wy(e,c);return Q4([0,i],[0,s])(u)}function Q4(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function J4(e,t){return e>0&&e<t}const NM=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,s=n.top!==a.top;(i||s)&&t(),n=a,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Cd(e,t){const n=Tt(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ci(e,t){const n=Tt(t);Hn(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}const e8=gM,t8=vM,jy=xM,Ey=jM,kM=$M,AM=["1","2","3"],DM={size:{type:"enum",values:AM,default:"2",responsive:!0}},PM=["classic","surface","soft","ghost"],up={variant:{type:"enum",values:PM,default:"surface"},color:xn,radius:Cl},IM=["solid","soft"],dp={variant:{type:"enum",values:IM,default:"solid"},color:xn,highContrast:qo},Rx=f.createContext({}),n8=e=>{const{children:t,size:n=DM.size.default,...r}=e;return f.createElement(tM,{...r},f.createElement(Rx.Provider,{value:f.useMemo(()=>({size:n}),[n])},t))};n8.displayName="SelectRoot";const r8=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,variant:a=up.variant.default,color:i=up.color.default,radius:s=up.radius.default,placeholder:c,...u}=n,{size:d}=f.useContext(Rx);return f.createElement(nM,{asChild:!0},f.createElement("button",{"data-accent-color":i,"data-radius":s,...u,ref:t,className:qe("rt-reset","rt-SelectTrigger",o,$e(d,"rt-r-size"),`rt-variant-${a}`,zt(r))},f.createElement("span",{className:"rt-SelectTriggerInner"},f.createElement(rM,{placeholder:c})),f.createElement(oM,{asChild:!0},f.createElement(y4,{className:"rt-SelectIcon"}))))});r8.displayName="SelectTrigger";const o8=f.forwardRef((e,t)=>{const{className:n,children:r,variant:o=dp.variant.default,highContrast:a=dp.highContrast.default,color:i=dp.color.default,container:s,...c}=e,{size:u}=f.useContext(Rx),d=u4(),p=i??d.accentColor;return f.createElement(aM,{container:s},f.createElement(wa,{asChild:!0},f.createElement(iM,{"data-accent-color":p,sideOffset:4,...c,ref:t,className:qe({"rt-PopperContent":c.position==="popper"},"rt-SelectContent",n,$e(u,"rt-r-size"),`rt-variant-${o}`,{"rt-high-contrast":a})},f.createElement(e8,{type:"auto",className:"rt-ScrollAreaRoot"},f.createElement(sM,{asChild:!0,className:"rt-SelectViewport"},f.createElement(t8,{className:"rt-ScrollAreaViewport",style:{overflowY:void 0}},r)),f.createElement(jy,{className:"rt-ScrollAreaScrollbar rt-r-size-1",orientation:"vertical"},f.createElement(Ey,{className:"rt-ScrollAreaThumb"}))))))});o8.displayName="SelectContent";const a8=f.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return f.createElement(uM,{...o,ref:t,className:qe("rt-SelectItem",n)},f.createElement(fM,{className:"rt-SelectItemIndicator"},f.createElement(Sl,{className:"rt-SelectItemIndicatorIcon"})),f.createElement(dM,null,r))});a8.displayName="SelectItem";const i8=f.forwardRef((e,t)=>f.createElement(lM,{...e,ref:t,className:qe("rt-SelectGroup",e.className)}));i8.displayName="SelectGroup";const s8=f.forwardRef((e,t)=>f.createElement(cM,{...e,ref:t,className:qe("rt-SelectLabel",e.className)}));s8.displayName="SelectLabel";const l8=f.forwardRef((e,t)=>f.createElement(pM,{...e,ref:t,className:qe("rt-SelectSeparator",e.className)}));l8.displayName="SelectSeparator";const W=Object.assign({},{Root:n8,Trigger:r8,Content:o8,Item:a8,Group:i8,Label:s8,Separator:l8}),MM=["1","2","3"],OM=["classic","surface","soft"],fp={size:{type:"enum",values:MM,default:"2",responsive:!0},variant:{type:"enum",values:OM,default:"surface"},color:xn},rr=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,size:a=fp.size.default,variant:i=fp.variant.default,color:s=fp.color.default,style:c,...u}=n;return f.createElement("div",{"data-accent-color":s,style:c,className:qe("rt-TextAreaRoot",o,$e(a,"rt-r-size"),`rt-variant-${i}`,zt(r))},f.createElement("textarea",{className:"rt-TextAreaInput",ref:t,...u}),f.createElement("div",{className:"rt-TextAreaChrome"}))});rr.displayName="TextArea";const LM=["1","2","3"],FM=["classic","surface","soft"],_o={size:{type:"enum",values:LM,default:"2",responsive:!0},variant:{type:"enum",values:FM,default:"surface"},color:xn,radius:Cl},pb={color:xn,gap:Xo.gap},Tx=f.createContext(void 0),Nx=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{children:o,className:a,size:i=_o.size.default,variant:s=_o.variant.default,color:c=_o.color.default,radius:u=_o.radius.default,...d}=n;return f.createElement("div",{"data-radius":u,...d,ref:t,className:qe("rt-TextFieldRoot",a,zt(r)),onPointerDown:Re(d.onPointerDown,p=>{const m=p.target;if(m.closest("input, button, a"))return;const h=p.currentTarget.querySelector(".rt-TextFieldInput");if(!h)return;const w=(h.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_PRECEDING)!==0?0:h.value.length;requestAnimationFrame(()=>{h.setSelectionRange(w,w),h.focus()})})},f.createElement(Tx.Provider,{value:{size:i,variant:s,color:c,radius:u}},o))});Nx.displayName="TextFieldRoot";const c8=f.forwardRef((e,t)=>{const{rest:n,...r}=fx(e),{className:o,color:a=pb.color.default,gap:i=pb.gap.default,...s}=n,c=f.useContext(Tx);return f.createElement("div",{"data-accent-color":a,...s,ref:t,className:qe("rt-TextFieldSlot",o,$e(c==null?void 0:c.size,"rt-r-size"),$e(i,"rt-r-gap"),px(r))})});c8.displayName="TextFieldSlot";const u8=f.forwardRef((e,t)=>{var n,r,o,a;const{rest:i,...s}=It(e),c=f.useContext(Tx),u=c!==void 0,{className:d,size:p=(n=c==null?void 0:c.size)!==null&&n!==void 0?n:_o.size.default,variant:m=(r=c==null?void 0:c.variant)!==null&&r!==void 0?r:_o.variant.default,color:h=(o=c==null?void 0:c.color)!==null&&o!==void 0?o:_o.color.default,radius:g=(a=c==null?void 0:c.radius)!==null&&a!==void 0?a:_o.radius.default,...y}=i,w=f.createElement(f.Fragment,null,f.createElement("input",{"data-accent-color":h,spellCheck:"false",...y,ref:t,className:qe("rt-TextFieldInput",d,$e(p,"rt-r-size"),`rt-variant-${m}`)}),f.createElement("div",{"data-accent-color":h,"data-radius":c!=null&&c.radius?void 0:g,className:"rt-TextFieldChrome"}));return u?w:f.createElement(Nx,{...s,size:p,variant:m,color:h,radius:g},w)});u8.displayName="TextFieldInput";const Ae=Object.assign({},{Root:Nx,Slot:c8,Input:u8}),d8="Dialog",[f8,p8]=vn(d8),[zM,lr]=f8(d8),qM=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=f.useRef(null),c=f.useRef(null),[u=!1,d]=Wr({prop:r,defaultProp:o,onChange:a});return f.createElement(zM,{scope:t,triggerRef:s,contentRef:c,contentId:zn(),titleId:zn(),descriptionId:zn(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(p=>!p),[d]),modal:i},n)},BM="DialogTrigger",VM=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=lr(BM,n),a=et(t,o.triggerRef);return f.createElement(He.button,ce({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":kx(o.open)},r,{ref:a,onClick:Re(e.onClick,o.onOpenToggle)}))}),h8="DialogPortal",[HM,m8]=f8(h8,{forceMount:void 0}),UM=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=lr(h8,t);return f.createElement(HM,{scope:t,forceMount:n},f.Children.map(r,i=>f.createElement(an,{present:n||a.open},f.createElement(ux,{asChild:!0,container:o},i))))},$y="DialogOverlay",GM=f.forwardRef((e,t)=>{const n=m8($y,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=lr($y,e.__scopeDialog);return a.modal?f.createElement(an,{present:r||a.open},f.createElement(WM,ce({},o,{ref:t}))):null}),WM=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=lr($y,n);return f.createElement(Sx,{as:nn,allowPinchZoom:!0,shards:[o.contentRef]},f.createElement(He.div,ce({"data-state":kx(o.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),Si="DialogContent",KM=f.forwardRef((e,t)=>{const n=m8(Si,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=lr(Si,e.__scopeDialog);return f.createElement(an,{present:r||a.open},a.modal?f.createElement(YM,ce({},o,{ref:t})):f.createElement(XM,ce({},o,{ref:t})))}),YM=f.forwardRef((e,t)=>{const n=lr(Si,e.__scopeDialog),r=f.useRef(null),o=et(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return Cx(a)},[]),f.createElement(g8,ce({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:Re(e.onFocusOutside,a=>a.preventDefault())}))}),XM=f.forwardRef((e,t)=>{const n=lr(Si,e.__scopeDialog),r=f.useRef(!1),o=f.useRef(!1);return f.createElement(g8,ce({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,a),!a.defaultPrevented){var s;r.current||(s=n.triggerRef.current)===null||s===void 0||s.focus(),a.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:a=>{var i,s;(i=e.onInteractOutside)===null||i===void 0||i.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=a.target;((s=n.triggerRef.current)===null||s===void 0?void 0:s.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),g8=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=lr(Si,n),c=f.useRef(null),u=et(t,c);return wx(),f.createElement(f.Fragment,null,f.createElement(bx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a},f.createElement(tx,ce({role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":kx(s.open)},i,{ref:u,onDismiss:()=>s.onOpenChange(!1)}))),!1)}),y8="DialogTitle",ZM=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=lr(y8,n);return f.createElement(He.h2,ce({id:o.titleId},r,{ref:t}))}),QM="DialogDescription",JM=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=lr(QM,n);return f.createElement(He.p,ce({id:o.descriptionId},r,{ref:t}))}),eO="DialogClose",tO=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=lr(eO,n);return f.createElement(He.button,ce({type:"button"},r,{ref:t,onClick:Re(e.onClick,()=>o.onOpenChange(!1))}))});function kx(e){return e?"open":"closed"}const nO="DialogTitleWarning",[rO,Eee]=zk(nO,{contentName:Si,titleName:y8,docsSlug:"dialog"}),v8=qM,x8=VM,jl=UM,El=GM,_8=KM,w8=ZM,b8=JM,Ax=tO,oO=["1","2","3","4"],C8={size:{type:"enum",values:oO,default:"3",responsive:!0}},S8=e=>f.createElement(v8,{...e,modal:!0});S8.displayName="DialogRoot";const j8=f.forwardRef((e,t)=>f.createElement(x8,{...e,ref:t,asChild:!0}));j8.displayName="DialogTrigger";const E8=f.forwardRef((e,t)=>{const{className:n,forceMount:r,container:o,size:a=C8.size.default,...i}=e;return f.createElement(jl,{container:o,forceMount:r},f.createElement(wa,{asChild:!0},f.createElement(El,{className:"rt-DialogOverlay"},f.createElement(_8,{...i,ref:t,className:qe("rt-DialogContent",n,$e(a,"rt-r-size"))}))))});E8.displayName="DialogContent";const $8=f.forwardRef((e,t)=>f.createElement(w8,{asChild:!0},f.createElement(Et,{size:"5",mb:"3",trim:"start",...e,ref:t})));$8.displayName="DialogTitle";const R8=f.forwardRef((e,t)=>f.createElement(b8,{asChild:!0},f.createElement(R,{as:"p",size:"3",...e,ref:t})));R8.displayName="DialogDescription";const T8=f.forwardRef((e,t)=>f.createElement(Ax,{...e,ref:t,asChild:!0}));T8.displayName="DialogClose";const be=Object.assign({},{Root:S8,Trigger:j8,Content:E8,Title:$8,Description:R8,Close:T8}),aO="AlertDialog",[iO,$ee]=vn(aO,[p8]),eo=p8(),sO=e=>{const{__scopeAlertDialog:t,...n}=e,r=eo(t);return f.createElement(v8,ce({},r,n,{modal:!0}))},lO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return f.createElement(x8,ce({},o,r,{ref:t}))}),cO=e=>{const{__scopeAlertDialog:t,...n}=e,r=eo(t);return f.createElement(jl,ce({},r,n))},uO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return f.createElement(El,ce({},o,r,{ref:t}))}),N8="AlertDialogContent",[dO,fO]=iO(N8),pO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=eo(n),i=f.useRef(null),s=et(t,i),c=f.useRef(null);return f.createElement(rO,{contentName:N8,titleName:hO,docsSlug:"alert-dialog"},f.createElement(dO,{scope:n,cancelRef:c},f.createElement(_8,ce({role:"alertdialog"},a,o,{ref:s,onOpenAutoFocus:Re(o.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)===null||d===void 0||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault()}),f.createElement(Pi,null,r),!1)))}),hO="AlertDialogTitle",mO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return f.createElement(w8,ce({},o,r,{ref:t}))}),gO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return f.createElement(b8,ce({},o,r,{ref:t}))}),yO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return f.createElement(Ax,ce({},o,r,{ref:t}))}),vO="AlertDialogCancel",xO=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=fO(vO,n),a=eo(n),i=et(t,o);return f.createElement(Ax,ce({},a,r,{ref:i}))}),_O=sO,wO=lO,bO=cO,CO=uO,SO=pO,jO=yO,EO=xO,$O=mO,RO=gO,k8=e=>f.createElement(_O,{...e});k8.displayName="AlertDialogRoot";const A8=f.forwardRef((e,t)=>f.createElement(wO,{...e,ref:t,asChild:!0}));A8.displayName="AlertDialogTrigger";const D8=f.forwardRef((e,t)=>{const{className:n,forceMount:r,container:o,size:a=C8.size.default,...i}=e;return f.createElement(bO,{container:o,forceMount:r},f.createElement(wa,{asChild:!0},f.createElement(CO,{className:"rt-DialogOverlay rt-AlertDialogOverlay"},f.createElement(SO,{...i,ref:t,className:qe("rt-DialogContent","rt-AlertDialogContent",n,$e(a,"rt-r-size"))}))))});D8.displayName="AlertDialogContent";const P8=f.forwardRef((e,t)=>f.createElement($O,{asChild:!0},f.createElement(Et,{size:"5",mb:"3",trim:"start",...e,ref:t})));P8.displayName="AlertDialogTitle";const I8=f.forwardRef((e,t)=>f.createElement(RO,{asChild:!0},f.createElement(R,{as:"p",size:"3",...e,ref:t})));I8.displayName="AlertDialogDescription";const M8=f.forwardRef((e,t)=>f.createElement(jO,{...e,ref:t,asChild:!0}));M8.displayName="AlertDialogAction";const O8=f.forwardRef((e,t)=>f.createElement(EO,{...e,ref:t,asChild:!0}));O8.displayName="AlertDialogCancel";const xc=Object.assign({},{Root:k8,Trigger:A8,Content:D8,Title:P8,Description:I8,Action:M8,Cancel:O8}),Ry=["Enter"," "],TO=["ArrowDown","PageUp","Home"],L8=["ArrowUp","PageDown","End"],NO=[...TO,...L8],kO={ltr:[...Ry,"ArrowRight"],rtl:[...Ry,"ArrowLeft"]},AO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sd="Menu",[rl,DO,PO]=yx(Sd),[Ca,F8]=vn(Sd,[PO,Oi,Fi]),jd=Oi(),z8=Fi(),[q8,Bo]=Ca(Sd),[IO,$l]=Ca(Sd),MO=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=jd(t),[c,u]=f.useState(null),d=f.useRef(!1),p=Tt(a),m=Li(o);return f.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.createElement(cx,s,f.createElement(q8,{scope:t,open:n,onOpenChange:p,content:c,onContentChange:u},f.createElement(IO,{scope:t,onClose:f.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:d,dir:m,modal:i},r)))},B8=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=jd(n);return f.createElement(a4,ce({},o,r,{ref:t}))}),V8="MenuPortal",[OO,H8]=Ca(V8,{forceMount:void 0}),LO=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=Bo(V8,t);return f.createElement(OO,{scope:t,forceMount:n},f.createElement(an,{present:n||a.open},f.createElement(ux,{asChild:!0,container:o},r)))},or="MenuContent",[FO,Dx]=Ca(or),zO=f.forwardRef((e,t)=>{const n=H8(or,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Bo(or,e.__scopeMenu),i=$l(or,e.__scopeMenu);return f.createElement(rl.Provider,{scope:e.__scopeMenu},f.createElement(an,{present:r||a.open},f.createElement(rl.Slot,{scope:e.__scopeMenu},i.modal?f.createElement(qO,ce({},o,{ref:t})):f.createElement(BO,ce({},o,{ref:t})))))}),qO=f.forwardRef((e,t)=>{const n=Bo(or,e.__scopeMenu),r=f.useRef(null),o=et(t,r);return f.useEffect(()=>{const a=r.current;if(a)return Cx(a)},[]),f.createElement(Px,ce({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Re(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),BO=f.forwardRef((e,t)=>{const n=Bo(or,e.__scopeMenu);return f.createElement(Px,ce({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Px=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,onDismiss:h,disableOutsideScroll:g,...y}=e,w=Bo(or,n),v=$l(or,n),x=jd(n),_=z8(n),b=DO(n),[S,$]=f.useState(null),N=f.useRef(null),T=et(t,N,w.onContentChange),C=f.useRef(0),D=f.useRef(""),L=f.useRef(0),K=f.useRef(null),H=f.useRef("right"),M=f.useRef(0),V=g?Sx:f.Fragment,j=g?{as:nn,allowPinchZoom:!0}:void 0,P=A=>{var z,U;const F=D.current+A,B=b().filter(fe=>!fe.disabled),X=document.activeElement,Q=(z=B.find(fe=>fe.ref.current===X))===null||z===void 0?void 0:z.textValue,J=B.map(fe=>fe.textValue),ee=sL(J,F,Q),ie=(U=B.find(fe=>fe.textValue===ee))===null||U===void 0?void 0:U.ref.current;(function fe(ue){D.current=ue,window.clearTimeout(C.current),ue!==""&&(C.current=window.setTimeout(()=>fe(""),1e3))})(F),ie&&setTimeout(()=>ie.focus())};f.useEffect(()=>()=>window.clearTimeout(C.current),[]),wx();const I=f.useCallback(A=>{var z,U;return H.current===((z=K.current)===null||z===void 0?void 0:z.side)&&cL(A,(U=K.current)===null||U===void 0?void 0:U.area)},[]);return f.createElement(FO,{scope:n,searchRef:D,onItemEnter:f.useCallback(A=>{I(A)&&A.preventDefault()},[I]),onItemLeave:f.useCallback(A=>{var z;I(A)||((z=N.current)===null||z===void 0||z.focus(),$(null))},[I]),onTriggerLeave:f.useCallback(A=>{I(A)&&A.preventDefault()},[I]),pointerGraceTimerRef:L,onPointerGraceIntentChange:f.useCallback(A=>{K.current=A},[])},f.createElement(V,j,f.createElement(bx,{asChild:!0,trapped:o,onMountAutoFocus:Re(a,A=>{var z;A.preventDefault(),(z=N.current)===null||z===void 0||z.focus()}),onUnmountAutoFocus:i},f.createElement(tx,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,onDismiss:h},f.createElement(xx,ce({asChild:!0},_,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:$,onEntryFocus:Re(c,A=>{v.isUsingKeyboardRef.current||A.preventDefault()})}),f.createElement(i4,ce({role:"menu","aria-orientation":"vertical","data-state":Z8(w.open),"data-radix-menu-content":"",dir:v.dir},x,y,{ref:T,style:{outline:"none",...y.style},onKeyDown:Re(y.onKeyDown,A=>{const U=A.target.closest("[data-radix-menu-content]")===A.currentTarget,F=A.ctrlKey||A.altKey||A.metaKey,B=A.key.length===1;U&&(A.key==="Tab"&&A.preventDefault(),!F&&B&&P(A.key));const X=N.current;if(A.target!==X||!NO.includes(A.key))return;A.preventDefault();const J=b().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);L8.includes(A.key)&&J.reverse(),aL(J)}),onBlur:Re(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(C.current),D.current="")}),onPointerMove:Re(e.onPointerMove,ol(A=>{const z=A.target,U=M.current!==A.clientX;if(A.currentTarget.contains(z)&&U){const F=A.clientX>M.current?"right":"left";H.current=F,M.current=A.clientX}}))})))))))}),U8=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.createElement(He.div,ce({role:"group"},r,{ref:t}))}),VO=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.createElement(He.div,ce({},r,{ref:t}))}),Ty="MenuItem",hb="menu.itemSelect",Ix=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=f.useRef(null),i=$l(Ty,e.__scopeMenu),s=Dx(Ty,e.__scopeMenu),c=et(t,a),u=f.useRef(!1),d=()=>{const p=a.current;if(!n&&p){const m=new CustomEvent(hb,{bubbles:!0,cancelable:!0});p.addEventListener(hb,h=>r==null?void 0:r(h),{once:!0}),B$(p,m),m.defaultPrevented?u.current=!1:i.onClose()}};return f.createElement(G8,ce({},o,{ref:c,disabled:n,onClick:Re(e.onClick,d),onPointerDown:p=>{var m;(m=e.onPointerDown)===null||m===void 0||m.call(e,p),u.current=!0},onPointerUp:Re(e.onPointerUp,p=>{var m;u.current||(m=p.currentTarget)===null||m===void 0||m.click()}),onKeyDown:Re(e.onKeyDown,p=>{const m=s.searchRef.current!=="";n||m&&p.key===" "||Ry.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})}))}),G8=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=Dx(Ty,n),s=z8(n),c=f.useRef(null),u=et(t,c),[d,p]=f.useState(!1),[m,h]=f.useState("");return f.useEffect(()=>{const g=c.current;if(g){var y;h(((y=g.textContent)!==null&&y!==void 0?y:"").trim())}},[a.children]),f.createElement(rl.ItemSlot,{scope:n,disabled:r,textValue:o??m},f.createElement(_x,ce({asChild:!0},s,{focusable:!r}),f.createElement(He.div,ce({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},a,{ref:u,onPointerMove:Re(e.onPointerMove,ol(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus())})),onPointerLeave:Re(e.onPointerLeave,ol(g=>i.onItemLeave(g))),onFocus:Re(e.onFocus,()=>p(!0)),onBlur:Re(e.onBlur,()=>p(!1))}))))}),HO=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return f.createElement(K8,{scope:e.__scopeMenu,checked:n},f.createElement(Ix,ce({role:"menuitemcheckbox","aria-checked":Iu(n)?"mixed":n},o,{ref:t,"data-state":Mx(n),onSelect:Re(o.onSelect,()=>r==null?void 0:r(Iu(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),UO="MenuRadioGroup",[GO,WO]=Ca(UO,{value:void 0,onValueChange:()=>{}}),KO=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Tt(r);return f.createElement(GO,{scope:e.__scopeMenu,value:n,onValueChange:a},f.createElement(U8,ce({},o,{ref:t})))}),YO="MenuRadioItem",XO=f.forwardRef((e,t)=>{const{value:n,...r}=e,o=WO(YO,e.__scopeMenu),a=n===o.value;return f.createElement(K8,{scope:e.__scopeMenu,checked:a},f.createElement(Ix,ce({role:"menuitemradio","aria-checked":a},r,{ref:t,"data-state":Mx(a),onSelect:Re(r.onSelect,()=>{var i;return(i=o.onValueChange)===null||i===void 0?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})))}),W8="MenuItemIndicator",[K8,ZO]=Ca(W8,{checked:!1}),QO=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=ZO(W8,n);return f.createElement(an,{present:r||Iu(a.checked)||a.checked===!0},f.createElement(He.span,ce({},o,{ref:t,"data-state":Mx(a.checked)})))}),JO=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.createElement(He.div,ce({role:"separator","aria-orientation":"horizontal"},r,{ref:t}))}),Y8="MenuSub",[eL,X8]=Ca(Y8),tL=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=Bo(Y8,t),i=jd(t),[s,c]=f.useState(null),[u,d]=f.useState(null),p=Tt(o);return f.useEffect(()=>(a.open===!1&&p(!1),()=>p(!1)),[a.open,p]),f.createElement(cx,i,f.createElement(q8,{scope:t,open:r,onOpenChange:p,content:u,onContentChange:d},f.createElement(eL,{scope:t,contentId:zn(),triggerId:zn(),trigger:s,onTriggerChange:c},n)))},_c="MenuSubTrigger",nL=f.forwardRef((e,t)=>{const n=Bo(_c,e.__scopeMenu),r=$l(_c,e.__scopeMenu),o=X8(_c,e.__scopeMenu),a=Dx(_c,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const p=s.current;return()=>{window.clearTimeout(p),c(null)}},[s,c]),f.createElement(B8,ce({asChild:!0},u),f.createElement(G8,ce({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Z8(n.open)},e,{ref:hd(t,o.onTriggerChange),onClick:p=>{var m;(m=e.onClick)===null||m===void 0||m.call(e,p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Re(e.onPointerMove,ol(p=>{a.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Re(e.onPointerLeave,ol(p=>{var m;d();const h=(m=n.content)===null||m===void 0?void 0:m.getBoundingClientRect();if(h){var g;const y=(g=n.content)===null||g===void 0?void 0:g.dataset.side,w=y==="right",v=w?-5:5,x=h[w?"left":"right"],_=h[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+v,y:p.clientY},{x,y:h.top},{x:_,y:h.top},{x:_,y:h.bottom},{x,y:h.bottom}],side:y}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Re(e.onKeyDown,p=>{const m=a.searchRef.current!=="";if(!(e.disabled||m&&p.key===" ")&&kO[r.dir].includes(p.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),p.preventDefault()}})})))}),rL="MenuSubContent",oL=f.forwardRef((e,t)=>{const n=H8(or,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Bo(or,e.__scopeMenu),i=$l(or,e.__scopeMenu),s=X8(rL,e.__scopeMenu),c=f.useRef(null),u=et(t,c);return f.createElement(rl.Provider,{scope:e.__scopeMenu},f.createElement(an,{present:r||a.open},f.createElement(rl.Slot,{scope:e.__scopeMenu},f.createElement(Px,ce({id:s.contentId,"aria-labelledby":s.triggerId},o,{ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var p;i.isUsingKeyboardRef.current&&((p=c.current)===null||p===void 0||p.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Re(e.onFocusOutside,d=>{d.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Re(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:Re(e.onKeyDown,d=>{const p=d.currentTarget.contains(d.target),m=AO[i.dir].includes(d.key);if(p&&m){var h;a.onOpenChange(!1),(h=s.trigger)===null||h===void 0||h.focus(),d.preventDefault()}})})))))});function Z8(e){return e?"open":"closed"}function Iu(e){return e==="indeterminate"}function Mx(e){return Iu(e)?"indeterminate":e?"checked":"unchecked"}function aL(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function iL(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function sL(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=iL(e,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function lL(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,u=t[i].x,d=t[i].y;c>r!=d>r&&n<(u-s)*(r-c)/(d-c)+s&&(o=!o)}return o}function cL(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return lL(n,t)}function ol(e){return t=>t.pointerType==="mouse"?e(t):void 0}const uL=MO,dL=B8,fL=LO,pL=zO,hL=U8,mL=VO,gL=Ix,yL=HO,vL=KO,xL=XO,_L=QO,wL=JO,bL=tL,CL=nL,SL=oL,Q8="DropdownMenu",[jL,Ree]=vn(Q8,[F8]),sn=F8(),[EL,J8]=jL(Q8),$L=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=sn(t),u=f.useRef(null),[d=!1,p]=Wr({prop:o,defaultProp:a,onChange:i});return f.createElement(EL,{scope:t,triggerId:zn(),triggerRef:u,contentId:zn(),open:d,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(m=>!m),[p]),modal:s},f.createElement(uL,ce({},c,{open:d,onOpenChange:p,dir:r,modal:s}),n))},RL="DropdownMenuTrigger",TL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=J8(RL,n),i=sn(n);return f.createElement(dL,ce({asChild:!0},i),f.createElement(He.button,ce({type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},o,{ref:hd(t,a.triggerRef),onPointerDown:Re(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:Re(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})))}),NL=e=>{const{__scopeDropdownMenu:t,...n}=e,r=sn(t);return f.createElement(fL,ce({},r,n))},kL="DropdownMenuContent",AL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=J8(kL,n),a=sn(n),i=f.useRef(!1);return f.createElement(pL,ce({id:o.contentId,"aria-labelledby":o.triggerId},a,r,{ref:t,onCloseAutoFocus:Re(e.onCloseAutoFocus,s=>{var c;i.current||(c=o.triggerRef.current)===null||c===void 0||c.focus(),i.current=!1,s.preventDefault()}),onInteractOutside:Re(e.onInteractOutside,s=>{const c=s.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!o.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),DL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(hL,ce({},o,r,{ref:t}))}),PL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(mL,ce({},o,r,{ref:t}))}),IL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(gL,ce({},o,r,{ref:t}))}),ML=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(yL,ce({},o,r,{ref:t}))}),OL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(vL,ce({},o,r,{ref:t}))}),LL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(xL,ce({},o,r,{ref:t}))}),FL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(_L,ce({},o,r,{ref:t}))}),zL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(wL,ce({},o,r,{ref:t}))}),qL=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=sn(t),[s=!1,c]=Wr({prop:r,defaultProp:a,onChange:o});return f.createElement(bL,ce({},i,{open:s,onOpenChange:c}),n)},BL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(CL,ce({},o,r,{ref:t}))}),VL=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return f.createElement(SL,ce({},o,r,{ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),HL=$L,UL=TL,e6=NL,GL=AL,WL=DL,KL=PL,YL=IL,XL=ML,ZL=OL,QL=LL,t6=FL,JL=zL,eF=qL,tF=BL,nF=VL,rF=["1","2","3"],oF=["vertical","horizontal","both"],pp={size:{type:"enum",values:rF,default:"1",responsive:!0},radius:Cl,scrollbars:{type:"enum",values:oF,default:"both"}},Xt=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,style:a,type:i,scrollHideDelay:s=i!=="scroll"?0:void 0,dir:c,size:u=pp.size.default,radius:d=pp.radius.default,scrollbars:p=pp.scrollbars.default,...m}=n;return f.createElement(e8,{type:i,scrollHideDelay:s,className:qe("rt-ScrollAreaRoot",o,zt(r)),style:a},f.createElement(t8,{...m,ref:t,className:"rt-ScrollAreaViewport"}),f.createElement("div",{className:"rt-ScrollAreaViewportFocusRing"}),p!=="vertical"?f.createElement(jy,{"data-radius":d,orientation:"horizontal",className:qe("rt-ScrollAreaScrollbar",$e(u,"rt-r-size"))},f.createElement(Ey,{className:"rt-ScrollAreaThumb"})):null,p!=="horizontal"?f.createElement(jy,{"data-radius":d,orientation:"vertical",className:qe("rt-ScrollAreaScrollbar",$e(u,"rt-r-size"))},f.createElement(Ey,{className:"rt-ScrollAreaThumb"})):null,p==="both"?f.createElement(kM,{className:"rt-ScrollAreaCorner"}):null)});Xt.displayName="ScrollArea";const aF=["1","2"],iF=["solid","soft"],hp={size:{type:"enum",values:aF,default:"2",responsive:!0},variant:{type:"enum",values:iF,default:"solid"},color:xn,highContrast:qo},n6={color:xn,shortcut:{type:"string",default:void 0}},r6=e=>f.createElement(HL,{...e});r6.displayName="DropdownMenuRoot";const o6=f.forwardRef((e,t)=>f.createElement(UL,{...e,ref:t,asChild:!0}));o6.displayName="DropdownMenuTrigger";const a6=f.createContext({}),i6=f.forwardRef((e,t)=>{const n=u4(),{className:r,children:o,size:a=hp.size.default,variant:i=hp.variant.default,highContrast:s=hp.highContrast.default,color:c=n6.color.default,container:u,forceMount:d,...p}=e,m=c??n.accentColor;return f.createElement(e6,{container:u,forceMount:d},f.createElement(wa,{asChild:!0},f.createElement(GL,{"data-accent-color":m,align:"start",sideOffset:4,collisionPadding:10,...p,ref:t,className:qe("rt-PopperContent","rt-BaseMenuContent","rt-DropdownMenuContent",r,$e(a,"rt-r-size"),`rt-variant-${i}`,{"rt-high-contrast":s})},f.createElement(Xt,{type:"auto"},f.createElement("div",{className:qe("rt-BaseMenuViewport","rt-DropdownMenuViewport")},f.createElement(a6.Provider,{value:f.useMemo(()=>({size:a,variant:i,color:m,highContrast:s}),[a,i,m,s])},o))))))});i6.displayName="DropdownMenuContent";const s6=f.forwardRef((e,t)=>f.createElement(KL,{...e,ref:t,className:qe("rt-BaseMenuLabel","rt-DropdownMenuLabel",e.className)}));s6.displayName="DropdownMenuLabel";const l6=f.forwardRef((e,t)=>{const{className:n,children:r,color:o=n6.color.default,shortcut:a,...i}=e;return f.createElement(YL,{"data-accent-color":o,...i,ref:t,className:qe("rt-reset","rt-BaseMenuItem","rt-DropdownMenuItem",n)},f.createElement(Pi,null,r),a&&f.createElement("div",{className:"rt-BaseMenuShortcut rt-DropdownMenuShortcut"},a))});l6.displayName="DropdownMenuItem";const c6=f.forwardRef((e,t)=>f.createElement(WL,{...e,ref:t,className:qe("rt-BaseMenuGroup","rt-DropdownMenuGroup",e.className)}));c6.displayName="DropdownMenuGroup";const u6=f.forwardRef((e,t)=>f.createElement(ZL,{...e,ref:t,className:qe("rt-BaseMenuRadioGroup","rt-DropdownMenuRadioGroup",e.className)}));u6.displayName="DropdownMenuRadioGroup";const d6=f.forwardRef((e,t)=>{const{children:n,className:r,...o}=e;return f.createElement(QL,{...o,ref:t,className:qe("rt-BaseMenuItem","rt-BaseMenuRadioItem","rt-DropdownMenuItem","rt-DropdownMenuRadioItem",r)},f.createElement(Pi,null,n),f.createElement(t6,{className:"rt-BaseMenuItemIndicator rt-DropdownMenuItemIndicator"},f.createElement(Sl,{className:"rt-BaseMenuItemIndicatorIcon rt-DropdownMenuItemIndicatorIcon"})))});d6.displayName="DropdownMenuRadioItem";const f6=f.forwardRef((e,t)=>{const{children:n,className:r,shortcut:o,...a}=e;return f.createElement(XL,{...a,ref:t,className:qe("rt-BaseMenuItem","rt-BaseMenuCheckboxItem","rt-DropdownMenuItem","rt-DropdownMenuCheckboxItem",r)},f.createElement(Pi,null,n),f.createElement(t6,{className:"rt-BaseMenuItemIndicator rt-DropdownMenuItemIndicator"},f.createElement(Sl,{className:"rt-BaseMenuItemIndicatorIcon rt-ContextMenuItemIndicatorIcon"})),o&&f.createElement("div",{className:"rt-BaseMenuShortcut rt-DropdownMenuShortcut"},o))});f6.displayName="DropdownMenuCheckboxItem";const p6=e=>f.createElement(eF,{...e});p6.displayName="DropdownMenuSub";const h6=f.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return f.createElement(tF,{...o,ref:t,className:qe("rt-BaseMenuItem","rt-BaseMenuSubTrigger","rt-DropdownMenuItem","rt-DropdownMenuSubTrigger",n)},f.createElement(Pi,null,r),f.createElement("div",{className:"rt-BaseMenuShortcut rt-DropdownMenuShortcut"},f.createElement(v4,{className:"rt-BaseMenuSubTriggerIcon rt-DropdownMenuSubtriggerIcon"})))});h6.displayName="DropdownMenuSubTrigger";const m6=f.forwardRef((e,t)=>{const{className:n,children:r,container:o,forceMount:a,...i}=e,{size:s,variant:c,color:u,highContrast:d}=f.useContext(a6);return f.createElement(e6,{container:o,forceMount:a},f.createElement(wa,{asChild:!0},f.createElement(nF,{"data-accent-color":u,alignOffset:-Number(s)*4,sideOffset:1,collisionPadding:10,...i,ref:t,className:qe("rt-PopperContent","rt-BaseMenuContent","rt-BaseMenuSubContent","rt-DropdownMenuContent","rt-DropdownMenuSubContent",n,$e(s,"rt-r-size"),`rt-variant-${c}`,{"rt-high-contrast":d})},f.createElement(Xt,{type:"auto"},f.createElement("div",{className:qe("rt-BaseMenuViewport","rt-DropdownMenuViewport")},r)))))});m6.displayName="DropdownMenuSubContent";const g6=f.forwardRef((e,t)=>f.createElement(JL,{...e,ref:t,className:qe("rt-BaseMenuSeparator","rt-DropdownMenuSeparator",e.className)}));g6.displayName="DropdownMenuSeparator";const Le=Object.assign({},{Root:r6,Trigger:o6,Content:i6,Label:s6,Item:l6,Group:c6,RadioGroup:u6,RadioItem:d6,CheckboxItem:f6,Sub:p6,SubTrigger:h6,SubContent:m6,Separator:g6}),sF=["1","2"],lF=["solid","soft","surface","outline"],is={size:{type:"enum",values:sF,default:"1",responsive:!0},variant:{type:"enum",values:lF,default:"soft"},color:{...xn,default:void 0},highContrast:qo,radius:Cl},we=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,size:a=is.size.default,variant:i=is.variant.default,color:s=is.color.default,highContrast:c=is.highContrast.default,radius:u=is.radius.default,...d}=n;return f.createElement("span",{"data-accent-color":s,"data-radius":u,...d,ref:t,className:qe("rt-Badge",o,$e(a,"rt-r-size"),`rt-variant-${i}`,{"rt-high-contrast":c},zt(r))})});we.displayName="Badge";const cF=["1","2","3","4"],uF=["classic","solid","soft","surface","outline","ghost"],ss={size:{type:"enum",values:cF,default:"2",responsive:!0},variant:{type:"enum",values:uF,default:"solid"},color:xn,highContrast:qo,radius:Cl},Ox=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,asChild:a=!1,size:i=ss.size.default,variant:s=ss.variant.default,color:c=ss.color.default,highContrast:u=ss.highContrast.default,radius:d=ss.radius.default,...p}=n,m=a?nn:"button";return f.createElement(m,{"data-disabled":p.disabled||void 0,"data-accent-color":c,"data-radius":d,...p,ref:t,className:qe("rt-reset","rt-BaseButton",o,$e(i,"rt-r-size"),`rt-variant-${s}`,{"rt-high-contrast":u},zt(r))})});Ox.displayName="BaseButton";const xe=f.forwardRef((e,t)=>f.createElement(Ox,{...e,ref:t,className:qe("rt-Button",e.className)}));xe.displayName="Button";const dF=["1","2","3","4","5"],fF=["surface","classic","ghost"],mb={size:{type:"enum",values:dF,default:"1",responsive:!0},variant:{type:"enum",values:fF,default:"surface"}},Je=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{asChild:o,children:a,className:i,size:s=mb.size.default,variant:c=mb.variant.default,...u}=n,d=o?nn:"div";function p(){const m=f.Children.only(a);return f.cloneElement(m,{children:f.createElement("div",{className:"rt-CardInner"},m.props.children)})}return f.createElement(d,{ref:t,...u,className:qe("rt-reset","rt-Card",i,$e(s,"rt-r-size"),`rt-variant-${c}`,zt(r))},o?p():f.createElement("div",{className:"rt-CardInner"},a))});Je.displayName="Card";const jn=f.forwardRef((e,t)=>f.createElement(Ox,{...e,ref:t,className:qe("rt-IconButton",e.className)}));jn.displayName="IconButton";const Ny="horizontal",pF=["horizontal","vertical"],y6=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=Ny,...o}=e,a=v6(r)?r:Ny,s=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return f.createElement(He.div,ce({"data-orientation":a},s,o,{ref:t}))});y6.propTypes={orientation(e,t,n){const r=e[t],o=String(r);return r&&!v6(r)?new Error(hF(o,n)):null}};function hF(e,t){return`Invalid prop \`orientation\` of value \`${e}\` supplied to \`${t}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${Ny}\`.`}function v6(e){return pF.includes(e)}const mF=y6,gF=["1","2","3","4"],gb={size:{type:"enum",values:gF,default:"1",responsive:!0},color:{...xn,default:"gray"}},ar=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,size:a=gb.size.default,color:i=gb.color.default,...s}=n;return f.createElement(mF,{"data-accent-color":i,...s,ref:t,className:qe("rt-Separator",o,$e(a,"rt-r-size"),zt(r))})});ar.displayName="Separator";const yF=["1","2","3"],vF=["surface","ghost"],yb={size:{type:"enum",values:yF,default:"2",responsive:!0},variant:{type:"enum",values:vF,default:"ghost"}},xF=["start","center","end","baseline"],_F={align:{type:"enum",values:xF,default:void 0,responsive:!0}},wF=["start","center","end"],vb={justify:{type:"enum",values:wF,default:void 0,responsive:!0},width:{type:"string | number",default:void 0}},x6=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,children:a,size:i=yb.size.default,variant:s=yb.variant.default,...c}=n;return f.createElement("div",{ref:t,className:qe("rt-TableRoot",o,`rt-variant-${s}`,$e(i,"rt-r-size"),zt(r)),...c},f.createElement(Xt,null,f.createElement("table",{className:"rt-TableRootTable"},a)))});x6.displayName="Table";const _6=f.forwardRef((e,t)=>f.createElement("thead",{...e,ref:t,className:qe("rt-TableHeader",e.className)}));_6.displayName="TableHeader";const w6=f.forwardRef((e,t)=>f.createElement("tbody",{...e,ref:t,className:qe("rt-TableBody",e.className)}));w6.displayName="TableBody";const b6=f.forwardRef((e,t)=>{const{className:n,align:r=_F.align.default,...o}=e;return f.createElement("tr",{...o,ref:t,className:qe("rt-TableRow",n,$e(r,"rt-r-va",{baseline:"baseline",start:"top",center:"middle",end:"bottom"}))})});b6.displayName="TableRow";const Ed=f.forwardRef((e,t)=>{const{rest:n,...r}=fx(e),{tag:o="td",className:a,style:i,justify:s=vb.justify.default,width:c=vb.width.default,...u}=n;return f.createElement(o,{...u,ref:t,className:qe("rt-TableCell",a,px(r),$e(s,"rt-r-ta",{start:"left",center:"center",end:"right"})),style:{width:c,...i}})});Ed.displayName="TableCellImpl";const C6=f.forwardRef((e,t)=>f.createElement(Ed,{...e,tag:"td",ref:t}));C6.displayName="TableCell";const S6=f.forwardRef((e,t)=>f.createElement(Ed,{scope:"col",...e,tag:"th",ref:t,className:qe("rt-TableColumnHeaderCell",e.className)}));S6.displayName="TableColumnHeaderCell";const j6=f.forwardRef((e,t)=>f.createElement(Ed,{scope:"row",...e,tag:"th",ref:t,className:qe("rt-TableRowHeaderCell",e.className)}));j6.displayName="TableRowHeaderCell";const St=Object.assign({},{Root:x6,Header:_6,Body:w6,Row:b6,Cell:C6,ColumnHeaderCell:S6,RowHeaderCell:j6}),E6="Tabs",[bF,Tee]=vn(E6,[Fi]),$6=Fi(),[CF,Lx]=bF(E6),SF=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...u}=e,d=Li(s),[p,m]=Wr({prop:r,onChange:o,defaultProp:a});return f.createElement(CF,{scope:n,baseId:zn(),value:p,onValueChange:m,orientation:i,dir:d,activationMode:c},f.createElement(He.div,ce({dir:d,"data-orientation":i},u,{ref:t})))}),jF="TabsList",EF=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=Lx(jF,n),i=$6(n);return f.createElement(xx,ce({asChild:!0},i,{orientation:a.orientation,dir:a.dir,loop:r}),f.createElement(He.div,ce({role:"tablist","aria-orientation":a.orientation},o,{ref:t})))}),$F="TabsTrigger",RF=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=Lx($F,n),s=$6(n),c=R6(i.baseId,r),u=T6(i.baseId,r),d=r===i.value;return f.createElement(_x,ce({asChild:!0},s,{focusable:!o,active:d}),f.createElement(He.button,ce({type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c},a,{ref:t,onMouseDown:Re(e.onMouseDown,p=>{!o&&p.button===0&&p.ctrlKey===!1?i.onValueChange(r):p.preventDefault()}),onKeyDown:Re(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&i.onValueChange(r)}),onFocus:Re(e.onFocus,()=>{const p=i.activationMode!=="manual";!d&&!o&&p&&i.onValueChange(r)})})))}),TF="TabsContent",NF=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=Lx(TF,n),c=R6(s.baseId,r),u=T6(s.baseId,r),d=r===s.value,p=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(m)},[]),f.createElement(an,{present:o||d},({present:m})=>f.createElement(He.div,ce({"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0},i,{ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0}}),m&&a))});function R6(e,t){return`${e}-trigger-${t}`}function T6(e,t){return`${e}-content-${t}`}const kF=SF,AF=EF,DF=RF,PF=NF,IF=["1","2"],MF={size:{type:"enum",values:IF,default:"2",responsive:!0}},N6=f.forwardRef((e,t)=>{const{rest:n,...r}=It(e),{className:o,...a}=n;return f.createElement(kF,{...a,ref:t,className:qe("rt-TabsRoot",o,zt(r))})});N6.displayName="TabsRoot";const k6=f.forwardRef((e,t)=>{const{className:n,size:r=MF.size.default,...o}=e;return f.createElement(AF,{...o,ref:t,className:qe("rt-TabsList",n,$e(r,"rt-r-size"))})});k6.displayName="TabsList";const A6=f.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return f.createElement(DF,{...o,ref:t,className:qe("rt-reset","rt-TabsTrigger",n)},f.createElement("span",{className:"rt-TabsTriggerInner"},r),f.createElement("span",{className:"rt-TabsTriggerInnerHidden"},r))});A6.displayName="TabsTrigger";const D6=f.forwardRef((e,t)=>f.createElement(PF,{...e,ref:t,className:qe("rt-TabsContent",e.className)}));D6.displayName="TabsContent";const Qe=Object.assign({},{Root:N6,List:k6,Trigger:A6,Content:D6});var OF={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const xb=e=>{let t;const n=new Set,r=(d,p)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,h))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(OF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},P6=e=>e?xb(e):xb;var I6={exports:{}},M6={},O6={exports:{}},L6={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ji=f;function LF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FF=typeof Object.is=="function"?Object.is:LF,zF=ji.useState,qF=ji.useEffect,BF=ji.useLayoutEffect,VF=ji.useDebugValue;function HF(e,t){var n=t(),r=zF({inst:{value:n,getSnapshot:t}}),o=r[0].inst,a=r[1];return BF(function(){o.value=n,o.getSnapshot=t,mp(o)&&a({inst:o})},[e,n,t]),qF(function(){return mp(o)&&a({inst:o}),e(function(){mp(o)&&a({inst:o})})},[e]),VF(n),n}function mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!FF(e,n)}catch{return!0}}function UF(e,t){return t()}var GF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?UF:HF;L6.useSyncExternalStore=ji.useSyncExternalStore!==void 0?ji.useSyncExternalStore:GF;O6.exports=L6;var WF=O6.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=f,KF=WF;function YF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XF=typeof Object.is=="function"?Object.is:YF,ZF=KF.useSyncExternalStore,QF=$d.useRef,JF=$d.useEffect,ez=$d.useMemo,tz=$d.useDebugValue;M6.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var a=QF(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=ez(function(){function c(h){if(!u){if(u=!0,d=h,h=r(h),o!==void 0&&i.hasValue){var g=i.value;if(o(g,h))return p=g}return p=h}if(g=p,XF(d,h))return g;var y=r(h);return o!==void 0&&o(g,y)?g:(d=h,p=y)}var u=!1,d,p,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,o]);var s=ZF(e,a[0],a[1]);return JF(function(){i.hasValue=!0,i.value=s},[s]),tz(s),s};I6.exports=M6;var nz=I6.exports;const F6=gl(nz);var z6={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:rz}=re,{useSyncExternalStoreWithSelector:oz}=F6;let _b=!1;const az=e=>e;function iz(e,t=az,n){(z6?"production":void 0)!=="production"&&n&&!_b&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),_b=!0);const r=oz(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rz(r),r}const wb=e=>{(z6?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?P6(e):e,n=(r,o)=>iz(t,r,o);return Object.assign(n,t),n},sz=e=>e?wb(e):wb;function q6(e,t){return function(){return e.apply(t,arguments)}}const{toString:lz}=Object.prototype,{getPrototypeOf:Fx}=Object,Rd=(e=>t=>{const n=lz.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),br=e=>(e=e.toLowerCase(),t=>Rd(t)===e),Td=e=>t=>typeof t===e,{isArray:qi}=Array,al=Td("undefined");function cz(e){return e!==null&&!al(e)&&e.constructor!==null&&!al(e.constructor)&&qn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const B6=br("ArrayBuffer");function uz(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&B6(e.buffer),t}const dz=Td("string"),qn=Td("function"),V6=Td("number"),Nd=e=>e!==null&&typeof e=="object",fz=e=>e===!0||e===!1,Zc=e=>{if(Rd(e)!=="object")return!1;const t=Fx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},pz=br("Date"),hz=br("File"),mz=br("Blob"),gz=br("FileList"),yz=e=>Nd(e)&&qn(e.pipe),vz=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qn(e.append)&&((t=Rd(e))==="formdata"||t==="object"&&qn(e.toString)&&e.toString()==="[object FormData]"))},xz=br("URLSearchParams"),_z=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),qi(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let s;for(r=0;r<i;r++)s=a[r],t.call(null,e[s],s,e)}}function H6(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const U6=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,G6=e=>!al(e)&&e!==U6;function ky(){const{caseless:e}=G6(this)&&this||{},t={},n=(r,o)=>{const a=e&&H6(t,o)||o;Zc(t[a])&&Zc(r)?t[a]=ky(t[a],r):Zc(r)?t[a]=ky({},r):qi(r)?t[a]=r.slice():t[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Rl(arguments[r],n);return t}const wz=(e,t,n,{allOwnKeys:r}={})=>(Rl(t,(o,a)=>{n&&qn(o)?e[a]=q6(o,n):e[a]=o},{allOwnKeys:r}),e),bz=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Cz=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Sz=(e,t,n,r)=>{let o,a,i;const s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)i=o[a],(!r||r(i,e,t))&&!s[i]&&(t[i]=e[i],s[i]=!0);e=n!==!1&&Fx(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},jz=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ez=e=>{if(!e)return null;if(qi(e))return e;let t=e.length;if(!V6(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$z=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fx(Uint8Array)),Rz=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},Tz=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Nz=br("HTMLFormElement"),kz=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),bb=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Az=br("RegExp"),W6=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Rl(n,(o,a)=>{let i;(i=t(o,a,e))!==!1&&(r[a]=i||o)}),Object.defineProperties(e,r)},Dz=e=>{W6(e,(t,n)=>{if(qn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(qn(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Pz=(e,t)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return qi(e)?r(e):r(String(e).split(t)),n},Iz=()=>{},Mz=(e,t)=>(e=+e,Number.isFinite(e)?e:t),gp="abcdefghijklmnopqrstuvwxyz",Cb="0123456789",K6={DIGIT:Cb,ALPHA:gp,ALPHA_DIGIT:gp+gp.toUpperCase()+Cb},Oz=(e=16,t=K6.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Lz(e){return!!(e&&qn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Fz=e=>{const t=new Array(10),n=(r,o)=>{if(Nd(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const a=qi(r)?[]:{};return Rl(r,(i,s)=>{const c=n(i,o+1);!al(c)&&(a[s]=c)}),t[o]=void 0,a}}return r};return n(e,0)},zz=br("AsyncFunction"),qz=e=>e&&(Nd(e)||qn(e))&&qn(e.then)&&qn(e.catch),de={isArray:qi,isArrayBuffer:B6,isBuffer:cz,isFormData:vz,isArrayBufferView:uz,isString:dz,isNumber:V6,isBoolean:fz,isObject:Nd,isPlainObject:Zc,isUndefined:al,isDate:pz,isFile:hz,isBlob:mz,isRegExp:Az,isFunction:qn,isStream:yz,isURLSearchParams:xz,isTypedArray:$z,isFileList:gz,forEach:Rl,merge:ky,extend:wz,trim:_z,stripBOM:bz,inherits:Cz,toFlatObject:Sz,kindOf:Rd,kindOfTest:br,endsWith:jz,toArray:Ez,forEachEntry:Rz,matchAll:Tz,isHTMLForm:Nz,hasOwnProperty:bb,hasOwnProp:bb,reduceDescriptors:W6,freezeMethods:Dz,toObjectSet:Pz,toCamelCase:kz,noop:Iz,toFiniteNumber:Mz,findKey:H6,global:U6,isContextDefined:G6,ALPHABET:K6,generateString:Oz,isSpecCompliantForm:Lz,toJSONObject:Fz,isAsyncFn:zz,isThenable:qz};function nt(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}de.inherits(nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Y6=nt.prototype,X6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{X6[e]={value:e}});Object.defineProperties(nt,X6);Object.defineProperty(Y6,"isAxiosError",{value:!0});nt.from=(e,t,n,r,o,a)=>{const i=Object.create(Y6);return de.toFlatObject(e,i,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),nt.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const Bz=null;function Ay(e){return de.isPlainObject(e)||de.isArray(e)}function Z6(e){return de.endsWith(e,"[]")?e.slice(0,-2):e}function Sb(e,t,n){return e?e.concat(t).map(function(o,a){return o=Z6(o),!n&&a?"["+o+"]":o}).join(n?".":""):t}function Vz(e){return de.isArray(e)&&!e.some(Ay)}const Hz=de.toFlatObject(de,{},null,function(t){return/^is[A-Z]/.test(t)});function kd(e,t,n){if(!de.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=de.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!de.isUndefined(w[y])});const r=n.metaTokens,o=n.visitor||d,a=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(t);if(!de.isFunction(o))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(de.isDate(g))return g.toISOString();if(!c&&de.isBlob(g))throw new nt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(g)||de.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,w){let v=g;if(g&&!w&&typeof g=="object"){if(de.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(de.isArray(g)&&Vz(g)||(de.isFileList(g)||de.endsWith(y,"[]"))&&(v=de.toArray(g)))return y=Z6(y),v.forEach(function(_,b){!(de.isUndefined(_)||_===null)&&t.append(i===!0?Sb([y],b,a):i===null?y:y+"[]",u(_))}),!1}return Ay(g)?!0:(t.append(Sb(w,y,a),u(g)),!1)}const p=[],m=Object.assign(Hz,{defaultVisitor:d,convertValue:u,isVisitable:Ay});function h(g,y){if(!de.isUndefined(g)){if(p.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(g),de.forEach(g,function(v,x){(!(de.isUndefined(v)||v===null)&&o.call(t,v,de.isString(x)?x.trim():x,y,m))===!0&&h(v,y?y.concat(x):[x])}),p.pop()}}if(!de.isObject(e))throw new TypeError("data must be an object");return h(e),t}function jb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function zx(e,t){this._pairs=[],e&&kd(e,this,t)}const Q6=zx.prototype;Q6.append=function(t,n){this._pairs.push([t,n])};Q6.toString=function(t){const n=t?function(r){return t.call(this,r,jb)}:jb;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Uz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function J6(e,t,n){if(!t)return e;const r=n&&n.encode||Uz,o=n&&n.serialize;let a;if(o?a=o(t,n):a=de.isURLSearchParams(t)?t.toString():new zx(t,n).toString(r),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Eb{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){de.forEach(this.handlers,function(r){r!==null&&t(r)})}}const e7={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gz=typeof URLSearchParams<"u"?URLSearchParams:zx,Wz=typeof FormData<"u"?FormData:null,Kz=typeof Blob<"u"?Blob:null,Yz={isBrowser:!0,classes:{URLSearchParams:Gz,FormData:Wz,Blob:Kz},protocols:["http","https","file","blob","url","data"]},t7=typeof window<"u"&&typeof document<"u",Xz=(e=>t7&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Zz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t7,hasStandardBrowserEnv:Xz,hasStandardBrowserWebWorkerEnv:Zz},Symbol.toStringTag,{value:"Module"})),gr={...Qz,...Yz};function Jz(e,t){return kd(e,new gr.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,a){return gr.isNode&&de.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function eq(e){return de.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tq(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}function n7(e){function t(n,r,o,a){let i=n[a++];if(i==="__proto__")return!0;const s=Number.isFinite(+i),c=a>=n.length;return i=!i&&de.isArray(o)?o.length:i,c?(de.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!s):((!o[i]||!de.isObject(o[i]))&&(o[i]=[]),t(n,r,o[i],a)&&de.isArray(o[i])&&(o[i]=tq(o[i])),!s)}if(de.isFormData(e)&&de.isFunction(e.entries)){const n={};return de.forEachEntry(e,(r,o)=>{t(eq(r),o,n,0)}),n}return null}function nq(e,t,n){if(de.isString(e))try{return(t||JSON.parse)(e),de.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const qx={transitional:e7,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=de.isObject(t);if(a&&de.isHTMLForm(t)&&(t=new FormData(t)),de.isFormData(t))return o?JSON.stringify(n7(t)):t;if(de.isArrayBuffer(t)||de.isBuffer(t)||de.isStream(t)||de.isFile(t)||de.isBlob(t))return t;if(de.isArrayBufferView(t))return t.buffer;if(de.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Jz(t,this.formSerializer).toString();if((s=de.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return kd(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),nq(t)):t}],transformResponse:[function(t){const n=this.transitional||qx.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&de.isString(t)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?nt.from(s,nt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gr.classes.FormData,Blob:gr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],e=>{qx.headers[e]={}});const Bx=qx,rq=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oq=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||t[n]&&rq[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$b=Symbol("internals");function ls(e){return e&&String(e).trim().toLowerCase()}function Qc(e){return e===!1||e==null?e:de.isArray(e)?e.map(Qc):String(e)}function aq(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const iq=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function yp(e,t,n,r,o){if(de.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!de.isString(t)){if(de.isString(r))return t.indexOf(r)!==-1;if(de.isRegExp(r))return r.test(t)}}function sq(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function lq(e,t){const n=de.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,a,i){return this[r].call(this,t,o,a,i)},configurable:!0})})}class Ad{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function a(s,c,u){const d=ls(c);if(!d)throw new Error("header name must be a non-empty string");const p=de.findKey(o,d);(!p||o[p]===void 0||u===!0||u===void 0&&o[p]!==!1)&&(o[p||c]=Qc(s))}const i=(s,c)=>de.forEach(s,(u,d)=>a(u,d,c));return de.isPlainObject(t)||t instanceof this.constructor?i(t,n):de.isString(t)&&(t=t.trim())&&!iq(t)?i(oq(t),n):t!=null&&a(n,t,r),this}get(t,n){if(t=ls(t),t){const r=de.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return aq(o);if(de.isFunction(n))return n.call(this,o,r);if(de.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ls(t),t){const r=de.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||yp(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function a(i){if(i=ls(i),i){const s=de.findKey(r,i);s&&(!n||yp(r,r[s],s,n))&&(delete r[s],o=!0)}}return de.isArray(t)?t.forEach(a):a(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!t||yp(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const n=this,r={};return de.forEach(this,(o,a)=>{const i=de.findKey(r,a);if(i){n[i]=Qc(o),delete n[a];return}const s=t?sq(a):String(a).trim();s!==a&&delete n[a],n[s]=Qc(o),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return de.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&de.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[$b]=this[$b]={accessors:{}}).accessors,o=this.prototype;function a(i){const s=ls(i);r[s]||(lq(o,i),r[s]=!0)}return de.isArray(t)?t.forEach(a):a(t),this}}Ad.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(Ad.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});de.freezeMethods(Ad);const Lr=Ad;function vp(e,t){const n=this||Bx,r=t||n,o=Lr.from(r.headers);let a=r.data;return de.forEach(e,function(s){a=s.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function r7(e){return!!(e&&e.__CANCEL__)}function Tl(e,t,n){nt.call(this,e??"canceled",nt.ERR_CANCELED,t,n),this.name="CanceledError"}de.inherits(Tl,nt,{__CANCEL__:!0});function cq(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new nt("Request failed with status code "+n.status,[nt.ERR_BAD_REQUEST,nt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const uq=gr.hasStandardBrowserEnv?{write(e,t,n,r,o,a){const i=[e+"="+encodeURIComponent(t)];de.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),de.isString(r)&&i.push("path="+r),de.isString(o)&&i.push("domain="+o),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dq(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fq(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function o7(e,t){return e&&!dq(t)?fq(e,t):t}const pq=gr.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(a){let i=a;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(i){const s=de.isString(i)?o(i):i;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function hq(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function mq(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,a=0,i;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=r[a];i||(i=u),n[o]=c,r[o]=u;let p=a,m=0;for(;p!==o;)m+=n[p++],p=p%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),u-i<t)return;const h=d&&u-d;return h?Math.round(m*1e3/h):void 0}}function Rb(e,t){let n=0;const r=mq(50,250);return o=>{const a=o.loaded,i=o.lengthComputable?o.total:void 0,s=a-n,c=r(s),u=a<=i;n=a;const d={loaded:a,total:i,progress:i?a/i:void 0,bytes:s,rate:c||void 0,estimated:c&&i&&u?(i-a)/c:void 0,event:o};d[t?"download":"upload"]=!0,e(d)}}const gq=typeof XMLHttpRequest<"u",yq=gq&&function(e){return new Promise(function(n,r){let o=e.data;const a=Lr.from(e.headers).normalize();let{responseType:i,withXSRFToken:s}=e,c;function u(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let d;if(de.isFormData(o)){if(gr.hasStandardBrowserEnv||gr.hasStandardBrowserWebWorkerEnv)a.setContentType(!1);else if((d=a.getContentType())!==!1){const[y,...w]=d?d.split(";").map(v=>v.trim()).filter(Boolean):[];a.setContentType([y||"multipart/form-data",...w].join("; "))}}let p=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(y+":"+w))}const m=o7(e.baseURL,e.url);p.open(e.method.toUpperCase(),J6(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function h(){if(!p)return;const y=Lr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),v={data:!i||i==="text"||i==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:y,config:e,request:p};cq(function(_){n(_),u()},function(_){r(_),u()},v),p=null}if("onloadend"in p?p.onloadend=h:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(h)},p.onabort=function(){p&&(r(new nt("Request aborted",nt.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new nt("Network Error",nt.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let w=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||e7;e.timeoutErrorMessage&&(w=e.timeoutErrorMessage),r(new nt(w,v.clarifyTimeoutError?nt.ETIMEDOUT:nt.ECONNABORTED,e,p)),p=null},gr.hasStandardBrowserEnv&&(s&&de.isFunction(s)&&(s=s(e)),s||s!==!1&&pq(m))){const y=e.xsrfHeaderName&&e.xsrfCookieName&&uq.read(e.xsrfCookieName);y&&a.set(e.xsrfHeaderName,y)}o===void 0&&a.setContentType(null),"setRequestHeader"in p&&de.forEach(a.toJSON(),function(w,v){p.setRequestHeader(v,w)}),de.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),i&&i!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",Rb(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Rb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=y=>{p&&(r(!y||y.type?new Tl(null,e,p):y),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const g=hq(m);if(g&&gr.protocols.indexOf(g)===-1){r(new nt("Unsupported protocol "+g+":",nt.ERR_BAD_REQUEST,e));return}p.send(o||null)})},Dy={http:Bz,xhr:yq};de.forEach(Dy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Tb=e=>`- ${e}`,vq=e=>de.isFunction(e)||e===null||e===!1,a7={getAdapter:e=>{e=de.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let a=0;a<t;a++){n=e[a];let i;if(r=n,!vq(n)&&(r=Dy[(i=String(n)).toLowerCase()],r===void 0))throw new nt(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+a]=r}if(!r){const a=Object.entries(o).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?a.length>1?`since :
`+a.map(Tb).join(`
`):" "+Tb(a[0]):"as no adapter specified";throw new nt("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Dy};function xp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Tl(null,e)}function Nb(e){return xp(e),e.headers=Lr.from(e.headers),e.data=vp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),a7.getAdapter(e.adapter||Bx.adapter)(e).then(function(r){return xp(e),r.data=vp.call(e,e.transformResponse,r),r.headers=Lr.from(r.headers),r},function(r){return r7(r)||(xp(e),r&&r.response&&(r.response.data=vp.call(e,e.transformResponse,r.response),r.response.headers=Lr.from(r.response.headers))),Promise.reject(r)})}const kb=e=>e instanceof Lr?e.toJSON():e;function Ei(e,t){t=t||{};const n={};function r(u,d,p){return de.isPlainObject(u)&&de.isPlainObject(d)?de.merge.call({caseless:p},u,d):de.isPlainObject(d)?de.merge({},d):de.isArray(d)?d.slice():d}function o(u,d,p){if(de.isUndefined(d)){if(!de.isUndefined(u))return r(void 0,u,p)}else return r(u,d,p)}function a(u,d){if(!de.isUndefined(d))return r(void 0,d)}function i(u,d){if(de.isUndefined(d)){if(!de.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function s(u,d,p){if(p in t)return r(u,d);if(p in e)return r(void 0,u)}const c={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(u,d)=>o(kb(u),kb(d),!0)};return de.forEach(Object.keys(Object.assign({},e,t)),function(d){const p=c[d]||o,m=p(e[d],t[d],d);de.isUndefined(m)&&p!==s||(n[d]=m)}),n}const i7="1.6.7",Vx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vx[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ab={};Vx.transitional=function(t,n,r){function o(a,i){return"[Axios v"+i7+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,s)=>{if(t===!1)throw new nt(o(i," has been removed"+(n?" in "+n:"")),nt.ERR_DEPRECATED);return n&&!Ab[i]&&(Ab[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,i,s):!0}};function xq(e,t,n){if(typeof e!="object")throw new nt("options must be an object",nt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],i=t[a];if(i){const s=e[a],c=s===void 0||i(s,a,e);if(c!==!0)throw new nt("option "+a+" must be "+c,nt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new nt("Unknown option "+a,nt.ERR_BAD_OPTION)}}const Py={assertOptions:xq,validators:Vx},io=Py.validators;class Mu{constructor(t){this.defaults=t,this.interceptors={request:new Eb,response:new Eb}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ei(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&Py.assertOptions(r,{silentJSONParsing:io.transitional(io.boolean),forcedJSONParsing:io.transitional(io.boolean),clarifyTimeoutError:io.transitional(io.boolean)},!1),o!=null&&(de.isFunction(o)?n.paramsSerializer={serialize:o}:Py.assertOptions(o,{encode:io.function,serialize:io.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&de.merge(a.common,a[n.method]);a&&de.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),n.headers=Lr.concat(i,a);const s=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,s.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,p=0,m;if(!c){const g=[Nb.bind(this),void 0];for(g.unshift.apply(g,s),g.push.apply(g,u),m=g.length,d=Promise.resolve(n);p<m;)d=d.then(g[p++],g[p++]);return d}m=s.length;let h=n;for(p=0;p<m;){const g=s[p++],y=s[p++];try{h=g(h)}catch(w){y.call(this,w);break}}try{d=Nb.call(this,h)}catch(g){return Promise.reject(g)}for(p=0,m=u.length;p<m;)d=d.then(u[p++],u[p++]);return d}getUri(t){t=Ei(this.defaults,t);const n=o7(t.baseURL,t.url);return J6(n,t.params,t.paramsSerializer)}}de.forEach(["delete","get","head","options"],function(t){Mu.prototype[t]=function(n,r){return this.request(Ei(r||{},{method:t,url:n,data:(r||{}).data}))}});de.forEach(["post","put","patch"],function(t){function n(r){return function(a,i,s){return this.request(Ei(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Mu.prototype[t]=n(),Mu.prototype[t+"Form"]=n(!0)});const Jc=Mu;class Hx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(s=>{r.subscribe(s),a=s}).then(o);return i.cancel=function(){r.unsubscribe(a)},i},t(function(a,i,s){r.reason||(r.reason=new Tl(a,i,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Hx(function(o){t=o}),cancel:t}}}const _q=Hx;function wq(e){return function(n){return e.apply(null,n)}}function bq(e){return de.isObject(e)&&e.isAxiosError===!0}const Iy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iy).forEach(([e,t])=>{Iy[t]=e});const Cq=Iy;function s7(e){const t=new Jc(e),n=q6(Jc.prototype.request,t);return de.extend(n,Jc.prototype,t,{allOwnKeys:!0}),de.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return s7(Ei(e,o))},n}const Xe=s7(Bx);Xe.Axios=Jc;Xe.CanceledError=Tl;Xe.CancelToken=_q;Xe.isCancel=r7;Xe.VERSION=i7;Xe.toFormData=kd;Xe.AxiosError=nt;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=wq;Xe.isAxiosError=bq;Xe.mergeConfig=Ei;Xe.AxiosHeaders=Lr;Xe.formToJSON=e=>n7(de.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=a7.getAdapter;Xe.HttpStatusCode=Cq;Xe.default=Xe;var Sq={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ni={ERROR:0,WARN:1,INFO:2,DEBUG:3},jq=()=>{const e=Sq.VITE_LOG_LEVEL||"INFO";return ni[e.toUpperCase()]||ni.INFO},wc=jq();class Eq{constructor(t="App"){this.component=t}error(t,...n){wc>=ni.ERROR&&console.error(`❌ [${this.component}]`,t,...n)}warn(t,...n){wc>=ni.WARN&&console.warn(`⚠️ [${this.component}]`,t,...n)}info(t,...n){wc>=ni.INFO&&console.log(`ℹ️ [${this.component}]`,t,...n)}debug(t,...n){wc>=ni.DEBUG&&console.log(`🔍 [${this.component}]`,t,...n)}apiCall(t,n="GET"){this.debug(`API ${n}:`,t)}apiResponse(t){var n;this.debug("API Response:",{status:t.status,dataLength:(n=t.data)==null?void 0:n.length,dataType:typeof t.data})}stateChange(t,n){this.debug(`State change - ${t}:`,n)}}const l7=e=>new Eq(e);var $q={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function dt(){return typeof window<"u"&&window.location&&window.location.hostname.includes("databricksapps.com")?window.location.origin:$q.VITE_BACKEND_HOST||"http://localhost:8080"}const lt=()=>"xxxx-xxxx-yxxx-yxxx-xxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)}),bc=l7("DataModelingStore"),Rq=(e,t,n)=>{var a;if(!e.is_foreign_key||!e.foreign_key_reference)return!1;const r=t.find(i=>i.id===e.foreign_key_reference.referenced_table_id),o=(a=r==null?void 0:r.fields)==null?void 0:a.find(i=>i.id===e.foreign_key_reference.referenced_field_id);return e.name===(o==null?void 0:o.name)},Tq=(e,t,n,r,o)=>r.map(a=>a.id===n?{...a,fields:a.fields.map(i=>i.id===e.id?e:i)}:{...a,fields:a.fields.map(i=>{var s,c;if(i.is_foreign_key&&((s=i.foreign_key_reference)==null?void 0:s.referenced_table_id)===n&&((c=i.foreign_key_reference)==null?void 0:c.referenced_field_id)===e.id){const u=i.name===t.name;console.log(`🔄 Syncing ${u?"drag-and-drop":"manual"} FK field:`,i.name,"→ PK:",e.name),console.log("   📊 PK tags:",e.tags),console.log("   📊 FK tags (before):",i.tags);const d={...e.tags||{},...i.tags||{}};return console.log("   📊 Merged tags:",d),{...i,name:u?e.name:i.name,data_type:e.data_type,type_parameters:e.type_parameters,nullable:e.nullable,comment:e.comment,logical_name:i.logical_name||e.logical_name,tags:d,is_foreign_key:!0,foreign_key_reference:i.foreign_key_reference}}return i})}),My=e=>{const t=new WeakSet,n=r=>{if(r===null||typeof r!="object")return r;if(t.has(r))return null;try{if(r.constructor&&r.constructor.name){const o=r.constructor.name;if(o.startsWith("HTML")||o==="FiberNode"||o==="Element"||o==="Node")return null}}catch{return null}t.add(r);try{if(Array.isArray(r)){const a=r.map(n).filter(i=>i!==null);return t.delete(r),a}const o={};for(const a in r){if(a.startsWith("__react")||a.startsWith("_react")||a==="stateNode"||typeof r[a]=="function")continue;const i=n(r[a]);i!==null&&(o[a]=i)}return t.delete(r),o}catch{return t.delete(r),null}};return n(e)},La=e=>{const t=My(e);return t.map(n=>({...n,id:String(n.id),fields:n.fields.map(r=>{var a;let o={...r,id:String(r.id),type_parameters:(()=>{if(!r.type_parameters)return null;if(typeof r.type_parameters=="string")return r.type_parameters;if(typeof r.type_parameters=="object"&&Object.keys(r.type_parameters).length>0){const i=r.type_parameters;return i.precision!==void 0?i.scale!==void 0?`${i.precision},${i.scale}`:String(i.precision):JSON.stringify(i)}return null})()};if(r.is_foreign_key&&r.foreign_key_reference&&typeof r.foreign_key_reference=="string"&&r.foreign_key_reference.includes(".")){const[i,s]=r.foreign_key_reference.split("."),c=t.find(d=>d.name===i),u=(a=c==null?void 0:c.fields)==null?void 0:a.find(d=>d.name===s);c&&u&&(o.foreign_key_reference={referenced_table_id:c.id,referenced_field_id:u.id,constraint_name:`fk_${n.name}_${i}`,on_delete:"NO ACTION",on_update:"NO ACTION"})}return o}),created_at:(()=>{if(!n.created_at)return new Date().toISOString();if(typeof n.created_at=="string"){if(n.created_at.includes("GMT"))return new Date(n.created_at).toISOString();if(n.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/))return n.created_at}return new Date().toISOString()})(),updated_at:(()=>{if(!n.updated_at)return new Date().toISOString();if(typeof n.updated_at=="string"){if(n.updated_at.includes("GMT"))return new Date(n.updated_at).toISOString();if(n.updated_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/))return n.updated_at}return new Date().toISOString()})()}))},ct=sz((e,t)=>({currentProject:null,projectName:"",catalogName:"",schemaName:"",tables:[],metricViews:[],traditionalViews:[],relationships:[],metricRelationships:[],selectedTables:[],selectedMetricViews:[],selectedTraditionalViews:[],selectedRelationships:[],showTableDialog:!1,showFieldDialog:!1,showRelationshipDialog:!1,showMetricViewDialog:!1,showTraditionalViewDialog:!1,showFieldMappingDialog:!1,showImportDialog:!1,showProjectDialog:!1,showProjectStartupDialog:!0,projectStartupMode:"select",selectedTableForEditing:null,selectedFieldForEditing:null,selectedMetricViewForEditing:null,selectedTraditionalViewForEditing:null,editingTable:null,editingMetricView:null,editingTraditionalView:null,fieldMappingSourceTable:null,fieldMappingTargetMetricView:null,availableCatalogs:[],availableSchemas:[],availableTables:[],availableDatatypes:[],savedProjects:[],appState:{needs_project_selection:!0,has_existing_projects:!1,project_count:0},displayAlertDialog:!1,currentAlertDialogErrorType:null,errors:{loadCatalogs:null,loadSchemas:null,loadTables:null,importTables:null,saveProject:null,loadProject:null,generateDDL:null,applyChanges:null},isDragAndDropFK:(n,r)=>{const o=t();return Rq(n,o.tables,o.relationships)},getPKFieldForFK:n=>{var i;const r=t();if(!n.is_foreign_key||!n.foreign_key_reference)return null;const o=r.tables.find(s=>s.id===n.foreign_key_reference.referenced_table_id);return(i=o==null?void 0:o.fields)==null?void 0:i.find(s=>s.id===n.foreign_key_reference.referenced_field_id)},setCurrentProject:n=>e({currentProject:n}),setProjectMetadata:(n,r,o)=>{const a=t().currentProject;e({projectName:n,catalogName:r,schemaName:o,currentProject:a?{...a,catalog_name:r,schema_name:o}:null})},createNewProject:(n,r,o,a)=>{const i={id:lt(),name:n,description:r,catalog_name:o,schema_name:a,tables:[],relationships:[],version:"1.0",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),canvas_settings:{}};return e({currentProject:i,projectName:n,catalogName:o,schemaName:a,tables:[],relationships:[]}),i},addTable:n=>{const r={id:n.id||lt(),name:n.name,logical_name:n.logical_name,comment:n.comment,catalog_name:n.catalog_name,schema_name:n.schema_name,table_type:n.table_type||"MANAGED",file_format:n.file_format||"DELTA",cluster_by_auto:n.cluster_by_auto||!1,tags:n.tags||{},position_x:n.position_x||100,position_y:n.position_y||100,width:n.width||200,height:n.height||150,fields:n.fields||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return e(o=>({tables:[...o.tables,r],currentProject:o.currentProject?{...o.currentProject,tables:[...o.currentProject.tables,r],updated_at:new Date().toISOString()}:null})),r},updateTable:(n,r)=>{e(o=>{let a=o.tables.map(i=>i.id===n?{...i,...r,updated_at:new Date().toISOString()}:i);if(r.fields){a.find(s=>s.id===n);const i=o.tables.find(s=>s.id===n);r.fields.forEach(s=>{var u;const c=(u=i==null?void 0:i.fields)==null?void 0:u.find(d=>d.id===s.id);if(s.is_primary_key&&c){const d=JSON.stringify(c.tags||{}),p=JSON.stringify(s.tags||{}),m=d!==p;(c.data_type!==s.data_type||c.type_parameters!==s.type_parameters||c.nullable!==s.nullable||c.comment!==s.comment||c.logical_name!==s.logical_name||c.name!==s.name||m)&&(a.forEach(g=>{const y=g.fields.filter(w=>{var v,x;return w.is_foreign_key&&((v=w.foreign_key_reference)==null?void 0:v.referenced_table_id)===n&&((x=w.foreign_key_reference)==null?void 0:x.referenced_field_id)===s.id});if(y.length>0){const w=y.filter(x=>x.name===c.name),v=y.filter(x=>x.name!==c.name);console.log("🔄 Found FK fields to sync in table",g.name,":"),console.log("   📌 Drag-and-drop FKs (same name):",w.map(x=>x.name)),console.log("   🔗 Manual FKs (different names):",v.map(x=>x.name))}}),a=Tq(s,c,n,a,o.relationships),console.log("🔄 After sync - tables count:",a.length))}})}return{tables:a,currentProject:o.currentProject?{...o.currentProject,tables:a,updated_at:new Date().toISOString()}:null}})},deleteTable:n=>{e(r=>{console.log("🗑️ Deleting table with ID:",n);const o=r.relationships.filter(c=>c.source_table_id===n||c.target_table_id===n);console.log("🗑️ Found relationships to handle:",o.length);let a=[...r.tables];o.forEach(c=>{var m;if(console.log("🗑️ Processing relationship:",c.id),c.fk_table_id===n){console.log("🗑️ FK table is being deleted, skipping FK field handling");return}let u,d;if(c.fk_table_id&&c.fk_field_id?(u=c.fk_table_id,d=c.fk_field_id,console.log("🗑️ Using explicit FK tracking fields")):(u=c.target_table_id,d=c.target_field_id,console.log("🗑️ Using target table/field as FK location")),u===n){console.log("🗑️ FK table is being deleted, skipping FK field handling");return}console.log("🗑️ FK table ID (has FK):",u),console.log("🗑️ FK field ID (FK field):",d);const p=a.find(h=>h.id===u);if(p){console.log("🗑️ Found FK table:",p.name);const h=p.fields.find(g=>g.id===d);if(console.log("🗑️ FK field to modify:",h==null?void 0:h.name),h){const g=a.find(v=>v.id===c.source_table_id),y=(m=g==null?void 0:g.fields)==null?void 0:m.find(v=>v.id===c.source_field_id);if(console.log("🗑️ Referenced PK field name:",y==null?void 0:y.name),console.log("🗑️ FK field name:",h.name),h.name===(y==null?void 0:y.name)){console.log("🗑️ Drag-and-drop FK (same name as PK): Removing entire field");const v=p.fields.filter(x=>x.id!==d);a=a.map(x=>x.id===u?{...x,fields:v}:x),console.log("🗑️ Removed entire FK field from FK table:",p.name)}else{console.log("🗑️ Manual FK (different name from PK): Removing only FK reference, keeping field");const v=p.fields.map(x=>x.id===d?{...x,is_foreign_key:!1,foreign_key_reference:null}:x);a=a.map(x=>x.id===u?{...x,fields:v}:x),console.log("🗑️ Removed FK reference from field, kept field:",h.name)}}}});const i=a.filter(c=>c.id!==n),s=r.relationships.filter(c=>c.source_table_id!==n&&c.target_table_id!==n);return console.log("🗑️ Table deletion complete. Remaining tables:",i.length),console.log("🗑️ Remaining relationships:",s.length),{tables:i,relationships:s,currentProject:r.currentProject?{...r.currentProject,tables:i,relationships:s,updated_at:new Date().toISOString()}:null}})},addFieldToTable:(n,r)=>{var a;const o={id:lt(),name:r.name,data_type:r.data_type,type_parameters:r.type_parameters,nullable:r.nullable!==!1,default_value:r.default_value,comment:r.comment,logical_name:r.logical_name,tags:r.tags||{},is_primary_key:r.is_primary_key||!1,is_foreign_key:r.is_foreign_key||!1,foreign_key_reference:r.foreign_key_reference||null};return t().updateTable(n,{fields:[...((a=t().tables.find(i=>i.id===n))==null?void 0:a.fields)||[],o]}),o},updateField:(n,r,o)=>{const a=t().tables.find(i=>i.id===n);if(a){const i=a.fields.map(s=>s.id===r?{...s,...o}:s);t().updateTable(n,{fields:i})}},deleteField:(n,r)=>{const o=t().tables.find(a=>a.id===n);if(o){const a=o.fields.filter(i=>i.id!==r);t().updateTable(n,{fields:a}),e(i=>({relationships:i.relationships.filter(s=>s.source_field_id!==r&&s.target_field_id!==r)}))}},addRelationship:n=>{const r={id:lt(),source_table_id:n.source_table_id,target_table_id:n.target_table_id,source_field_id:n.source_field_id,target_field_id:n.target_field_id,relationship_type:n.relationship_type||"many_to_one",constraint_name:n.constraint_name,line_points:n.line_points||[],fk_table_id:n.fk_table_id,fk_field_id:n.fk_field_id,foreign_key_reference:n.foreign_key_reference};return e(o=>({relationships:[...o.relationships,r],currentProject:o.currentProject?{...o.currentProject,relationships:[...o.currentProject.relationships,r],updated_at:new Date().toISOString()}:null})),r},updateRelationship:(n,r)=>{e(o=>{const a=o.relationships.map(i=>i.id===n?{...i,...r}:i);return{relationships:a,currentProject:o.currentProject?{...o.currentProject,relationships:a,updated_at:new Date().toISOString()}:null}})},removeRelationshipLine:n=>{e(r=>{console.log("🔗 Removing relationship line only (no FK field changes):",n);const o=r.relationships.filter(a=>a.id!==n);return{relationships:o,currentProject:r.currentProject?{...r.currentProject,relationships:o,updated_at:new Date().toISOString()}:null}})},deleteRelationship:n=>{e(r=>{var i;const o=r.relationships.find(s=>s.id===n),a=r.relationships.filter(s=>s.id!==n);if(o){console.log("🗑️ Deleting relationship:",o);let s,c;console.log("🗑️ Relationship fk_table_id:",o.fk_table_id),console.log("🗑️ Relationship fk_field_id:",o.fk_field_id),o.fk_table_id&&o.fk_field_id?(s=o.fk_table_id,c=o.fk_field_id,console.log("🗑️ Using explicit FK tracking fields (drag-and-drop)")):(s=o.target_table_id,c=o.target_field_id,console.log("🗑️ Using target table/field as FK location (manual)")),console.log("🗑️ FK table ID (has FK):",s),console.log("🗑️ FK field ID (FK field):",c);const u=r.tables.find(d=>d.id===s);if(u){console.log("🗑️ Found FK table:",u.name);const d=u.fields.find(y=>y.id===c);console.log("🗑️ FK field to modify:",d==null?void 0:d.name,"(is_foreign_key:",d==null?void 0:d.is_foreign_key,")");let p;const m=r.tables.find(y=>y.id===o.source_table_id),h=(i=m==null?void 0:m.fields)==null?void 0:i.find(y=>y.id===o.source_field_id);if(console.log("🗑️ Referenced PK field name:",h==null?void 0:h.name),console.log("🗑️ FK field name:",d.name),d.name===(h==null?void 0:h.name)){console.log("🗑️ Drag-and-drop FK (same name as PK): Removing entire field");const y=u.fields.filter(w=>w.id!==c);p=r.tables.map(w=>w.id===s?{...w,fields:y}:w),console.log("🗑️ Removed entire FK field from FK table:",u.name)}else{console.log("🗑️ Manual FK (different name from PK): Removing only FK reference, keeping field");const y=u.fields.map(w=>w.id===c?{...w,is_foreign_key:!1,foreign_key_reference:null}:w);p=r.tables.map(w=>w.id===s?{...w,fields:y}:w),console.log("🗑️ Removed FK reference from field, kept field:",d==null?void 0:d.name)}return{relationships:a,tables:p,currentProject:r.currentProject?{...r.currentProject,relationships:a,tables:p,updated_at:new Date().toISOString()}:null}}}return{relationships:a,currentProject:r.currentProject?{...r.currentProject,relationships:a,updated_at:new Date().toISOString()}:null}})},addMetricView:n=>{const r={id:n.id||lt(),name:n.name,description:n.description||"",version:n.version||"0.1",source_table_id:n.source_table_id,catalog_name:n.catalog_name,schema_name:n.schema_name,dimensions:n.dimensions||[],measures:n.measures||[],joins:n.joins||[],tags:n.tags||{},position_x:n.position_x||100,position_y:n.position_y||100,width:n.width||280,height:n.height||220,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return e(o=>({metricViews:[...o.metricViews,r],currentProject:o.currentProject?{...o.currentProject,metric_views:[...o.currentProject.metric_views||[],r],updated_at:new Date().toISOString()}:null})),r},updateMetricView:(n,r)=>{e(o=>({metricViews:o.metricViews.map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a),currentProject:o.currentProject?{...o.currentProject,metric_views:(o.currentProject.metric_views||[]).map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a),updated_at:new Date().toISOString()}:null}))},deleteMetricView:n=>{e(r=>({metricViews:r.metricViews.filter(o=>o.id!==n),selectedMetricViews:r.selectedMetricViews.filter(o=>o!==n),currentProject:r.currentProject?{...r.currentProject,metric_views:(r.currentProject.metric_views||[]).filter(o=>o.id!==n),updated_at:new Date().toISOString()}:null}))},setSelectedTables:n=>e({selectedTables:n}),setSelectedRelationships:n=>e({selectedRelationships:n}),setShowTableDialog:(n,r=null)=>e({showTableDialog:n,selectedTableForEditing:r,editingTable:r}),setEditingTable:n=>e({editingTable:n}),setShowFieldDialog:(n,r=null)=>e({showFieldDialog:n,selectedFieldForEditing:r}),setShowRelationshipDialog:n=>e({showRelationshipDialog:n}),setShowImportDialog:n=>e({showImportDialog:n}),setShowProjectDialog:n=>e({showProjectDialog:n}),setShowProjectStartupDialog:(n,r="select")=>e({showProjectStartupDialog:n,projectStartupMode:r}),loadCatalogs:async()=>{var n,r;try{e({errors:{...t().errors,loadCatalogs:null}}),bc.apiCall(`${dt()}/api/data_modeling/catalogs`);const o=await Xe.get(`${dt()}/api/data_modeling/catalogs`);return bc.apiResponse(o),bc.debug("Catalogs loaded:",(n=o.data)==null?void 0:n.length,"catalogs"),e({availableCatalogs:o.data}),o.data}catch(o){throw bc.error("Error loading catalogs:",o),e({errors:{...t().errors,loadCatalogs:((r=o.response)==null?void 0:r.data)||o.message},currentAlertDialogErrorType:"loadCatalogs",displayAlertDialog:!0}),o}},loadSchemas:async n=>{var r;try{e({errors:{...t().errors,loadSchemas:null}});let a=(await Xe.get(`${dt()}/api/data_modeling/schemas/${n}`)).data;const i=t(),s=new Set;return[...i.tables,...i.metricViews,...i.traditionalViews].forEach(c=>{c.catalog_name===n&&c.schema_name&&s.add(c.schema_name)}),s.forEach(c=>{a.some(u=>u.name===c)||a.push({name:c,comment:"Schema from imported project (not in database)",is_imported:!0})}),e({availableSchemas:a}),a}catch(o){throw console.error("Error loading schemas:",o),e({errors:{...t().errors,loadSchemas:((r=o.response)==null?void 0:r.data)||o.message},currentAlertDialogErrorType:"loadSchemas",displayAlertDialog:!0}),o}},loadTables:async(n,r)=>{var o;try{e({errors:{...t().errors,loadTables:null}});const a=await Xe.get(`${dt()}/api/data_modeling/tables/${n}/${r}`);return e({availableTables:a.data}),a.data}catch(a){throw console.error("Error loading tables:",a),e({errors:{...t().errors,loadTables:((o=a.response)==null?void 0:o.data)||a.message},currentAlertDialogErrorType:"loadTables",displayAlertDialog:!0}),a}},loadDatatypes:async()=>{try{const n=await Xe.get(`${dt()}/api/data_modeling/datatypes`);return e({availableDatatypes:n.data}),n.data}catch(n){return console.error("Error loading datatypes:",n),[]}},importExistingTables:async(n,r,o,a=null)=>{var i;try{e({errors:{...t().errors,importTables:null}});const c=t().tables.map(_=>({id:_.id,name:_.name,catalog_name:_.catalog_name,schema_name:_.schema_name,fields:_.fields||[]})),u={catalog_name:n,schema_name:r,table_names:o,include_constraints:!0,position_strategy:"auto_layout",existing_tables:c};a&&(u.session_id=a);const p=(await Xe.post(`${dt()}/api/data_modeling/import_existing`,u)).data,m=t(),h=new Set(m.tables.map(_=>_.id)),g=new Set(m.tables.map(_=>_.name.toLowerCase())),y=[],w=p.tables.filter(_=>h.has(_.id)?!1:g.has(_.name.toLowerCase())?(y.push(_.name),!1):!0).map(_=>({..._,fields:(_.fields||[]).map(b=>{let S={...b};if(b.data_type==="DECIMAL"&&typeof b.type_parameters=="string"){const $=b.type_parameters;if($&&$.trim()){const N=$.split(",");if(N.length>=1){const T=parseInt(N[0].trim()),C=N.length>1?parseInt(N[1].trim()):0;S.type_parameters={precision:isNaN(T)?10:T,scale:isNaN(C)?0:C}}}}return S})}));if(y.length>0){const _=`The following tables were not imported because tables with the same names already exist in the canvas: ${y.join(", ")}`;if(console.warn(_),e({errors:{...t().errors,importTables:_}}),w.length===0)throw new Error(_)}const v=new Set(m.relationships.map(_=>`${_.source_table_id}-${_.target_table_id}-${_.source_field_id}-${_.target_field_id}`)),x=p.relationships.filter(_=>{const b=`${_.source_table_id}-${_.target_table_id}-${_.source_field_id}-${_.target_field_id}`;return!v.has(b)});return e({currentProject:{...m.currentProject,tables:[...m.tables,...w],relationships:[...m.relationships,...x]},tables:[...m.tables,...w],relationships:[...m.relationships,...x]}),p}catch(s){throw console.error("Error importing tables:",s),e({errors:{...t().errors,importTables:((i=s.response)==null?void 0:i.data)||s.message},currentAlertDialogErrorType:"importTables",displayAlertDialog:!0}),s}},importExistingTablesCrossCatalog:async(n,r)=>{try{e({errors:{...t().errors,importTables:null}});const o={table_groups:n,session_id:r};console.log("🌐 Calling cross-catalog import endpoint with:",o);const a=await fetch(`${dt()}/api/data_modeling/import_existing_cross_catalog`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),i=await a.json();if(!a.ok)throw new Error(i.error||`HTTP ${a.status}`);if(console.log("✅ Cross-catalog import endpoint response:",i),i.tables&&i.tables.length>0){const s=t(),c=new Set(s.tables.map(g=>g.id)),u=new Set(s.tables.map(g=>g.name.toLowerCase())),d=[],p=i.tables.filter(g=>c.has(g.id)?!1:u.has(g.name.toLowerCase())?(d.push(g.name),!1):!0).map(g=>({...g,fields:(g.fields||[]).map(y=>{let w={...y};if(y.data_type==="DECIMAL"&&typeof y.type_parameters=="string"){const v=y.type_parameters;if(v&&v.trim()){const x=v.split(",");if(x.length>=1){const _=parseInt(x[0].trim()),b=x.length>1?parseInt(x[1].trim()):0;w.type_parameters={precision:isNaN(_)?10:_,scale:isNaN(b)?0:b}}}}return w})})),m=new Set(s.relationships.map(g=>`${g.source_table_id}-${g.target_table_id}-${g.source_field_id}-${g.target_field_id}`)),h=(i.relationships||[]).filter(g=>{const y=`${g.source_table_id}-${g.target_table_id}-${g.source_field_id}-${g.target_field_id}`;return!m.has(y)});if(e({currentProject:{...s.currentProject,tables:[...s.tables,...p],relationships:[...s.relationships,...h]},tables:[...s.tables,...p],relationships:[...s.relationships,...h]}),console.log(`✅ Added ${p.length} tables and ${h.length} relationships to store`),d.length>0){const g=`The following tables were not imported because tables with the same names already exist in the canvas: ${d.join(", ")}`;console.warn(g),e({errors:{...t().errors,importTables:g}})}}return i}catch(o){throw console.error("❌ Cross-catalog import failed:",o),e({errors:{...t().errors,importTables:o.message}}),o}},saveProject:async(n,r="yaml",o=!1)=>{var a,i,s,c,u;try{e({errors:{...t().errors,saveProject:null}});const d=t().currentProject;if(!d)throw new Error("No project to save");const p=La(t().tables),m=t().metricRelationships.map(x=>({...x,created_at:x.created_at&&typeof x.created_at=="string"?x.created_at.includes("GMT")?new Date(x.created_at).toISOString():x.created_at:new Date().toISOString(),updated_at:x.updated_at&&typeof x.updated_at=="string"?x.updated_at.includes("GMT")?new Date(x.updated_at).toISOString():x.updated_at:new Date().toISOString()})),h=My({...d,catalog_name:d.catalog_name||t().catalogName||"default",schema_name:d.schema_name||t().schemaName||"default",tables:p,relationships:t().relationships,metric_views:t().metricViews,traditional_views:t().traditionalViews,metric_relationships:m,created_at:d.created_at&&typeof d.created_at=="string"&&d.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?d.created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),g={name:n||d.name,format:r,overwrite:o,project:h};console.log("Saving project data:",g),console.log("Transformed tables:",p);const y=My(g);console.log("Final cleaned data:",y);const w=await Xe.post(`${dt()}/api/data_modeling/project/save`,y),v=w.data.project||g.project;return e({currentProject:{...v,name:n||d.name},projectName:n||d.name}),console.log("Project saved successfully. Updated project name to:",n||d.name),w.data}catch(d){console.error("Error saving project:",d);const p=((i=(a=d.response)==null?void 0:a.data)==null?void 0:i.error)||((c=(s=d.response)==null?void 0:s.data)==null?void 0:c.validation_errors)||d.message||"Unknown error occurred while saving project";throw console.error("Save project error details:",(u=d.response)==null?void 0:u.data),e({errors:{...t().errors,saveProject:p},currentAlertDialogErrorType:"saveProject",displayAlertDialog:!0}),d}},loadProject:async n=>{var r;try{e({errors:{...t().errors,loadProject:null}});const a=(await Xe.get(`${dt()}/api/data_modeling/project/load/${n}`)).data;let i=a.project;i={...i,created_at:i.created_at&&typeof i.created_at=="string"&&i.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?i.created_at:new Date().toISOString(),updated_at:i.updated_at&&typeof i.updated_at=="string"&&i.updated_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?i.updated_at:new Date().toISOString(),tables:(i.tables||[]).map(u=>({...u,created_at:u.created_at&&typeof u.created_at=="string"&&u.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.created_at:new Date().toISOString(),updated_at:u.updated_at&&typeof u.updated_at=="string"&&u.updated_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.updated_at:new Date().toISOString(),fields:(u.fields||[]).map(d=>{var m;let p={...d};if(d.data_type==="DECIMAL"&&typeof d.type_parameters=="string"){const h=d.type_parameters;if(h&&h.trim()){const g=h.split(",");if(g.length>=1){const y=parseInt(g[0].trim()),w=g.length>1?parseInt(g[1].trim()):0;p.type_parameters={precision:isNaN(y)?10:y,scale:isNaN(w)?0:w}}}}if(d.is_foreign_key&&d.foreign_key_reference&&typeof d.foreign_key_reference=="string"&&d.foreign_key_reference.includes(".")){const[h,g]=d.foreign_key_reference.split("."),y=(i.tables||[]).find(v=>v.name===h),w=(m=y==null?void 0:y.fields)==null?void 0:m.find(v=>v.name===g);y&&w?(p.foreign_key_reference={referenced_table_id:y.id,referenced_field_id:w.id,constraint_name:`fk_${u.name}_${h}`,on_delete:"NO ACTION",on_update:"NO ACTION"},console.log("🔄 Converted string FK reference to object:",d.foreign_key_reference,"→",p.foreign_key_reference)):(console.warn("⚠️ Could not resolve string FK reference:",d.foreign_key_reference),p.foreign_key_reference=null)}return p})})),metric_views:Array.isArray(i.metric_views)?i.metric_views.map(u=>({...u,created_at:u.created_at&&typeof u.created_at=="string"&&u.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.created_at:new Date().toISOString(),updated_at:u.updated_at&&typeof u.updated_at=="string"&&u.updated_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.updated_at:new Date().toISOString(),dimensions:Array.isArray(u.dimensions)?u.dimensions:[],measures:Array.isArray(u.measures)?u.measures:[],joins:Array.isArray(u.joins)?u.joins:[],tags:u.tags&&typeof u.tags=="object"?u.tags:{}})):[],traditional_views:Array.isArray(i.traditional_views)?i.traditional_views.map(u=>({...u,created_at:u.created_at&&typeof u.created_at=="string"&&u.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.created_at:new Date().toISOString(),updated_at:u.updated_at&&typeof u.updated_at=="string"&&u.updated_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?u.updated_at:new Date().toISOString(),tags:u.tags&&typeof u.tags=="object"?u.tags:{}})):[]};const s=a.name||i.name,c={...i,name:s};return e({currentProject:c,projectName:s,catalogName:i.catalog_name,schemaName:i.schema_name,tables:i.tables,metricViews:Array.isArray(i.metric_views)?i.metric_views:[],traditionalViews:Array.isArray(i.traditional_views)?i.traditional_views:[],relationships:Array.isArray(i.relationships)?i.relationships:[],metricRelationships:Array.isArray(i.metric_relationships)?i.metric_relationships:[]}),a}catch(o){throw console.error("Error loading project:",o),e({errors:{...t().errors,loadProject:((r=o.response)==null?void 0:r.data)||o.message},currentAlertDialogErrorType:"loadProject",displayAlertDialog:!0}),o}},getSavedProjects:async()=>{try{const n=await Xe.get(`${dt()}/api/data_modeling/projects`);return e({savedProjects:n.data}),n.data}catch(n){return console.error("Error getting saved projects:",n),e({savedProjects:[]}),[]}},deleteProject:async n=>{var r,o;try{e({errors:{...t().errors,deleteProject:null}}),console.log("🔧 Deleting project with identifier:",n);const a=await Xe.delete(`${dt()}/api/data_modeling/project/${n}`);await t().getSavedProjects();const i=t().currentProject;return i&&(i.id===n||i.name===n)&&e({currentProject:null,projectName:"",tables:[],relationships:[]}),a.data}catch(a){console.error("Error deleting project:",a);const i=((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.error)||a.message||"Failed to delete project";throw e({errors:{...t().errors,deleteProject:i},currentAlertDialogErrorType:"deleteProject",displayAlertDialog:!0}),a}},downloadProject:async n=>{var r,o;try{e({errors:{...t().errors,downloadProject:null}}),console.log("🔧 Downloading project with identifier:",n);const a=await Xe.get(`${dt()}/api/data_modeling/project/${n}/download`,{responseType:"blob"}),i=new Blob([a.data],{type:"application/x-yaml"}),s=window.URL.createObjectURL(i),c=document.createElement("a");c.href=s;const u=a.headers["content-disposition"];let d=`${n}.yaml`;if(u){const p=u.match(/filename="(.+)"/);p&&(d=p[1])}return c.setAttribute("download",d),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(s),a.data}catch(a){console.error("Error downloading project:",a);const i=((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.error)||a.message||"Failed to download project";throw e({errors:{...t().errors,downloadProject:i},currentAlertDialogErrorType:"downloadProject",displayAlertDialog:!0}),a}},importProject:async(n,r,o=!1,a="yaml")=>{var i,s,c,u,d;try{e({errors:{...t().errors,importProject:null}}),console.log("🔧 Importing project:",r,"type:",a);let p;typeof n=="string"?p=n:n&&typeof n.toString=="function"?p=n.toString():p=String(n),typeof p=="string"&&p.includes("__reactFiber")&&(console.warn("🔧 Detected React fiber references in content, attempting to clean..."),p=p.replace(/__reactFiber\$[^'"\s]*/g,""));const m={};m.project_name=String(r),m.overwrite=!!o,a==="json"?m.json_content=String(p):m.yaml_content=String(p);const h=await Xe.post(`${dt()}/api/data_modeling/project/import`,m);return await t().getSavedProjects(),h.data}catch(p){console.error("Error importing project:",p),console.error("Error response status:",(i=p.response)==null?void 0:i.status),console.error("Error response data:",(s=p.response)==null?void 0:s.data),console.error("Error response headers:",(c=p.response)==null?void 0:c.headers);let m;throw p.response?m=((d=(u=p.response)==null?void 0:u.data)==null?void 0:d.error)||p.message||"Failed to import project":m="Network error: Unable to connect to the backend server. Please ensure the server is running on http://localhost:8080",e({errors:{...t().errors,importProject:m},currentAlertDialogErrorType:"importProject",displayAlertDialog:!0}),p}},getAppState:async()=>{try{const n=await Xe.get(`${dt()}/api/data_modeling/app_state`);return e({appState:n.data}),n.data}catch(n){return console.error("Error getting app state:",n),t().appState}},generateDDL:async(n=[])=>{var r,o;try{e({errors:{...t().errors,generateDDL:null}});const a=t().currentProject;if(!a)throw new Error("No project available");console.log("Generating DDL for project ID:",a.id),console.log("Project data keys:",Object.keys(a)),console.log("Tables count:",t().tables.length);const i=La(t().tables);console.log("Project data being sent:",{project:{...a,catalog_name:a.catalog_name||t().catalogName||"default",schema_name:a.schema_name||t().schemaName||"default",tables:i,relationships:t().relationships,created_at:a.created_at&&typeof a.created_at=="string"&&a.created_at.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?a.created_at:new Date().toISOString(),updated_at:new Date().toISOString()},table_ids:n});const s=p=>{if(!p)return new Date().toISOString();if(typeof p=="string"){if(p.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/))return p;try{return new Date(p).toISOString()}catch{return new Date().toISOString()}}return p instanceof Date?p.toISOString():new Date().toISOString()},c=(t().metricRelationships||[]).map(p=>({...p,created_at:s(p.created_at),updated_at:s(p.updated_at)})),u=(t().metricViews||[]).map(p=>({...p,created_at:s(p.created_at),updated_at:s(p.updated_at)}));return(await Xe.post(`${dt()}/api/data_modeling/project/${a.id}/generate_ddl`,{project:{...a,catalog_name:a.catalog_name||t().catalogName||"default",schema_name:a.schema_name||t().schemaName||"default",tables:i,relationships:t().relationships,metric_views:u,metric_relationships:c,created_at:s(a.created_at),updated_at:s(a.updated_at)},table_ids:n})).data}catch(a){console.error("Error generating DDL:",a);let i=a.message;if(((r=a.response)==null?void 0:r.status)===422&&((o=a.response)!=null&&o.data)){const s=a.response.data;s.validation_errors&&s.validation_errors.length>0?i=`Validation Error: ${s.error}

Details:
${s.validation_errors.map(c=>{var u;return`- ${(u=c.loc)==null?void 0:u.join(".")}: ${c.msg}`}).join(`
`)}`:i=s.error||i}throw e({errors:{...t().errors,generateDDL:i},currentAlertDialogErrorType:"generateDDL",displayAlertDialog:!0}),a}},applyChanges:async(n=[],r=!0,o=null,a=null)=>{var i,s;try{e({errors:{...t().errors,applyChanges:null}});const c=t().currentProject;if(!c)throw new Error("No project available");console.log("Applying changes for project ID:",c.id),console.log("Project data keys:",Object.keys(c)),console.log("Tables count:",t().tables.length);const u=La(t().tables),d=g=>{if(!g)return new Date().toISOString();if(typeof g=="string"){if(g.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/))return g;try{return new Date(g).toISOString()}catch{return new Date().toISOString()}}return g instanceof Date?g.toISOString():new Date().toISOString()},p=(t().metricRelationships||[]).map(g=>({...g,created_at:d(g.created_at),updated_at:d(g.updated_at)})),m=(t().metricViews||[]).map(g=>({...g,created_at:d(g.created_at),updated_at:d(g.updated_at)}));return(await Xe.post(`${dt()}/api/data_modeling/project/${c.id}/apply_changes`,{project:{...c,catalog_name:c.catalog_name||t().catalogName||"default",schema_name:c.schema_name||t().schemaName||"default",tables:u,relationships:t().relationships,metric_views:m,metric_relationships:p,created_at:d(c.created_at),updated_at:d(c.updated_at)},table_ids:n,create_only:r,warehouse_id:o,session_id:a})).data}catch(c){console.error("Error applying changes:",c);let u=c.message;if(((i=c.response)==null?void 0:i.status)===422&&((s=c.response)!=null&&s.data)){const d=c.response.data;d.validation_errors&&d.validation_errors.length>0?u=`Validation Error: ${d.error}

Details:
${d.validation_errors.map(p=>{var m;return`- ${(m=p.loc)==null?void 0:m.join(".")}: ${p.msg}`}).join(`
`)}`:u=d.error||u}throw e({errors:{...t().errors,applyChanges:u},currentAlertDialogErrorType:"applyChanges",displayAlertDialog:!0}),c}},setShowMetricViewDialog:(n,r=null,o=null)=>{e({showMetricViewDialog:n,editingMetricView:r,selectedMetricViewForEditing:r,fieldMappingSourceTable:o?t().tables.find(a=>a.id===o):null})},setShowFieldMappingDialog:(n,r=null,o=null)=>{console.log("🎯 Setting field mapping dialog:",{show:n,sourceTable:r==null?void 0:r.name,targetMetricView:o==null?void 0:o.name}),e({showFieldMappingDialog:n,fieldMappingSourceTable:r,fieldMappingTargetMetricView:o})},createMetricView:n=>{console.log("📊 Creating metric view:",n);const r={...n,id:n.id||lt(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e(o=>({metricViews:[...o.metricViews,r],showMetricViewDialog:!1,editingMetricView:null})),console.log("✅ Metric view created successfully:",r.name)},updateMetricView:(n,r)=>{e(o=>({metricViews:o.metricViews.map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a),showMetricViewDialog:!1,editingMetricView:null}))},deleteMetricView:n=>{console.log("🗑️ Deleting metric view:",n),e(r=>({metricViews:r.metricViews.filter(o=>o.id!==n),metricRelationships:r.metricRelationships.filter(o=>o.metric_view_id!==n),selectedMetricViews:r.selectedMetricViews.filter(o=>o!==n)})),console.log("✅ Metric view deleted successfully")},setSelectedMetricViews:n=>{e({selectedMetricViews:n})},updateMetricViewPosition:(n,r,o)=>{e(a=>({metricViews:a.metricViews.map(i=>i.id===n?{...i,position_x:r,position_y:o}:i)}))},updateMetricViewSize:(n,r,o)=>{e(a=>({metricViews:a.metricViews.map(i=>i.id===n?{...i,width:r,height:o}:i)}))},createMetricRelationship:(n,r,o=[])=>{console.log("🔗 Creating metric relationship:",{sourceTableId:n,metricViewId:r,fieldMappings:o});const a={id:lt(),source_table_id:n,metric_view_id:r,relationship_type:"source_to_metric",field_mappings:o,line_points:[],created_at:new Date().toISOString()};return e(i=>({metricRelationships:[...i.metricRelationships,a]})),console.log("✅ Metric relationship created successfully"),a},deleteMetricRelationship:n=>{console.log("🗑️ Deleting metric relationship:",n),e(r=>({metricRelationships:r.metricRelationships.filter(o=>o.id!==n)})),console.log("✅ Metric relationship deleted successfully")},loadProjectWithMetricViews:n=>{console.log("📂 Loading project with metric views and traditional views:",n),e({currentProject:n,projectName:n.name||"",catalogName:n.catalog_name||"",schemaName:n.schema_name||"",tables:n.tables||[],metricViews:n.metric_views||[],traditionalViews:n.traditional_views||[],relationships:n.relationships||[],metricRelationships:n.metric_relationships||[]}),console.log("✅ Project loaded with metric views")},saveProjectWithMetricViews:async()=>{try{const n=t(),r=n.currentProject;if(!r)throw new Error("No current project to save");console.log("💾 Saving project with metric views...");const o={...r,tables:n.tables,metric_views:n.metricViews,relationships:n.relationships,metric_relationships:n.metricRelationships,updated_at:new Date().toISOString()},a=await Xe.put(`${dt()}/api/data_modeling/project/${r.id}`,o);return e({currentProject:a.data}),console.log("✅ Project saved with metric views successfully"),a.data}catch(n){throw console.error("❌ Error saving project with metric views:",n),n}},applyMetricView:async(n,r=!1,o=null)=>{const a=t(),{currentProject:i}=a;if(!i)throw new Error("No project loaded");try{console.log("🚀 Applying metric view to Databricks:",n);const s=i.name||a.projectName||"Untitled Project",c=i.catalog_name||a.catalogName||"default",u=i.schema_name||a.schemaName||"default";console.log("📋 Project data for apply:",{name:s,catalog_name:c,schema_name:u,currentProject_catalog:i.catalog_name,state_catalog:a.catalogName,currentProject_schema:i.schema_name,state_schema:a.schemaName});const d=y=>{if(!y)return new Date().toISOString();if(typeof y=="string"){if(y.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/))return y;try{return new Date(y).toISOString()}catch{return new Date().toISOString()}}return y instanceof Date?y.toISOString():new Date().toISOString()},p=(i.metric_relationships||a.metricRelationships||[]).map(y=>({...y,created_at:d(y.created_at),updated_at:d(y.updated_at)})),m=La(i.tables||a.tables||[]),h={project:{...i,name:s,catalog_name:c,schema_name:u,tables:m,metric_views:i.metric_views||a.metricViews||[],traditional_views:i.traditional_views||a.traditionalViews||[],relationships:i.relationships||a.relationships||[],metric_relationships:p,version:i.version||"1.0",created_at:d(i.created_at),updated_at:d(i.updated_at)},create_only:r,warehouse_id:o},g=await Xe.post(`${dt()}/api/data_modeling/project/${i.id}/metric_views/${n}/apply`,h);return console.log("✅ Metric view applied successfully:",g.data),g.data}catch(s){throw console.error("❌ Error applying metric view:",s),s}},setShowTraditionalViewDialog:(n,r=null)=>{console.log("🎯 Setting traditional view dialog:",{show:n,traditionalView:r==null?void 0:r.name}),e({showTraditionalViewDialog:n,editingTraditionalView:r,selectedTraditionalViewForEditing:r})},createTraditionalView:n=>{console.log("👁️ Creating traditional view:",n);const r={...n,id:n.id||lt(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return e(o=>({traditionalViews:[...o.traditionalViews,r],showTraditionalViewDialog:!1,editingTraditionalView:null})),console.log("✅ Traditional view created successfully:",r.name),r},updateTraditionalView:(n,r)=>{console.log("👁️ Updating traditional view:",n,r),e(o=>({traditionalViews:o.traditionalViews.map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a),showTraditionalViewDialog:!1,editingTraditionalView:null})),console.log("✅ Traditional view updated successfully")},deleteTraditionalView:n=>{console.log("🗑️ Deleting traditional view:",n),e(r=>({traditionalViews:r.traditionalViews.filter(o=>o.id!==n),selectedTraditionalViews:r.selectedTraditionalViews.filter(o=>o!==n)})),console.log("✅ Traditional view deleted successfully")},setSelectedTraditionalViews:n=>{e({selectedTraditionalViews:n})},updateTraditionalViewPosition:(n,r,o)=>{e(a=>({traditionalViews:a.traditionalViews.map(i=>i.id===n?{...i,position_x:r,position_y:o}:i)}))},updateTraditionalViewSize:(n,r,o)=>{console.log("📏 Updating traditional view size:",n,{width:r,height:o}),e(a=>({traditionalViews:a.traditionalViews.map(i=>i.id===n?{...i,width:r,height:o}:i)}))},applyTraditionalView:async(n,r=!1,o=null)=>{const a=t(),{currentProject:i}=a;if(!i)throw new Error("No project loaded");try{console.log("🚀 Applying traditional view to Databricks:",n);const s=i.name||a.projectName||"Untitled Project",c=i.catalog_name||a.catalogName||"default",u=i.schema_name||a.schemaName||"default";console.log("📋 Project data for apply:",{name:s,catalog_name:c,schema_name:u});const d=y=>{if(!y)return new Date().toISOString();if(typeof y=="string"){if(y.includes("T")&&y.includes("Z"))return y;const w=new Date(y);if(!isNaN(w.getTime()))return w.toISOString()}return new Date().toISOString()},p=La(i.tables||a.tables||[]),m=(i.metric_relationships||a.metricRelationships||[]).map(y=>({...y,created_at:y.created_at&&typeof y.created_at=="string"?y.created_at.includes("GMT")?new Date(y.created_at).toISOString():y.created_at:new Date().toISOString(),updated_at:y.updated_at&&typeof y.updated_at=="string"?y.updated_at.includes("GMT")?new Date(y.updated_at).toISOString():y.updated_at:new Date().toISOString()})),h={project:{...i,name:s,catalog_name:c,schema_name:u,tables:p,metric_views:i.metric_views||a.metricViews||[],traditional_views:a.traditionalViews||i.traditional_views||[],relationships:i.relationships||a.relationships||[],metric_relationships:m,version:i.version||"1.0",created_at:d(i.created_at),updated_at:d(i.updated_at)},create_only:r,warehouse_id:o},g=await Xe.post(`${dt()}/api/data_modeling/project/${i.id}/traditional_views/${n}/apply`,h);return console.log("✅ Traditional view applied successfully:",g.data),g.data}catch(s){throw console.error("❌ Error applying traditional view:",s),s}},generateTraditionalViewDDL:async n=>{const r=t(),{currentProject:o}=r;if(!o)throw new Error("No project loaded");try{console.log("🔧 Generating DDL for traditional view:",n);const a=o.name||r.projectName||"Untitled Project",i=o.catalog_name||r.catalogName||"default",s=o.schema_name||r.schemaName||"default",c=h=>{if(!h)return new Date().toISOString();if(typeof h=="string"){if(h.includes("T")&&h.includes("Z"))return h;const g=new Date(h);if(!isNaN(g.getTime()))return g.toISOString()}return new Date().toISOString()},u=La(o.tables||r.tables||[]),d=(o.metric_relationships||r.metricRelationships||[]).map(h=>({...h,created_at:h.created_at&&typeof h.created_at=="string"?h.created_at.includes("GMT")?new Date(h.created_at).toISOString():h.created_at:new Date().toISOString(),updated_at:h.updated_at&&typeof h.updated_at=="string"?h.updated_at.includes("GMT")?new Date(h.updated_at).toISOString():h.updated_at:new Date().toISOString()})),p={project:{...o,name:a,catalog_name:i,schema_name:s,tables:u,metric_views:o.metric_views||r.metricViews||[],traditional_views:r.traditionalViews||o.traditional_views||[],relationships:o.relationships||r.relationships||[],metric_relationships:d,version:o.version||"1.0",created_at:c(o.created_at),updated_at:c(o.updated_at)}},m=await Xe.post(`${dt()}/api/data_modeling/project/${o.id}/traditional_views/${n}/generate_ddl`,p);return console.log("✅ Traditional view DDL generated successfully:",m.data),m.data}catch(a){throw console.error("❌ Error generating traditional view DDL:",a),a}},toggleAlertDialog:()=>{e({displayAlertDialog:!t().displayAlertDialog})}}));function yt(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Nq=["color"],kq=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Nq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Aq=["color"],en=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Aq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Dq=["color"],Oy=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Dq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Pq=["color"],Cc=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Pq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Iq=["color"],Db=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Iq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Mq=["color"],Oq=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Mq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lq=["color"],wo=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Lq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Fq=["color"],Ou=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Fq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M8.625 2.5C8.625 3.12132 8.12132 3.625 7.5 3.625C6.87868 3.625 6.375 3.12132 6.375 2.5C6.375 1.87868 6.87868 1.375 7.5 1.375C8.12132 1.375 8.625 1.87868 8.625 2.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM7.5 13.625C8.12132 13.625 8.625 13.1213 8.625 12.5C8.625 11.8787 8.12132 11.375 7.5 11.375C6.87868 11.375 6.375 11.8787 6.375 12.5C6.375 13.1213 6.87868 13.625 7.5 13.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zq=["color"],Os=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,zq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),qq=["color"],Sc=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,qq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Bq=["color"],c7=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Bq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Vq=["color"],dn=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Vq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Hq=["color"],Ly=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Hq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V6H8.5C8.22386 6 8 5.77614 8 5.5V2H3.5ZM9 2.70711L11.2929 5H9V2.70711ZM2 2.5C2 1.67157 2.67157 1 3.5 1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645L12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Uq=["color"],Lu=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Uq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H9.08579C9.21839 2 9.34557 2.05268 9.43934 2.14645L11.8536 4.56066C11.9473 4.65443 12 4.78161 12 4.91421V12.5C12 12.7761 11.7761 13 11.5 13H3.5C3.22386 13 3 12.7761 3 12.5V2.5ZM3.5 1C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V4.91421C13 4.51639 12.842 4.13486 12.5607 3.85355L10.1464 1.43934C9.86514 1.15804 9.48361 1 9.08579 1H3.5ZM4.5 4C4.22386 4 4 4.22386 4 4.5C4 4.77614 4.22386 5 4.5 5H7.5C7.77614 5 8 4.77614 8 4.5C8 4.22386 7.77614 4 7.5 4H4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H10.5C10.7761 8 11 7.77614 11 7.5C11 7.22386 10.7761 7 10.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H10.5C10.7761 11 11 10.7761 11 10.5C11 10.2239 10.7761 10 10.5 10H4.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Gq=["color"],$i=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Gq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wq=["color"],Kq=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Wq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Yq=["color"],u7=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Yq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M8.51194 3.00541C9.18829 2.54594 10.0435 2.53694 10.6788 2.95419C10.8231 3.04893 10.9771 3.1993 11.389 3.61119C11.8009 4.02307 11.9513 4.17714 12.046 4.32141C12.4633 4.95675 12.4543 5.81192 11.9948 6.48827C11.8899 6.64264 11.7276 6.80811 11.3006 7.23511L10.6819 7.85383C10.4867 8.04909 10.4867 8.36567 10.6819 8.56093C10.8772 8.7562 11.1938 8.7562 11.389 8.56093L12.0077 7.94221L12.0507 7.89929C12.4203 7.52976 12.6568 7.2933 12.822 7.0502C13.4972 6.05623 13.5321 4.76252 12.8819 3.77248C12.7233 3.53102 12.4922 3.30001 12.1408 2.94871L12.0961 2.90408L12.0515 2.85942C11.7002 2.508 11.4692 2.27689 11.2277 2.11832C10.2377 1.46813 8.94398 1.50299 7.95001 2.17822C7.70691 2.34336 7.47044 2.57991 7.1009 2.94955L7.058 2.99247L6.43928 3.61119C6.24401 3.80645 6.24401 4.12303 6.43928 4.31829C6.63454 4.51355 6.95112 4.51355 7.14638 4.31829L7.7651 3.69957C8.1921 3.27257 8.35757 3.11027 8.51194 3.00541ZM4.31796 7.14672C4.51322 6.95146 4.51322 6.63487 4.31796 6.43961C4.12269 6.24435 3.80611 6.24435 3.61085 6.43961L2.99213 7.05833L2.94922 7.10124C2.57957 7.47077 2.34303 7.70724 2.17788 7.95035C1.50265 8.94432 1.4678 10.238 2.11799 11.2281C2.27656 11.4695 2.50766 11.7005 2.8591 12.0518L2.90374 12.0965L2.94837 12.1411C3.29967 12.4925 3.53068 12.7237 3.77214 12.8822C4.76219 13.5324 6.05589 13.4976 7.04986 12.8223C7.29296 12.6572 7.52943 12.4206 7.89896 12.051L7.89897 12.051L7.94188 12.0081L8.5606 11.3894C8.75586 11.1941 8.75586 10.8775 8.5606 10.6823C8.36533 10.487 8.04875 10.487 7.85349 10.6823L7.23477 11.301C6.80777 11.728 6.6423 11.8903 6.48794 11.9951C5.81158 12.4546 4.95642 12.4636 4.32107 12.0464C4.17681 11.9516 4.02274 11.8012 3.61085 11.3894C3.19896 10.9775 3.0486 10.8234 2.95385 10.6791C2.53661 10.0438 2.54561 9.18863 3.00507 8.51227C3.10993 8.35791 3.27224 8.19244 3.69924 7.76544L4.31796 7.14672ZM9.62172 6.08558C9.81698 5.89032 9.81698 5.57373 9.62172 5.37847C9.42646 5.18321 9.10988 5.18321 8.91461 5.37847L5.37908 8.91401C5.18382 9.10927 5.18382 9.42585 5.37908 9.62111C5.57434 9.81637 5.89092 9.81637 6.08619 9.62111L9.62172 6.08558Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Xq=["color"],Fy=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Xq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M4.50021 0C4.77635 0 5.0002 0.223853 5.0002 0.49999V2.49995C5.0002 2.77609 4.77635 2.99994 4.50021 2.99994C4.22408 2.99994 4.00022 2.77609 4.00022 2.49995V0.49999C4.00022 0.223853 4.22408 0 4.50021 0ZM0.646451 0.64647C0.84171 0.451212 1.15829 0.451212 1.35354 0.64647L2.85351 2.14644C3.04877 2.3417 3.04877 2.65827 2.85351 2.85353C2.65826 3.04879 2.34168 3.04879 2.14642 2.85353L0.646452 1.35356C0.451193 1.1583 0.451193 0.841728 0.646451 0.64647ZM0.00030517 4.49991C0.00030517 4.22377 0.224158 3.99992 0.500295 3.99992H2.50025C2.77639 3.99992 3.00024 4.22377 3.00024 4.49991C3.00024 4.77605 2.77639 4.9999 2.50025 4.9999H0.500295C0.224158 4.9999 0.00030517 4.77605 0.00030517 4.49991ZM12.0001 10.4998C12.0001 10.2236 12.2239 9.9998 12.5001 9.9998H14.5C14.7761 9.9998 15 10.2236 15 10.4998C15 10.7759 14.7761 10.9998 14.5 10.9998H12.5001C12.2239 10.9998 12.0001 10.7759 12.0001 10.4998ZM10.5001 11.9998C10.7762 11.9998 11.0001 12.2236 11.0001 12.4997V14.4997C11.0001 14.7758 10.7762 14.9997 10.5001 14.9997C10.224 14.9997 10.0001 14.7758 10.0001 14.4997V12.4997C10.0001 12.2236 10.224 11.9998 10.5001 11.9998ZM12.1462 12.1462C12.3415 11.951 12.658 11.951 12.8533 12.1462L14.3533 13.6462C14.5485 13.8415 14.5485 14.158 14.3533 14.3533C14.158 14.5485 13.8414 14.5485 13.6462 14.3533L12.1462 12.8533C11.951 12.6581 11.951 12.3415 12.1462 12.1462ZM7.76478 3.69938C8.19177 3.27238 8.35724 3.11008 8.5116 3.00522C9.18794 2.54577 10.0431 2.53677 10.6784 2.95401C10.8227 3.04875 10.9767 3.19911 11.3886 3.61099C11.8005 4.02287 11.9509 4.17694 12.0456 4.3212C12.4628 4.95653 12.4539 5.81168 11.9944 6.48802C11.8895 6.64238 11.7272 6.80785 11.3002 7.23484L10.6815 7.85354C10.4863 8.0488 10.4863 8.36538 10.6815 8.56064C10.8768 8.75589 11.1934 8.75589 11.3886 8.56064L12.0073 7.94193L12.0502 7.89903C12.4199 7.5295 12.6564 7.29303 12.8216 7.04993C13.4968 6.05598 13.5316 4.7623 12.8815 3.77228C12.7229 3.53083 12.4918 3.29982 12.1404 2.94853L12.0957 2.9039L12.0511 2.85925C11.6998 2.50782 11.4688 2.27672 11.2273 2.11816C10.2373 1.46798 8.94364 1.50284 7.94968 2.17805C7.70659 2.34319 7.47012 2.57973 7.1006 2.94936L7.1006 2.94937L7.05769 2.99228L6.43898 3.61099C6.24372 3.80625 6.24372 4.12282 6.43898 4.31808C6.63424 4.51334 6.95081 4.51334 7.14607 4.31808L7.76478 3.69938ZM2.99191 7.05807L2.94899 7.10097C2.57935 7.4705 2.34282 7.70697 2.17767 7.95006C1.50246 8.94401 1.4676 10.2377 2.11778 11.2277C2.27634 11.4692 2.50744 11.7002 2.85886 12.0515L2.85888 12.0515L2.90352 12.0961L2.94815 12.1407L2.94815 12.1407L2.94817 12.1408C3.29945 12.4922 3.53045 12.7233 3.7719 12.8818C4.76193 13.532 6.0556 13.4972 7.04956 12.8219C7.29265 12.6568 7.52912 12.4203 7.89865 12.0506L7.94155 12.0077L8.56026 11.389C8.75552 11.1937 8.75552 10.8772 8.56026 10.6819C8.365 10.4867 8.04842 10.4867 7.85317 10.6819L7.23446 11.3006C6.80747 11.7276 6.642 11.8899 6.48764 11.9948C5.8113 12.4542 4.95615 12.4632 4.32082 12.046C4.17656 11.9512 4.02249 11.8009 3.61061 11.389C3.19873 10.9771 3.04837 10.8231 2.95363 10.6788C2.53639 10.0435 2.54539 9.18832 3.00484 8.51198C3.10971 8.35761 3.27201 8.19215 3.699 7.76516L4.3177 7.14645C4.51296 6.95119 4.51296 6.63462 4.3177 6.43936C4.12245 6.2441 3.80587 6.2441 3.61061 6.43936L2.99191 7.05807Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Zq=["color"],Qq=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Zq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Jq=["color"],vs=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,Jq);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),eB=["color"],il=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,eB);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tB=["color"],Dd=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,tB);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M3.24182 2.32181C3.3919 2.23132 3.5784 2.22601 3.73338 2.30781L12.7334 7.05781C12.8974 7.14436 13 7.31457 13 7.5C13 7.68543 12.8974 7.85564 12.7334 7.94219L3.73338 12.6922C3.5784 12.774 3.3919 12.7687 3.24182 12.6782C3.09175 12.5877 3 12.4252 3 12.25V2.75C3 2.57476 3.09175 2.4123 3.24182 2.32181ZM4 3.57925V11.4207L11.4288 7.5L4 3.57925Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nB=["color"],Mn=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,nB);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),rB=["color"],gn=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,rB);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),oB=["color"],aB=f.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=yt(e,oB);return f.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),f.createElement("path",{d:"M7.81825 1.18188C7.64251 1.00615 7.35759 1.00615 7.18185 1.18188L4.18185 4.18188C4.00611 4.35762 4.00611 4.64254 4.18185 4.81828C4.35759 4.99401 4.64251 4.99401 4.81825 4.81828L7.05005 2.58648V9.49996C7.05005 9.74849 7.25152 9.94996 7.50005 9.94996C7.74858 9.94996 7.95005 9.74849 7.95005 9.49996V2.58648L10.1819 4.81828C10.3576 4.99401 10.6425 4.99401 10.8182 4.81828C10.994 4.64254 10.994 4.35762 10.8182 4.18188L7.81825 1.18188ZM2.5 9.99997C2.77614 9.99997 3 10.2238 3 10.5V12C3 12.5538 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2238 12.2239 9.99997 12.5 9.99997C12.7761 9.99997 13 10.2238 13 10.5V12C13 13.104 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2238 2.22386 9.99997 2.5 9.99997Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const iB=({isOpen:e,onClose:t,mode:n})=>{var T,C;const{currentProject:r,saveProject:o,loadProject:a,getSavedProjects:i}=ct(),[s,c]=f.useState(""),[u,d]=f.useState("yaml"),[p,m]=f.useState([]),[h,g]=f.useState(""),[y,w]=f.useState(!1);f.useEffect(()=>{e&&n==="load"&&v(),e&&n==="save"&&r&&(console.log("🔧 Save dialog opened. Setting project name to:",r.name||""),c(r.name||""))},[e,n,r]);const v=async()=>{try{w(!0);const D=await i();m(D||[])}catch(D){console.error("Error loading saved projects:",D),m([])}finally{w(!1)}},x=async(D=!1)=>{var L,K,H;if(s.trim())try{w(!0),console.log("🔧 Saving project with name:",s.trim()),console.log("🔧 Current project name before save:",r==null?void 0:r.name),await o(s.trim(),u,D),console.log("🔧 Project saved successfully"),t(),c("")}catch(M){if(console.error("Error saving project:",M),((L=M.response)==null?void 0:L.status)===409&&((H=(K=M.response)==null?void 0:K.data)==null?void 0:H.code)==="DUPLICATE_NAME"&&window.confirm(`A different project named "${s.trim()}" already exists. This will overwrite the existing project.

Are you sure you want to continue?`))return x(!0)}finally{w(!1)}},_=async D=>{try{w(!0),await a(D),t()}catch(L){console.error("Error loading project:",L)}finally{w(!1)}},b=p.filter(D=>D.name.toLowerCase().includes(h.toLowerCase())),S=D=>new Date(D).toLocaleDateString()+" "+new Date(D).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),$=D=>D==="yaml"?"blue":"green",N=()=>{c(""),g(""),t()};return l.jsx(be.Root,{open:e,onOpenChange:N,children:l.jsxs(be.Content,{style:{maxWidth:n==="load"?600:450},children:[l.jsx(be.Title,{children:n==="save"?"Save Data Model Project":"Load Data Model Project"}),l.jsx(be.Description,{size:"2",mb:"4",children:n==="save"?"Save your current data model project to a file.":"Load a previously saved data model project."}),n==="save"&&l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs("label",{children:[l.jsx(R,{as:"div",size:"2",mb:"1",weight:"bold",children:"Project Name"}),l.jsx(Ae.Input,{placeholder:"Enter project name...",value:s,onChange:D=>c(D.target.value),disabled:y})]}),l.jsxs("label",{children:[l.jsx(R,{as:"div",size:"2",mb:"1",weight:"bold",children:"File Format"}),l.jsx(np.Root,{value:u,onValueChange:d,disabled:y,children:l.jsxs(O,{gap:"4",children:[l.jsx("label",{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(np.Item,{value:"yaml"}),l.jsx(R,{size:"2",children:"YAML (.yaml)"}),l.jsx(we,{color:"blue",size:"1",children:"Recommended"})]})}),l.jsx("label",{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(np.Item,{value:"json"}),l.jsx(R,{size:"2",children:"JSON (.json)"})]})})]})})]}),r&&l.jsxs(te,{className:"project-summary",children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Project Summary:"}),l.jsxs(R,{size:"1",color:"gray",children:["Tables: ",((T=r.tables)==null?void 0:T.length)||0," | Relationships: ",((C=r.relationships)==null?void 0:C.length)||0," | Catalog: ",r.catalog_name," | Schema: ",r.schema_name]})]})]}),n==="load"&&l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs("label",{children:[l.jsx(R,{as:"div",size:"2",mb:"1",weight:"bold",children:"Search Projects"}),l.jsxs(Ae.Root,{children:[l.jsx(Ae.Slot,{children:l.jsx(vs,{height:"16",width:"16"})}),l.jsx(Ae.Input,{placeholder:"Search by project name...",value:h,onChange:D=>g(D.target.value)})]})]}),l.jsxs(te,{children:[l.jsxs(R,{size:"2",weight:"bold",mb:"2",children:["Saved Projects (",b.length,")"]}),l.jsx(Xt,{style:{height:"300px"},children:l.jsx(te,{className:"projects-list",children:y?l.jsx(te,{className:"loading-state",children:l.jsx(R,{size:"2",color:"gray",children:"Loading projects..."})}):b.length>0?b.map((D,L)=>{var K;return l.jsx(te,{className:"project-item",children:l.jsxs(O,{justify:"between",align:"start",children:[l.jsxs(te,{className:"project-info",style:{flex:1},children:[l.jsxs(O,{align:"center",gap:"2",mb:"1",children:[l.jsx(Ly,{size:"14"}),l.jsx(R,{size:"2",weight:"medium",children:D.name}),l.jsx(we,{color:$(D.format),size:"1",children:((K=D.format)==null?void 0:K.toUpperCase())||"JSON"})]}),l.jsxs(R,{size:"1",color:"gray",children:["Saved: ",S(D.saved_at)]})]}),l.jsx(O,{gap:"1",children:l.jsxs(xe,{size:"1",onClick:()=>_(D.name),disabled:y,children:[l.jsx(Os,{})," Load"]})})]})},L)}):l.jsx(te,{className:"empty-state",children:l.jsx(R,{size:"2",color:"gray",align:"center",children:h?"No projects match your search.":"No saved projects found."})})})})]})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",disabled:y,children:"Cancel"})}),n==="save"&&l.jsx(xe,{onClick:x,disabled:!s.trim()||y,children:y?"Saving...":"Save Project"}),n==="load"&&l.jsx(xe,{variant:"soft",onClick:v,disabled:y,children:y?"Refreshing...":"Refresh List"})]})]})})},sB=({isOpen:e,onClose:t})=>{const{currentProject:n,catalogName:r,schemaName:o,availableCatalogs:a,availableSchemas:i,loadCatalogs:s,loadSchemas:c,setProjectMetadata:u,saveProject:d}=ct(),[p,m]=f.useState(""),[h,g]=f.useState(""),[y,w]=f.useState(!1),[v,x]=f.useState(!1),[_,b]=f.useState(!1);f.useEffect(()=>{if(e&&n){console.log("🔧 ProjectSettings: Dialog opened",{availableCatalogs:(a==null?void 0:a.length)||0,availableSchemas:(i==null?void 0:i.length)||0});const D=r||n.catalog_name||"",L=o||n.schema_name||"";m(D),g(L),!a||a.length===0?(console.log("🔧 ProjectSettings: Loading catalogs..."),S()):console.log("🔧 ProjectSettings: Using existing catalogs:",a.length),D&&(console.log("🔧 ProjectSettings: Loading schemas for current catalog:",D),$(D))}},[e,n,r,o,a]),f.useEffect(()=>{p&&p!==(r||(n==null?void 0:n.catalog_name))&&$(p)},[p]);const S=async()=>{w(!0);try{await s()}catch(D){console.error("Error loading catalogs:",D)}finally{w(!1)}},$=async D=>{if(D){console.log("🔧 ProjectSettings: handleLoadSchemas called for catalog:",D),x(!0);try{const L=await c(D);console.log("🔧 ProjectSettings: Schemas loaded:",(L==null?void 0:L.length)||0)}catch(L){console.error("Error loading schemas:",L)}finally{x(!1)}}},N=async(D=!1)=>{var L,K,H,M,V;if(!(!n||!p||!h)){b(!0);try{u(n.name,p,h),await d(n.name,"yaml",D),t()}catch(j){if(console.error("Error saving project settings:",j),((L=j.response)==null?void 0:L.status)===409&&((H=(K=j.response)==null?void 0:K.data)==null?void 0:H.code)==="DUPLICATE_NAME"){if(window.confirm(`A different project named "${n.name}" already exists. This will overwrite the existing project.

Are you sure you want to continue?`))return N(!0)}else alert("Error saving project settings: "+(((V=(M=j.response)==null?void 0:M.data)==null?void 0:V.error)||j.message))}finally{b(!1)}}},T=()=>{m(r||(n==null?void 0:n.catalog_name)||""),g(o||(n==null?void 0:n.schema_name)||""),t()},C=p!==(r||(n==null?void 0:n.catalog_name))||h!==(o||(n==null?void 0:n.schema_name));return l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:500},children:[l.jsx(be.Title,{children:"Project Settings"}),l.jsx(be.Description,{size:"2",mb:"4",children:"Change the catalog and schema for this project. This will affect where tables are created when applying changes."}),l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{as:"label",size:"2",weight:"bold",children:"Project Name"}),l.jsx(R,{size:"2",color:"gray",children:(n==null?void 0:n.name)||"Untitled Project"})]}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{as:"label",size:"2",weight:"bold",children:"Catalog *"}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsxs(W.Root,{value:p,onValueChange:m,disabled:y,children:[l.jsx(W.Trigger,{placeholder:"Select a catalog...",style:{width:"100%"}}),l.jsxs(W.Content,{children:[a==null?void 0:a.map(D=>l.jsx(W.Item,{value:D.name,children:D.name},D.name)),(!a||a.length===0)&&!y&&l.jsx(W.Item,{value:"no-catalogs",disabled:!0,children:"No catalogs available"})]})]}),y&&l.jsx(R,{size:"1",color:"gray",children:"⏳"})]})]}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{as:"label",size:"2",weight:"bold",children:"Schema *"}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsxs(W.Root,{value:h,onValueChange:g,disabled:!p||v,children:[l.jsx(W.Trigger,{placeholder:"Select a schema...",style:{width:"100%"}}),l.jsxs(W.Content,{children:[i==null?void 0:i.map(D=>l.jsx(W.Item,{value:D.name,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsx(R,{children:D.name}),D.is_imported&&l.jsx(we,{color:"orange",size:"1",style:{marginLeft:"8px"},children:"imported"})]})},D.name)),(!i||i.length===0)&&!v&&p&&l.jsx(W.Item,{value:"no-schemas",disabled:!0,children:"No schemas available"})]})]}),v&&l.jsx(R,{size:"1",color:"gray",children:"⏳"})]})]}),C&&l.jsxs(O,{direction:"column",gap:"2",p:"3",style:{backgroundColor:"var(--gray-2)",borderRadius:"6px"},children:[l.jsx(R,{size:"2",weight:"bold",children:"Changes:"}),l.jsxs(R,{size:"1",color:"gray",children:["Current: ",r||(n==null?void 0:n.catalog_name)||"default",".",o||(n==null?void 0:n.schema_name)||"default"]}),l.jsxs(R,{size:"1",color:"blue",children:["New: ",p,".",h]})]})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:T,children:"Cancel"})}),l.jsx(xe,{onClick:N,disabled:!p||!h||!C||_,children:_?"⏳ Saving...":"Save Changes"})]}),l.jsx(be.Close,{children:l.jsx(xe,{variant:"ghost",color:"gray",style:{position:"absolute",top:"10px",right:"10px"},children:l.jsx(wo,{})})})]})})},zy=({isOpen:e,onClose:t,onApply:n,projectData:r})=>{const[o,a]=f.useState(!1),[i,s]=f.useState([]),[c,u]=f.useState(0),[d,p]=f.useState(""),[m,h]=f.useState(null),[g,y]=f.useState([]),[w,v]=f.useState(""),[x,_]=f.useState(!1),[b,S]=f.useState(!1),[$,N]=f.useState(null),T=f.useRef(!1);f.useEffect(()=>{e&&C()},[e]);const C=async()=>{try{const P=await fetch(`${dt()}/api/data_modeling/warehouses`);if(P.ok){const I=await P.json();y(I);const A=I.find(z=>z.state==="RUNNING");A?v(A.id):I.length>0&&v(I[0].id),D(`📋 Loaded ${I.length} warehouses`,"info")}else{const I=await P.text();console.error("Failed to load warehouses:",P.status,I),D("⚠️ Could not load warehouses from server","warning")}}catch(P){console.error("Error loading warehouses:",P),D("⚠️ Could not connect to server for warehouses","warning")}},D=(P,I="info")=>{const A=new Date().toLocaleTimeString();s(z=>[...z,{id:Date.now()+Math.random(),message:P,type:I,timestamp:A}])},L=async()=>{if(!(!$||b)){S(!0);try{(await fetch(`${dt()}/api/data_modeling/cancel_apply/${$}`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?(D("🛑 Apply operation cancellation requested...","warning"),a(!1),p("Cancelled")):(D("❌ Failed to cancel apply operation","error"),S(!1))}catch(P){console.error("Error cancelling apply operation:",P),D("❌ Error cancelling apply operation","error"),S(!1)}}},K=P=>{console.log("SSE Update received:",P);try{switch(P.type){case"connected":D("📡 Connected to progress stream","info");break;case"started":const I=P.table_names||[],A=P.total_tables||0;D(`🚀 Processing ${A} tables: ${I.join(", ")}`,"info"),p("Processing Tables");break;case"table_started":D(`⏳ Starting table ${P.table_name}...`,"info"),u(P.progress);break;case"table_completed":const z=P.result;if(z.success){if(D(`✅ Table ${z.table_name}: created/updated successfully`,"success"),z.warnings&&z.warnings.length>0&&z.warnings.forEach(Q=>{D(`   ⚠️ Warning: ${Q}`,"warning")}),z.tags){const Q=z.tags,J=Q.tag_changes_count||0;if(J>0){const ee=Q.table_tags_count||0,ie=Q.column_tags_count||0;if(Q.tag_success){D(`   🏷️ Applied ${J} tags (${ee} table, ${ie} column)`,"success");const fe=Q.tag_details||[];fe.length>0&&fe.forEach(ue=>{if(ue&&ue.entity_type&&ue.tag_key){const Ce=ue.entity_type==="tables"?"table":`column ${ue.entity_name||"unknown"}`,me=ue.action==="CREATE"?"➕":ue.action==="UPDATE"?"🔄":"➖";D(`     ${me} ${ue.action} ${Ce}.${ue.tag_key} = '${ue.tag_value||""}'`,"info")}})}else D(`   ⚠️ Tag processing failed for ${z.table_name}`,"warning")}else D(`   ℹ️ No tag changes needed for ${z.table_name}`,"info")}}else D(`❌ Table ${z.table_name}: failed to create/update`,"error"),z.error&&D(`   📝 Error: ${z.error}`,"error");u(P.progress);break;case"completed":console.log("🎯 Processing completed message:",P),p("Completed"),u(100),_(!0),T.current=!0,console.log("🎯 Progress set to 100%");const U=P.results||[],F=U.length,B=U.filter(Q=>Q&&Q.success).length,X=F-B;console.log(`🎯 Results summary: ${F} total, ${B} success, ${X} failure`),h({catalog_name:P.catalog_name||"Unknown",schema_name:P.schema_name||"Unknown",total:F,success:B,failure:X}),B===F?D(`🎉 All ${F} tables processed successfully!`,"success"):D(`⚠️ Completed with ${B} successes and ${X} failures`,"warning"),console.log("🎯 Setting isApplying to false"),a(!1);break;case"error":D(`❌ SSE Error: ${P.message}`,"error"),a(!1);break;default:console.log("Unknown progress update type:",P.type,P)}}catch(I){console.error("Error processing SSE update:",I,"Update data:",P),D(`⚠️ Error processing progress update: ${I.message}`,"warning")}},H=async()=>{if(!r){D("❌ No project data available","error");return}a(!0),s([]),u(0),h(null),_(!1),S(!1),T.current=!1;const P=`apply_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;N(P);let I=null;try{D("🚀 Starting Apply Changes process...","info"),p("Initializing"),u(10);const A=`apply_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;I=new EventSource(`${dt()}/api/data_modeling/project/${r.id}/apply_progress/${A}`),I.onmessage=U=>{try{console.log("Raw SSE data:",U.data);const F=JSON.parse(U.data);console.log("Parsed SSE update:",F),K(F)}catch(F){console.error("Error parsing SSE data:",F,"Raw data:",U.data),D(`⚠️ Error parsing progress data: ${F.message}`,"warning")}},I.onerror=U=>{T.current?console.log("SSE connection closed after successful completion"):(console.error("SSE Error:",U),D("⚠️ Connection to progress stream lost","warning"),a(!1)),I&&(I.close(),I=null)},console.log("🚀 About to call onApply with sessionId:",A),await n(r,w,A)||(D("⚠️ No response received from server","warning"),a(!1))}catch(A){D(`❌ Apply Changes failed: ${A.message}`,"error"),p("Failed"),console.error("Apply Changes error:",A)}finally{I&&(I.close(),I=null),a(!1)}},M=()=>{o||(s([]),u(0),p(""),h(null),_(!1),T.current=!1,t())},V=P=>{switch(P){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📋"}},j=P=>{switch(P){case"success":return"green";case"error":return"red";case"warning":return"orange";case"info":return"blue";default:return"gray"}};return l.jsx(be.Root,{open:e,onOpenChange:M,children:l.jsxs(be.Content,{className:"apply-progress-dialog",style:{maxWidth:"800px"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(R,{size:"5",weight:"bold",children:"Apply Changes to Databricks"}),o&&l.jsx(we,{color:"blue",variant:"soft",children:d})]})}),l.jsx(be.Description,{children:l.jsx(R,{color:"gray",children:r?`Applying changes to ${r.catalog_name}.${r.schema_name}`:"Ready to apply changes to Databricks"})}),l.jsxs(O,{direction:"column",gap:"4",mt:"4",children:[!o&&!m&&g.length>0&&l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{weight:"bold",size:"2",children:"SQL Warehouse"}),l.jsxs(W.Root,{value:w,onValueChange:v,children:[l.jsx(W.Trigger,{placeholder:"Select a warehouse..."}),l.jsx(W.Content,{children:g.map(P=>l.jsx(W.Item,{value:P.id,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:P.state==="RUNNING"?"green":"gray",variant:"soft",size:"1",children:P.state}),l.jsx(R,{children:P.name}),l.jsxs(R,{size:"1",color:"gray",children:["(",P.size,")"]})]})},P.id))})]}),l.jsx(R,{size:"1",color:"gray",children:"Choose the SQL warehouse to execute DDL statements"})]}),(o||c>0)&&l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${c}%`}})}),l.jsxs(R,{size:"2",color:"gray",children:[c,"% complete ",d&&`- ${d}`]})]}),m&&l.jsxs(O,{direction:"column",gap:"2",p:"3",className:"results-summary",children:[l.jsx(R,{weight:"bold",children:"Results Summary"}),l.jsxs(O,{gap:"4",children:[l.jsxs(we,{color:"green",variant:"soft",children:["✅ ",m.success," Success"]}),m.failure>0&&l.jsxs(we,{color:"red",variant:"soft",children:["❌ ",m.failure," Failed"]}),l.jsxs(we,{color:"gray",variant:"soft",children:["📊 ",m.total," Total"]})]}),l.jsxs(R,{size:"2",color:"gray",children:["Target: ",m.catalog_name,".",m.schema_name]})]}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{weight:"bold",children:"Execution Logs"}),l.jsx(Xt,{className:"logs-container",style:{height:"300px",border:"1px solid var(--gray-6)",borderRadius:"6px"},children:l.jsx(O,{direction:"column",gap:"1",p:"3",children:i.length===0?l.jsx(R,{color:"gray",size:"2",children:o?"Initializing...":'Click "Start Apply" to begin'}):i.map(P=>l.jsxs(O,{gap:"2",align:"start",className:"log-entry",children:[l.jsx(R,{size:"1",color:"gray",style:{minWidth:"60px"},children:P.timestamp}),l.jsxs(R,{size:"2",color:j(P.type),style:{fontFamily:"monospace",wordBreak:"break-all"},children:[V(P.type)," ",P.message]})]},P.id))})})]}),l.jsxs(O,{gap:"3",justify:"end",mt:"4",children:[l.jsx(be.Close,{asChild:!0,children:l.jsx(xe,{variant:"soft",color:"gray",disabled:o,children:m?"Close":"Cancel"})}),o&&l.jsx(xe,{variant:"soft",color:"red",onClick:L,disabled:b,children:b?"Cancelling...":"🛑 Stop Apply"}),!m&&l.jsx(xe,{onClick:H,disabled:o||!r,color:"blue",children:o?"Applying...":"Start Apply"})]})]})]})})},qy=({isOpen:e,onClose:t,onGenerateDDL:n,projectData:r,tableIds:o=null})=>{var H;const[a,i]=f.useState(!1),[s,c]=f.useState([]),[u,d]=f.useState(0),[p,m]=f.useState(""),[h,g]=f.useState(null),[y,w]=f.useState(""),[v,x]=f.useState(!1),[_,b]=f.useState(null);f.useEffect(()=>{e&&(c([]),d(0),m(""),g(null),w(""),i(!1))},[e]);const S=(M,V="info")=>{const j=new Date().toLocaleTimeString();c(P=>[...P,{id:Date.now()+Math.random(),message:M,type:V,timestamp:j}])},$=async()=>{if(!(!_||v)){x(!0);try{(await fetch(`${dt()}/api/data_modeling/cancel_ddl/${_}`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?(S("🛑 DDL generation cancellation requested...","warning"),i(!1),m("Cancelled")):(S("❌ Failed to cancel DDL generation","error"),x(!1))}catch(M){console.error("Error cancelling DDL generation:",M),S("❌ Error cancelling DDL generation","error"),x(!1)}}},N=async()=>{var V;if(!r){S("❌ No project data available","error");return}i(!0),c([]),d(0),g(null),w(""),x(!1);const M=`ddl_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;b(M);try{const j=o?o.length:((V=r.tables)==null?void 0:V.length)||0;S(`🚀 Starting DDL generation for ${o?"individual table":"all tables"}...`,"info"),m("Initializing"),d(10);const I=await n(o);if(I&&I.ddl_statements){m("Processing DDL Results"),d(70);const A=I.ddl_statements.length;let z=0,U=0,F="";I.ddl_statements.forEach((B,X)=>{B.ddl&&B.ddl.trim()?(z++,S(`✅ ${B.table_name}: DDL generated successfully`,"success"),F+=`-- DDL for ${B.table_name}
${B.ddl}

`,B.warnings&&B.warnings.length>0&&B.warnings.forEach(Q=>{S(`   ⚠️ Warning: ${Q}`,"warning")})):(U++,S(`❌ ${B.table_name}: Failed to generate DDL`,"error"),B.error&&S(`   Error: ${B.error}`,"error"))}),d(90),m("Finalizing"),g({total:A,success:z,failure:U,ddl_statements:I.ddl_statements}),w(F),S(`📊 DDL Generation Summary: ${z}/${A} successful`,"info"),U>0&&S(`⚠️ ${U} table(s) failed DDL generation`,"warning"),d(100),m("Complete")}else throw new Error("Invalid response format from DDL generation")}catch(j){console.error("DDL Generation Error:",j),S(`❌ DDL generation failed: ${j.message}`,"error"),m("Failed"),g({total:0,success:0,failure:1,error:j.message})}finally{i(!1)}},T=()=>{if(!y){S("❌ No DDL content to download","error");return}try{const M=new Blob([y],{type:"text/sql"}),V=URL.createObjectURL(M),j=document.createElement("a");j.href=V;const P=o&&o.length===1?`${r.name}_single_table_ddl.sql`:`${r.name}_ddl.sql`;j.download=P,j.click(),URL.revokeObjectURL(V),S(`📥 DDL downloaded as ${P}`,"success")}catch(M){console.error("Download error:",M),S(`❌ Failed to download DDL: ${M.message}`,"error")}},C=M=>{switch(M){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}},D=M=>{switch(M){case"success":return"green";case"error":return"red";case"warning":return"orange";default:return"blue"}},L=o?o.length:((H=r==null?void 0:r.tables)==null?void 0:H.length)||0,K=o?"Individual Table":"All Tables";return l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{className:"ddl-progress-dialog",style:{maxWidth:"900px",width:"90vw"},children:[l.jsxs(be.Title,{children:["Generate ",K," DDL"]}),l.jsxs(be.Description,{children:["Generate DDL statements for ",L,' table(s) in project "',r==null?void 0:r.name,'"']}),l.jsxs(O,{direction:"column",gap:"4",style:{minHeight:h&&y?"600px":"400px"},children:[l.jsxs(O,{direction:"column",gap:"2",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"2",weight:"medium",children:p&&`Phase: ${p}`}),l.jsxs(R,{size:"2",color:"gray",children:[u,"%"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${u}%`}})})]}),h&&l.jsxs(O,{gap:"2",wrap:"wrap",children:[l.jsxs(we,{color:"blue",size:"2",children:["Total: ",h.total]}),l.jsxs(we,{color:"green",size:"2",children:["Success: ",h.success]}),h.failure>0&&l.jsxs(we,{color:"red",size:"2",children:["Failed: ",h.failure]})]}),h&&y&&l.jsxs(O,{direction:"column",gap:"2",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"3",weight:"medium",children:"📋 Generated DDL Preview"}),l.jsxs(O,{gap:"2",align:"center",children:[l.jsx(jn,{size:"1",variant:"soft",title:"Copy DDL to clipboard",onClick:()=>{navigator.clipboard.writeText(y).then(()=>{S("📋 DDL copied to clipboard","success")}).catch(()=>{S("❌ Failed to copy DDL to clipboard","error")})},children:l.jsx(Oq,{})}),l.jsx(we,{color:"green",size:"1",children:"Ready to Download"})]})]}),l.jsx(Xt,{style:{height:"250px",border:"1px solid var(--gray-7)",borderRadius:"4px"},scrollbars:"both",children:l.jsx(te,{p:"3",children:l.jsx("pre",{style:{margin:0,fontSize:"12px",fontFamily:'Monaco, "Lucida Console", monospace',whiteSpace:"pre-wrap",wordBreak:"break-word",color:"var(--gray-12)",backgroundColor:"var(--gray-2)",padding:"12px",borderRadius:"4px",lineHeight:"1.4"},children:y})})})]}),l.jsx(Xt,{style:{height:h&&y?"200px":"300px"},scrollbars:"vertical",children:l.jsxs(O,{direction:"column",gap:"1",p:"2",children:[s.map(M=>l.jsxs(O,{gap:"2",align:"start",children:[l.jsx(R,{size:"1",color:"gray",style:{minWidth:"60px"},children:M.timestamp}),l.jsxs(R,{size:"2",color:D(M.type),children:[C(M.type)," ",M.message]})]},M.id)),s.length===0&&l.jsx(R,{size:"2",color:"gray",style:{fontStyle:"italic"},children:'Click "Generate DDL" to start...'})]})}),l.jsxs(O,{gap:"3",justify:"end",children:[!a&&!h&&l.jsx(xe,{onClick:N,disabled:!r||L===0,children:"Generate DDL"}),a&&l.jsx(xe,{variant:"soft",color:"red",onClick:$,disabled:v,children:v?"Cancelling...":"🛑 Stop DDL"}),h&&y&&l.jsx(xe,{onClick:T,variant:"solid",color:"green",children:"📥 Download DDL"}),l.jsx(xe,{variant:"soft",onClick:t,disabled:a,children:h?"Close":"Cancel"})]})]})]})})},lB=()=>{const{currentProject:e,tables:t,catalogName:n,schemaName:r,generateDDL:o,applyChanges:a,setShowProjectDialog:i,setShowProjectStartupDialog:s,setShowTableDialog:c,setShowImportDialog:u,setShowMetricViewDialog:d,setShowTraditionalViewDialog:p}=ct();re.useEffect(()=>{},[e==null?void 0:e.name]);const[m,h]=f.useState(!1),[g,y]=f.useState(!1),[w,v]=f.useState(!1),[x,_]=f.useState(!1),b=()=>{h(!0)},S=()=>{s(!0,"load")},$=()=>{y(!0)},N=()=>{console.log("🔧 Current project:",e),console.log("🔧 Tables count:",(t==null?void 0:t.length)||0),_(!0)},T=async L=>(console.log("📋 Table IDs:",L),await o(L||[])),C=()=>{v(!0)},D=async(L,K,H)=>{try{return await a([],!0,K,H)}catch(M){throw console.error("❌ NavigationBar: Error applying changes:",M),M}};return l.jsxs("div",{id:"navigation-bar-ctr",children:[l.jsxs(O,{gap:"3",justify:"between",align:"center",style:{width:"100%"},children:[l.jsx(O,{gap:"3",align:"center",children:l.jsx(te,{className:"prevent-select",children:l.jsx(Et,{as:"h1",id:"navigation-bar-title",children:"Data Modeler App"})})}),e&&l.jsxs(O,{gap:"2",className:"project-info-center",children:[l.jsxs(we,{color:"blue",size:"2",children:[e.name," (",(t==null?void 0:t.length)||0," tables)"]}),(n||r)&&l.jsxs(we,{color:"gray",size:"2",variant:"soft",children:[n||e.catalog_name||"default",".",r||e.schema_name||"default"]})]}),l.jsxs(O,{gap:"3",className:"toolbar-buttons",children:[l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsxs(xe,{className:"nav-button nav-button-project",style:{background:"#FF3621",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:"500",fontSize:"14px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(255, 54, 33, 0.2)"},children:[l.jsx(Ly,{})," Project ",l.jsx(Cc,{})]})}),l.jsxs(Le.Content,{style:{background:"#FBFAF8",border:"1px solid rgba(255, 54, 33, 0.2)",borderRadius:"8px",boxShadow:"0 8px 24px rgba(255, 54, 33, 0.15)",padding:"4px"},children:[l.jsxs(Le.Item,{onClick:()=>s(!0,"create"),style:{color:"#FF3621",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Mn,{})," New Project"]}),l.jsxs(Le.Item,{onClick:S,style:{color:"#FF3621",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Os,{})," Load Project"]}),l.jsxs(Le.Item,{onClick:()=>u(!0),disabled:!e,style:{color:e?"#FF3621":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Os,{})," Import from Databricks"]}),l.jsx(Le.Separator,{style:{background:"rgba(255, 54, 33, 0.2)",margin:"4px 0"}}),l.jsxs(Le.Item,{onClick:$,disabled:!e,style:{color:e?"#FF3621":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx($i,{})," Project Settings"]}),l.jsxs(Le.Item,{onClick:b,disabled:!e,style:{color:e?"#FF3621":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Ly,{})," Save Project"]})]})]}),l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsxs(xe,{className:"nav-button nav-button-tables",disabled:!e,style:{background:e?"#FF6B54":"#D1D0CC",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:"500",fontSize:"14px",transition:"all 0.2s ease",boxShadow:e?"0 2px 8px rgba(255, 107, 84, 0.2)":"none",cursor:e?"pointer":"not-allowed"},children:[l.jsx(Mn,{})," Tables ",l.jsx(Cc,{})]})}),l.jsxs(Le.Content,{style:{background:"#FBFAF8",border:"1px solid rgba(255, 107, 84, 0.2)",borderRadius:"8px",boxShadow:"0 8px 24px rgba(255, 107, 84, 0.15)",padding:"4px"},children:[l.jsxs(Le.Item,{onClick:()=>c(!0),disabled:!e,style:{color:e?"#FF6B54":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Mn,{})," Create New Table"]}),l.jsxs(Le.Item,{onClick:()=>u(!0),disabled:!e,style:{color:e?"#FF6B54":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Os,{})," Import Existing Tables"]})]})]}),l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsxs(xe,{className:"nav-button nav-button-views",disabled:!e,style:{background:e?"#E02D1A":"#D1D0CC",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:"500",fontSize:"14px",transition:"all 0.2s ease",boxShadow:e?"0 2px 8px rgba(224, 45, 26, 0.2)":"none",cursor:e?"pointer":"not-allowed"},children:[l.jsx(dn,{})," Views ",l.jsx(Cc,{})]})}),l.jsxs(Le.Content,{style:{background:"#FBFAF8",border:"1px solid rgba(224, 45, 26, 0.2)",borderRadius:"8px",boxShadow:"0 8px 24px rgba(224, 45, 26, 0.15)",padding:"4px"},children:[l.jsxs(Le.Item,{onClick:()=>{if(!t||t.length===0){alert("You need to create or import at least one table before creating a metric view. Metric views require a source table to define dimensions and measures.");return}d(!0,null)},disabled:!e,style:{color:e?"#E02D1A":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(en,{})," Create Metric View"]}),l.jsxs(Le.Item,{onClick:()=>p(!0,null),disabled:!e,style:{color:e?"#E02D1A":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(dn,{})," Create Traditional View"]})]})]}),l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsxs(xe,{className:"nav-button nav-button-actions",disabled:!e||((t==null?void 0:t.length)||0)===0,style:{background:e&&((t==null?void 0:t.length)||0)>0?"#B01E15":"#D1D0CC",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:"500",fontSize:"14px",transition:"all 0.2s ease",boxShadow:e&&((t==null?void 0:t.length)||0)>0?"0 2px 8px rgba(176, 30, 21, 0.2)":"none",cursor:e&&((t==null?void 0:t.length)||0)>0?"pointer":"not-allowed"},children:[l.jsx($i,{})," Actions ",l.jsx(Cc,{})]})}),l.jsxs(Le.Content,{style:{background:"#FBFAF8",border:"1px solid rgba(176, 30, 21, 0.2)",borderRadius:"8px",boxShadow:"0 8px 24px rgba(176, 30, 21, 0.15)",padding:"4px"},children:[l.jsx(Le.Item,{onClick:N,style:{color:e&&((t==null?void 0:t.length)||0)>0?"#B01E15":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:"Generate All Tables DDL"}),l.jsxs(Le.Item,{onClick:C,style:{color:e&&((t==null?void 0:t.length)||0)>0?"#B01E15":"#8A8A8A",padding:"8px 12px",borderRadius:"6px"},children:[l.jsx(Dd,{})," Apply All Tables to Databricks"]})]})]})]})]}),l.jsx(iB,{isOpen:m,onClose:()=>h(!1),mode:"save"}),l.jsx(sB,{isOpen:g,onClose:()=>y(!1)}),l.jsx(zy,{isOpen:w,onClose:()=>v(!1),onApply:D,projectData:e}),l.jsx(qy,{isOpen:x,onClose:()=>_(!1),onGenerateDDL:T,projectData:e,tableIds:null})]})};function Gt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Gt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:cB}=re,{useSyncExternalStoreWithSelector:uB}=F6,dB=e=>e;function d7(e,t=dB,n){const r=uB(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return cB(r),r}const Pb=(e,t)=>{const n=P6(e),r=(o,a=t)=>d7(n,o,a);return Object.assign(r,n),r},fB=(e,t)=>e?Pb(e,t):Pb;function Ft(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var pB={value:()=>{}};function Pd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new eu(n)}function eu(e){this._=e}function hB(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}eu.prototype=Pd.prototype={constructor:eu,on:function(e,t){var n=this._,r=hB(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=mB(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Ib(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ib(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new eu(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function mB(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ib(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=pB,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var By="http://www.w3.org/1999/xhtml";const Mb={svg:"http://www.w3.org/2000/svg",xhtml:By,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Id(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Mb.hasOwnProperty(t)?{space:Mb[t],local:e}:e}function gB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===By&&t.documentElement.namespaceURI===By?t.createElement(e):t.createElementNS(n,e)}}function yB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function f7(e){var t=Id(e);return(t.local?yB:gB)(t)}function vB(){}function Ux(e){return e==null?vB:function(){return this.querySelector(e)}}function xB(e){typeof e!="function"&&(e=Ux(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,u,d=0;d<i;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),s[d]=u);return new Tn(r,this._parents)}function _B(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wB(){return[]}function p7(e){return e==null?wB:function(){return this.querySelectorAll(e)}}function bB(e){return function(){return _B(e.apply(this,arguments))}}function CB(e){typeof e=="function"?e=bB(e):e=p7(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,u=0;u<s;++u)(c=i[u])&&(r.push(e.call(c,c.__data__,u,i)),o.push(c));return new Tn(r,o)}function h7(e){return function(){return this.matches(e)}}function m7(e){return function(t){return t.matches(e)}}var SB=Array.prototype.find;function jB(e){return function(){return SB.call(this.children,e)}}function EB(){return this.firstElementChild}function $B(e){return this.select(e==null?EB:jB(typeof e=="function"?e:m7(e)))}var RB=Array.prototype.filter;function TB(){return Array.from(this.children)}function NB(e){return function(){return RB.call(this.children,e)}}function kB(e){return this.selectAll(e==null?TB:NB(typeof e=="function"?e:m7(e)))}function AB(e){typeof e!="function"&&(e=h7(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new Tn(r,this._parents)}function g7(e){return new Array(e.length)}function DB(){return new Tn(this._enter||this._groups.map(g7),this._parents)}function Fu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fu.prototype={constructor:Fu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function PB(e){return function(){return e}}function IB(e,t,n,r,o,a){for(var i=0,s,c=t.length,u=a.length;i<u;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new Fu(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function MB(e,t,n,r,o,a,i){var s,c,u=new Map,d=t.length,p=a.length,m=new Array(d),h;for(s=0;s<d;++s)(c=t[s])&&(m[s]=h=i.call(c,c.__data__,s,t)+"",u.has(h)?o[s]=c:u.set(h,c));for(s=0;s<p;++s)h=i.call(e,a[s],s,a)+"",(c=u.get(h))?(r[s]=c,c.__data__=a[s],u.delete(h)):n[s]=new Fu(e,a[s]);for(s=0;s<d;++s)(c=t[s])&&u.get(m[s])===c&&(o[s]=c)}function OB(e){return e.__data__}function LB(e,t){if(!arguments.length)return Array.from(this,OB);var n=t?MB:IB,r=this._parents,o=this._groups;typeof e!="function"&&(e=PB(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var d=r[u],p=o[u],m=p.length,h=FB(e.call(d,d&&d.__data__,u,r)),g=h.length,y=s[u]=new Array(g),w=i[u]=new Array(g),v=c[u]=new Array(m);n(d,p,y,w,v,h,t);for(var x=0,_=0,b,S;x<g;++x)if(b=y[x]){for(x>=_&&(_=x+1);!(S=w[_])&&++_<g;);b._next=S||null}}return i=new Tn(i,r),i._enter=s,i._exit=c,i}function FB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zB(){return new Tn(this._exit||this._groups.map(g7),this._parents)}function qB(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function BB(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var u=n[c],d=r[c],p=u.length,m=s[c]=new Array(p),h,g=0;g<p;++g)(h=u[g]||d[g])&&(m[g]=h);for(;c<o;++c)s[c]=n[c];return new Tn(s,this._parents)}function VB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function HB(e){e||(e=UB);function t(p,m){return p&&m?e(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),u,d=0;d<s;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Tn(o,this._parents).order()}function UB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function GB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function WB(){return Array.from(this)}function KB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function YB(){let e=0;for(const t of this)++e;return e}function XB(){return!this.node()}function ZB(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function QB(e){return function(){this.removeAttribute(e)}}function JB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eV(e,t){return function(){this.setAttribute(e,t)}}function tV(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nV(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rV(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oV(e,t){var n=Id(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?JB:QB:typeof t=="function"?n.local?rV:nV:n.local?tV:eV)(n,t))}function y7(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aV(e){return function(){this.style.removeProperty(e)}}function iV(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sV(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function lV(e,t,n){return arguments.length>1?this.each((t==null?aV:typeof t=="function"?sV:iV)(e,t,n??"")):Ri(this.node(),e)}function Ri(e,t){return e.style.getPropertyValue(t)||y7(e).getComputedStyle(e,null).getPropertyValue(t)}function cV(e){return function(){delete this[e]}}function uV(e,t){return function(){this[e]=t}}function dV(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fV(e,t){return arguments.length>1?this.each((t==null?cV:typeof t=="function"?dV:uV)(e,t)):this.node()[e]}function v7(e){return e.trim().split(/^|\s+/)}function Gx(e){return e.classList||new x7(e)}function x7(e){this._node=e,this._names=v7(e.getAttribute("class")||"")}x7.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _7(e,t){for(var n=Gx(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function w7(e,t){for(var n=Gx(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function pV(e){return function(){_7(this,e)}}function hV(e){return function(){w7(this,e)}}function mV(e,t){return function(){(t.apply(this,arguments)?_7:w7)(this,e)}}function gV(e,t){var n=v7(e+"");if(arguments.length<2){for(var r=Gx(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?mV:t?pV:hV)(n,t))}function yV(){this.textContent=""}function vV(e){return function(){this.textContent=e}}function xV(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function _V(e){return arguments.length?this.each(e==null?yV:(typeof e=="function"?xV:vV)(e)):this.node().textContent}function wV(){this.innerHTML=""}function bV(e){return function(){this.innerHTML=e}}function CV(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function SV(e){return arguments.length?this.each(e==null?wV:(typeof e=="function"?CV:bV)(e)):this.node().innerHTML}function jV(){this.nextSibling&&this.parentNode.appendChild(this)}function EV(){return this.each(jV)}function $V(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function RV(){return this.each($V)}function TV(e){var t=typeof e=="function"?e:f7(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function NV(){return null}function kV(e,t){var n=typeof e=="function"?e:f7(e),r=t==null?NV:typeof t=="function"?t:Ux(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function AV(){var e=this.parentNode;e&&e.removeChild(this)}function DV(){return this.each(AV)}function PV(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function IV(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MV(e){return this.select(e?IV:PV)}function OV(e){return arguments.length?this.property("__data__",e):this.node().__data__}function LV(e){return function(t){e.call(this,t,this.__data__)}}function FV(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zV(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function qV(e,t,n){return function(){var r=this.__on,o,a=LV(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function BV(e,t,n){var r=FV(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,d;c<u;++c)for(o=0,d=s[c];o<a;++o)if((i=r[o]).type===d.type&&i.name===d.name)return d.value}return}for(s=t?qV:zV,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function b7(e,t,n){var r=y7(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function VV(e,t){return function(){return b7(this,e,t)}}function HV(e,t){return function(){return b7(this,e,t.apply(this,arguments))}}function UV(e,t){return this.each((typeof t=="function"?HV:VV)(e,t))}function*GV(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var C7=[null];function Tn(e,t){this._groups=e,this._parents=t}function Nl(){return new Tn([[document.documentElement]],C7)}function WV(){return this}Tn.prototype=Nl.prototype={constructor:Tn,select:xB,selectAll:CB,selectChild:$B,selectChildren:kB,filter:AB,data:LB,enter:DB,exit:zB,join:qB,merge:BB,selection:WV,order:VB,sort:HB,call:GB,nodes:WB,node:KB,size:YB,empty:XB,each:ZB,attr:oV,style:lV,property:fV,classed:gV,text:_V,html:SV,raise:EV,lower:RV,append:TV,insert:kV,remove:DV,clone:MV,datum:OV,on:BV,dispatch:UV,[Symbol.iterator]:GV};function Pn(e){return typeof e=="string"?new Tn([[document.querySelector(e)]],[document.documentElement]):new Tn([[e]],C7)}function KV(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qn(e,t){if(e=KV(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const YV={passive:!1},sl={capture:!0,passive:!1};function _p(e){e.stopImmediatePropagation()}function di(e){e.preventDefault(),e.stopImmediatePropagation()}function S7(e){var t=e.document.documentElement,n=Pn(e).on("dragstart.drag",di,sl);"onselectstart"in t?n.on("selectstart.drag",di,sl):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function j7(e,t){var n=e.document.documentElement,r=Pn(e).on("dragstart.drag",null);t&&(r.on("click.drag",di,sl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jc=e=>()=>e;function Vy(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Vy.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function XV(e){return!e.ctrlKey&&!e.button}function ZV(){return this.parentNode}function QV(e,t){return t??{x:e.x,y:e.y}}function JV(){return navigator.maxTouchPoints||"ontouchstart"in this}function eH(){var e=XV,t=ZV,n=QV,r=JV,o={},a=Pd("start","drag","end"),i=0,s,c,u,d,p=0;function m(b){b.on("mousedown.drag",h).filter(r).on("touchstart.drag",w).on("touchmove.drag",v,YV).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,S){if(!(d||!e.call(this,b,S))){var $=_(this,t.call(this,b,S),b,S,"mouse");$&&(Pn(b.view).on("mousemove.drag",g,sl).on("mouseup.drag",y,sl),S7(b.view),_p(b),u=!1,s=b.clientX,c=b.clientY,$("start",b))}}function g(b){if(di(b),!u){var S=b.clientX-s,$=b.clientY-c;u=S*S+$*$>p}o.mouse("drag",b)}function y(b){Pn(b.view).on("mousemove.drag mouseup.drag",null),j7(b.view,u),di(b),o.mouse("end",b)}function w(b,S){if(e.call(this,b,S)){var $=b.changedTouches,N=t.call(this,b,S),T=$.length,C,D;for(C=0;C<T;++C)(D=_(this,N,b,S,$[C].identifier,$[C]))&&(_p(b),D("start",b,$[C]))}}function v(b){var S=b.changedTouches,$=S.length,N,T;for(N=0;N<$;++N)(T=o[S[N].identifier])&&(di(b),T("drag",b,S[N]))}function x(b){var S=b.changedTouches,$=S.length,N,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<$;++N)(T=o[S[N].identifier])&&(_p(b),T("end",b,S[N]))}function _(b,S,$,N,T,C){var D=a.copy(),L=Qn(C||$,S),K,H,M;if((M=n.call(b,new Vy("beforestart",{sourceEvent:$,target:m,identifier:T,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:D}),N))!=null)return K=M.x-L[0]||0,H=M.y-L[1]||0,function V(j,P,I){var A=L,z;switch(j){case"start":o[T]=V,z=i++;break;case"end":delete o[T],--i;case"drag":L=Qn(I||P,S),z=i;break}D.call(j,b,new Vy(j,{sourceEvent:P,subject:M,target:m,identifier:T,active:z,x:L[0]+K,y:L[1]+H,dx:L[0]-A[0],dy:L[1]-A[1],dispatch:D}),N)}}return m.filter=function(b){return arguments.length?(e=typeof b=="function"?b:jc(!!b),m):e},m.container=function(b){return arguments.length?(t=typeof b=="function"?b:jc(b),m):t},m.subject=function(b){return arguments.length?(n=typeof b=="function"?b:jc(b),m):n},m.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:jc(!!b),m):r},m.on=function(){var b=a.on.apply(a,arguments);return b===a?m:b},m.clickDistance=function(b){return arguments.length?(p=(b=+b)*b,m):Math.sqrt(p)},m}function Wx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function E7(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kl(){}var ll=.7,zu=1/ll,fi="\\s*([+-]?\\d+)\\s*",cl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tH=/^#([0-9a-f]{3,8})$/,nH=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),rH=new RegExp(`^rgb\\(${_r},${_r},${_r}\\)$`),oH=new RegExp(`^rgba\\(${fi},${fi},${fi},${cl}\\)$`),aH=new RegExp(`^rgba\\(${_r},${_r},${_r},${cl}\\)$`),iH=new RegExp(`^hsl\\(${cl},${_r},${_r}\\)$`),sH=new RegExp(`^hsla\\(${cl},${_r},${_r},${cl}\\)$`),Ob={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wx(kl,ul,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lb,formatHex:Lb,formatHex8:lH,formatHsl:cH,formatRgb:Fb,toString:Fb});function Lb(){return this.rgb().formatHex()}function lH(){return this.rgb().formatHex8()}function cH(){return $7(this).formatHsl()}function Fb(){return this.rgb().formatRgb()}function ul(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zb(t):n===3?new fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ec(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ec(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nH.exec(e))?new fn(t[1],t[2],t[3],1):(t=rH.exec(e))?new fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oH.exec(e))?Ec(t[1],t[2],t[3],t[4]):(t=aH.exec(e))?Ec(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iH.exec(e))?Vb(t[1],t[2]/100,t[3]/100,1):(t=sH.exec(e))?Vb(t[1],t[2]/100,t[3]/100,t[4]):Ob.hasOwnProperty(e)?zb(Ob[e]):e==="transparent"?new fn(NaN,NaN,NaN,0):null}function zb(e){return new fn(e>>16&255,e>>8&255,e&255,1)}function Ec(e,t,n,r){return r<=0&&(e=t=n=NaN),new fn(e,t,n,r)}function uH(e){return e instanceof kl||(e=ul(e)),e?(e=e.rgb(),new fn(e.r,e.g,e.b,e.opacity)):new fn}function Hy(e,t,n,r){return arguments.length===1?uH(e):new fn(e,t,n,r??1)}function fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wx(fn,Hy,E7(kl,{brighter(e){return e=e==null?zu:Math.pow(zu,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ll:Math.pow(ll,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fn(la(this.r),la(this.g),la(this.b),qu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qb,formatHex:qb,formatHex8:dH,formatRgb:Bb,toString:Bb}));function qb(){return`#${na(this.r)}${na(this.g)}${na(this.b)}`}function dH(){return`#${na(this.r)}${na(this.g)}${na(this.b)}${na((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bb(){const e=qu(this.opacity);return`${e===1?"rgb(":"rgba("}${la(this.r)}, ${la(this.g)}, ${la(this.b)}${e===1?")":`, ${e})`}`}function qu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function la(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function na(e){return e=la(e),(e<16?"0":"")+e.toString(16)}function Vb(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new er(e,t,n,r)}function $7(e){if(e instanceof er)return new er(e.h,e.s,e.l,e.opacity);if(e instanceof kl||(e=ul(e)),!e)return new er;if(e instanceof er)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new er(i,s,c,e.opacity)}function fH(e,t,n,r){return arguments.length===1?$7(e):new er(e,t,n,r??1)}function er(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wx(er,fH,E7(kl,{brighter(e){return e=e==null?zu:Math.pow(zu,e),new er(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ll:Math.pow(ll,e),new er(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new fn(wp(e>=240?e-240:e+120,o,r),wp(e,o,r),wp(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new er(Hb(this.h),$c(this.s),$c(this.l),qu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qu(this.opacity);return`${e===1?"hsl(":"hsla("}${Hb(this.h)}, ${$c(this.s)*100}%, ${$c(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hb(e){return e=(e||0)%360,e<0?e+360:e}function $c(e){return Math.max(0,Math.min(1,e||0))}function wp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const R7=e=>()=>e;function pH(e,t){return function(n){return e+n*t}}function hH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mH(e){return(e=+e)==1?T7:function(t,n){return n-t?hH(t,n,e):R7(isNaN(t)?n:t)}}function T7(e,t){var n=t-e;return n?pH(e,n):R7(isNaN(e)?t:e)}const Ub=function e(t){var n=mH(t);function r(o,a){var i=n((o=Hy(o)).r,(a=Hy(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),u=T7(o.opacity,a.opacity);return function(d){return o.r=i(d),o.g=s(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function po(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Uy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bp=new RegExp(Uy.source,"g");function gH(e){return function(){return e}}function yH(e){return function(t){return e(t)+""}}function vH(e,t){var n=Uy.lastIndex=bp.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=Uy.exec(e))&&(o=bp.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:po(r,o)})),n=bp.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?yH(c[0].x):gH(t):(t=c.length,function(u){for(var d=0,p;d<t;++d)s[(p=c[d]).i]=p.x(u);return s.join("")})}var Gb=180/Math.PI,Gy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N7(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Gb,skewX:Math.atan(c)*Gb,scaleX:i,scaleY:s}}var Rc;function xH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gy:N7(t.a,t.b,t.c,t.d,t.e,t.f)}function _H(e){return e==null||(Rc||(Rc=document.createElementNS("http://www.w3.org/2000/svg","g")),Rc.setAttribute("transform",e),!(e=Rc.transform.baseVal.consolidate()))?Gy:(e=e.matrix,N7(e.a,e.b,e.c,e.d,e.e,e.f))}function k7(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function a(u,d,p,m,h,g){if(u!==p||d!==m){var y=h.push("translate(",null,t,null,n);g.push({i:y-4,x:po(u,p)},{i:y-2,x:po(d,m)})}else(p||m)&&h.push("translate("+p+t+m+n)}function i(u,d,p,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:p.push(o(p)+"rotate(",null,r)-2,x:po(u,d)})):d&&p.push(o(p)+"rotate("+d+r)}function s(u,d,p,m){u!==d?m.push({i:p.push(o(p)+"skewX(",null,r)-2,x:po(u,d)}):d&&p.push(o(p)+"skewX("+d+r)}function c(u,d,p,m,h,g){if(u!==p||d!==m){var y=h.push(o(h)+"scale(",null,",",null,")");g.push({i:y-4,x:po(u,p)},{i:y-2,x:po(d,m)})}else(p!==1||m!==1)&&h.push(o(h)+"scale("+p+","+m+")")}return function(u,d){var p=[],m=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,p,m),i(u.rotate,d.rotate,p,m),s(u.skewX,d.skewX,p,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,p,m),u=d=null,function(h){for(var g=-1,y=m.length,w;++g<y;)p[(w=m[g]).i]=w.x(h);return p.join("")}}}var wH=k7(xH,"px, ","px)","deg)"),bH=k7(_H,", ",")",")"),CH=1e-12;function Wb(e){return((e=Math.exp(e))+1/e)/2}function SH(e){return((e=Math.exp(e))-1/e)/2}function jH(e){return((e=Math.exp(2*e))-1)/(e+1)}const EH=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],u=a[2],d=i[0],p=i[1],m=i[2],h=d-s,g=p-c,y=h*h+g*g,w,v;if(y<CH)v=Math.log(m/u)/t,w=function(N){return[s+N*h,c+N*g,u*Math.exp(t*N*v)]};else{var x=Math.sqrt(y),_=(m*m-u*u+r*y)/(2*u*n*x),b=(m*m-u*u-r*y)/(2*m*n*x),S=Math.log(Math.sqrt(_*_+1)-_),$=Math.log(Math.sqrt(b*b+1)-b);v=($-S)/t,w=function(N){var T=N*v,C=Wb(S),D=u/(n*x)*(C*jH(t*T+S)-SH(S));return[s+D*h,c+D*g,u*C/Wb(t*T+S)]}}return w.duration=v*1e3*t/Math.SQRT2,w}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);var Ti=0,xs=0,cs=0,A7=1e3,Bu,_s,Vu=0,ga=0,Md=0,dl=typeof performance=="object"&&performance.now?performance:Date,D7=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kx(){return ga||(D7($H),ga=dl.now()+Md)}function $H(){ga=0}function Hu(){this._call=this._time=this._next=null}Hu.prototype=P7.prototype={constructor:Hu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Kx():+n)+(t==null?0:+t),!this._next&&_s!==this&&(_s?_s._next=this:Bu=this,_s=this),this._call=e,this._time=n,Wy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wy())}};function P7(e,t,n){var r=new Hu;return r.restart(e,t,n),r}function RH(){Kx(),++Ti;for(var e=Bu,t;e;)(t=ga-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ti}function Kb(){ga=(Vu=dl.now())+Md,Ti=xs=0;try{RH()}finally{Ti=0,NH(),ga=0}}function TH(){var e=dl.now(),t=e-Vu;t>A7&&(Md-=t,Vu=e)}function NH(){for(var e,t=Bu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bu=n);_s=e,Wy(r)}function Wy(e){if(!Ti){xs&&(xs=clearTimeout(xs));var t=e-ga;t>24?(e<1/0&&(xs=setTimeout(Kb,e-dl.now()-Md)),cs&&(cs=clearInterval(cs))):(cs||(Vu=dl.now(),cs=setInterval(TH,A7)),Ti=1,D7(Kb))}}function Yb(e,t,n){var r=new Hu;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var kH=Pd("start","end","cancel","interrupt"),AH=[],I7=0,Xb=1,Ky=2,tu=3,Zb=4,Yy=5,nu=6;function Od(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;DH(e,n,{name:t,index:r,group:o,on:kH,tween:AH,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:I7})}function Yx(e,t){var n=cr(e,t);if(n.state>I7)throw new Error("too late; already scheduled");return n}function Cr(e,t){var n=cr(e,t);if(n.state>tu)throw new Error("too late; already running");return n}function cr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function DH(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=P7(a,0,n.time);function a(u){n.state=Xb,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,p,m,h;if(n.state!==Xb)return c();for(d in r)if(h=r[d],h.name===n.name){if(h.state===tu)return Yb(i);h.state===Zb?(h.state=nu,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[d]):+d<t&&(h.state=nu,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[d])}if(Yb(function(){n.state===tu&&(n.state=Zb,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ky,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ky){for(n.state=tu,o=new Array(m=n.tween.length),d=0,p=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=h);o.length=p+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Yy,1),p=-1,m=o.length;++p<m;)o[p].call(e,d);n.state===Yy&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=nu,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ru(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Ky&&r.state<Yy,r.state=nu,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function PH(e){return this.each(function(){ru(this,e)})}function IH(e,t){var n,r;return function(){var o=Cr(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function MH(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Cr(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=s;break}c===u&&o.push(s)}a.tween=o}}function OH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=cr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?IH:MH)(n,e,t))}function Xx(e,t,n){var r=e._id;return e.each(function(){var o=Cr(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return cr(o,r).value[t]}}function M7(e,t){var n;return(typeof t=="number"?po:t instanceof ul?Ub:(n=ul(t))?(t=n,Ub):vH)(e,t)}function LH(e){return function(){this.removeAttribute(e)}}function FH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zH(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function qH(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function BH(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function VH(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function HH(e,t){var n=Id(e),r=n==="transform"?bH:M7;return this.attrTween(e,typeof t=="function"?(n.local?VH:BH)(n,r,Xx(this,"attr."+e,t)):t==null?(n.local?FH:LH)(n):(n.local?qH:zH)(n,r,t))}function UH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function GH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function WH(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&GH(e,a)),n}return o._value=t,o}function KH(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&UH(e,a)),n}return o._value=t,o}function YH(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Id(e);return this.tween(n,(r.local?WH:KH)(r,t))}function XH(e,t){return function(){Yx(this,e).delay=+t.apply(this,arguments)}}function ZH(e,t){return t=+t,function(){Yx(this,e).delay=t}}function QH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?XH:ZH)(t,e)):cr(this.node(),t).delay}function JH(e,t){return function(){Cr(this,e).duration=+t.apply(this,arguments)}}function eU(e,t){return t=+t,function(){Cr(this,e).duration=t}}function tU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?JH:eU)(t,e)):cr(this.node(),t).duration}function nU(e,t){if(typeof t!="function")throw new Error;return function(){Cr(this,e).ease=t}}function rU(e){var t=this._id;return arguments.length?this.each(nU(t,e)):cr(this.node(),t).ease}function oU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cr(this,e).ease=n}}function aU(e){if(typeof e!="function")throw new Error;return this.each(oU(this._id,e))}function iU(e){typeof e!="function"&&(e=h7(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new Kr(r,this._parents,this._name,this._id)}function sU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],u=n[s],d=c.length,p=i[s]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(p[h]=m);for(;s<r;++s)i[s]=t[s];return new Kr(i,this._parents,this._name,this._id)}function lU(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cU(e,t,n){var r,o,a=lU(t)?Yx:Cr;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function uU(e,t){var n=this._id;return arguments.length<2?cr(this.node(),n).on.on(e):this.each(cU(n,e,t))}function dU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fU(){return this.on("end.remove",dU(this._id))}function pU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ux(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,u=a[i]=new Array(c),d,p,m=0;m<c;++m)(d=s[m])&&(p=e.call(d,d.__data__,m,s))&&("__data__"in d&&(p.__data__=d.__data__),u[m]=p,Od(u[m],t,n,m,u,cr(d,n)));return new Kr(a,this._parents,t,n)}function hU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=p7(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],u=c.length,d,p=0;p<u;++p)if(d=c[p]){for(var m=e.call(d,d.__data__,p,c),h,g=cr(d,n),y=0,w=m.length;y<w;++y)(h=m[y])&&Od(h,t,n,y,m,g);a.push(m),i.push(d)}return new Kr(a,i,t,n)}var mU=Nl.prototype.constructor;function gU(){return new mU(this._groups,this._parents)}function yU(e,t){var n,r,o;return function(){var a=Ri(this,e),i=(this.style.removeProperty(e),Ri(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function O7(e){return function(){this.style.removeProperty(e)}}function vU(e,t,n){var r,o=n+"",a;return function(){var i=Ri(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function xU(e,t,n){var r,o,a;return function(){var i=Ri(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Ri(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function _U(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=Cr(this,e),u=c.on,d=c.value[a]==null?s||(s=O7(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(i,o=d),c.on=r}}function wU(e,t,n){var r=(e+="")=="transform"?wH:M7;return t==null?this.styleTween(e,yU(e,r)).on("end.style."+e,O7(e)):typeof t=="function"?this.styleTween(e,xU(e,r,Xx(this,"style."+e,t))).each(_U(this._id,e)):this.styleTween(e,vU(e,r,t),n).on("end.style."+e,null)}function bU(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function CU(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&bU(e,i,n)),r}return a._value=t,a}function SU(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,CU(e,t,n??""))}function jU(e){return function(){this.textContent=e}}function EU(e){return function(){var t=e(this);this.textContent=t??""}}function $U(e){return this.tween("text",typeof e=="function"?EU(Xx(this,"text",e)):jU(e==null?"":e+""))}function RU(e){return function(t){this.textContent=e.call(this,t)}}function TU(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&RU(o)),t}return r._value=e,r}function NU(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,TU(e))}function kU(){for(var e=this._name,t=this._id,n=L7(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,u=0;u<s;++u)if(c=i[u]){var d=cr(c,t);Od(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Kr(r,this._parents,e,n)}function AU(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var u=Cr(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),o===0&&a()})}var DU=0;function Kr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function L7(){return++DU}var Er=Nl.prototype;Kr.prototype={constructor:Kr,select:pU,selectAll:hU,selectChild:Er.selectChild,selectChildren:Er.selectChildren,filter:iU,merge:sU,selection:gU,transition:kU,call:Er.call,nodes:Er.nodes,node:Er.node,size:Er.size,empty:Er.empty,each:Er.each,on:uU,attr:HH,attrTween:YH,style:wU,styleTween:SU,text:$U,textTween:NU,remove:fU,tween:OH,delay:QH,duration:tU,ease:rU,easeVarying:aU,end:AU,[Symbol.iterator]:Er[Symbol.iterator]};function PU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var IU={time:null,delay:0,duration:250,ease:PU};function MU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function OU(e){var t,n;e instanceof Kr?(t=e._id,e=e._name):(t=L7(),(n=IU).time=Kx(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,u=0;u<s;++u)(c=i[u])&&Od(c,e,t,u,i,n||MU(c,t));return new Kr(r,this._parents,e,t)}Nl.prototype.interrupt=PH;Nl.prototype.transition=OU;const Tc=e=>()=>e;function LU(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Pr(e,t,n){this.k=e,this.x=t,this.y=n}Pr.prototype={constructor:Pr,scale:function(e){return e===1?this:new Pr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fr=new Pr(1,0,0);Pr.prototype;function Cp(e){e.stopImmediatePropagation()}function us(e){e.preventDefault(),e.stopImmediatePropagation()}function FU(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zU(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qb(){return this.__zoom||Fr}function qU(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function BU(){return navigator.maxTouchPoints||"ontouchstart"in this}function VU(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function F7(){var e=FU,t=zU,n=VU,r=qU,o=BU,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=EH,u=Pd("start","zoom","end"),d,p,m,h=500,g=150,y=0,w=10;function v(M){M.property("__zoom",Qb).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",D).filter(o).on("touchstart.zoom",L).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(M,V,j,P){var I=M.selection?M.selection():M;I.property("__zoom",Qb),M!==I?S(M,V,j,P):I.interrupt().each(function(){$(this,arguments).event(P).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},v.scaleBy=function(M,V,j,P){v.scaleTo(M,function(){var I=this.__zoom.k,A=typeof V=="function"?V.apply(this,arguments):V;return I*A},j,P)},v.scaleTo=function(M,V,j,P){v.transform(M,function(){var I=t.apply(this,arguments),A=this.__zoom,z=j==null?b(I):typeof j=="function"?j.apply(this,arguments):j,U=A.invert(z),F=typeof V=="function"?V.apply(this,arguments):V;return n(_(x(A,F),z,U),I,i)},j,P)},v.translateBy=function(M,V,j,P){v.transform(M,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),i)},null,P)},v.translateTo=function(M,V,j,P,I){v.transform(M,function(){var A=t.apply(this,arguments),z=this.__zoom,U=P==null?b(A):typeof P=="function"?P.apply(this,arguments):P;return n(Fr.translate(U[0],U[1]).scale(z.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof j=="function"?-j.apply(this,arguments):-j),A,i)},P,I)};function x(M,V){return V=Math.max(a[0],Math.min(a[1],V)),V===M.k?M:new Pr(V,M.x,M.y)}function _(M,V,j){var P=V[0]-j[0]*M.k,I=V[1]-j[1]*M.k;return P===M.x&&I===M.y?M:new Pr(M.k,P,I)}function b(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function S(M,V,j,P){M.on("start.zoom",function(){$(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(P).end()}).tween("zoom",function(){var I=this,A=arguments,z=$(I,A).event(P),U=t.apply(I,A),F=j==null?b(U):typeof j=="function"?j.apply(I,A):j,B=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),X=I.__zoom,Q=typeof V=="function"?V.apply(I,A):V,J=c(X.invert(F).concat(B/X.k),Q.invert(F).concat(B/Q.k));return function(ee){if(ee===1)ee=Q;else{var ie=J(ee),fe=B/ie[2];ee=new Pr(fe,F[0]-ie[0]*fe,F[1]-ie[1]*fe)}z.zoom(null,ee)}})}function $(M,V,j){return!j&&M.__zooming||new N(M,V)}function N(M,V){this.that=M,this.args=V,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,V),this.taps=0}N.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,V){return this.mouse&&M!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var V=Pn(this.that).datum();u.call(M,this.that,new LU(M,{sourceEvent:this.sourceEvent,target:v,type:M,transform:this.that.__zoom,dispatch:u}),V)}};function T(M,...V){if(!e.apply(this,arguments))return;var j=$(this,V).event(M),P=this.__zoom,I=Math.max(a[0],Math.min(a[1],P.k*Math.pow(2,r.apply(this,arguments)))),A=Qn(M);if(j.wheel)(j.mouse[0][0]!==A[0]||j.mouse[0][1]!==A[1])&&(j.mouse[1]=P.invert(j.mouse[0]=A)),clearTimeout(j.wheel);else{if(P.k===I)return;j.mouse=[A,P.invert(A)],ru(this),j.start()}us(M),j.wheel=setTimeout(z,g),j.zoom("mouse",n(_(x(P,I),j.mouse[0],j.mouse[1]),j.extent,i));function z(){j.wheel=null,j.end()}}function C(M,...V){if(m||!e.apply(this,arguments))return;var j=M.currentTarget,P=$(this,V,!0).event(M),I=Pn(M.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",B,!0),A=Qn(M,j),z=M.clientX,U=M.clientY;S7(M.view),Cp(M),P.mouse=[A,this.__zoom.invert(A)],ru(this),P.start();function F(X){if(us(X),!P.moved){var Q=X.clientX-z,J=X.clientY-U;P.moved=Q*Q+J*J>y}P.event(X).zoom("mouse",n(_(P.that.__zoom,P.mouse[0]=Qn(X,j),P.mouse[1]),P.extent,i))}function B(X){I.on("mousemove.zoom mouseup.zoom",null),j7(X.view,P.moved),us(X),P.event(X).end()}}function D(M,...V){if(e.apply(this,arguments)){var j=this.__zoom,P=Qn(M.changedTouches?M.changedTouches[0]:M,this),I=j.invert(P),A=j.k*(M.shiftKey?.5:2),z=n(_(x(j,A),P,I),t.apply(this,V),i);us(M),s>0?Pn(this).transition().duration(s).call(S,z,P,M):Pn(this).call(v.transform,z,P,M)}}function L(M,...V){if(e.apply(this,arguments)){var j=M.touches,P=j.length,I=$(this,V,M.changedTouches.length===P).event(M),A,z,U,F;for(Cp(M),z=0;z<P;++z)U=j[z],F=Qn(U,this),F=[F,this.__zoom.invert(F),U.identifier],I.touch0?!I.touch1&&I.touch0[2]!==F[2]&&(I.touch1=F,I.taps=0):(I.touch0=F,A=!0,I.taps=1+!!d);d&&(d=clearTimeout(d)),A&&(I.taps<2&&(p=F[0],d=setTimeout(function(){d=null},h)),ru(this),I.start())}}function K(M,...V){if(this.__zooming){var j=$(this,V).event(M),P=M.changedTouches,I=P.length,A,z,U,F;for(us(M),A=0;A<I;++A)z=P[A],U=Qn(z,this),j.touch0&&j.touch0[2]===z.identifier?j.touch0[0]=U:j.touch1&&j.touch1[2]===z.identifier&&(j.touch1[0]=U);if(z=j.that.__zoom,j.touch1){var B=j.touch0[0],X=j.touch0[1],Q=j.touch1[0],J=j.touch1[1],ee=(ee=Q[0]-B[0])*ee+(ee=Q[1]-B[1])*ee,ie=(ie=J[0]-X[0])*ie+(ie=J[1]-X[1])*ie;z=x(z,Math.sqrt(ee/ie)),U=[(B[0]+Q[0])/2,(B[1]+Q[1])/2],F=[(X[0]+J[0])/2,(X[1]+J[1])/2]}else if(j.touch0)U=j.touch0[0],F=j.touch0[1];else return;j.zoom("touch",n(_(z,U,F),j.extent,i))}}function H(M,...V){if(this.__zooming){var j=$(this,V).event(M),P=M.changedTouches,I=P.length,A,z;for(Cp(M),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),A=0;A<I;++A)z=P[A],j.touch0&&j.touch0[2]===z.identifier?delete j.touch0:j.touch1&&j.touch1[2]===z.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(z=Qn(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<w)){var U=Pn(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return v.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Tc(+M),v):r},v.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Tc(!!M),v):e},v.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:Tc(!!M),v):o},v.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Tc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),v):t},v.scaleExtent=function(M){return arguments.length?(a[0]=+M[0],a[1]=+M[1],v):[a[0],a[1]]},v.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],v):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},v.constrain=function(M){return arguments.length?(n=M,v):n},v.duration=function(M){return arguments.length?(s=+M,v):s},v.interpolate=function(M){return arguments.length?(c=M,v):c},v.on=function(){var M=u.on.apply(u,arguments);return M===u?v:M},v.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,v):Math.sqrt(y)},v.tapDistance=function(M){return arguments.length?(w=+M,v):w},v}const Ld=f.createContext(null),HU=Ld.Provider,Yr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},z7=Yr.error001();function pt(e,t){const n=f.useContext(Ld);if(n===null)throw new Error(z7);return d7(n,e,t)}const Mt=()=>{const e=f.useContext(Ld);if(e===null)throw new Error(z7);return f.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},UU=e=>e.userSelectionActive?"none":"all";function fl({position:e,children:t,className:n,style:r,...o}){const a=pt(UU),i=`${e}`.split("-");return re.createElement("div",{className:Gt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o},t)}function GU({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:re.createElement(fl,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},re.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const WU=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:u,...d})=>{const p=f.useRef(null),[m,h]=f.useState({x:0,y:0,width:0,height:0}),g=Gt(["react-flow__edge-textwrapper",u]);return f.useEffect(()=>{if(p.current){const y=p.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:re.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:g,visibility:m.width?"visible":"hidden",...d},o&&re.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),re.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:p,style:r},n),c)};var KU=f.memo(WU);const Zx=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ni=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Qx=(e={x:0,y:0},t)=>({x:Ni(e.x,t[0][0],t[1][0]),y:Ni(e.y,t[0][1],t[1][1])}),Jb=(e,t,n)=>e<t?Ni(Math.abs(e-t),1,50)/50:e>n?-Ni(Math.abs(e-n),1,50)/50:0,q7=(e,t)=>{const n=Jb(e.x,35,t.width-35)*20,r=Jb(e.y,35,t.height-35)*20;return[n,r]},B7=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},V7=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),pl=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),H7=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),e2=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),YU=(e,t)=>H7(V7(pl(e),pl(t))),Xy=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},XU=e=>On(e.width)&&On(e.height)&&On(e.x)&&On(e.y),On=e=>!isNaN(e)&&isFinite(e),Nt=Symbol.for("internals"),U7=["Enter"," ","Escape"],ZU=(e,t)=>{},QU=e=>"nativeEvent"in e;function Zy(e){var o,a;const t=QU(e)?e.nativeEvent:e,n=((a=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const G7=e=>"clientX"in e,No=(e,t)=>{var a,i;const n=G7(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Uu=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Al=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:m,interactionWidth:h=20})=>re.createElement(re.Fragment,null,re.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:m}),h&&re.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&On(n)&&On(r)?re.createElement(KU,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u}):null);Al.displayName="BaseEdge";function ds(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(a=>a.id===e);o&&n(r,{...o})}}function W7({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function K7({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,u=t*.125+a*.375+s*.375+r*.125,d=Math.abs(c-e),p=Math.abs(u-t);return[c,u,d,p]}var ya;(function(e){e.Strict="strict",e.Loose="loose"})(ya||(ya={}));var ra;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ra||(ra={}));var hl;(function(e){e.Partial="partial",e.Full="full"})(hl||(hl={}));var kr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(kr||(kr={}));var Gu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Gu||(Gu={}));var Me;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Me||(Me={}));function t2({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Me.Left||e===Me.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Y7({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:o,targetPosition:a=Me.Top}){const[i,s]=t2({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=t2({pos:a,x1:r,y1:o,x2:e,y2:t}),[d,p,m,h]=K7({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${s} ${c},${u} ${r},${o}`,d,p,m,h]}const Jx=f.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Me.Bottom,targetPosition:a=Me.Top,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[w,v,x]=Y7({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a});return re.createElement(Al,{path:w,labelX:v,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:g,interactionWidth:y})});Jx.displayName="SimpleBezierEdge";const n2={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}},JU=({source:e,sourcePosition:t=Me.Bottom,target:n})=>t===Me.Left||t===Me.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},r2=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eG({source:e,sourcePosition:t=Me.Bottom,target:n,targetPosition:r=Me.Top,center:o,offset:a}){const i=n2[t],s=n2[r],c={x:e.x+i.x*a,y:e.y+i.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},d=JU({source:c,sourcePosition:t,target:u}),p=d.x!==0?"x":"y",m=d[p];let h=[],g,y;const w={x:0,y:0},v={x:0,y:0},[x,_,b,S]=W7({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[p]*s[p]===-1){g=o.x||x,y=o.y||_;const N=[{x:g,y:c.y},{x:g,y:u.y}],T=[{x:c.x,y},{x:u.x,y}];i[p]===m?h=p==="x"?N:T:h=p==="x"?T:N}else{const N=[{x:c.x,y:u.y}],T=[{x:u.x,y:c.y}];if(p==="x"?h=i.x===m?T:N:h=i.y===m?N:T,t===r){const H=Math.abs(e[p]-n[p]);if(H<=a){const M=Math.min(a-1,a-H);i[p]===m?w[p]=(c[p]>e[p]?-1:1)*M:v[p]=(u[p]>n[p]?-1:1)*M}}if(t!==r){const H=p==="x"?"y":"x",M=i[p]===s[H],V=c[H]>u[H],j=c[H]<u[H];(i[p]===1&&(!M&&V||M&&j)||i[p]!==1&&(!M&&j||M&&V))&&(h=p==="x"?N:T)}const C={x:c.x+w.x,y:c.y+w.y},D={x:u.x+v.x,y:u.y+v.y},L=Math.max(Math.abs(C.x-h[0].x),Math.abs(D.x-h[0].x)),K=Math.max(Math.abs(C.y-h[0].y),Math.abs(D.y-h[0].y));L>=K?(g=(C.x+D.x)/2,y=h[0].y):(g=h[0].x,y=(C.y+D.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+v.x,y:u.y+v.y},n],g,y,b,S]}function tG(e,t,n,r){const o=Math.min(r2(e,t)/2,r2(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+o*u},${i}Q ${a},${i} ${a},${i+o*d}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function Qy({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:o,targetPosition:a=Me.Top,borderRadius:i=5,centerX:s,centerY:c,offset:u=20}){const[d,p,m,h,g]=eG({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:u});return[d.reduce((w,v,x)=>{let _="";return x>0&&x<d.length-1?_=tG(d[x-1],v,d[x+1],i):_=`${x===0?"M":"L"}${v.x} ${v.y}`,w+=_,w},""),p,m,h,g]}const Fd=f.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:p=Me.Bottom,targetPosition:m=Me.Top,markerEnd:h,markerStart:g,pathOptions:y,interactionWidth:w})=>{const[v,x,_]=Qy({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return re.createElement(Al,{path:v,labelX:x,labelY:_,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:g,interactionWidth:w})});Fd.displayName="SmoothStepEdge";const e_=f.memo(e=>{var t;return re.createElement(Fd,{...e,pathOptions:f.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});e_.displayName="StepEdge";function nG({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=W7({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const t_=f.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:m,interactionWidth:h})=>{const[g,y,w]=nG({sourceX:e,sourceY:t,targetX:n,targetY:r});return re.createElement(Al,{path:g,labelX:y,labelY:w,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:m,interactionWidth:h})});t_.displayName="StraightEdge";function Nc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function o2({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case Me.Left:return[t-Nc(t-r,a),n];case Me.Right:return[t+Nc(r-t,a),n];case Me.Top:return[t,n-Nc(n-o,a)];case Me.Bottom:return[t,n+Nc(o-n,a)]}}function X7({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:o,targetPosition:a=Me.Top,curvature:i=.25}){const[s,c]=o2({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,d]=o2({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[p,m,h,g]=K7({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${c} ${u},${d} ${r},${o}`,p,m,h,g]}const Wu=f.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Me.Bottom,targetPosition:a=Me.Top,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:g,pathOptions:y,interactionWidth:w})=>{const[v,x,_]=X7({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a,curvature:y==null?void 0:y.curvature});return re.createElement(Al,{path:v,labelX:x,labelY:_,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:g,interactionWidth:w})});Wu.displayName="BezierEdge";const n_=f.createContext(null),rG=n_.Provider;n_.Consumer;const oG=()=>f.useContext(n_),aG=e=>"id"in e&&"source"in e&&"target"in e,iG=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Jy=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,sG=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),lG=(e,t)=>{if(!e.source||!e.target)return t;let n;return aG(e)?n={...e}:n={...e,id:iG(e)},sG(n,t)?t:t.concat(n)},ev=({x:e,y:t},[n,r,o],a,[i,s])=>{const c={x:(e-n)/o,y:(t-r)/o};return a?{x:i*Math.round(c.x/i),y:s*Math.round(c.y/s)}:c},Z7=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),ca=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},zd=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:a,y:i}=ca(o,t).positionAbsolute;return V7(r,pl({x:a,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return H7(n)},Q7=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1,s=[0,0])=>{const c={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(d=>{const{width:p,height:m,selectable:h=!0,hidden:g=!1}=d;if(i&&!h||g)return!1;const{positionAbsolute:y}=ca(d,s),w={x:y.x,y:y.y,width:p||0,height:m||0},v=Xy(c,w),x=typeof p>"u"||typeof m>"u"||p===null||m===null,_=a&&v>0,b=(p||0)*(m||0);(x||_||v>=b||d.dragging)&&u.push(d)}),u},J7=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},e9=(e,t,n,r,o,a=.1)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),u=Ni(c,r,o),d=e.x+e.width/2,p=e.y+e.height/2,m=t/2-d*u,h=n/2-p*u;return{x:m,y:h,zoom:u}},Zo=(e,t=0)=>e.transition().duration(t);function a2(e,t,n,r){return(t[n]||[]).reduce((o,a)=>{var i,s;return`${e.id}-${a.id}-${n}`!==r&&o.push({id:a.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((s=e.positionAbsolute)==null?void 0:s.y)??0)+a.y+a.height/2}),o},[])}function cG(e,t,n,r,o,a){const{x:i,y:s}=No(e),u=t.elementsFromPoint(i,s).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const y=r_(void 0,u),w=u.getAttribute("data-handleid"),v=a({nodeId:g,id:w,type:y});if(v){const x=o.find(_=>_.nodeId===g&&_.type===y&&_.id===w);return{handle:{id:w,type:y,nodeId:g,x:(x==null?void 0:x.x)||n.x,y:(x==null?void 0:x.y)||n.y},validHandleResult:v}}}}let d=[],p=1/0;if(o.forEach(g=>{const y=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(y<=r){const w=a(g);y<=p&&(y<p?d=[{handle:g,validHandleResult:w}]:y===p&&d.push({handle:g,validHandleResult:w}),p=y)}}),!d.length)return{handle:null,validHandleResult:t9()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:g})=>g.isValid),h=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:y})=>h?g.type==="target":m?y.isValid:!0)||d[0]}const uG={source:null,target:null,sourceHandle:null,targetHandle:null},t9=()=>({handleDomNode:null,isValid:!1,connection:uG,endHandle:null});function n9(e,t,n,r,o,a,i){const s=o==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...t9(),handleDomNode:c};if(c){const d=r_(void 0,c),p=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),y={source:s?p:n,sourceHandle:s?m:r,target:s?n:p,targetHandle:s?r:m};u.connection=y,h&&g&&(t===ya.Strict?s&&d==="source"||!s&&d==="target":p!==n||m!==r)&&(u.endHandle={nodeId:p,handleId:m,type:d},u.isValid=a(y))}return u}function dG({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,a)=>{if(a[Nt]){const{handleBounds:i}=a[Nt];let s=[],c=[];i&&(s=a2(a,i,"source",`${t}-${n}-${r}`),c=a2(a,i,"target",`${t}-${n}-${r}`)),o.push(...s,...c)}return o},[])}function r_(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Sp(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function fG(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function r9({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:a,setState:i,isValidConnection:s,edgeUpdaterType:c,onEdgeUpdateEnd:u}){const d=B7(e.target),{connectionMode:p,domNode:m,autoPanOnConnect:h,connectionRadius:g,onConnectStart:y,panBy:w,getNodes:v,cancelConnection:x}=a();let _=0,b;const{x:S,y:$}=No(e),N=d==null?void 0:d.elementFromPoint(S,$),T=r_(c,N),C=m==null?void 0:m.getBoundingClientRect();if(!C||!T)return;let D,L=No(e,C),K=!1,H=null,M=!1,V=null;const j=dG({nodes:v(),nodeId:n,handleId:t,handleType:T}),P=()=>{if(!h)return;const[z,U]=q7(L,C);w({x:z,y:U}),_=requestAnimationFrame(P)};i({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:T});function I(z){const{transform:U}=a();L=No(z,C);const{handle:F,validHandleResult:B}=cG(z,d,ev(L,U,!1,[1,1]),g,j,X=>n9(X,p,n,t,o?"target":"source",s,d));if(b=F,K||(P(),K=!0),V=B.handleDomNode,H=B.connection,M=B.isValid,i({connectionPosition:b&&M?Z7({x:b.x,y:b.y},U):L,connectionStatus:fG(!!b,M),connectionEndHandle:B.endHandle}),!b&&!M&&!V)return Sp(D);H.source!==H.target&&V&&(Sp(D),D=V,V.classList.add("connecting","react-flow__handle-connecting"),V.classList.toggle("valid",M),V.classList.toggle("react-flow__handle-valid",M))}function A(z){var U,F;(b||V)&&H&&M&&(r==null||r(H)),(F=(U=a()).onConnectEnd)==null||F.call(U,z),c&&(u==null||u(z)),Sp(D),x(),cancelAnimationFrame(_),K=!1,M=!1,H=null,V=null,d.removeEventListener("mousemove",I),d.removeEventListener("mouseup",A),d.removeEventListener("touchmove",I),d.removeEventListener("touchend",A)}d.addEventListener("mousemove",I),d.addEventListener("mouseup",A),d.addEventListener("touchmove",I),d.addEventListener("touchend",A)}const i2=()=>!0,pG=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),hG=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},o9=f.forwardRef(({type:e="source",position:t=Me.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:u,onMouseDown:d,onTouchStart:p,...m},h)=>{var C,D;const g=i||null,y=e==="target",w=Mt(),v=oG(),{connectOnClick:x,noPanClassName:_}=pt(pG,Ft),{connecting:b,clickConnecting:S}=pt(hG(v,g,e),Ft);v||(D=(C=w.getState()).onError)==null||D.call(C,"010",Yr.error010());const $=L=>{const{defaultEdgeOptions:K,onConnect:H,hasDefaultEdges:M}=w.getState(),V={...K,...L};if(M){const{edges:j,setEdges:P}=w.getState();P(lG(V,j))}H==null||H(V),s==null||s(V)},N=L=>{if(!v)return;const K=G7(L);o&&(K&&L.button===0||!K)&&r9({event:L,handleId:g,nodeId:v,onConnect:$,isTarget:y,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||i2}),K?d==null||d(L):p==null||p(L)},T=L=>{const{onClickConnectStart:K,onClickConnectEnd:H,connectionClickStartHandle:M,connectionMode:V,isValidConnection:j}=w.getState();if(!v||!M&&!o)return;if(!M){K==null||K(L,{nodeId:v,handleId:g,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:g}});return}const P=B7(L.target),I=n||j||i2,{connection:A,isValid:z}=n9({nodeId:v,id:g,type:e},V,M.nodeId,M.handleId||null,M.type,I,P);z&&$(A),H==null||H(L),w.setState({connectionClickStartHandle:null})};return re.createElement("div",{"data-handleid":g,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${g}-${e}`,className:Gt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:a,connecting:S,connectionindicator:r&&(o&&!b||a&&b)}]),onMouseDown:N,onTouchStart:N,onClick:x?T:void 0,ref:h,...m},c)});o9.displayName="Handle";var Ln=f.memo(o9);const a9=({data:e,isConnectable:t,targetPosition:n=Me.Top,sourcePosition:r=Me.Bottom})=>re.createElement(re.Fragment,null,re.createElement(Ln,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,re.createElement(Ln,{type:"source",position:r,isConnectable:t}));a9.displayName="DefaultNode";var tv=f.memo(a9);const i9=({data:e,isConnectable:t,sourcePosition:n=Me.Bottom})=>re.createElement(re.Fragment,null,e==null?void 0:e.label,re.createElement(Ln,{type:"source",position:n,isConnectable:t}));i9.displayName="InputNode";var s9=f.memo(i9);const l9=({data:e,isConnectable:t,targetPosition:n=Me.Top})=>re.createElement(re.Fragment,null,re.createElement(Ln,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);l9.displayName="OutputNode";var c9=f.memo(l9);const o_=()=>null;o_.displayName="GroupNode";const mG=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),kc=e=>e.id;function gG(e,t){return Ft(e.selectedNodes.map(kc),t.selectedNodes.map(kc))&&Ft(e.selectedEdges.map(kc),t.selectedEdges.map(kc))}const u9=f.memo(({onSelectionChange:e})=>{const t=Mt(),{selectedNodes:n,selectedEdges:r}=pt(mG,gG);return f.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(a=>a(o))},[n,r,e]),null});u9.displayName="SelectionListener";const yG=e=>!!e.onSelectionChange;function vG({onSelectionChange:e}){const t=pt(yG);return e||t?re.createElement(u9,{onSelectionChange:e}):null}const xG=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Fa(e,t){f.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ye(e,t,n){f.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const _G=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:a,onConnectEnd:i,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:p,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:g,minZoom:y,maxZoom:w,nodeExtent:v,onNodesChange:x,onEdgesChange:_,elementsSelectable:b,connectionMode:S,snapGrid:$,snapToGrid:N,translateExtent:T,connectOnClick:C,defaultEdgeOptions:D,fitView:L,fitViewOptions:K,onNodesDelete:H,onEdgesDelete:M,onNodeDrag:V,onNodeDragStart:j,onNodeDragStop:P,onSelectionDrag:I,onSelectionDragStart:A,onSelectionDragStop:z,noPanClassName:U,nodeOrigin:F,rfId:B,autoPanOnConnect:X,autoPanOnNodeDrag:Q,onError:J,connectionRadius:ee,isValidConnection:ie,nodeDragThreshold:fe})=>{const{setNodes:ue,setEdges:Ce,setDefaultNodesAndEdges:me,setMinZoom:Oe,setMaxZoom:Fe,setTranslateExtent:oe,setNodeExtent:E,reset:q}=pt(xG,Ft),k=Mt();return f.useEffect(()=>{const G=r==null?void 0:r.map(Y=>({...Y,...D}));return me(n,G),()=>{q()}},[]),Ye("defaultEdgeOptions",D,k.setState),Ye("connectionMode",S,k.setState),Ye("onConnect",o,k.setState),Ye("onConnectStart",a,k.setState),Ye("onConnectEnd",i,k.setState),Ye("onClickConnectStart",s,k.setState),Ye("onClickConnectEnd",c,k.setState),Ye("nodesDraggable",u,k.setState),Ye("nodesConnectable",d,k.setState),Ye("nodesFocusable",p,k.setState),Ye("edgesFocusable",m,k.setState),Ye("edgesUpdatable",h,k.setState),Ye("elementsSelectable",b,k.setState),Ye("elevateNodesOnSelect",g,k.setState),Ye("snapToGrid",N,k.setState),Ye("snapGrid",$,k.setState),Ye("onNodesChange",x,k.setState),Ye("onEdgesChange",_,k.setState),Ye("connectOnClick",C,k.setState),Ye("fitViewOnInit",L,k.setState),Ye("fitViewOnInitOptions",K,k.setState),Ye("onNodesDelete",H,k.setState),Ye("onEdgesDelete",M,k.setState),Ye("onNodeDrag",V,k.setState),Ye("onNodeDragStart",j,k.setState),Ye("onNodeDragStop",P,k.setState),Ye("onSelectionDrag",I,k.setState),Ye("onSelectionDragStart",A,k.setState),Ye("onSelectionDragStop",z,k.setState),Ye("noPanClassName",U,k.setState),Ye("nodeOrigin",F,k.setState),Ye("rfId",B,k.setState),Ye("autoPanOnConnect",X,k.setState),Ye("autoPanOnNodeDrag",Q,k.setState),Ye("onError",J,k.setState),Ye("connectionRadius",ee,k.setState),Ye("isValidConnection",ie,k.setState),Ye("nodeDragThreshold",fe,k.setState),Fa(e,ue),Fa(t,Ce),Fa(y,Oe),Fa(w,Fe),Fa(T,oe),Fa(v,E),null},s2={display:"none"},wG={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},d9="react-flow__node-desc",f9="react-flow__edge-desc",bG="react-flow__aria-live",CG=e=>e.ariaLiveMessage;function SG({rfId:e}){const t=pt(CG);return re.createElement("div",{id:`${bG}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:wG},t)}function jG({rfId:e,disableKeyboardA11y:t}){return re.createElement(re.Fragment,null,re.createElement("div",{id:`${d9}-${e}`,style:s2},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),re.createElement("div",{id:`${f9}-${e}`,style:s2},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&re.createElement(SG,{rfId:e}))}var ml=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=f.useState(!1),o=f.useRef(!1),a=f.useRef(new Set([])),[i,s]=f.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),d=u.reduce((p,m)=>p.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return f.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Zy(h))return!1;const y=c2(h.code,s);a.current.add(h[y]),l2(i,a.current,!1)&&(h.preventDefault(),r(!0))},p=h=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Zy(h))return!1;const y=c2(h.code,s);l2(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(h[y]),h.key==="Meta"&&a.current.clear(),o.current=!1},m=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",p),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",p),window.removeEventListener("blur",m)}}},[e,r]),n};function l2(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function c2(e,t){return t.includes(e)?"code":"key"}function p9(e,t,n,r){var i,s;if(!e.parentNode)return n;const o=t.get(e.parentNode),a=ca(o,r);return p9(o,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((i=o[Nt])==null?void 0:i.z)??0)>(n.z??0)?((s=o[Nt])==null?void 0:s.z)??0:n.z??0},r)}function h9(e,t,n){e.forEach(r=>{var o;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:a,y:i,z:s}=p9(r,e,{...r.position,z:((o=r[Nt])==null?void 0:o.z)??0},t);r.positionAbsolute={x:a,y:i},r[Nt].z=s,n!=null&&n[r.id]&&(r[Nt].isParent=!0)}})}function jp(e,t,n,r){const o=new Map,a={},i=r?1e3:0;return e.forEach(s=>{var m;const c=(On(s.zIndex)?s.zIndex:0)+(s.selected?i:0),u=t.get(s.id),d={...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(a[s.parentNode]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==s.type;Object.defineProperty(d,Nt,{enumerable:!1,value:{handleBounds:p||(m=u==null?void 0:u[Nt])==null?void 0:m.handleBounds,z:c}}),o.set(s.id,d)}),h9(o,n,a),o}function m9(e,t={}){const{getNodes:n,width:r,height:o,minZoom:a,maxZoom:i,d3Zoom:s,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:p}=e(),m=t.initial&&!u&&d;if(s&&c&&(m||!t.initial)){const g=n().filter(w=>{var x;const v=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(x=t.nodes)!=null&&x.length?v&&t.nodes.some(_=>_.id===w.id):v}),y=g.every(w=>w.width&&w.height);if(g.length>0&&y){const w=zd(g,p),{x:v,y:x,zoom:_}=e9(w,r,o,t.minZoom??a,t.maxZoom??i,t.padding??.1),b=Fr.translate(v,x).scale(_);return typeof t.duration=="number"&&t.duration>0?s.transform(Zo(c,t.duration),b):s.transform(c,b),!0}}return!1}function EG(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Nt]:r[Nt],selected:n.selected})}),new Map(t)}function $G(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Ac({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:a,onNodesChange:i,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:EG(e,o)}),i==null||i(e)),t!=null&&t.length&&(u&&r({edges:$G(t,a)}),s==null||s(t))}const za=()=>{},RG={zoomIn:za,zoomOut:za,zoomTo:za,getZoom:()=>1,setViewport:za,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:za,fitBounds:za,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},TG=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),NG=()=>{const e=Mt(),{d3Zoom:t,d3Selection:n}=pt(TG,Ft);return f.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Zo(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Zo(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,a)=>t.scaleTo(Zo(n,a==null?void 0:a.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,a)=>{const[i,s,c]=e.getState().transform,u=Fr.translate(o.x??i,o.y??s).scale(o.zoom??c);t.transform(Zo(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[o,a,i]=e.getState().transform;return{x:o,y:a,zoom:i}},fitView:o=>m9(e.getState,o),setCenter:(o,a,i)=>{const{width:s,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,p=s/2-o*d,m=c/2-a*d,h=Fr.translate(p,m).scale(d);t.transform(Zo(n,i==null?void 0:i.duration),h)},fitBounds:(o,a)=>{const{width:i,height:s,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:p,zoom:m}=e9(o,i,s,c,u,(a==null?void 0:a.padding)??.1),h=Fr.translate(d,p).scale(m);t.transform(Zo(n,a==null?void 0:a.duration),h)},project:o=>{const{transform:a,snapToGrid:i,snapGrid:s}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ev(o,a,i,s)},screenToFlowPosition:o=>{const{transform:a,snapToGrid:i,snapGrid:s,domNode:c}=e.getState();if(!c)return o;const{x:u,y:d}=c.getBoundingClientRect(),p={x:o.x-u,y:o.y-d};return ev(p,a,i,s)},flowToScreenPosition:o=>{const{transform:a,domNode:i}=e.getState();if(!i)return o;const{x:s,y:c}=i.getBoundingClientRect(),u=Z7(o,a);return{x:u.x+s,y:u.y+c}},viewportInitialized:!0}:RG,[t,n])};function a_(){const e=NG(),t=Mt(),n=f.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=f.useCallback(y=>t.getState().nodeInternals.get(y),[]),o=f.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(w=>({...w}))},[]),a=f.useCallback(y=>{const{edges:w=[]}=t.getState();return w.find(v=>v.id===y)},[]),i=f.useCallback(y=>{const{getNodes:w,setNodes:v,hasDefaultNodes:x,onNodesChange:_}=t.getState(),b=w(),S=typeof y=="function"?y(b):y;if(x)v(S);else if(_){const $=S.length===0?b.map(N=>({type:"remove",id:N.id})):S.map(N=>({item:N,type:"reset"}));_($)}},[]),s=f.useCallback(y=>{const{edges:w=[],setEdges:v,hasDefaultEdges:x,onEdgesChange:_}=t.getState(),b=typeof y=="function"?y(w):y;if(x)v(b);else if(_){const S=b.length===0?w.map($=>({type:"remove",id:$.id})):b.map($=>({item:$,type:"reset"}));_(S)}},[]),c=f.useCallback(y=>{const w=Array.isArray(y)?y:[y],{getNodes:v,setNodes:x,hasDefaultNodes:_,onNodesChange:b}=t.getState();if(_){const $=[...v(),...w];x($)}else if(b){const S=w.map($=>({item:$,type:"add"}));b(S)}},[]),u=f.useCallback(y=>{const w=Array.isArray(y)?y:[y],{edges:v=[],setEdges:x,hasDefaultEdges:_,onEdgesChange:b}=t.getState();if(_)x([...v,...w]);else if(b){const S=w.map($=>({item:$,type:"add"}));b(S)}},[]),d=f.useCallback(()=>{const{getNodes:y,edges:w=[],transform:v}=t.getState(),[x,_,b]=v;return{nodes:y().map(S=>({...S})),edges:w.map(S=>({...S})),viewport:{x,y:_,zoom:b}}},[]),p=f.useCallback(({nodes:y,edges:w})=>{const{nodeInternals:v,getNodes:x,edges:_,hasDefaultNodes:b,hasDefaultEdges:S,onNodesDelete:$,onEdgesDelete:N,onNodesChange:T,onEdgesChange:C}=t.getState(),D=(y||[]).map(V=>V.id),L=(w||[]).map(V=>V.id),K=x().reduce((V,j)=>{const P=!D.includes(j.id)&&j.parentNode&&V.find(A=>A.id===j.parentNode);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(D.includes(j.id)||P)&&V.push(j),V},[]),H=_.filter(V=>typeof V.deletable=="boolean"?V.deletable:!0),M=H.filter(V=>L.includes(V.id));if(K||M){const V=J7(K,H),j=[...M,...V],P=j.reduce((I,A)=>(I.includes(A.id)||I.push(A.id),I),[]);if((S||b)&&(S&&t.setState({edges:_.filter(I=>!P.includes(I.id))}),b&&(K.forEach(I=>{v.delete(I.id)}),t.setState({nodeInternals:new Map(v)}))),P.length>0&&(N==null||N(j),C&&C(P.map(I=>({id:I,type:"remove"})))),K.length>0&&($==null||$(K),T)){const I=K.map(A=>({id:A.id,type:"remove"}));T(I)}}},[]),m=f.useCallback(y=>{const w=XU(y),v=w?null:t.getState().nodeInternals.get(y.id);return!w&&!v?[null,null,w]:[w?y:e2(v),v,w]},[]),h=f.useCallback((y,w=!0,v)=>{const[x,_,b]=m(y);return x?(v||t.getState().getNodes()).filter(S=>{if(!b&&(S.id===_.id||!S.positionAbsolute))return!1;const $=e2(S),N=Xy($,x);return w&&N>0||N>=x.width*x.height}):[]},[]),g=f.useCallback((y,w,v=!0)=>{const[x]=m(y);if(!x)return!1;const _=Xy(x,w);return v&&_>0||_>=x.width*x.height},[]);return f.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:a,setNodes:i,setEdges:s,addNodes:c,addEdges:u,toObject:d,deleteElements:p,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,r,o,a,i,s,c,u,d,p,h,g])}const kG={actInsideInputWithModifier:!1};var AG=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Mt(),{deleteElements:r}=a_(),o=ml(e,kG),a=ml(t);f.useEffect(()=>{if(o){const{edges:i,getNodes:s}=n.getState(),c=s().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),f.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function DG(e){const t=Mt();f.useEffect(()=>{let n;const r=()=>{var a,i;if(!e.current)return;const o=Zx(e.current);(o.height===0||o.width===0)&&((i=(a=t.getState()).onError)==null||i.call(a,"004",Yr.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const i_={position:"absolute",width:"100%",height:"100%",top:0,left:0},PG=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Dc=e=>({x:e.x,y:e.y,zoom:e.k}),qa=(e,t)=>e.target.closest(`.${t}`),u2=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),d2=e=>{const t=e.ctrlKey&&Uu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},IG=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),MG=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=ra.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:p=!0,defaultViewport:m,translateExtent:h,minZoom:g,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:v=!0,children:x,noWheelClassName:_,noPanClassName:b})=>{const S=f.useRef(),$=Mt(),N=f.useRef(!1),T=f.useRef(!1),C=f.useRef(null),D=f.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:K,d3ZoomHandler:H,userSelectionActive:M}=pt(IG,Ft),V=ml(w),j=f.useRef(0),P=f.useRef(!1),I=f.useRef();return DG(C),f.useEffect(()=>{if(C.current){const A=C.current.getBoundingClientRect(),z=F7().scaleExtent([g,y]).translateExtent(h),U=Pn(C.current).call(z),F=Fr.translate(m.x,m.y).scale(Ni(m.zoom,g,y)),B=[[0,0],[A.width,A.height]],X=z.constrain()(F,B,h);z.transform(U,X),z.wheelDelta(d2),$.setState({d3Zoom:z,d3Selection:U,d3ZoomHandler:U.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:C.current.closest(".react-flow")})}},[]),f.useEffect(()=>{K&&L&&(i&&!V&&!M?K.on("wheel.zoom",A=>{if(qa(A,_))return!1;A.preventDefault(),A.stopImmediatePropagation();const z=K.property("__zoom").k||1,U=Uu();if(A.ctrlKey&&a&&U){const fe=Qn(A),ue=d2(A),Ce=z*Math.pow(2,ue);L.scaleTo(K,Ce,fe,A);return}const F=A.deltaMode===1?20:1;let B=c===ra.Vertical?0:A.deltaX*F,X=c===ra.Horizontal?0:A.deltaY*F;!U&&A.shiftKey&&c!==ra.Vertical&&(B=A.deltaY*F,X=0),L.translateBy(K,-(B/z)*s,-(X/z)*s,{internal:!0});const Q=Dc(K.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ee,onViewportChangeEnd:ie}=$.getState();clearTimeout(I.current),P.current||(P.current=!0,t==null||t(A,Q),J==null||J(Q)),P.current&&(e==null||e(A,Q),ee==null||ee(Q),I.current=setTimeout(()=>{n==null||n(A,Q),ie==null||ie(Q),P.current=!1},150))},{passive:!1}):typeof H<"u"&&K.on("wheel.zoom",function(A,z){if(!v||qa(A,_))return null;A.preventDefault(),H.call(this,A,z)},{passive:!1}))},[M,i,c,K,L,H,V,a,v,_,t,e,n]),f.useEffect(()=>{L&&L.on("start",A=>{var F,B;if(!A.sourceEvent||A.sourceEvent.internal)return null;j.current=(F=A.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:z}=$.getState(),U=Dc(A.transform);N.current=!0,D.current=U,((B=A.sourceEvent)==null?void 0:B.type)==="mousedown"&&$.setState({paneDragging:!0}),z==null||z(U),t==null||t(A.sourceEvent,U)})},[L,t]),f.useEffect(()=>{L&&(M&&!N.current?L.on("zoom",null):M||L.on("zoom",A=>{var U;const{onViewportChange:z}=$.getState();if($.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),T.current=!!(r&&u2(p,j.current??0)),(e||z)&&!((U=A.sourceEvent)!=null&&U.internal)){const F=Dc(A.transform);z==null||z(F),e==null||e(A.sourceEvent,F)}}))},[M,L,e,p,r]),f.useEffect(()=>{L&&L.on("end",A=>{if(!A.sourceEvent||A.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=$.getState();if(N.current=!1,$.setState({paneDragging:!1}),r&&u2(p,j.current??0)&&!T.current&&r(A.sourceEvent),T.current=!1,(n||z)&&PG(D.current,A.transform)){const U=Dc(A.transform);D.current=U,clearTimeout(S.current),S.current=setTimeout(()=>{z==null||z(U),n==null||n(A.sourceEvent,U)},i?150:0)}})},[L,i,p,n,r]),f.useEffect(()=>{L&&L.filter(A=>{const z=V||o,U=a&&A.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&A.button===1&&A.type==="mousedown"&&(qa(A,"react-flow__node")||qa(A,"react-flow__edge")))return!0;if(!p&&!z&&!i&&!u&&!a||M||!u&&A.type==="dblclick"||qa(A,_)&&A.type==="wheel"||qa(A,b)&&(A.type!=="wheel"||i&&A.type==="wheel"&&!V)||!a&&A.ctrlKey&&A.type==="wheel"||!z&&!i&&!U&&A.type==="wheel"||!p&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(p)&&!p.includes(A.button)&&(A.type==="mousedown"||A.type==="touchstart"))return!1;const F=Array.isArray(p)&&p.includes(A.button)||!A.button||A.button<=1;return(!A.ctrlKey||A.type==="wheel")&&F})},[M,L,o,a,i,u,p,d,V]),re.createElement("div",{className:"react-flow__renderer",ref:C,style:i_},x)},OG=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function LG(){const{userSelectionActive:e,userSelectionRect:t}=pt(OG,Ft);return e&&t?re.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function f2(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){const a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);n.position.y=n.position.y-a,n.style.height+=a,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function g9(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const a=e.filter(s=>s.id===o.id);if(a.length===0)return r.push(o),r;const i={...o};for(const s of a)if(s)switch(s.type){case"select":{i.selected=s.selected;break}case"position":{typeof s.position<"u"&&(i.position=s.position),typeof s.positionAbsolute<"u"&&(i.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(i.dragging=s.dragging),i.expandParent&&f2(r,i);break}case"dimensions":{typeof s.dimensions<"u"&&(i.width=s.dimensions.width,i.height=s.dimensions.height),typeof s.updateStyle<"u"&&(i.style={...i.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(i.resizing=s.resizing),i.expandParent&&f2(r,i);break}case"remove":return r}return r.push(i),r},n)}function y9(e,t){return g9(e,t)}function FG(e,t){return g9(e,t)}const ho=(e,t)=>({id:e,type:"select",selected:t});function ri(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(ho(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(ho(r.id,!1))),n},[])}const Ep=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},zG=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),v9=f.memo(({isSelecting:e,selectionMode:t=hl.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:p})=>{const m=f.useRef(null),h=Mt(),g=f.useRef(0),y=f.useRef(0),w=f.useRef(),{userSelectionActive:v,elementsSelectable:x,dragging:_}=pt(zG,Ft),b=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,y.current=0},S=H=>{a==null||a(H),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},$=H=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){H.preventDefault();return}i==null||i(H)},N=s?H=>s(H):void 0,T=H=>{const{resetSelectedElements:M,domNode:V}=h.getState();if(w.current=V==null?void 0:V.getBoundingClientRect(),!x||!e||H.button!==0||H.target!==m.current||!w.current)return;const{x:j,y:P}=No(H,w.current);M(),h.setState({userSelectionRect:{width:0,height:0,startX:j,startY:P,x:j,y:P}}),r==null||r(H)},C=H=>{const{userSelectionRect:M,nodeInternals:V,edges:j,transform:P,onNodesChange:I,onEdgesChange:A,nodeOrigin:z,getNodes:U}=h.getState();if(!e||!w.current||!M)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=No(H,w.current),B=M.startX??0,X=M.startY??0,Q={...M,x:F.x<B?F.x:B,y:F.y<X?F.y:X,width:Math.abs(F.x-B),height:Math.abs(F.y-X)},J=U(),ee=Q7(V,Q,P,t===hl.Partial,!0,z),ie=J7(ee,j).map(ue=>ue.id),fe=ee.map(ue=>ue.id);if(g.current!==fe.length){g.current=fe.length;const ue=ri(J,fe);ue.length&&(I==null||I(ue))}if(y.current!==ie.length){y.current=ie.length;const ue=ri(j,ie);ue.length&&(A==null||A(ue))}h.setState({userSelectionRect:Q})},D=H=>{if(H.button!==0)return;const{userSelectionRect:M}=h.getState();!v&&M&&H.target===m.current&&(S==null||S(H)),h.setState({nodesSelectionActive:g.current>0}),b(),o==null||o(H)},L=H=>{v&&(h.setState({nodesSelectionActive:g.current>0}),o==null||o(H)),b()},K=x&&(e||v);return re.createElement("div",{className:Gt(["react-flow__pane",{dragging:_,selection:e}]),onClick:K?void 0:Ep(S,m),onContextMenu:Ep($,m),onWheel:Ep(N,m),onMouseEnter:K?void 0:c,onMouseDown:K?T:void 0,onMouseMove:K?C:u,onMouseUp:K?D:void 0,onMouseLeave:K?L:d,ref:m,style:i_},p,re.createElement(LG,null))});v9.displayName="Pane";function x9(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:x9(n,t):!1}function p2(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function qG(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||!x9(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var a,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=o.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,width:o.width,height:o.height,expandParent:o.expandParent}})}function BG(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function _9(e,t,n,r,o=[0,0],a){const i=BG(e,e.extent||r);let s=i;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const d=n.get(e.parentNode),{x:p,y:m}=ca(d,o).positionAbsolute;s=d&&On(p)&&On(m)&&On(d.width)&&On(d.height)?[[p+e.width*o[0],m+e.height*o[1]],[p+d.width-e.width+e.width*o[0],m+d.height-e.height+e.height*o[1]]]:s}else a==null||a("005",Yr.error005()),s=i;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const d=n.get(e.parentNode),{x:p,y:m}=ca(d,o).positionAbsolute;s=[[e.extent[0][0]+p,e.extent[0][1]+m],[e.extent[1][0]+p,e.extent[1][1]+m]]}let c={x:0,y:0};if(e.parentNode){const d=n.get(e.parentNode);c=ca(d,o).positionAbsolute}const u=s&&s!=="parent"?Qx(t,s):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function $p({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const h2=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const a=Array.from(o),i=t.getBoundingClientRect(),s={x:i.width*r[0],y:i.height*r[1]};return a.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-s.x)/n,y:(u.top-i.top-s.y)/n,...Zx(c)}})};function fs(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function nv({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:s,onError:c}=t.getState(),u=s.get(e);if(!u){c==null||c("012",Yr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function VG(){const e=Mt();return f.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:a?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:a?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function Rp(e){return(t,n,r)=>e==null?void 0:e(t,r)}function w9({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,selectNodesOnDrag:i}){const s=Mt(),[c,u]=f.useState(!1),d=f.useRef([]),p=f.useRef({x:null,y:null}),m=f.useRef(0),h=f.useRef(null),g=f.useRef({x:0,y:0}),y=f.useRef(null),w=f.useRef(!1),v=f.useRef(!1),x=VG();return f.useEffect(()=>{if(e!=null&&e.current){const _=Pn(e.current),b=({x:N,y:T})=>{const{nodeInternals:C,onNodeDrag:D,onSelectionDrag:L,updateNodePositions:K,nodeExtent:H,snapGrid:M,snapToGrid:V,nodeOrigin:j,onError:P}=s.getState();p.current={x:N,y:T};let I=!1,A={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const U=zd(d.current,j);A=pl(U)}if(d.current=d.current.map(U=>{const F={x:N-U.distance.x,y:T-U.distance.y};V&&(F.x=M[0]*Math.round(F.x/M[0]),F.y=M[1]*Math.round(F.y/M[1]));const B=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!U.extent&&(B[0][0]=U.positionAbsolute.x-A.x+H[0][0],B[1][0]=U.positionAbsolute.x+(U.width??0)-A.x2+H[1][0],B[0][1]=U.positionAbsolute.y-A.y+H[0][1],B[1][1]=U.positionAbsolute.y+(U.height??0)-A.y2+H[1][1]);const X=_9(U,F,C,B,j,P);return I=I||U.position.x!==X.position.x||U.position.y!==X.position.y,U.position=X.position,U.positionAbsolute=X.positionAbsolute,U}),!I)return;K(d.current,!0,!0),u(!0);const z=o?D:Rp(L);if(z&&y.current){const[U,F]=$p({nodeId:o,dragItems:d.current,nodeInternals:C});z(y.current,U,F)}},S=()=>{if(!h.current)return;const[N,T]=q7(g.current,h.current);if(N!==0||T!==0){const{transform:C,panBy:D}=s.getState();p.current.x=(p.current.x??0)-N/C[2],p.current.y=(p.current.y??0)-T/C[2],D({x:N,y:T})&&b(p.current)}m.current=requestAnimationFrame(S)},$=N=>{var j;const{nodeInternals:T,multiSelectionActive:C,nodesDraggable:D,unselectNodesAndEdges:L,onNodeDragStart:K,onSelectionDragStart:H}=s.getState();v.current=!0;const M=o?K:Rp(H);(!i||!a)&&!C&&o&&((j=T.get(o))!=null&&j.selected||L()),o&&a&&i&&nv({id:o,store:s,nodeRef:e});const V=x(N);if(p.current=V,d.current=qG(T,D,V,o),M&&d.current){const[P,I]=$p({nodeId:o,dragItems:d.current,nodeInternals:T});M(N.sourceEvent,P,I)}};if(t)_.on(".drag",null);else{const N=eH().on("start",T=>{const{domNode:C,nodeDragThreshold:D}=s.getState();D===0&&$(T);const L=x(T);p.current=L,h.current=(C==null?void 0:C.getBoundingClientRect())||null,g.current=No(T.sourceEvent,h.current)}).on("drag",T=>{var K,H;const C=x(T),{autoPanOnNodeDrag:D,nodeDragThreshold:L}=s.getState();if(!w.current&&v.current&&D&&(w.current=!0,S()),!v.current){const M=C.xSnapped-(((K=p==null?void 0:p.current)==null?void 0:K.x)??0),V=C.ySnapped-(((H=p==null?void 0:p.current)==null?void 0:H.y)??0);Math.sqrt(M*M+V*V)>L&&$(T)}(p.current.x!==C.xSnapped||p.current.y!==C.ySnapped)&&d.current&&v.current&&(y.current=T.sourceEvent,g.current=No(T.sourceEvent,h.current),b(C))}).on("end",T=>{if(v.current&&(u(!1),w.current=!1,v.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:C,nodeInternals:D,onNodeDragStop:L,onSelectionDragStop:K}=s.getState(),H=o?L:Rp(K);if(C(d.current,!1,!1),H){const[M,V]=$p({nodeId:o,dragItems:d.current,nodeInternals:D});H(T.sourceEvent,M,V)}}}).filter(T=>{const C=T.target;return!T.button&&(!n||!p2(C,`.${n}`,e))&&(!r||p2(C,r,e))});return _.call(N),()=>{_.on(".drag",null)}}}},[e,t,n,r,a,s,o,i,x]),c}function b9(){const e=Mt();return f.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:a,getNodes:i,snapToGrid:s,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),p=i().filter(x=>x.selected&&(x.draggable||d&&typeof x.draggable>"u")),m=s?c[0]:5,h=s?c[1]:5,g=n.isShiftPressed?4:1,y=n.x*m*g,w=n.y*h*g,v=p.map(x=>{if(x.positionAbsolute){const _={x:x.positionAbsolute.x+y,y:x.positionAbsolute.y+w};s&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:b,position:S}=_9(x,_,r,o,void 0,u);x.position=S,x.positionAbsolute=b}return x});a(v,!0,!1)},[])}const pi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ps=e=>{const t=({id:n,type:r,data:o,xPos:a,yPos:i,xPosOrigin:s,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:p,onMouseMove:m,onMouseLeave:h,onContextMenu:g,onDoubleClick:y,style:w,className:v,isDraggable:x,isSelectable:_,isConnectable:b,isFocusable:S,selectNodesOnDrag:$,sourcePosition:N,targetPosition:T,hidden:C,resizeObserver:D,dragHandle:L,zIndex:K,isParent:H,noDragClassName:M,noPanClassName:V,initialized:j,disableKeyboardA11y:P,ariaLabel:I,rfId:A,hasHandleBounds:z})=>{const U=Mt(),F=f.useRef(null),B=f.useRef(N),X=f.useRef(T),Q=f.useRef(r),J=_||x||d||p||m||h,ee=b9(),ie=fs(n,U.getState,p),fe=fs(n,U.getState,m),ue=fs(n,U.getState,h),Ce=fs(n,U.getState,g),me=fs(n,U.getState,y),Oe=E=>{const{nodeDragThreshold:q}=U.getState();if(_&&(!$||!x||q>0)&&nv({id:n,store:U,nodeRef:F}),d){const k=U.getState().nodeInternals.get(n);k&&d(E,{...k})}},Fe=E=>{if(!Zy(E))if(U7.includes(E.key)&&_){const q=E.key==="Escape";nv({id:n,store:U,unselect:q,nodeRef:F})}else!P&&x&&u&&Object.prototype.hasOwnProperty.call(pi,E.key)&&(U.setState({ariaLiveMessage:`Moved selected node ${E.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),ee({x:pi[E.key].x,y:pi[E.key].y,isShiftPressed:E.shiftKey}))};f.useEffect(()=>()=>{F.current&&(D==null||D.unobserve(F.current))},[]),f.useEffect(()=>{if(F.current&&!C){const E=F.current;(!j||!z)&&(D==null||D.unobserve(E),D==null||D.observe(E))}},[C,j,z]),f.useEffect(()=>{const E=Q.current!==r,q=B.current!==N,k=X.current!==T;F.current&&(E||q||k)&&(E&&(Q.current=r),q&&(B.current=N),k&&(X.current=T),U.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,N,T]);const oe=w9({nodeRef:F,disabled:C||!x,noDragClassName:M,handleSelector:L,nodeId:n,isSelectable:_,selectNodesOnDrag:$});return C?null:re.createElement("div",{className:Gt(["react-flow__node",`react-flow__node-${r}`,{[V]:x},v,{selected:u,selectable:_,parent:H,dragging:oe}]),ref:F,style:{zIndex:K,transform:`translate(${s}px,${c}px)`,pointerEvents:J?"all":"none",visibility:j?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ie,onMouseMove:fe,onMouseLeave:ue,onContextMenu:Ce,onClick:Oe,onDoubleClick:me,onKeyDown:S?Fe:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":P?void 0:`${d9}-${A}`,"aria-label":I},re.createElement(rG,{value:n},re.createElement(e,{id:n,data:o,type:r,xPos:a,yPos:i,selected:u,isConnectable:b,sourcePosition:N,targetPosition:T,dragging:oe,dragHandle:L,zIndex:K})))};return t.displayName="NodeWrapper",f.memo(t)};const HG=e=>{const t=e.getNodes().filter(n=>n.selected);return{...zd(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function UG({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Mt(),{width:o,height:a,x:i,y:s,transformString:c,userSelectionActive:u}=pt(HG,Ft),d=b9(),p=f.useRef(null);if(f.useEffect(()=>{var g;n||(g=p.current)==null||g.focus({preventScroll:!0})},[n]),w9({nodeRef:p}),u||!o||!a)return null;const m=e?g=>{const y=r.getState().getNodes().filter(w=>w.selected);e(g,y)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(pi,g.key)&&d({x:pi[g.key].x,y:pi[g.key].y,isShiftPressed:g.shiftKey})};return re.createElement("div",{className:Gt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},re.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:a,top:s,left:i}}))}var GG=f.memo(UG);const WG=e=>e.nodesSelectionActive,C9=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:s,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:p,selectionOnDrag:m,selectionMode:h,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:v,zoomActivationKeyCode:x,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:S,panOnScroll:$,panOnScrollSpeed:N,panOnScrollMode:T,zoomOnDoubleClick:C,panOnDrag:D,defaultViewport:L,translateExtent:K,minZoom:H,maxZoom:M,preventScrolling:V,onSelectionContextMenu:j,noWheelClassName:P,noPanClassName:I,disableKeyboardA11y:A})=>{const z=pt(WG),U=ml(p),F=ml(v),B=F||D,X=F||$,Q=U||m&&B!==!0;return AG({deleteKeyCode:s,multiSelectionKeyCode:w}),re.createElement(MG,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:S,panOnScroll:X,panOnScrollSpeed:N,panOnScrollMode:T,zoomOnDoubleClick:C,panOnDrag:!U&&B,defaultViewport:L,translateExtent:K,minZoom:H,maxZoom:M,zoomActivationKeyCode:x,preventScrolling:V,noWheelClassName:P,noPanClassName:I},re.createElement(v9,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:B,isSelecting:!!Q,selectionMode:h},e,z&&re.createElement(GG,{onSelectionContextMenu:j,noPanClassName:I,disableKeyboardA11y:A})))};C9.displayName="FlowRenderer";var KG=f.memo(C9);function YG(e){return pt(f.useCallback(n=>e?Q7(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function XG(e){const t={input:ps(e.input||s9),default:ps(e.default||tv),output:ps(e.output||c9),group:ps(e.group||o_)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,a)=>(o[a]=ps(e[a]||tv),o),n);return{...t,...r}}const ZG=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},QG=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),S9=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:a,onError:i}=pt(QG,Ft),s=YG(e.onlyRenderVisibleElements),c=f.useRef(),u=f.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(p=>{const m=p.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));a(m)});return c.current=d,d},[]);return f.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),re.createElement("div",{className:"react-flow__nodes",style:i_},s.map(d=>{var S,$,N;let p=d.type||"default";e.nodeTypes[p]||(i==null||i("003",Yr.error003(p)),p="default");const m=e.nodeTypes[p]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||o&&typeof d.selectable>"u"),y=!!(d.connectable||n&&typeof d.connectable>"u"),w=!!(d.focusable||r&&typeof d.focusable>"u"),v=e.nodeExtent?Qx(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,x=(v==null?void 0:v.x)??0,_=(v==null?void 0:v.y)??0,b=ZG({x,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return re.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:p,data:d.data,sourcePosition:d.sourcePosition||Me.Bottom,targetPosition:d.targetPosition||Me.Top,hidden:d.hidden,xPos:x,yPos:_,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:g,isConnectable:y,isFocusable:w,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((S=d[Nt])==null?void 0:S.z)??0,isParent:!!(($=d[Nt])!=null&&$.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((N=d[Nt])!=null&&N.handleBounds)})}))};S9.displayName="NodeRenderer";var JG=f.memo(S9);const eW=(e,t,n)=>n===Me.Left?e-t:n===Me.Right?e+t:e,tW=(e,t,n)=>n===Me.Top?e-t:n===Me.Bottom?e+t:e,m2="react-flow__edgeupdater",g2=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s})=>re.createElement("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:Gt([m2,`${m2}-${s}`]),cx:eW(t,r,e),cy:tW(n,r,e),r,stroke:"transparent",fill:"transparent"}),nW=()=>!0;var Ba=e=>{const t=({id:n,className:r,type:o,data:a,onClick:i,onEdgeDoubleClick:s,selected:c,animated:u,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:w,source:v,target:x,sourceX:_,sourceY:b,targetX:S,targetY:$,sourcePosition:N,targetPosition:T,elementsSelectable:C,hidden:D,sourceHandleId:L,targetHandleId:K,onContextMenu:H,onMouseEnter:M,onMouseMove:V,onMouseLeave:j,edgeUpdaterRadius:P,onEdgeUpdate:I,onEdgeUpdateStart:A,onEdgeUpdateEnd:z,markerEnd:U,markerStart:F,rfId:B,ariaLabel:X,isFocusable:Q,isUpdatable:J,pathOptions:ee,interactionWidth:ie})=>{const fe=f.useRef(null),[ue,Ce]=f.useState(!1),[me,Oe]=f.useState(!1),Fe=Mt(),oe=f.useMemo(()=>`url('#${Jy(F,B)}')`,[F,B]),E=f.useMemo(()=>`url('#${Jy(U,B)}')`,[U,B]);if(D)return null;const q=je=>{var at;const{edges:De,addSelectedEdges:Ge,unselectNodesAndEdges:Be,multiSelectionActive:Ne}=Fe.getState(),We=De.find(ot=>ot.id===n);We&&(C&&(Fe.setState({nodesSelectionActive:!1}),We.selected&&Ne?(Be({nodes:[],edges:[We]}),(at=fe.current)==null||at.blur()):Ge([n])),i&&i(je,We))},k=ds(n,Fe.getState,s),G=ds(n,Fe.getState,H),Y=ds(n,Fe.getState,M),Z=ds(n,Fe.getState,V),le=ds(n,Fe.getState,j),ge=(je,De)=>{if(je.button!==0)return;const{edges:Ge,isValidConnection:Be}=Fe.getState(),Ne=De?x:v,We=(De?K:L)||null,at=De?"target":"source",ot=Be||nW,ze=De,st=Ge.find(ln=>ln.id===n);Oe(!0),A==null||A(je,st,at);const At=ln=>{Oe(!1),z==null||z(ln,st,at)};r9({event:je,handleId:We,nodeId:Ne,onConnect:ln=>I==null?void 0:I(st,ln),isTarget:ze,getState:Fe.getState,setState:Fe.setState,isValidConnection:ot,edgeUpdaterType:at,onEdgeUpdateEnd:At})},Ee=je=>ge(je,!0),ye=je=>ge(je,!1),_e=()=>Ce(!0),Pe=()=>Ce(!1),ne=!C&&!i,Se=je=>{var De;if(U7.includes(je.key)&&C){const{unselectNodesAndEdges:Ge,addSelectedEdges:Be,edges:Ne}=Fe.getState();je.key==="Escape"?((De=fe.current)==null||De.blur(),Ge({edges:[Ne.find(at=>at.id===n)]})):Be([n])}};return re.createElement("g",{className:Gt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:u,inactive:ne,updating:ue}]),onClick:q,onDoubleClick:k,onContextMenu:G,onMouseEnter:Y,onMouseMove:Z,onMouseLeave:le,onKeyDown:Q?Se:void 0,tabIndex:Q?0:void 0,role:Q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${v} to ${x}`,"aria-describedby":Q?`${f9}-${B}`:void 0,ref:fe},!me&&re.createElement(e,{id:n,source:v,target:x,selected:c,animated:u,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,data:a,style:w,sourceX:_,sourceY:b,targetX:S,targetY:$,sourcePosition:N,targetPosition:T,sourceHandleId:L,targetHandleId:K,markerStart:oe,markerEnd:E,pathOptions:ee,interactionWidth:ie}),J&&re.createElement(re.Fragment,null,(J==="source"||J===!0)&&re.createElement(g2,{position:N,centerX:_,centerY:b,radius:P,onMouseDown:Ee,onMouseEnter:_e,onMouseOut:Pe,type:"source"}),(J==="target"||J===!0)&&re.createElement(g2,{position:T,centerX:S,centerY:$,radius:P,onMouseDown:ye,onMouseEnter:_e,onMouseOut:Pe,type:"target"})))};return t.displayName="EdgeWrapper",f.memo(t)};function rW(e){const t={default:Ba(e.default||Wu),straight:Ba(e.bezier||t_),step:Ba(e.step||e_),smoothstep:Ba(e.step||Fd),simplebezier:Ba(e.simplebezier||Jx)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,a)=>(o[a]=Ba(e[a]||Wu),o),n);return{...t,...r}}function y2(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case Me.Top:return{x:r+a/2,y:o};case Me.Right:return{x:r+a,y:o+i/2};case Me.Bottom:return{x:r+a/2,y:o+i};case Me.Left:return{x:r,y:o+i/2}}}function v2(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const oW=(e,t,n,r,o,a)=>{const i=y2(n,e,t),s=y2(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:s.x,targetY:s.y}};function aW({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:a,width:i,height:s,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=pl({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:s/c[2]}),p=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(p*m)>0}function x2(e){var r,o,a,i,s;const t=((r=e==null?void 0:e[Nt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const iW=[{level:0,isMaxLevel:!0,edges:[]}];function sW(e,t,n=!1){let r=-1;const o=e.reduce((i,s)=>{var d,p;const c=On(s.zIndex);let u=c?s.zIndex:0;if(n){const m=t.get(s.target),h=t.get(s.source),g=s.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),y=Math.max(((d=h==null?void 0:h[Nt])==null?void 0:d.z)||0,((p=m==null?void 0:m[Nt])==null?void 0:p.z)||0,1e3);u=(c?s.zIndex:0)+(g?y:0)}return i[u]?i[u].push(s):i[u]=[s],r=u>r?u:r,i},{}),a=Object.entries(o).map(([i,s])=>{const c=+i;return{edges:s,level:c,isMaxLevel:c===r}});return a.length===0?iW:a}function lW(e,t,n){const r=pt(f.useCallback(o=>e?o.edges.filter(a=>{const i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&aW({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return sW(r,t,n)}const cW=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),uW=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),_2={[Gu.Arrow]:cW,[Gu.ArrowClosed]:uW};function dW(e){const t=Mt();return f.useMemo(()=>{var o,a;return Object.prototype.hasOwnProperty.call(_2,e)?_2[e]:((a=(o=t.getState()).onError)==null||a.call(o,"009",Yr.error009(e)),null)},[e])}const fW=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=dW(t);return c?re.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0"},re.createElement(c,{color:n,strokeWidth:i})):null},pW=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const s=Jy(i,t);r.includes(s)||(o.push({id:s,color:i.color||e,...i}),r.push(s))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))},j9=({defaultColor:e,rfId:t})=>{const n=pt(f.useCallback(pW({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((a,i)=>a.id!==o[i].id)));return re.createElement("defs",null,n.map(r=>re.createElement(fW,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};j9.displayName="MarkerDefinitions";var hW=f.memo(j9);const mW=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),E9=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:a,onEdgeUpdate:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,edgeUpdaterRadius:m,onEdgeDoubleClick:h,onEdgeUpdateStart:g,onEdgeUpdateEnd:y,children:w})=>{const{edgesFocusable:v,edgesUpdatable:x,elementsSelectable:_,width:b,height:S,connectionMode:$,nodeInternals:N,onError:T}=pt(mW,Ft),C=lW(t,N,n);return b?re.createElement(re.Fragment,null,C.map(({level:D,edges:L,isMaxLevel:K})=>re.createElement("svg",{key:D,style:{zIndex:D},width:b,height:S,className:"react-flow__edges react-flow__container"},K&&re.createElement(hW,{defaultColor:e,rfId:r}),re.createElement("g",null,L.map(H=>{const[M,V,j]=x2(N.get(H.source)),[P,I,A]=x2(N.get(H.target));if(!j||!A)return null;let z=H.type||"default";o[z]||(T==null||T("011",Yr.error011(z)),z="default");const U=o[z]||o.default,F=$===ya.Strict?I.target:(I.target??[]).concat(I.source??[]),B=v2(V.source,H.sourceHandle),X=v2(F,H.targetHandle),Q=(B==null?void 0:B.position)||Me.Bottom,J=(X==null?void 0:X.position)||Me.Top,ee=!!(H.focusable||v&&typeof H.focusable>"u"),ie=typeof i<"u"&&(H.updatable||x&&typeof H.updatable>"u");if(!B||!X)return T==null||T("008",Yr.error008(B,H)),null;const{sourceX:fe,sourceY:ue,targetX:Ce,targetY:me}=oW(M,B,Q,P,X,J);return re.createElement(U,{key:H.id,id:H.id,className:Gt([H.className,a]),type:z,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:fe,sourceY:ue,targetX:Ce,targetY:me,sourcePosition:Q,targetPosition:J,elementsSelectable:_,onEdgeUpdate:i,onContextMenu:s,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:p,edgeUpdaterRadius:m,onEdgeDoubleClick:h,onEdgeUpdateStart:g,onEdgeUpdateEnd:y,rfId:r,ariaLabel:H.ariaLabel,isFocusable:ee,isUpdatable:ie,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth})})))),w):null};E9.displayName="EdgeRenderer";var gW=f.memo(E9);const yW=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vW({children:e}){const t=pt(yW);return re.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function xW(e){const t=a_(),n=f.useRef(!1);f.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const _W={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top},$9=({nodeId:e,handleType:t,style:n,type:r=kr.Bezier,CustomComponent:o,connectionStatus:a})=>{var $,N,T;const{fromNode:i,handleId:s,toX:c,toY:u,connectionMode:d}=pt(f.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),Ft),p=($=i==null?void 0:i[Nt])==null?void 0:$.handleBounds;let m=p==null?void 0:p[t];if(d===ya.Loose&&(m=m||(p==null?void 0:p[t==="source"?"target":"source"])),!i||!m)return null;const h=s?m.find(C=>C.id===s):m[0],g=h?h.x+h.width/2:(i.width??0)/2,y=h?h.y+h.height/2:i.height??0,w=(((N=i.positionAbsolute)==null?void 0:N.x)??0)+g,v=(((T=i.positionAbsolute)==null?void 0:T.y)??0)+y,x=h==null?void 0:h.position,_=x?_W[x]:null;if(!x||!_)return null;if(o)return re.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:w,fromY:v,toX:c,toY:u,fromPosition:x,toPosition:_,connectionStatus:a});let b="";const S={sourceX:w,sourceY:v,sourcePosition:x,targetX:c,targetY:u,targetPosition:_};return r===kr.Bezier?[b]=X7(S):r===kr.Step?[b]=Qy({...S,borderRadius:0}):r===kr.SmoothStep?[b]=Qy(S):r===kr.SimpleBezier?[b]=Y7(S):b=`M${w},${v} ${c},${u}`,re.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};$9.displayName="ConnectionLine";const wW=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function bW({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:a,nodesConnectable:i,width:s,height:c,connectionStatus:u}=pt(wW,Ft);return!(o&&a&&s&&i)?null:re.createElement("svg",{style:e,width:s,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},re.createElement("g",{className:Gt(["react-flow__connection",u])},re.createElement($9,{nodeId:o,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function w2(e,t){return f.useRef(null),Mt(),f.useMemo(()=>t(e),[e])}const R9=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:a,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:y,onSelectionEnd:w,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:_,connectionLineContainerStyle:b,selectionKeyCode:S,selectionOnDrag:$,selectionMode:N,multiSelectionKeyCode:T,panActivationKeyCode:C,zoomActivationKeyCode:D,deleteKeyCode:L,onlyRenderVisibleElements:K,elementsSelectable:H,selectNodesOnDrag:M,defaultViewport:V,translateExtent:j,minZoom:P,maxZoom:I,preventScrolling:A,defaultMarkerColor:z,zoomOnScroll:U,zoomOnPinch:F,panOnScroll:B,panOnScrollSpeed:X,panOnScrollMode:Q,zoomOnDoubleClick:J,panOnDrag:ee,onPaneClick:ie,onPaneMouseEnter:fe,onPaneMouseMove:ue,onPaneMouseLeave:Ce,onPaneScroll:me,onPaneContextMenu:Oe,onEdgeUpdate:Fe,onEdgeContextMenu:oe,onEdgeMouseEnter:E,onEdgeMouseMove:q,onEdgeMouseLeave:k,edgeUpdaterRadius:G,onEdgeUpdateStart:Y,onEdgeUpdateEnd:Z,noDragClassName:le,noWheelClassName:ge,noPanClassName:Ee,elevateEdgesOnSelect:ye,disableKeyboardA11y:_e,nodeOrigin:Pe,nodeExtent:ne,rfId:Se})=>{const je=w2(e,XG),De=w2(t,rW);return xW(a),re.createElement(KG,{onPaneClick:ie,onPaneMouseEnter:fe,onPaneMouseMove:ue,onPaneMouseLeave:Ce,onPaneContextMenu:Oe,onPaneScroll:me,deleteKeyCode:L,selectionKeyCode:S,selectionOnDrag:$,selectionMode:N,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:T,panActivationKeyCode:C,zoomActivationKeyCode:D,elementsSelectable:H,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:U,zoomOnPinch:F,zoomOnDoubleClick:J,panOnScroll:B,panOnScrollSpeed:X,panOnScrollMode:Q,panOnDrag:ee,defaultViewport:V,translateExtent:j,minZoom:P,maxZoom:I,onSelectionContextMenu:g,preventScrolling:A,noDragClassName:le,noWheelClassName:ge,noPanClassName:Ee,disableKeyboardA11y:_e},re.createElement(vW,null,re.createElement(gW,{edgeTypes:De,onEdgeClick:s,onEdgeDoubleClick:u,onEdgeUpdate:Fe,onlyRenderVisibleElements:K,onEdgeContextMenu:oe,onEdgeMouseEnter:E,onEdgeMouseMove:q,onEdgeMouseLeave:k,onEdgeUpdateStart:Y,onEdgeUpdateEnd:Z,edgeUpdaterRadius:G,defaultMarkerColor:z,noPanClassName:Ee,elevateEdgesOnSelect:!!ye,disableKeyboardA11y:_e,rfId:Se},re.createElement(bW,{style:x,type:v,component:_,containerStyle:b})),re.createElement("div",{className:"react-flow__edgelabel-renderer"}),re.createElement(JG,{nodeTypes:je,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:M,onlyRenderVisibleElements:K,noPanClassName:Ee,noDragClassName:le,disableKeyboardA11y:_e,nodeOrigin:Pe,nodeExtent:ne,rfId:Se})))};R9.displayName="GraphView";var CW=f.memo(R9);const rv=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],so={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:rv,nodeExtent:rv,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ya.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ZU,isValidConnection:void 0},SW=()=>fB((e,t)=>({...so,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:a}=t();e({nodeInternals:jp(n,r,o,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",a=typeof r<"u",i=o?jp(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?r:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:s,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const p=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(p.transform),h=n.reduce((y,w)=>{const v=o.get(w.id);if(v){const x=Zx(w.nodeElement);!!(x.width&&x.height&&(v.width!==x.width||v.height!==x.height||w.forceUpdate))&&(o.set(v.id,{...v,[Nt]:{...v[Nt],handleBounds:{source:h2(".source",w.nodeElement,m,u),target:h2(".target",w.nodeElement,m,u)}},...x}),y.push({id:v.id,type:"dimensions",dimensions:x}))}return y},[]);h9(o,u);const g=i||a&&!i&&m9(t,{initial:!0,...s});e({nodeInternals:new Map(o),fitViewOnInitDone:g}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:a}=t(),i=n.map(s=>{const c={id:s.id,type:"position",dragging:o};return r&&(c.positionAbsolute=s.positionAbsolute,c.position=s.position),c});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:a,nodeOrigin:i,getNodes:s,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(a){const u=y9(n,s()),d=jp(u,o,i,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let i,s=null;r?i=n.map(c=>ho(c,!0)):(i=ri(a(),n),s=ri(o,[])),Ac({changedNodes:i,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let i,s=null;r?i=n.map(c=>ho(c,!0)):(i=ri(o,n),s=ri(a(),[])),Ac({changedNodes:s,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:a}=t(),i=n||a(),s=r||o,c=i.map(d=>(d.selected=!1,ho(d.id,!1))),u=s.map(d=>ho(d.id,!1));Ac({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),a=r().filter(s=>s.selected).map(s=>ho(s.id,!1)),i=n.filter(s=>s.selected).map(s=>ho(s.id,!1));Ac({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Qx(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:a,d3Zoom:i,d3Selection:s,translateExtent:c}=t();if(!i||!s||!n.x&&!n.y)return!1;const u=Fr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[o,a]],p=i==null?void 0:i.constrain()(u,d,c);return i.transform(s,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:so.connectionNodeId,connectionHandleId:so.connectionHandleId,connectionHandleType:so.connectionHandleType,connectionStatus:so.connectionStatus,connectionStartHandle:so.connectionStartHandle,connectionEndHandle:so.connectionEndHandle}),reset:()=>e({...so})}),Object.is),s_=({children:e})=>{const t=f.useRef(null);return t.current||(t.current=SW()),re.createElement(HU,{value:t.current},e)};s_.displayName="ReactFlowProvider";const T9=({children:e})=>f.useContext(Ld)?re.createElement(re.Fragment,null,e):re.createElement(s_,null,e);T9.displayName="ReactFlowWrapper";const jW={input:s9,default:tv,output:c9,group:o_},EW={default:Wu,straight:t_,step:e_,smoothstep:Fd,simplebezier:Jx},$W=[0,0],RW=[15,15],TW={x:0,y:0,zoom:1},NW={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},N9=f.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a=jW,edgeTypes:i=EW,onNodeClick:s,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:p,onMoveEnd:m,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:S,onNodeDoubleClick:$,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:C,onNodesDelete:D,onEdgesDelete:L,onSelectionChange:K,onSelectionDragStart:H,onSelectionDrag:M,onSelectionDragStop:V,onSelectionContextMenu:j,onSelectionStart:P,onSelectionEnd:I,connectionMode:A=ya.Strict,connectionLineType:z=kr.Bezier,connectionLineStyle:U,connectionLineComponent:F,connectionLineContainerStyle:B,deleteKeyCode:X="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:J=!1,selectionMode:ee=hl.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:fe=Uu()?"Meta":"Control",zoomActivationKeyCode:ue=Uu()?"Meta":"Control",snapToGrid:Ce=!1,snapGrid:me=RW,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:Fe=!0,nodesDraggable:oe,nodesConnectable:E,nodesFocusable:q,nodeOrigin:k=$W,edgesFocusable:G,edgesUpdatable:Y,elementsSelectable:Z,defaultViewport:le=TW,minZoom:ge=.5,maxZoom:Ee=2,translateExtent:ye=rv,preventScrolling:_e=!0,nodeExtent:Pe,defaultMarkerColor:ne="#b1b1b7",zoomOnScroll:Se=!0,zoomOnPinch:je=!0,panOnScroll:De=!1,panOnScrollSpeed:Ge=.5,panOnScrollMode:Be=ra.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:We=!0,onPaneClick:at,onPaneMouseEnter:ot,onPaneMouseMove:ze,onPaneMouseLeave:st,onPaneScroll:At,onPaneContextMenu:_n,children:ln,onEdgeUpdate:Ta,onEdgeContextMenu:Wi,onEdgeDoubleClick:sf,onEdgeMouseEnter:lf,onEdgeMouseMove:cf,onEdgeMouseLeave:Ll,onEdgeUpdateStart:uf,onEdgeUpdateEnd:df,edgeUpdaterRadius:ff=10,onNodesChange:pf,onEdgesChange:hf,noDragClassName:mf="nodrag",noWheelClassName:gf="nowheel",noPanClassName:Fl="nopan",fitView:yf=!1,fitViewOptions:vf,connectOnClick:xf=!0,attributionPosition:_f,proOptions:zl,defaultEdgeOptions:ql,elevateNodesOnSelect:wf=!0,elevateEdgesOnSelect:Ki=!1,disableKeyboardA11y:Ho=!1,autoPanOnConnect:bf=!0,autoPanOnNodeDrag:Yi=!0,connectionRadius:Na=20,isValidConnection:Cf,onError:ro,style:Bl,id:Vl,nodeDragThreshold:Sf,...jf},Ef)=>{const Xi=Vl||"1";return re.createElement("div",{...jf,style:{...Bl,...NW},ref:Ef,className:Gt(["react-flow",o]),"data-testid":"rf__wrapper",id:Vl},re.createElement(T9,null,re.createElement(CW,{onInit:u,onMove:d,onMoveStart:p,onMoveEnd:m,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:S,onNodeDoubleClick:$,nodeTypes:a,edgeTypes:i,connectionLineType:z,connectionLineStyle:U,connectionLineComponent:F,connectionLineContainerStyle:B,selectionKeyCode:Q,selectionOnDrag:J,selectionMode:ee,deleteKeyCode:X,multiSelectionKeyCode:fe,panActivationKeyCode:ie,zoomActivationKeyCode:ue,onlyRenderVisibleElements:Oe,selectNodesOnDrag:Fe,defaultViewport:le,translateExtent:ye,minZoom:ge,maxZoom:Ee,preventScrolling:_e,zoomOnScroll:Se,zoomOnPinch:je,zoomOnDoubleClick:Ne,panOnScroll:De,panOnScrollSpeed:Ge,panOnScrollMode:Be,panOnDrag:We,onPaneClick:at,onPaneMouseEnter:ot,onPaneMouseMove:ze,onPaneMouseLeave:st,onPaneScroll:At,onPaneContextMenu:_n,onSelectionContextMenu:j,onSelectionStart:P,onSelectionEnd:I,onEdgeUpdate:Ta,onEdgeContextMenu:Wi,onEdgeDoubleClick:sf,onEdgeMouseEnter:lf,onEdgeMouseMove:cf,onEdgeMouseLeave:Ll,onEdgeUpdateStart:uf,onEdgeUpdateEnd:df,edgeUpdaterRadius:ff,defaultMarkerColor:ne,noDragClassName:mf,noWheelClassName:gf,noPanClassName:Fl,elevateEdgesOnSelect:Ki,rfId:Xi,disableKeyboardA11y:Ho,nodeOrigin:k,nodeExtent:Pe}),re.createElement(_G,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,nodesDraggable:oe,nodesConnectable:E,nodesFocusable:q,edgesFocusable:G,edgesUpdatable:Y,elementsSelectable:Z,elevateNodesOnSelect:wf,minZoom:ge,maxZoom:Ee,nodeExtent:Pe,onNodesChange:pf,onEdgesChange:hf,snapToGrid:Ce,snapGrid:me,connectionMode:A,translateExtent:ye,connectOnClick:xf,defaultEdgeOptions:ql,fitView:yf,fitViewOptions:vf,onNodesDelete:D,onEdgesDelete:L,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:C,onSelectionDrag:M,onSelectionDragStart:H,onSelectionDragStop:V,noPanClassName:Fl,nodeOrigin:k,rfId:Xi,autoPanOnConnect:bf,autoPanOnNodeDrag:Yi,onError:ro,connectionRadius:Na,isValidConnection:Cf,nodeDragThreshold:Sf}),re.createElement(vG,{onSelectionChange:K}),ln,re.createElement(GU,{proOptions:zl,position:_f}),re.createElement(jG,{rfId:Xi,disableKeyboardA11y:Ho})))});N9.displayName="ReactFlow";function k9(e){return t=>{const[n,r]=f.useState(t),o=f.useCallback(a=>r(i=>e(a,i)),[]);return[n,r,o]}}const kW=k9(y9),AW=k9(FG),A9=({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:u,borderRadius:d,shapeRendering:p,onClick:m,selected:h})=>{const{background:g,backgroundColor:y}=a||{},w=i||g||y;return re.createElement("rect",{className:Gt(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:w,stroke:s,strokeWidth:c,shapeRendering:p,onClick:m?v=>m(v,e):void 0})};A9.displayName="MiniMapNode";var DW=f.memo(A9);const PW=e=>e.nodeOrigin,IW=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Tp=e=>e instanceof Function?e:()=>e;function MW({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:a=DW,onClick:i}){const s=pt(IW,Ft),c=pt(PW),u=Tp(t),d=Tp(e),p=Tp(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return re.createElement(re.Fragment,null,s.map(h=>{const{x:g,y}=ca(h,c).positionAbsolute;return re.createElement(a,{key:h.id,x:g,y,width:h.width,height:h.height,style:h.style,selected:h.selected,className:p(h),color:u(h),borderRadius:r,strokeColor:d(h),strokeWidth:o,shapeRendering:m,onClick:i,id:h.id})}))}var OW=f.memo(MW);const LW=200,FW=150,zW=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?YU(zd(t,e.nodeOrigin),n):n,rfId:e.rfId}},qW="react-flow__minimap-desc";function D9({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i=2,nodeComponent:s,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:p="bottom-right",onClick:m,onNodeClick:h,pannable:g=!1,zoomable:y=!1,ariaLabel:w="React Flow mini map",inversePan:v=!1,zoomStep:x=10,offsetScale:_=5}){const b=Mt(),S=f.useRef(null),{boundingRect:$,viewBB:N,rfId:T}=pt(zW,Ft),C=(e==null?void 0:e.width)??LW,D=(e==null?void 0:e.height)??FW,L=$.width/C,K=$.height/D,H=Math.max(L,K),M=H*C,V=H*D,j=_*H,P=$.x-(M-$.width)/2-j,I=$.y-(V-$.height)/2-j,A=M+j*2,z=V+j*2,U=`${qW}-${T}`,F=f.useRef(0);F.current=H,f.useEffect(()=>{if(S.current){const Q=Pn(S.current),J=fe=>{const{transform:ue,d3Selection:Ce,d3Zoom:me}=b.getState();if(fe.sourceEvent.type!=="wheel"||!Ce||!me)return;const Oe=-fe.sourceEvent.deltaY*(fe.sourceEvent.deltaMode===1?.05:fe.sourceEvent.deltaMode?1:.002)*x,Fe=ue[2]*Math.pow(2,Oe);me.scaleTo(Ce,Fe)},ee=fe=>{const{transform:ue,d3Selection:Ce,d3Zoom:me,translateExtent:Oe,width:Fe,height:oe}=b.getState();if(fe.sourceEvent.type!=="mousemove"||!Ce||!me)return;const E=F.current*Math.max(1,ue[2])*(v?-1:1),q={x:ue[0]-fe.sourceEvent.movementX*E,y:ue[1]-fe.sourceEvent.movementY*E},k=[[0,0],[Fe,oe]],G=Fr.translate(q.x,q.y).scale(ue[2]),Y=me.constrain()(G,k,Oe);me.transform(Ce,Y)},ie=F7().on("zoom",g?ee:null).on("zoom.wheel",y?J:null);return Q.call(ie),()=>{Q.on("zoom",null)}}},[g,y,v,x]);const B=m?Q=>{const J=Qn(Q);m(Q,{x:J[0],y:J[1]})}:void 0,X=h?(Q,J)=>{const ee=b.getState().nodeInternals.get(J);h(Q,ee)}:void 0;return re.createElement(fl,{position:p,style:e,className:Gt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},re.createElement("svg",{width:C,height:D,viewBox:`${P} ${I} ${A} ${z}`,role:"img","aria-labelledby":U,ref:S,onClick:B},w&&re.createElement("title",{id:U},w),re.createElement(OW,{onClick:X,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),re.createElement("path",{className:"react-flow__minimap-mask",d:`M${P-j},${I-j}h${A+j*2}v${z+j*2}h${-A-j*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}D9.displayName="MiniMap";var BW=f.memo(D9);function VW(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},re.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function HW(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},re.createElement("path",{d:"M0 0h32v4.2H0z"}))}function UW(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},re.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function GW(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function WW(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ws=({children:e,className:t,...n})=>re.createElement("button",{type:"button",className:Gt(["react-flow__controls-button",t]),...n},e);ws.displayName="ControlButton";const KW=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),P9=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:u,children:d,position:p="bottom-left"})=>{const m=Mt(),[h,g]=f.useState(!1),{isInteractive:y,minZoomReached:w,maxZoomReached:v}=pt(KW,Ft),{zoomIn:x,zoomOut:_,fitView:b}=a_();if(f.useEffect(()=>{g(!0)},[]),!h)return null;const S=()=>{x(),a==null||a()},$=()=>{_(),i==null||i()},N=()=>{b(o),s==null||s()},T=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return re.createElement(fl,{className:Gt(["react-flow__controls",u]),position:p,style:e,"data-testid":"rf__controls"},t&&re.createElement(re.Fragment,null,re.createElement(ws,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},re.createElement(VW,null)),re.createElement(ws,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},re.createElement(HW,null))),n&&re.createElement(ws,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},re.createElement(UW,null)),r&&re.createElement(ws,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},y?re.createElement(WW,null):re.createElement(GW,null)),d)};P9.displayName="Controls";var YW=f.memo(P9),ir;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ir||(ir={}));function XW({color:e,dimensions:t,lineWidth:n}){return re.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function ZW({color:e,radius:t}){return re.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const QW={[ir.Dots]:"#91919a",[ir.Lines]:"#eee",[ir.Cross]:"#e2e2e2"},JW={[ir.Dots]:1,[ir.Lines]:1,[ir.Cross]:6},eK=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function I9({id:e,variant:t=ir.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=2,color:i,style:s,className:c}){const u=f.useRef(null),{transform:d,patternId:p}=pt(eK,Ft),m=i||QW[t],h=r||JW[t],g=t===ir.Dots,y=t===ir.Cross,w=Array.isArray(n)?n:[n,n],v=[w[0]*d[2]||1,w[1]*d[2]||1],x=h*d[2],_=y?[x,x]:v,b=g?[x/a,x/a]:[_[0]/a,_[1]/a];return re.createElement("svg",{className:Gt(["react-flow__background",c]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},re.createElement("pattern",{id:p+e,x:d[0]%v[0],y:d[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},g?re.createElement(ZW,{color:m,radius:x/a}):re.createElement(XW,{dimensions:_,color:m,lineWidth:o})),re.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}I9.displayName="Background";var tK=f.memo(I9);function l_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Np,b2;function nK(){if(b2)return Np;b2=1;function e(){this.__data__=[],this.size=0}return Np=e,Np}var kp,C2;function Bi(){if(C2)return kp;C2=1;function e(t,n){return t===n||t!==t&&n!==n}return kp=e,kp}var Ap,S2;function qd(){if(S2)return Ap;S2=1;var e=Bi();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Ap=t,Ap}var Dp,j2;function rK(){if(j2)return Dp;j2=1;var e=qd(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return Dp=r,Dp}var Pp,E2;function oK(){if(E2)return Pp;E2=1;var e=qd();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Pp=t,Pp}var Ip,$2;function aK(){if($2)return Ip;$2=1;var e=qd();function t(n){return e(this.__data__,n)>-1}return Ip=t,Ip}var Mp,R2;function iK(){if(R2)return Mp;R2=1;var e=qd();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return Mp=t,Mp}var Op,T2;function Bd(){if(T2)return Op;T2=1;var e=nK(),t=rK(),n=oK(),r=aK(),o=iK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var u=i[s];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Op=a,Op}var Lp,N2;function sK(){if(N2)return Lp;N2=1;var e=Bd();function t(){this.__data__=new e,this.size=0}return Lp=t,Lp}var Fp,k2;function lK(){if(k2)return Fp;k2=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Fp=e,Fp}var zp,A2;function cK(){if(A2)return zp;A2=1;function e(t){return this.__data__.get(t)}return zp=e,zp}var qp,D2;function uK(){if(D2)return qp;D2=1;function e(t){return this.__data__.has(t)}return qp=e,qp}var Bp,P2;function M9(){if(P2)return Bp;P2=1;var e=typeof Ul=="object"&&Ul&&Ul.Object===Object&&Ul;return Bp=e,Bp}var Vp,I2;function ur(){if(I2)return Vp;I2=1;var e=M9(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Vp=n,Vp}var Hp,M2;function Vi(){if(M2)return Hp;M2=1;var e=ur(),t=e.Symbol;return Hp=t,Hp}var Up,O2;function dK(){if(O2)return Up;O2=1;var e=Vi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var u=!0}catch{}var d=r.call(i);return u&&(s?i[o]=c:delete i[o]),d}return Up=a,Up}var Gp,L2;function fK(){if(L2)return Gp;L2=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Gp=n,Gp}var Wp,F2;function Sa(){if(F2)return Wp;F2=1;var e=Vi(),t=dK(),n=fK(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return Wp=i,Wp}var Kp,z2;function Wn(){if(z2)return Kp;z2=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Kp=e,Kp}var Yp,q2;function Dl(){if(q2)return Yp;q2=1;var e=Sa(),t=Wn(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return Yp=i,Yp}var Xp,B2;function pK(){if(B2)return Xp;B2=1;var e=ur(),t=e["__core-js_shared__"];return Xp=t,Xp}var Zp,V2;function hK(){if(V2)return Zp;V2=1;var e=pK(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Zp=n,Zp}var Qp,H2;function O9(){if(H2)return Qp;H2=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Qp=n,Qp}var Jp,U2;function mK(){if(U2)return Jp;U2=1;var e=Dl(),t=hK(),n=Wn(),r=O9(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,u=s.hasOwnProperty,d=RegExp("^"+c.call(u).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||t(m))return!1;var h=e(m)?d:a;return h.test(r(m))}return Jp=p,Jp}var eh,G2;function gK(){if(G2)return eh;G2=1;function e(t,n){return t==null?void 0:t[n]}return eh=e,eh}var th,W2;function ja(){if(W2)return th;W2=1;var e=mK(),t=gK();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return th=n,th}var nh,K2;function c_(){if(K2)return nh;K2=1;var e=ja(),t=ur(),n=e(t,"Map");return nh=n,nh}var rh,Y2;function Vd(){if(Y2)return rh;Y2=1;var e=ja(),t=e(Object,"create");return rh=t,rh}var oh,X2;function yK(){if(X2)return oh;X2=1;var e=Vd();function t(){this.__data__=e?e(null):{},this.size=0}return oh=t,oh}var ah,Z2;function vK(){if(Z2)return ah;Z2=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return ah=e,ah}var ih,Q2;function xK(){if(Q2)return ih;Q2=1;var e=Vd(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return ih=o,ih}var sh,J2;function _K(){if(J2)return sh;J2=1;var e=Vd(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return sh=r,sh}var lh,eC;function wK(){if(eC)return lh;eC=1;var e=Vd(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return lh=n,lh}var ch,tC;function bK(){if(tC)return ch;tC=1;var e=yK(),t=vK(),n=xK(),r=_K(),o=wK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var u=i[s];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,ch=a,ch}var uh,nC;function CK(){if(nC)return uh;nC=1;var e=bK(),t=Bd(),n=c_();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return uh=r,uh}var dh,rC;function SK(){if(rC)return dh;rC=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return dh=e,dh}var fh,oC;function Hd(){if(oC)return fh;oC=1;var e=SK();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return fh=t,fh}var ph,aC;function jK(){if(aC)return ph;aC=1;var e=Hd();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return ph=t,ph}var hh,iC;function EK(){if(iC)return hh;iC=1;var e=Hd();function t(n){return e(this,n).get(n)}return hh=t,hh}var mh,sC;function $K(){if(sC)return mh;sC=1;var e=Hd();function t(n){return e(this,n).has(n)}return mh=t,mh}var gh,lC;function RK(){if(lC)return gh;lC=1;var e=Hd();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return gh=t,gh}var yh,cC;function u_(){if(cC)return yh;cC=1;var e=CK(),t=jK(),n=EK(),r=$K(),o=RK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var u=i[s];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,yh=a,yh}var vh,uC;function TK(){if(uC)return vh;uC=1;var e=Bd(),t=c_(),n=u_(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return vh=o,vh}var xh,dC;function Ud(){if(dC)return xh;dC=1;var e=Bd(),t=sK(),n=lK(),r=cK(),o=uK(),a=TK();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,xh=i,xh}var _h,fC;function d_(){if(fC)return _h;fC=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o&&n(t[r],r,t)!==!1;);return t}return _h=e,_h}var wh,pC;function L9(){if(pC)return wh;pC=1;var e=ja(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return wh=t,wh}var bh,hC;function Gd(){if(hC)return bh;hC=1;var e=L9();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return bh=t,bh}var Ch,mC;function Wd(){if(mC)return Ch;mC=1;var e=Gd(),t=Bi(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return Ch=o,Ch}var Sh,gC;function Pl(){if(gC)return Sh;gC=1;var e=Wd(),t=Gd();function n(r,o,a,i){var s=!a;a||(a={});for(var c=-1,u=o.length;++c<u;){var d=o[c],p=i?i(a[d],r[d],d,a,r):void 0;p===void 0&&(p=r[d]),s?t(a,d,p):e(a,d,p)}return a}return Sh=n,Sh}var jh,yC;function NK(){if(yC)return jh;yC=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return jh=e,jh}var Eh,vC;function Sr(){if(vC)return Eh;vC=1;function e(t){return t!=null&&typeof t=="object"}return Eh=e,Eh}var $h,xC;function kK(){if(xC)return $h;xC=1;var e=Sa(),t=Sr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return $h=r,$h}var Rh,_C;function Il(){if(_C)return Rh;_C=1;var e=kK(),t=Sr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return Rh=a,Rh}var Th,wC;function kt(){if(wC)return Th;wC=1;var e=Array.isArray;return Th=e,Th}var bs={exports:{}},Nh,bC;function AK(){if(bC)return Nh;bC=1;function e(){return!1}return Nh=e,Nh}bs.exports;var CC;function Hi(){return CC||(CC=1,function(e,t){var n=ur(),r=AK(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||r;e.exports=u}(bs,bs.exports)),bs.exports}var kh,SC;function Kd(){if(SC)return kh;SC=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return kh=n,kh}var Ah,jC;function f_(){if(jC)return Ah;jC=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Ah=t,Ah}var Dh,EC;function DK(){if(EC)return Dh;EC=1;var e=Sa(),t=f_(),n=Sr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",p="[object Object]",m="[object RegExp]",h="[object Set]",g="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",b="[object Int8Array]",S="[object Int16Array]",$="[object Int32Array]",N="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",D="[object Uint32Array]",L={};L[x]=L[_]=L[b]=L[S]=L[$]=L[N]=L[T]=L[C]=L[D]=!0,L[r]=L[o]=L[w]=L[a]=L[v]=L[i]=L[s]=L[c]=L[u]=L[d]=L[p]=L[m]=L[h]=L[g]=L[y]=!1;function K(H){return n(H)&&t(H.length)&&!!L[e(H)]}return Dh=K,Dh}var Ph,$C;function Yd(){if($C)return Ph;$C=1;function e(t){return function(n){return t(n)}}return Ph=e,Ph}var Cs={exports:{}};Cs.exports;var RC;function p_(){return RC||(RC=1,function(e,t){var n=M9(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(Cs,Cs.exports)),Cs.exports}var Ih,TC;function Ml(){if(TC)return Ih;TC=1;var e=DK(),t=Yd(),n=p_(),r=n&&n.isTypedArray,o=r?t(r):e;return Ih=o,Ih}var Mh,NC;function F9(){if(NC)return Mh;NC=1;var e=NK(),t=Il(),n=kt(),r=Hi(),o=Kd(),a=Ml(),i=Object.prototype,s=i.hasOwnProperty;function c(u,d){var p=n(u),m=!p&&t(u),h=!p&&!m&&r(u),g=!p&&!m&&!h&&a(u),y=p||m||h||g,w=y?e(u.length,String):[],v=w.length;for(var x in u)(d||s.call(u,x))&&!(y&&(x=="length"||h&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,v)))&&w.push(x);return w}return Mh=c,Mh}var Oh,kC;function Xd(){if(kC)return Oh;kC=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return Oh=t,Oh}var Lh,AC;function z9(){if(AC)return Lh;AC=1;function e(t,n){return function(r){return t(n(r))}}return Lh=e,Lh}var Fh,DC;function PK(){if(DC)return Fh;DC=1;var e=z9(),t=e(Object.keys,Object);return Fh=t,Fh}var zh,PC;function h_(){if(PC)return zh;PC=1;var e=Xd(),t=PK(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return zh=o,zh}var qh,IC;function to(){if(IC)return qh;IC=1;var e=Dl(),t=f_();function n(r){return r!=null&&t(r.length)&&!e(r)}return qh=n,qh}var Bh,MC;function Vo(){if(MC)return Bh;MC=1;var e=F9(),t=h_(),n=to();function r(o){return n(o)?e(o):t(o)}return Bh=r,Bh}var Vh,OC;function IK(){if(OC)return Vh;OC=1;var e=Pl(),t=Vo();function n(r,o){return r&&e(o,t(o),r)}return Vh=n,Vh}var Hh,LC;function MK(){if(LC)return Hh;LC=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Hh=e,Hh}var Uh,FC;function OK(){if(FC)return Uh;FC=1;var e=Wn(),t=Xd(),n=MK(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var u in i)u=="constructor"&&(s||!o.call(i,u))||c.push(u);return c}return Uh=a,Uh}var Gh,zC;function Ea(){if(zC)return Gh;zC=1;var e=F9(),t=OK(),n=to();function r(o){return n(o)?e(o,!0):t(o)}return Gh=r,Gh}var Wh,qC;function LK(){if(qC)return Wh;qC=1;var e=Pl(),t=Ea();function n(r,o){return r&&e(o,t(o),r)}return Wh=n,Wh}var Ss={exports:{}};Ss.exports;var BC;function q9(){return BC||(BC=1,function(e,t){var n=ur(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a?n.Buffer:void 0,s=i?i.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var p=u.length,m=s?s(p):new u.constructor(p);return u.copy(m),m}e.exports=c}(Ss,Ss.exports)),Ss.exports}var Kh,VC;function B9(){if(VC)return Kh;VC=1;function e(t,n){var r=-1,o=t.length;for(n||(n=Array(o));++r<o;)n[r]=t[r];return n}return Kh=e,Kh}var Yh,HC;function V9(){if(HC)return Yh;HC=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return Yh=e,Yh}var Xh,UC;function H9(){if(UC)return Xh;UC=1;function e(){return[]}return Xh=e,Xh}var Zh,GC;function m_(){if(GC)return Zh;GC=1;var e=V9(),t=H9(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return Zh=a,Zh}var Qh,WC;function FK(){if(WC)return Qh;WC=1;var e=Pl(),t=m_();function n(r,o){return e(r,t(r),o)}return Qh=n,Qh}var Jh,KC;function g_(){if(KC)return Jh;KC=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return Jh=e,Jh}var em,YC;function Zd(){if(YC)return em;YC=1;var e=z9(),t=e(Object.getPrototypeOf,Object);return em=t,em}var tm,XC;function U9(){if(XC)return tm;XC=1;var e=g_(),t=Zd(),n=m_(),r=H9(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return tm=a,tm}var nm,ZC;function zK(){if(ZC)return nm;ZC=1;var e=Pl(),t=U9();function n(r,o){return e(r,t(r),o)}return nm=n,nm}var rm,QC;function G9(){if(QC)return rm;QC=1;var e=g_(),t=kt();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return rm=n,rm}var om,JC;function W9(){if(JC)return om;JC=1;var e=G9(),t=m_(),n=Vo();function r(o){return e(o,n,t)}return om=r,om}var am,e5;function qK(){if(e5)return am;e5=1;var e=G9(),t=U9(),n=Ea();function r(o){return e(o,n,t)}return am=r,am}var im,t5;function BK(){if(t5)return im;t5=1;var e=ja(),t=ur(),n=e(t,"DataView");return im=n,im}var sm,n5;function VK(){if(n5)return sm;n5=1;var e=ja(),t=ur(),n=e(t,"Promise");return sm=n,sm}var lm,r5;function K9(){if(r5)return lm;r5=1;var e=ja(),t=ur(),n=e(t,"Set");return lm=n,lm}var cm,o5;function HK(){if(o5)return cm;o5=1;var e=ja(),t=ur(),n=e(t,"WeakMap");return cm=n,cm}var um,a5;function Ui(){if(a5)return um;a5=1;var e=BK(),t=c_(),n=VK(),r=K9(),o=HK(),a=Sa(),i=O9(),s="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",h=i(e),g=i(t),y=i(n),w=i(r),v=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=m||t&&x(new t)!=s||n&&x(n.resolve())!=u||r&&x(new r)!=d||o&&x(new o)!=p)&&(x=function(_){var b=a(_),S=b==c?_.constructor:void 0,$=S?i(S):"";if($)switch($){case h:return m;case g:return s;case y:return u;case w:return d;case v:return p}return b}),um=x,um}var dm,i5;function UK(){if(i5)return dm;i5=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var o=r.length,a=new r.constructor(o);return o&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return dm=n,dm}var fm,s5;function Y9(){if(s5)return fm;s5=1;var e=ur(),t=e.Uint8Array;return fm=t,fm}var pm,l5;function y_(){if(l5)return pm;l5=1;var e=Y9();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return pm=t,pm}var hm,c5;function GK(){if(c5)return hm;c5=1;var e=y_();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}return hm=t,hm}var mm,u5;function WK(){if(u5)return mm;u5=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return mm=t,mm}var gm,d5;function KK(){if(d5)return gm;d5=1;var e=Vi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(o){return n?Object(n.call(o)):{}}return gm=r,gm}var ym,f5;function X9(){if(f5)return ym;f5=1;var e=y_();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}return ym=t,ym}var vm,p5;function YK(){if(p5)return vm;p5=1;var e=y_(),t=GK(),n=WK(),r=KK(),o=X9(),a="[object Boolean]",i="[object Date]",s="[object Map]",c="[object Number]",u="[object RegExp]",d="[object Set]",p="[object String]",m="[object Symbol]",h="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",w="[object Float64Array]",v="[object Int8Array]",x="[object Int16Array]",_="[object Int32Array]",b="[object Uint8Array]",S="[object Uint8ClampedArray]",$="[object Uint16Array]",N="[object Uint32Array]";function T(C,D,L){var K=C.constructor;switch(D){case h:return e(C);case a:case i:return new K(+C);case g:return t(C,L);case y:case w:case v:case x:case _:case b:case S:case $:case N:return o(C,L);case s:return new K;case c:case p:return new K(C);case u:return n(C);case d:return new K;case m:return r(C)}}return vm=T,vm}var xm,h5;function Z9(){if(h5)return xm;h5=1;var e=Wn(),t=Object.create,n=function(){function r(){}return function(o){if(!e(o))return{};if(t)return t(o);r.prototype=o;var a=new r;return r.prototype=void 0,a}}();return xm=n,xm}var _m,m5;function Q9(){if(m5)return _m;m5=1;var e=Z9(),t=Zd(),n=Xd();function r(o){return typeof o.constructor=="function"&&!n(o)?e(t(o)):{}}return _m=r,_m}var wm,g5;function XK(){if(g5)return wm;g5=1;var e=Ui(),t=Sr(),n="[object Map]";function r(o){return t(o)&&e(o)==n}return wm=r,wm}var bm,y5;function ZK(){if(y5)return bm;y5=1;var e=XK(),t=Yd(),n=p_(),r=n&&n.isMap,o=r?t(r):e;return bm=o,bm}var Cm,v5;function QK(){if(v5)return Cm;v5=1;var e=Ui(),t=Sr(),n="[object Set]";function r(o){return t(o)&&e(o)==n}return Cm=r,Cm}var Sm,x5;function JK(){if(x5)return Sm;x5=1;var e=QK(),t=Yd(),n=p_(),r=n&&n.isSet,o=r?t(r):e;return Sm=o,Sm}var jm,_5;function J9(){if(_5)return jm;_5=1;var e=Ud(),t=d_(),n=Wd(),r=IK(),o=LK(),a=q9(),i=B9(),s=FK(),c=zK(),u=W9(),d=qK(),p=Ui(),m=UK(),h=YK(),g=Q9(),y=kt(),w=Hi(),v=ZK(),x=Wn(),_=JK(),b=Vo(),S=Ea(),$=1,N=2,T=4,C="[object Arguments]",D="[object Array]",L="[object Boolean]",K="[object Date]",H="[object Error]",M="[object Function]",V="[object GeneratorFunction]",j="[object Map]",P="[object Number]",I="[object Object]",A="[object RegExp]",z="[object Set]",U="[object String]",F="[object Symbol]",B="[object WeakMap]",X="[object ArrayBuffer]",Q="[object DataView]",J="[object Float32Array]",ee="[object Float64Array]",ie="[object Int8Array]",fe="[object Int16Array]",ue="[object Int32Array]",Ce="[object Uint8Array]",me="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Fe="[object Uint32Array]",oe={};oe[C]=oe[D]=oe[X]=oe[Q]=oe[L]=oe[K]=oe[J]=oe[ee]=oe[ie]=oe[fe]=oe[ue]=oe[j]=oe[P]=oe[I]=oe[A]=oe[z]=oe[U]=oe[F]=oe[Ce]=oe[me]=oe[Oe]=oe[Fe]=!0,oe[H]=oe[M]=oe[B]=!1;function E(q,k,G,Y,Z,le){var ge,Ee=k&$,ye=k&N,_e=k&T;if(G&&(ge=Z?G(q,Y,Z,le):G(q)),ge!==void 0)return ge;if(!x(q))return q;var Pe=y(q);if(Pe){if(ge=m(q),!Ee)return i(q,ge)}else{var ne=p(q),Se=ne==M||ne==V;if(w(q))return a(q,Ee);if(ne==I||ne==C||Se&&!Z){if(ge=ye||Se?{}:g(q),!Ee)return ye?c(q,o(ge,q)):s(q,r(ge,q))}else{if(!oe[ne])return Z?q:{};ge=h(q,ne,Ee)}}le||(le=new e);var je=le.get(q);if(je)return je;le.set(q,ge),_(q)?q.forEach(function(Be){ge.add(E(Be,k,G,Be,q,le))}):v(q)&&q.forEach(function(Be,Ne){ge.set(Ne,E(Be,k,G,Ne,q,le))});var De=_e?ye?d:u:ye?S:b,Ge=Pe?void 0:De(q);return t(Ge||q,function(Be,Ne){Ge&&(Ne=Be,Be=q[Ne]),n(ge,Ne,E(Be,k,G,Ne,q,le))}),ge}return jm=E,jm}var Em,w5;function eY(){if(w5)return Em;w5=1;var e=J9(),t=4;function n(r){return e(r,t)}return Em=n,Em}var $m,b5;function v_(){if(b5)return $m;b5=1;function e(t){return function(){return t}}return $m=e,$m}var Rm,C5;function tY(){if(C5)return Rm;C5=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var u=s[t?c:++a];if(r(i[u],u,i)===!1)break}return n}}return Rm=e,Rm}var Tm,S5;function x_(){if(S5)return Tm;S5=1;var e=tY(),t=e();return Tm=t,Tm}var Nm,j5;function __(){if(j5)return Nm;j5=1;var e=x_(),t=Vo();function n(r,o){return r&&e(r,o,t)}return Nm=n,Nm}var km,E5;function nY(){if(E5)return km;E5=1;var e=to();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return km=t,km}var Am,$5;function Qd(){if($5)return Am;$5=1;var e=__(),t=nY(),n=t(e);return Am=n,Am}var Dm,R5;function $a(){if(R5)return Dm;R5=1;function e(t){return t}return Dm=e,Dm}var Pm,T5;function eR(){if(T5)return Pm;T5=1;var e=$a();function t(n){return typeof n=="function"?n:e}return Pm=t,Pm}var Im,N5;function tR(){if(N5)return Im;N5=1;var e=d_(),t=Qd(),n=eR(),r=kt();function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return Im=o,Im}var Mm,k5;function nR(){return k5||(k5=1,Mm=tR()),Mm}var Om,A5;function rY(){if(A5)return Om;A5=1;var e=Qd();function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return Om=t,Om}var Lm,D5;function oY(){if(D5)return Lm;D5=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Lm=t,Lm}var Fm,P5;function aY(){if(P5)return Fm;P5=1;function e(t){return this.__data__.has(t)}return Fm=e,Fm}var zm,I5;function rR(){if(I5)return zm;I5=1;var e=u_(),t=oY(),n=aY();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,zm=r,zm}var qm,M5;function iY(){if(M5)return qm;M5=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return qm=e,qm}var Bm,O5;function oR(){if(O5)return Bm;O5=1;function e(t,n){return t.has(n)}return Bm=e,Bm}var Vm,L5;function aR(){if(L5)return Vm;L5=1;var e=rR(),t=iY(),n=oR(),r=1,o=2;function a(i,s,c,u,d,p){var m=c&r,h=i.length,g=s.length;if(h!=g&&!(m&&g>h))return!1;var y=p.get(i),w=p.get(s);if(y&&w)return y==s&&w==i;var v=-1,x=!0,_=c&o?new e:void 0;for(p.set(i,s),p.set(s,i);++v<h;){var b=i[v],S=s[v];if(u)var $=m?u(S,b,v,s,i,p):u(b,S,v,i,s,p);if($!==void 0){if($)continue;x=!1;break}if(_){if(!t(s,function(N,T){if(!n(_,T)&&(b===N||d(b,N,c,u,p)))return _.push(T)})){x=!1;break}}else if(!(b===S||d(b,S,c,u,p))){x=!1;break}}return p.delete(i),p.delete(s),x}return Vm=a,Vm}var Hm,F5;function sY(){if(F5)return Hm;F5=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return Hm=e,Hm}var Um,z5;function w_(){if(z5)return Um;z5=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return Um=e,Um}var Gm,q5;function lY(){if(q5)return Gm;q5=1;var e=Vi(),t=Y9(),n=Bi(),r=aR(),o=sY(),a=w_(),i=1,s=2,c="[object Boolean]",u="[object Date]",d="[object Error]",p="[object Map]",m="[object Number]",h="[object RegExp]",g="[object Set]",y="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",_=e?e.prototype:void 0,b=_?_.valueOf:void 0;function S($,N,T,C,D,L,K){switch(T){case x:if($.byteLength!=N.byteLength||$.byteOffset!=N.byteOffset)return!1;$=$.buffer,N=N.buffer;case v:return!($.byteLength!=N.byteLength||!L(new t($),new t(N)));case c:case u:case m:return n(+$,+N);case d:return $.name==N.name&&$.message==N.message;case h:case y:return $==N+"";case p:var H=o;case g:var M=C&i;if(H||(H=a),$.size!=N.size&&!M)return!1;var V=K.get($);if(V)return V==N;C|=s,K.set($,N);var j=r(H($),H(N),C,D,L,K);return K.delete($),j;case w:if(b)return b.call($)==b.call(N)}return!1}return Gm=S,Gm}var Wm,B5;function cY(){if(B5)return Wm;B5=1;var e=W9(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,u,d){var p=s&t,m=e(a),h=m.length,g=e(i),y=g.length;if(h!=y&&!p)return!1;for(var w=h;w--;){var v=m[w];if(!(p?v in i:r.call(i,v)))return!1}var x=d.get(a),_=d.get(i);if(x&&_)return x==i&&_==a;var b=!0;d.set(a,i),d.set(i,a);for(var S=p;++w<h;){v=m[w];var $=a[v],N=i[v];if(c)var T=p?c(N,$,v,i,a,d):c($,N,v,a,i,d);if(!(T===void 0?$===N||u($,N,s,c,d):T)){b=!1;break}S||(S=v=="constructor")}if(b&&!S){var C=a.constructor,D=i.constructor;C!=D&&"constructor"in a&&"constructor"in i&&!(typeof C=="function"&&C instanceof C&&typeof D=="function"&&D instanceof D)&&(b=!1)}return d.delete(a),d.delete(i),b}return Wm=o,Wm}var Km,V5;function uY(){if(V5)return Km;V5=1;var e=Ud(),t=aR(),n=lY(),r=cY(),o=Ui(),a=kt(),i=Hi(),s=Ml(),c=1,u="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype,h=m.hasOwnProperty;function g(y,w,v,x,_,b){var S=a(y),$=a(w),N=S?d:o(y),T=$?d:o(w);N=N==u?p:N,T=T==u?p:T;var C=N==p,D=T==p,L=N==T;if(L&&i(y)){if(!i(w))return!1;S=!0,C=!1}if(L&&!C)return b||(b=new e),S||s(y)?t(y,w,v,x,_,b):n(y,w,N,v,x,_,b);if(!(v&c)){var K=C&&h.call(y,"__wrapped__"),H=D&&h.call(w,"__wrapped__");if(K||H){var M=K?y.value():y,V=H?w.value():w;return b||(b=new e),_(M,V,v,x,b)}}return L?(b||(b=new e),r(y,w,v,x,_,b)):!1}return Km=g,Km}var Ym,H5;function iR(){if(H5)return Ym;H5=1;var e=uY(),t=Sr();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return Ym=n,Ym}var Xm,U5;function dY(){if(U5)return Xm;U5=1;var e=Ud(),t=iR(),n=1,r=2;function o(a,i,s,c){var u=s.length,d=u,p=!c;if(a==null)return!d;for(a=Object(a);u--;){var m=s[u];if(p&&m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++u<d;){m=s[u];var h=m[0],g=a[h],y=m[1];if(p&&m[2]){if(g===void 0&&!(h in a))return!1}else{var w=new e;if(c)var v=c(g,y,h,a,i,w);if(!(v===void 0?t(y,g,n|r,c,w):v))return!1}}return!0}return Xm=o,Xm}var Zm,G5;function sR(){if(G5)return Zm;G5=1;var e=Wn();function t(n){return n===n&&!e(n)}return Zm=t,Zm}var Qm,W5;function fY(){if(W5)return Qm;W5=1;var e=sR(),t=Vo();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return Qm=n,Qm}var Jm,K5;function lR(){if(K5)return Jm;K5=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Jm=e,Jm}var eg,Y5;function pY(){if(Y5)return eg;Y5=1;var e=dY(),t=fY(),n=lR();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return eg=r,eg}var tg,X5;function Gi(){if(X5)return tg;X5=1;var e=Sa(),t=Sr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return tg=r,tg}var ng,Z5;function b_(){if(Z5)return ng;Z5=1;var e=kt(),t=Gi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return ng=o,ng}var rg,Q5;function hY(){if(Q5)return rg;Q5=1;var e=u_(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var u=r.apply(this,i);return a.cache=c.set(s,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,rg=n,rg}var og,J5;function mY(){if(J5)return og;J5=1;var e=hY(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return og=n,og}var ag,e3;function gY(){if(e3)return ag;e3=1;var e=mY(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,u){a.push(c?u.replace(n,"$1"):s||i)}),a});return ag=r,ag}var ig,t3;function Jd(){if(t3)return ig;t3=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return ig=e,ig}var sg,n3;function yY(){if(n3)return sg;n3=1;var e=Vi(),t=Jd(),n=kt(),r=Gi(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var u=c+"";return u=="0"&&1/c==-o?"-0":u}return sg=s,sg}var lg,r3;function cR(){if(r3)return lg;r3=1;var e=yY();function t(n){return n==null?"":e(n)}return lg=t,lg}var cg,o3;function ef(){if(o3)return cg;o3=1;var e=kt(),t=b_(),n=gY(),r=cR();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return cg=o,cg}var ug,a3;function Ol(){if(a3)return ug;a3=1;var e=Gi(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return ug=n,ug}var dg,i3;function tf(){if(i3)return dg;i3=1;var e=ef(),t=Ol();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return dg=n,dg}var fg,s3;function vY(){if(s3)return fg;s3=1;var e=tf();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return fg=t,fg}var pg,l3;function xY(){if(l3)return pg;l3=1;function e(t,n){return t!=null&&n in Object(t)}return pg=e,pg}var hg,c3;function uR(){if(c3)return hg;c3=1;var e=ef(),t=Il(),n=kt(),r=Kd(),o=f_(),a=Ol();function i(s,c,u){c=e(c,s);for(var d=-1,p=c.length,m=!1;++d<p;){var h=a(c[d]);if(!(m=s!=null&&u(s,h)))break;s=s[h]}return m||++d!=p?m:(p=s==null?0:s.length,!!p&&o(p)&&r(h,p)&&(n(s)||t(s)))}return hg=i,hg}var mg,u3;function dR(){if(u3)return mg;u3=1;var e=xY(),t=uR();function n(r,o){return r!=null&&t(r,o,e)}return mg=n,mg}var gg,d3;function _Y(){if(d3)return gg;d3=1;var e=iR(),t=vY(),n=dR(),r=b_(),o=sR(),a=lR(),i=Ol(),s=1,c=2;function u(d,p){return r(d)&&o(p)?a(i(d),p):function(m){var h=t(m,d);return h===void 0&&h===p?n(m,d):e(p,h,s|c)}}return gg=u,gg}var yg,f3;function fR(){if(f3)return yg;f3=1;function e(t){return function(n){return n==null?void 0:n[t]}}return yg=e,yg}var vg,p3;function wY(){if(p3)return vg;p3=1;var e=tf();function t(n){return function(r){return e(r,n)}}return vg=t,vg}var xg,h3;function bY(){if(h3)return xg;h3=1;var e=fR(),t=wY(),n=b_(),r=Ol();function o(a){return n(a)?e(r(a)):t(a)}return xg=o,xg}var _g,m3;function no(){if(m3)return _g;m3=1;var e=pY(),t=_Y(),n=$a(),r=kt(),o=bY();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return _g=a,_g}var wg,g3;function pR(){if(g3)return wg;g3=1;var e=V9(),t=rY(),n=no(),r=kt();function o(a,i){var s=r(a)?e:t;return s(a,n(i,3))}return wg=o,wg}var bg,y3;function CY(){if(y3)return bg;y3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return bg=n,bg}var Cg,v3;function hR(){if(v3)return Cg;v3=1;var e=CY(),t=uR();function n(r,o){return r!=null&&t(r,o,e)}return Cg=n,Cg}var Sg,x3;function SY(){if(x3)return Sg;x3=1;var e=h_(),t=Ui(),n=Il(),r=kt(),o=to(),a=Hi(),i=Xd(),s=Ml(),c="[object Map]",u="[object Set]",d=Object.prototype,p=d.hasOwnProperty;function m(h){if(h==null)return!0;if(o(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||n(h)))return!h.length;var g=t(h);if(g==c||g==u)return!h.size;if(i(h))return!e(h).length;for(var y in h)if(p.call(h,y))return!1;return!0}return Sg=m,Sg}var jg,_3;function mR(){if(_3)return jg;_3=1;function e(t){return t===void 0}return jg=e,jg}var Eg,w3;function gR(){if(w3)return Eg;w3=1;var e=Qd(),t=to();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,u){i[++a]=o(s,c,u)}),i}return Eg=n,Eg}var $g,b3;function yR(){if(b3)return $g;b3=1;var e=Jd(),t=no(),n=gR(),r=kt();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return $g=o,$g}var Rg,C3;function jY(){if(C3)return Rg;C3=1;function e(t,n,r,o){var a=-1,i=t==null?0:t.length;for(o&&i&&(r=t[++a]);++a<i;)r=n(r,t[a],a,t);return r}return Rg=e,Rg}var Tg,S3;function EY(){if(S3)return Tg;S3=1;function e(t,n,r,o,a){return a(t,function(i,s,c){r=o?(o=!1,i):n(r,i,s,c)}),r}return Tg=e,Tg}var Ng,j3;function vR(){if(j3)return Ng;j3=1;var e=jY(),t=Qd(),n=no(),r=EY(),o=kt();function a(i,s,c){var u=o(i)?e:r,d=arguments.length<3;return u(i,n(s,4),c,d,t)}return Ng=a,Ng}var kg,E3;function $Y(){if(E3)return kg;E3=1;var e=Sa(),t=kt(),n=Sr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return kg=o,kg}var Ag,$3;function RY(){if($3)return Ag;$3=1;var e=fR(),t=e("length");return Ag=t,Ag}var Dg,R3;function TY(){if(R3)return Dg;R3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(u){return s.test(u)}return Dg=c,Dg}var Pg,T3;function NY(){if(T3)return Pg;T3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+c+")",d="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",g=u+"?",y="["+a+"]?",w="(?:"+h+"(?:"+[d,p,m].join("|")+")"+y+g+")*",v=y+g+w,x="(?:"+[d+s+"?",s,p,m,i].join("|")+")",_=RegExp(c+"(?="+c+")|"+x+v,"g");function b(S){for(var $=_.lastIndex=0;_.test(S);)++$;return $}return Pg=b,Pg}var Ig,N3;function kY(){if(N3)return Ig;N3=1;var e=RY(),t=TY(),n=NY();function r(o){return t(o)?n(o):e(o)}return Ig=r,Ig}var Mg,k3;function AY(){if(k3)return Mg;k3=1;var e=h_(),t=Ui(),n=to(),r=$Y(),o=kY(),a="[object Map]",i="[object Set]";function s(c){if(c==null)return 0;if(n(c))return r(c)?o(c):c.length;var u=t(c);return u==a||u==i?c.size:e(c).length}return Mg=s,Mg}var Og,A3;function DY(){if(A3)return Og;A3=1;var e=d_(),t=Z9(),n=__(),r=no(),o=Zd(),a=kt(),i=Hi(),s=Dl(),c=Wn(),u=Ml();function d(p,m,h){var g=a(p),y=g||i(p)||u(p);if(m=r(m,4),h==null){var w=p&&p.constructor;y?h=g?new w:[]:c(p)?h=s(w)?t(o(p)):{}:h={}}return(y?e:n)(p,function(v,x,_){return m(h,v,x,_)}),h}return Og=d,Og}var Lg,D3;function PY(){if(D3)return Lg;D3=1;var e=Vi(),t=Il(),n=kt(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Lg=o,Lg}var Fg,P3;function C_(){if(P3)return Fg;P3=1;var e=g_(),t=PY();function n(r,o,a,i,s){var c=-1,u=r.length;for(a||(a=t),s||(s=[]);++c<u;){var d=r[c];o>0&&a(d)?o>1?n(d,o-1,a,i,s):e(s,d):i||(s[s.length]=d)}return s}return Fg=n,Fg}var zg,I3;function IY(){if(I3)return zg;I3=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return zg=e,zg}var qg,M3;function xR(){if(M3)return qg;M3=1;var e=IY(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),u=Array(c);++s<c;)u[s]=i[o+s];s=-1;for(var d=Array(o+1);++s<o;)d[s]=i[s];return d[o]=a(u),e(r,this,d)}}return qg=n,qg}var Bg,O3;function MY(){if(O3)return Bg;O3=1;var e=v_(),t=L9(),n=$a(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return Bg=r,Bg}var Vg,L3;function OY(){if(L3)return Vg;L3=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return Vg=r,Vg}var Hg,F3;function _R(){if(F3)return Hg;F3=1;var e=MY(),t=OY(),n=t(e);return Hg=n,Hg}var Ug,z3;function nf(){if(z3)return Ug;z3=1;var e=$a(),t=xR(),n=_R();function r(o,a){return n(t(o,a,e),o+"")}return Ug=r,Ug}var Gg,q3;function wR(){if(q3)return Gg;q3=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return Gg=e,Gg}var Wg,B3;function LY(){if(B3)return Wg;B3=1;function e(t){return t!==t}return Wg=e,Wg}var Kg,V3;function FY(){if(V3)return Kg;V3=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Kg=e,Kg}var Yg,H3;function zY(){if(H3)return Yg;H3=1;var e=wR(),t=LY(),n=FY();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Yg=r,Yg}var Xg,U3;function qY(){if(U3)return Xg;U3=1;var e=zY();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return Xg=t,Xg}var Zg,G3;function BY(){if(G3)return Zg;G3=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return Zg=e,Zg}var Qg,W3;function VY(){if(W3)return Qg;W3=1;function e(){}return Qg=e,Qg}var Jg,K3;function HY(){if(K3)return Jg;K3=1;var e=K9(),t=VY(),n=w_(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Jg=o,Jg}var e0,Y3;function UY(){if(Y3)return e0;Y3=1;var e=rR(),t=qY(),n=BY(),r=oR(),o=HY(),a=w_(),i=200;function s(c,u,d){var p=-1,m=t,h=c.length,g=!0,y=[],w=y;if(d)g=!1,m=n;else if(h>=i){var v=u?null:o(c);if(v)return a(v);g=!1,m=r,w=new e}else w=u?[]:y;e:for(;++p<h;){var x=c[p],_=u?u(x):x;if(x=d||x!==0?x:0,g&&_===_){for(var b=w.length;b--;)if(w[b]===_)continue e;u&&w.push(_),y.push(x)}else m(w,_,d)||(w!==y&&w.push(_),y.push(x))}return y}return e0=s,e0}var t0,X3;function bR(){if(X3)return t0;X3=1;var e=to(),t=Sr();function n(r){return t(r)&&e(r)}return t0=n,t0}var n0,Z3;function GY(){if(Z3)return n0;Z3=1;var e=C_(),t=nf(),n=UY(),r=bR(),o=t(function(a){return n(e(a,1,r,!0))});return n0=o,n0}var r0,Q3;function WY(){if(Q3)return r0;Q3=1;var e=Jd();function t(n,r){return e(r,function(o){return n[o]})}return r0=t,r0}var o0,J3;function CR(){if(J3)return o0;J3=1;var e=WY(),t=Vo();function n(r){return r==null?[]:e(r,t(r))}return o0=n,o0}var a0,eS;function Kn(){if(eS)return a0;eS=1;var e;if(typeof l_=="function")try{e={clone:eY(),constant:v_(),each:nR(),filter:pR(),has:hR(),isArray:kt(),isEmpty:SY(),isFunction:Dl(),isUndefined:mR(),keys:Vo(),map:yR(),reduce:vR(),size:AY(),transform:DY(),union:GY(),values:CR()}}catch{}return e||(e=window._),a0=e,a0}var i0,tS;function S_(){if(tS)return i0;tS=1;var e=Kn();i0=o;var t="\0",n="\0",r="";function o(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(d){return this._label=d,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(p){return e.isEmpty(d._in[p])})},o.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(p){return e.isEmpty(d._out[p])})},o.prototype.setNodes=function(d,p){var m=arguments,h=this;return e.each(d,function(g){m.length>1?h.setNode(g,p):h.setNode(g)}),this},o.prototype.setNode=function(d,p){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=p),this):(this._nodes[d]=arguments.length>1?p:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=n,this._children[d]={},this._children[n][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},o.prototype.node=function(d){return this._nodes[d]},o.prototype.hasNode=function(d){return e.has(this._nodes,d)},o.prototype.removeNode=function(d){var p=this;if(e.has(this._nodes,d)){var m=function(h){p.removeEdge(p._edgeObjs[h])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(h){p.setParent(h)}),delete this._children[d]),e.each(e.keys(this._in[d]),m),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),m),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},o.prototype.setParent=function(d,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var m=p;!e.isUndefined(m);m=this.parent(m))if(m===d)throw new Error("Setting "+p+" as parent of "+d+" would create a cycle");this.setNode(p)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=p,this._children[p][d]=!0,this},o.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},o.prototype.parent=function(d){if(this._isCompound){var p=this._parent[d];if(p!==n)return p}},o.prototype.children=function(d){if(e.isUndefined(d)&&(d=n),this._isCompound){var p=this._children[d];if(p)return e.keys(p)}else{if(d===n)return this.nodes();if(this.hasNode(d))return[]}},o.prototype.predecessors=function(d){var p=this._preds[d];if(p)return e.keys(p)},o.prototype.successors=function(d){var p=this._sucs[d];if(p)return e.keys(p)},o.prototype.neighbors=function(d){var p=this.predecessors(d);if(p)return e.union(p,this.successors(d))},o.prototype.isLeaf=function(d){var p;return this.isDirected()?p=this.successors(d):p=this.neighbors(d),p.length===0},o.prototype.filterNodes=function(d){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;e.each(this._nodes,function(y,w){d(w)&&p.setNode(w,y)}),e.each(this._edgeObjs,function(y){p.hasNode(y.v)&&p.hasNode(y.w)&&p.setEdge(y,m.edge(y))});var h={};function g(y){var w=m.parent(y);return w===void 0||p.hasNode(w)?(h[y]=w,w):w in h?h[w]:g(w)}return this._isCompound&&e.each(p.nodes(),function(y){p.setParent(y,g(y))}),p},o.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(d,p){var m=this,h=arguments;return e.reduce(d,function(g,y){return h.length>1?m.setEdge(g,y,p):m.setEdge(g,y),y}),this},o.prototype.setEdge=function(){var d,p,m,h,g=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(d=y.v,p=y.w,m=y.name,arguments.length===2&&(h=arguments[1],g=!0)):(d=y,p=arguments[1],m=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),d=""+d,p=""+p,e.isUndefined(m)||(m=""+m);var w=s(this._isDirected,d,p,m);if(e.has(this._edgeLabels,w))return g&&(this._edgeLabels[w]=h),this;if(!e.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(p),this._edgeLabels[w]=g?h:this._defaultEdgeLabelFn(d,p,m);var v=c(this._isDirected,d,p,m);return d=v.v,p=v.w,Object.freeze(v),this._edgeObjs[w]=v,a(this._preds[p],d),a(this._sucs[d],p),this._in[p][w]=v,this._out[d][w]=v,this._edgeCount++,this},o.prototype.edge=function(d,p,m){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,p,m);return this._edgeLabels[h]},o.prototype.hasEdge=function(d,p,m){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,p,m);return e.has(this._edgeLabels,h)},o.prototype.removeEdge=function(d,p,m){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,p,m),g=this._edgeObjs[h];return g&&(d=g.v,p=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],i(this._preds[p],d),i(this._sucs[d],p),delete this._in[p][h],delete this._out[d][h],this._edgeCount--),this},o.prototype.inEdges=function(d,p){var m=this._in[d];if(m){var h=e.values(m);return p?e.filter(h,function(g){return g.v===p}):h}},o.prototype.outEdges=function(d,p){var m=this._out[d];if(m){var h=e.values(m);return p?e.filter(h,function(g){return g.w===p}):h}},o.prototype.nodeEdges=function(d,p){var m=this.inEdges(d,p);if(m)return m.concat(this.outEdges(d,p))};function a(d,p){d[p]?d[p]++:d[p]=1}function i(d,p){--d[p]||delete d[p]}function s(d,p,m,h){var g=""+p,y=""+m;if(!d&&g>y){var w=g;g=y,y=w}return g+r+y+r+(e.isUndefined(h)?t:h)}function c(d,p,m,h){var g=""+p,y=""+m;if(!d&&g>y){var w=g;g=y,y=w}var v={v:g,w:y};return h&&(v.name=h),v}function u(d,p){return s(d,p.v,p.w,p.name)}return i0}var s0,nS;function KY(){return nS||(nS=1,s0="2.1.8"),s0}var l0,rS;function YY(){return rS||(rS=1,l0={Graph:S_(),version:KY()}),l0}var c0,oS;function XY(){if(oS)return c0;oS=1;var e=Kn(),t=S_();c0={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var c=i.node(s),u=i.parent(s),d={v:s};return e.isUndefined(c)||(d.value=c),e.isUndefined(u)||(d.parent=u),d})}function o(i){return e.map(i.edges(),function(s){var c=i.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(c)||(u.value=c),u})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(c){s.setNode(c.v,c.value),c.parent&&s.setParent(c.v,c.parent)}),e.each(i.edges,function(c){s.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),s}return c0}var u0,aS;function ZY(){if(aS)return u0;aS=1;var e=Kn();u0=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return u0}var d0,iS;function SR(){if(iS)return d0;iS=1;var e=Kn();d0=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},d0}var f0,sS;function jR(){if(sS)return f0;sS=1;var e=Kn(),t=SR();f0=r;var n=e.constant(1);function r(a,i,s,c){return o(a,String(i),s||n,c||function(u){return a.outEdges(u)})}function o(a,i,s,c){var u={},d=new t,p,m,h=function(g){var y=g.v!==p?g.v:g.w,w=u[y],v=s(g),x=m.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);x<w.distance&&(w.distance=x,w.predecessor=p,d.decrease(y,x))};for(a.nodes().forEach(function(g){var y=g===i?0:Number.POSITIVE_INFINITY;u[g]={distance:y},d.add(g,y)});d.size()>0&&(p=d.removeMin(),m=u[p],m.distance!==Number.POSITIVE_INFINITY);)c(p).forEach(h);return u}return f0}var p0,lS;function QY(){if(lS)return p0;lS=1;var e=jR(),t=Kn();p0=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return p0}var h0,cS;function ER(){if(cS)return h0;cS=1;var e=Kn();h0=t;function t(n){var r=0,o=[],a={},i=[];function s(c){var u=a[c]={onStack:!0,lowlink:r,index:r++};if(o.push(c),n.successors(c).forEach(function(m){e.has(a,m)?a[m].onStack&&(u.lowlink=Math.min(u.lowlink,a[m].index)):(s(m),u.lowlink=Math.min(u.lowlink,a[m].lowlink))}),u.lowlink===u.index){var d=[],p;do p=o.pop(),a[p].onStack=!1,d.push(p);while(c!==p);i.push(d)}}return n.nodes().forEach(function(c){e.has(a,c)||s(c)}),i}return h0}var m0,uS;function JY(){if(uS)return m0;uS=1;var e=Kn(),t=ER();m0=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return m0}var g0,dS;function eX(){if(dS)return g0;dS=1;var e=Kn();g0=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},c=o.nodes();return c.forEach(function(u){s[u]={},s[u][u]={distance:0},c.forEach(function(d){u!==d&&(s[u][d]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(d){var p=d.v===u?d.w:d.v,m=a(d);s[u][p]={distance:m,predecessor:u}})}),c.forEach(function(u){var d=s[u];c.forEach(function(p){var m=s[p];c.forEach(function(h){var g=m[u],y=d[h],w=m[h],v=g.distance+y.distance;v<w.distance&&(w.distance=v,w.predecessor=y.predecessor)})})}),s}return g0}var y0,fS;function $R(){if(fS)return y0;fS=1;var e=Kn();y0=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(c){if(e.has(a,c))throw new n;e.has(o,c)||(a[c]=!0,o[c]=!0,e.each(r.predecessors(c),s),delete a[c],i.push(c))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,y0}var v0,pS;function tX(){if(pS)return v0;pS=1;var e=$R();v0=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return v0}var x0,hS;function RR(){if(hS)return x0;hS=1;var e=Kn();x0=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],c={};return e.each(o,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",c,i,s)}),s}function n(r,o,a,i,s,c){e.has(i,o)||(i[o]=!0,a||c.push(o),e.each(s(o),function(u){n(r,u,a,i,s,c)}),a&&c.push(o))}return x0}var _0,mS;function nX(){if(mS)return _0;mS=1;var e=RR();_0=t;function t(n,r){return e(n,r,"post")}return _0}var w0,gS;function rX(){if(gS)return w0;gS=1;var e=RR();w0=t;function t(n,r){return e(n,r,"pre")}return w0}var b0,yS;function oX(){if(yS)return b0;yS=1;var e=Kn(),t=S_(),n=SR();b0=r;function r(o,a){var i=new t,s={},c=new n,u;function d(m){var h=m.v===u?m.w:m.v,g=c.priority(h);if(g!==void 0){var y=a(m);y<g&&(s[h]=u,c.decrease(h,y))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(m){c.add(m,Number.POSITIVE_INFINITY),i.setNode(m)}),c.decrease(o.nodes()[0],0);for(var p=!1;c.size()>0;){if(u=c.removeMin(),e.has(s,u))i.setEdge(u,s[u]);else{if(p)throw new Error("Input graph is not connected: "+o);p=!0}o.nodeEdges(u).forEach(d)}return i}return b0}var C0,vS;function aX(){return vS||(vS=1,C0={components:ZY(),dijkstra:jR(),dijkstraAll:QY(),findCycles:JY(),floydWarshall:eX(),isAcyclic:tX(),postorder:nX(),preorder:rX(),prim:oX(),tarjan:ER(),topsort:$R()}),C0}var S0,xS;function iX(){if(xS)return S0;xS=1;var e=YY();return S0={Graph:e.Graph,json:XY(),alg:aX(),version:e.version},S0}var Ku;if(typeof l_=="function")try{Ku=iX()}catch{}Ku||(Ku=window.graphlib);var dr=Ku,j0,_S;function sX(){if(_S)return j0;_S=1;var e=J9(),t=1,n=4;function r(o){return e(o,t|n)}return j0=r,j0}var E0,wS;function rf(){if(wS)return E0;wS=1;var e=Bi(),t=to(),n=Kd(),r=Wn();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return E0=o,E0}var $0,bS;function lX(){if(bS)return $0;bS=1;var e=nf(),t=Bi(),n=rf(),r=Ea(),o=Object.prototype,a=o.hasOwnProperty,i=e(function(s,c){s=Object(s);var u=-1,d=c.length,p=d>2?c[2]:void 0;for(p&&n(c[0],c[1],p)&&(d=1);++u<d;)for(var m=c[u],h=r(m),g=-1,y=h.length;++g<y;){var w=h[g],v=s[w];(v===void 0||t(v,o[w])&&!a.call(s,w))&&(s[w]=m[w])}return s});return $0=i,$0}var R0,CS;function cX(){if(CS)return R0;CS=1;var e=no(),t=to(),n=Vo();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var u=e(i,3);a=n(a),i=function(p){return u(c[p],p,c)}}var d=o(a,i,s);return d>-1?c[u?a[d]:d]:void 0}}return R0=r,R0}var T0,SS;function uX(){if(SS)return T0;SS=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return T0=t,T0}var N0,jS;function dX(){if(jS)return N0;jS=1;var e=uX(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return N0=n,N0}var k0,ES;function fX(){if(ES)return k0;ES=1;var e=dX(),t=Wn(),n=Gi(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var p=a.test(u);return p||i.test(u)?s(u.slice(2),p?2:8):o.test(u)?r:+u}return k0=c,k0}var A0,$S;function TR(){if($S)return A0;$S=1;var e=fX(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return A0=r,A0}var D0,RS;function pX(){if(RS)return D0;RS=1;var e=TR();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return D0=t,D0}var P0,TS;function hX(){if(TS)return P0;TS=1;var e=wR(),t=no(),n=pX(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var u=s==null?0:n(s);return u<0&&(u=r(c+u,0)),e(a,t(i,3),u)}return P0=o,P0}var I0,NS;function mX(){if(NS)return I0;NS=1;var e=cX(),t=hX(),n=e(t);return I0=n,I0}var M0,kS;function NR(){if(kS)return M0;kS=1;var e=C_();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return M0=t,M0}var O0,AS;function gX(){if(AS)return O0;AS=1;var e=x_(),t=eR(),n=Ea();function r(o,a){return o==null?o:e(o,t(a),n)}return O0=r,O0}var L0,DS;function yX(){if(DS)return L0;DS=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return L0=e,L0}var F0,PS;function vX(){if(PS)return F0;PS=1;var e=Gd(),t=__(),n=no();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,u){e(i,c,a(s,c,u))}),i}return F0=r,F0}var z0,IS;function j_(){if(IS)return z0;IS=1;var e=Gi();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(u===void 0?c===c&&!e(c):o(c,u)))var u=c,d=s}return d}return z0=t,z0}var q0,MS;function xX(){if(MS)return q0;MS=1;function e(t,n){return t>n}return q0=e,q0}var B0,OS;function _X(){if(OS)return B0;OS=1;var e=j_(),t=xX(),n=$a();function r(o){return o&&o.length?e(o,n,t):void 0}return B0=r,B0}var V0,LS;function kR(){if(LS)return V0;LS=1;var e=Gd(),t=Bi();function n(r,o,a){(a!==void 0&&!t(r[o],a)||a===void 0&&!(o in r))&&e(r,o,a)}return V0=n,V0}var H0,FS;function wX(){if(FS)return H0;FS=1;var e=Sa(),t=Zd(),n=Sr(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function u(d){if(!n(d)||e(d)!=r)return!1;var p=t(d);if(p===null)return!0;var m=s.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&i.call(m)==c}return H0=u,H0}var U0,zS;function AR(){if(zS)return U0;zS=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return U0=e,U0}var G0,qS;function bX(){if(qS)return G0;qS=1;var e=Pl(),t=Ea();function n(r){return e(r,t(r))}return G0=n,G0}var W0,BS;function CX(){if(BS)return W0;BS=1;var e=kR(),t=q9(),n=X9(),r=B9(),o=Q9(),a=Il(),i=kt(),s=bR(),c=Hi(),u=Dl(),d=Wn(),p=wX(),m=Ml(),h=AR(),g=bX();function y(w,v,x,_,b,S,$){var N=h(w,x),T=h(v,x),C=$.get(T);if(C){e(w,x,C);return}var D=S?S(N,T,x+"",w,v,$):void 0,L=D===void 0;if(L){var K=i(T),H=!K&&c(T),M=!K&&!H&&m(T);D=T,K||H||M?i(N)?D=N:s(N)?D=r(N):H?(L=!1,D=t(T,!0)):M?(L=!1,D=n(T,!0)):D=[]:p(T)||a(T)?(D=N,a(N)?D=g(N):(!d(N)||u(N))&&(D=o(T))):L=!1}L&&($.set(T,D),b(D,T,_,S,$),$.delete(T)),e(w,x,D)}return W0=y,W0}var K0,VS;function SX(){if(VS)return K0;VS=1;var e=Ud(),t=kR(),n=x_(),r=CX(),o=Wn(),a=Ea(),i=AR();function s(c,u,d,p,m){c!==u&&n(u,function(h,g){if(m||(m=new e),o(h))r(c,u,g,d,s,p,m);else{var y=p?p(i(c,g),h,g+"",c,u,m):void 0;y===void 0&&(y=h),t(c,g,y)}},a)}return K0=s,K0}var Y0,HS;function jX(){if(HS)return Y0;HS=1;var e=nf(),t=rf();function n(r){return e(function(o,a){var i=-1,s=a.length,c=s>1?a[s-1]:void 0,u=s>2?a[2]:void 0;for(c=r.length>3&&typeof c=="function"?(s--,c):void 0,u&&t(a[0],a[1],u)&&(c=s<3?void 0:c,s=1),o=Object(o);++i<s;){var d=a[i];d&&r(o,d,i,c)}return o})}return Y0=n,Y0}var X0,US;function EX(){if(US)return X0;US=1;var e=SX(),t=jX(),n=t(function(r,o,a){e(r,o,a)});return X0=n,X0}var Z0,GS;function DR(){if(GS)return Z0;GS=1;function e(t,n){return t<n}return Z0=e,Z0}var Q0,WS;function $X(){if(WS)return Q0;WS=1;var e=j_(),t=DR(),n=$a();function r(o){return o&&o.length?e(o,n,t):void 0}return Q0=r,Q0}var J0,KS;function RX(){if(KS)return J0;KS=1;var e=j_(),t=no(),n=DR();function r(o,a){return o&&o.length?e(o,t(a,2),n):void 0}return J0=r,J0}var e1,YS;function TX(){if(YS)return e1;YS=1;var e=ur(),t=function(){return e.Date.now()};return e1=t,e1}var t1,XS;function NX(){if(XS)return t1;XS=1;var e=Wd(),t=ef(),n=Kd(),r=Wn(),o=Ol();function a(i,s,c,u){if(!r(i))return i;s=t(s,i);for(var d=-1,p=s.length,m=p-1,h=i;h!=null&&++d<p;){var g=o(s[d]),y=c;if(g==="__proto__"||g==="constructor"||g==="prototype")return i;if(d!=m){var w=h[g];y=u?u(w,g,h):void 0,y===void 0&&(y=r(w)?w:n(s[d+1])?[]:{})}e(h,g,y),h=h[g]}return i}return t1=a,t1}var n1,ZS;function kX(){if(ZS)return n1;ZS=1;var e=tf(),t=NX(),n=ef();function r(o,a,i){for(var s=-1,c=a.length,u={};++s<c;){var d=a[s],p=e(o,d);i(p,d)&&t(u,n(d,o),p)}return u}return n1=r,n1}var r1,QS;function AX(){if(QS)return r1;QS=1;var e=kX(),t=dR();function n(r,o){return e(r,o,function(a,i){return t(r,i)})}return r1=n,r1}var o1,JS;function DX(){if(JS)return o1;JS=1;var e=NR(),t=xR(),n=_R();function r(o){return n(t(o,void 0,e),o+"")}return o1=r,o1}var a1,ej;function PX(){if(ej)return a1;ej=1;var e=AX(),t=DX(),n=t(function(r,o){return r==null?{}:e(r,o)});return a1=n,a1}var i1,tj;function IX(){if(tj)return i1;tj=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),u=Array(c);c--;)u[i?c:++s]=r,r+=a;return u}return i1=n,i1}var s1,nj;function MX(){if(nj)return s1;nj=1;var e=IX(),t=rf(),n=TR();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return s1=r,s1}var l1,rj;function OX(){if(rj)return l1;rj=1;var e=MX(),t=e();return l1=t,l1}var c1,oj;function LX(){if(oj)return c1;oj=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return c1=e,c1}var u1,aj;function FX(){if(aj)return u1;aj=1;var e=Gi();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,u=r===null,d=r===r,p=e(r);if(!u&&!p&&!s&&n>r||s&&c&&d&&!u&&!p||a&&c&&d||!o&&d||!i)return 1;if(!a&&!s&&!p&&n<r||p&&o&&i&&!a&&!s||u&&o&&i||!c&&i||!d)return-1}return 0}return u1=t,u1}var d1,ij;function zX(){if(ij)return d1;ij=1;var e=FX();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,u=o.length;++a<c;){var d=e(i[a],s[a]);if(d){if(a>=u)return d;var p=o[a];return d*(p=="desc"?-1:1)}}return n.index-r.index}return d1=t,d1}var f1,sj;function qX(){if(sj)return f1;sj=1;var e=Jd(),t=tf(),n=no(),r=gR(),o=LX(),a=Yd(),i=zX(),s=$a(),c=kt();function u(d,p,m){p.length?p=e(p,function(y){return c(y)?function(w){return t(w,y.length===1?y[0]:y)}:y}):p=[s];var h=-1;p=e(p,a(n));var g=r(d,function(y,w,v){var x=e(p,function(_){return _(y)});return{criteria:x,index:++h,value:y}});return o(g,function(y,w){return i(y,w,m)})}return f1=u,f1}var p1,lj;function BX(){if(lj)return p1;lj=1;var e=C_(),t=qX(),n=nf(),r=rf(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return p1=o,p1}var h1,cj;function VX(){if(cj)return h1;cj=1;var e=cR(),t=0;function n(r){var o=++t;return e(r)+o}return h1=n,h1}var m1,uj;function HX(){if(uj)return m1;uj=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var c=o<i?n[o]:void 0;r(s,t[o],c)}return s}return m1=e,m1}var g1,dj;function UX(){if(dj)return g1;dj=1;var e=Wd(),t=HX();function n(r,o){return t(r||[],o||[],e)}return g1=n,g1}var Yu;if(typeof l_=="function")try{Yu={cloneDeep:sX(),constant:v_(),defaults:lX(),each:nR(),filter:pR(),find:mX(),flatten:NR(),forEach:tR(),forIn:gX(),has:hR(),isUndefined:mR(),last:yX(),map:yR(),mapValues:vX(),max:_X(),merge:EX(),min:$X(),minBy:RX(),now:TX(),pick:PX(),range:OX(),reduce:vR(),sortBy:BX(),uniqueId:VX(),values:CR(),zipObject:UX()}}catch{}Yu||(Yu=window._);var xt=Yu,GX=of;function of(){var e={};e._next=e._prev=e,this._sentinel=e}of.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return PR(t),t};of.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&PR(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};of.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,WX)),n=n._prev;return"["+e.join(", ")+"]"};function PR(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function WX(e,t){if(e!=="_next"&&e!=="_prev")return t}var Ir=xt,KX=dr.Graph,YX=GX,XX=QX,ZX=Ir.constant(1);function QX(e,t){if(e.nodeCount()<=1)return[];var n=eZ(e,t||ZX),r=JX(n.graph,n.buckets,n.zeroIdx);return Ir.flatten(Ir.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function JX(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)y1(e,t,n,i);for(;i=o.dequeue();)y1(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(y1(e,t,n,i,!0));break}}}return r}function y1(e,t,n,r,o){var a=o?[]:void 0;return Ir.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),c=e.node(i.v);o&&a.push({v:i.v,w:i.w}),c.out-=s,ov(t,n,c)}),Ir.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),c=i.w,u=e.node(c);u.in-=s,ov(t,n,u)}),e.removeNode(r.v),a}function eZ(e,t){var n=new KX,r=0,o=0;Ir.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Ir.forEach(e.edges(),function(s){var c=n.edge(s.v,s.w)||0,u=t(s),d=c+u;n.setEdge(s.v,s.w,d),o=Math.max(o,n.node(s.v).out+=u),r=Math.max(r,n.node(s.w).in+=u)});var a=Ir.range(o+r+3).map(function(){return new YX}),i=r+1;return Ir.forEach(n.nodes(),function(s){ov(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function ov(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var oa=xt,tZ=XX,nZ={run:rZ,undo:aZ};function rZ(e){var t=e.graph().acyclicer==="greedy"?tZ(e,n(e)):oZ(e);oa.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,oa.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function oZ(e){var t=[],n={},r={};function o(a){oa.has(r,a)||(r[a]=!0,n[a]=!0,oa.forEach(e.outEdges(a),function(i){oa.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return oa.forEach(e.nodes(),o),t}function aZ(e){oa.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var it=xt,IR=dr.Graph,yn={addDummyNode:MR,simplify:iZ,asNonCompoundGraph:sZ,successorWeights:lZ,predecessorWeights:cZ,intersectRect:uZ,buildLayerMatrix:dZ,normalizeRanks:fZ,removeEmptyRanks:pZ,addBorderNode:hZ,maxRank:OR,partition:mZ,time:gZ,notime:yZ};function MR(e,t,n,r){var o;do o=it.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function iZ(e){var t=new IR().setGraph(e.graph());return it.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),it.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function sZ(e){var t=new IR({multigraph:e.isMultigraph()}).setGraph(e.graph());return it.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),it.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function lZ(e){var t=it.map(e.nodes(),function(n){var r={};return it.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return it.zipObject(e.nodes(),t)}function cZ(e){var t=it.map(e.nodes(),function(n){var r={};return it.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return it.zipObject(e.nodes(),t)}function uZ(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var c,u;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),c=s*o/a,u=s):(o<0&&(i=-i),c=i,u=i*a/o),{x:n+c,y:r+u}}function dZ(e){var t=it.map(it.range(OR(e)+1),function(){return[]});return it.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;it.isUndefined(o)||(t[o][r.order]=n)}),t}function fZ(e){var t=it.min(it.map(e.nodes(),function(n){return e.node(n).rank}));it.forEach(e.nodes(),function(n){var r=e.node(n);it.has(r,"rank")&&(r.rank-=t)})}function pZ(e){var t=it.min(it.map(e.nodes(),function(a){return e.node(a).rank})),n=[];it.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;it.forEach(n,function(a,i){it.isUndefined(a)&&i%o!==0?--r:r&&it.forEach(a,function(s){e.node(s).rank+=r})})}function hZ(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),MR(e,"border",o,t)}function OR(e){return it.max(it.map(e.nodes(),function(t){var n=e.node(t).rank;if(!it.isUndefined(n))return n}))}function mZ(e,t){var n={lhs:[],rhs:[]};return it.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function gZ(e,t){var n=it.now();try{return t()}finally{console.log(e+" time: "+(it.now()-n)+"ms")}}function yZ(e,t){return t()}var LR=xt,vZ=yn,xZ={run:_Z,undo:bZ};function _Z(e){e.graph().dummyChains=[],LR.forEach(e.edges(),function(t){wZ(e,t)})}function wZ(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),c=s.labelRank;if(a!==r+1){e.removeEdge(t);var u,d,p;for(p=0,++r;r<a;++p,++r)s.points=[],d={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},u=vZ.addDummyNode(e,"edge",d,"_d"),r===c&&(d.width=s.width,d.height=s.height,d.dummy="edge-label",d.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},i),p===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,o,{weight:s.weight},i)}}function bZ(e){LR.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var Pc=xt,af={longestPath:CZ,slack:SZ};function CZ(e){var t={};function n(r){var o=e.node(r);if(Pc.has(t,r))return o.rank;t[r]=!0;var a=Pc.min(Pc.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}Pc.forEach(e.sources(),n)}function SZ(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Xu=xt,jZ=dr.Graph,Zu=af.slack,FR=EZ;function EZ(e){var t=new jZ({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;$Z(t,e)<r;)o=RZ(t,e),a=t.hasNode(o.v)?Zu(e,o):-Zu(e,o),TZ(t,e,a);return t}function $Z(e,t){function n(r){Xu.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!Zu(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Xu.forEach(e.nodes(),n),e.nodeCount()}function RZ(e,t){return Xu.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Zu(t,n)})}function TZ(e,t,n){Xu.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Xr=xt,NZ=FR,kZ=af.slack,AZ=af.longestPath,DZ=dr.alg.preorder,PZ=dr.alg.postorder,IZ=yn.simplify,MZ=Ra;Ra.initLowLimValues=$_;Ra.initCutValues=E_;Ra.calcCutValue=zR;Ra.leaveEdge=BR;Ra.enterEdge=VR;Ra.exchangeEdges=HR;function Ra(e){e=IZ(e),AZ(e);var t=NZ(e);$_(t),E_(t,e);for(var n,r;n=BR(t);)r=VR(t,e,n),HR(t,e,n,r)}function E_(e,t){var n=PZ(e,e.nodes());n=n.slice(0,n.length-1),Xr.forEach(n,function(r){OZ(e,t,r)})}function OZ(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=zR(e,t,n)}function zR(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,Xr.forEach(t.nodeEdges(n),function(c){var u=c.v===n,d=u?c.w:c.v;if(d!==o){var p=u===a,m=t.edge(c).weight;if(s+=p?m:-m,FZ(e,n,d)){var h=e.edge(n,d).cutvalue;s+=p?-h:h}}}),s}function $_(e,t){arguments.length<2&&(t=e.nodes()[0]),qR(e,{},1,t)}function qR(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,Xr.forEach(e.neighbors(r),function(s){Xr.has(t,s)||(n=qR(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function BR(e){return Xr.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function VR(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,c=!1;a.lim>i.lim&&(s=i,c=!0);var u=Xr.filter(t.edges(),function(d){return c===fj(e,e.node(d.v),s)&&c!==fj(e,e.node(d.w),s)});return Xr.minBy(u,function(d){return kZ(t,d)})}function HR(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),$_(e),E_(e,t),LZ(e,t)}function LZ(e,t){var n=Xr.find(e.nodes(),function(o){return!t.node(o).parent}),r=DZ(e,n);r=r.slice(1),Xr.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function FZ(e,t,n){return e.hasEdge(t,n)}function fj(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var zZ=af,UR=zZ.longestPath,qZ=FR,BZ=MZ,VZ=HZ;function HZ(e){switch(e.graph().ranker){case"network-simplex":pj(e);break;case"tight-tree":GZ(e);break;case"longest-path":UZ(e);break;default:pj(e)}}var UZ=UR;function GZ(e){UR(e),qZ(e)}function pj(e){BZ(e)}var av=xt,WZ=KZ;function KZ(e){var t=XZ(e);av.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=YZ(e,t,o.v,o.w),i=a.path,s=a.lca,c=0,u=i[c],d=!0;n!==o.w;){if(r=e.node(n),d){for(;(u=i[c])!==s&&e.node(u).maxRank<r.rank;)c++;u===s&&(d=!1)}if(!d){for(;c<i.length-1&&e.node(u=i[c+1]).minRank<=r.rank;)c++;u=i[c]}e.setParent(n,u),n=e.successors(n)[0]}})}function YZ(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c,u;c=n;do c=e.parent(c),o.push(c);while(c&&(t[c].low>i||s>t[c].lim));for(u=c,c=r;(c=e.parent(c))!==u;)a.push(c);return{path:o.concat(a.reverse()),lca:u}}function XZ(e){var t={},n=0;function r(o){var a=n;av.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return av.forEach(e.children(),r),t}var Mr=xt,iv=yn,ZZ={run:QZ,cleanup:tQ};function QZ(e){var t=iv.addDummyNode(e,"root",{},"_root"),n=JZ(e),r=Mr.max(Mr.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,Mr.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=eQ(e)+1;Mr.forEach(e.children(),function(i){GR(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function GR(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var c=iv.addBorderNode(e,"_bt"),u=iv.addBorderNode(e,"_bb"),d=e.node(i);e.setParent(c,i),d.borderTop=c,e.setParent(u,i),d.borderBottom=u,Mr.forEach(s,function(p){GR(e,t,n,r,o,a,p);var m=e.node(p),h=m.borderTop?m.borderTop:p,g=m.borderBottom?m.borderBottom:p,y=m.borderTop?r:2*r,w=h!==g?1:o-a[i]+1;e.setEdge(c,h,{weight:y,minlen:w,nestingEdge:!0}),e.setEdge(g,u,{weight:y,minlen:w,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,c,{weight:0,minlen:o+a[i]})}function JZ(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&Mr.forEach(a,function(i){n(i,o+1)}),t[r]=o}return Mr.forEach(e.children(),function(r){n(r,1)}),t}function eQ(e){return Mr.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function tQ(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Mr.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var v1=xt,nQ=yn,rQ=oQ;function oQ(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&v1.forEach(r,t),v1.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)hj(e,"borderLeft","_bl",n,o,a),hj(e,"borderRight","_br",n,o,a)}}v1.forEach(e.children(),t)}function hj(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],c=nQ.addDummyNode(e,"border",i,n);o[t][a]=c,e.setParent(c,r),s&&e.setEdge(s,c,{weight:1})}var yr=xt,aQ={adjust:iQ,undo:sQ};function iQ(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&WR(e)}function sQ(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&lQ(e),(t==="lr"||t==="rl")&&(cQ(e),WR(e))}function WR(e){yr.forEach(e.nodes(),function(t){mj(e.node(t))}),yr.forEach(e.edges(),function(t){mj(e.edge(t))})}function mj(e){var t=e.width;e.width=e.height,e.height=t}function lQ(e){yr.forEach(e.nodes(),function(t){x1(e.node(t))}),yr.forEach(e.edges(),function(t){var n=e.edge(t);yr.forEach(n.points,x1),yr.has(n,"y")&&x1(n)})}function x1(e){e.y=-e.y}function cQ(e){yr.forEach(e.nodes(),function(t){_1(e.node(t))}),yr.forEach(e.edges(),function(t){var n=e.edge(t);yr.forEach(n.points,_1),yr.has(n,"x")&&_1(n)})}function _1(e){var t=e.x;e.x=e.y,e.y=t}var $r=xt,uQ=dQ;function dQ(e){var t={},n=$r.filter(e.nodes(),function(s){return!e.children(s).length}),r=$r.max($r.map(n,function(s){return e.node(s).rank})),o=$r.map($r.range(r+1),function(){return[]});function a(s){if(!$r.has(t,s)){t[s]=!0;var c=e.node(s);o[c.rank].push(s),$r.forEach(e.successors(s),a)}}var i=$r.sortBy(n,function(s){return e.node(s).rank});return $r.forEach(i,a),o}var lo=xt,fQ=pQ;function pQ(e,t){for(var n=0,r=1;r<t.length;++r)n+=hQ(e,t[r-1],t[r]);return n}function hQ(e,t,n){for(var r=lo.zipObject(n,lo.map(n,function(u,d){return d})),o=lo.flatten(lo.map(t,function(u){return lo.sortBy(lo.map(e.outEdges(u),function(d){return{pos:r[d.w],weight:e.edge(d).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=lo.map(new Array(i),function(){return 0}),c=0;return lo.forEach(o.forEach(function(u){var d=u.pos+a;s[d]+=u.weight;for(var p=0;d>0;)d%2&&(p+=s[d+1]),d=d-1>>1,s[d]+=u.weight;c+=u.weight*p})),c}var gj=xt,mQ=gQ;function gQ(e,t){return gj.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=gj.reduce(r,function(a,i){var s=e.edge(i),c=e.node(i.v);return{sum:a.sum+s.weight*c.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var bn=xt,yQ=vQ;function vQ(e,t){var n={};bn.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};bn.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),bn.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!bn.isUndefined(a)&&!bn.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=bn.filter(n,function(o){return!o.indegree});return xQ(r)}function xQ(e){var t=[];function n(a){return function(i){i.merged||(bn.isUndefined(i.barycenter)||bn.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&_Q(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),bn.forEach(o.in.reverse(),n(o)),bn.forEach(o.out,r(o))}return bn.map(bn.filter(t,function(a){return!a.merged}),function(a){return bn.pick(a,["vs","i","barycenter","weight"])})}function _Q(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var js=xt,wQ=yn,bQ=CQ;function CQ(e,t){var n=wQ.partition(e,function(d){return js.has(d,"barycenter")}),r=n.lhs,o=js.sortBy(n.rhs,function(d){return-d.i}),a=[],i=0,s=0,c=0;r.sort(SQ(!!t)),c=yj(a,o,c),js.forEach(r,function(d){c+=d.vs.length,a.push(d.vs),i+=d.barycenter*d.weight,s+=d.weight,c=yj(a,o,c)});var u={vs:js.flatten(a,!0)};return s&&(u.barycenter=i/s,u.weight=s),u}function yj(e,t,n){for(var r;t.length&&(r=js.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function SQ(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var yo=xt,jQ=mQ,EQ=yQ,$Q=bQ,RQ=KR;function KR(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};i&&(o=yo.filter(o,function(g){return g!==i&&g!==s}));var u=jQ(e,o);yo.forEach(u,function(g){if(e.children(g.v).length){var y=KR(e,g.v,n,r);c[g.v]=y,yo.has(y,"barycenter")&&NQ(g,y)}});var d=EQ(u,n);TQ(d,c);var p=$Q(d,r);if(i&&(p.vs=yo.flatten([i,p.vs,s],!0),e.predecessors(i).length)){var m=e.node(e.predecessors(i)[0]),h=e.node(e.predecessors(s)[0]);yo.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+m.order+h.order)/(p.weight+2),p.weight+=2}return p}function TQ(e,t){yo.forEach(e,function(n){n.vs=yo.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function NQ(e,t){yo.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Es=xt,kQ=dr.Graph,AQ=DQ;function DQ(e,t,n){var r=PQ(e),o=new kQ({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Es.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),Es.forEach(e[n](a),function(c){var u=c.v===a?c.w:c.v,d=o.edge(u,a),p=Es.isUndefined(d)?0:d.weight;o.setEdge(u,a,{weight:e.edge(c).weight+p})}),Es.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function PQ(e){for(var t;e.hasNode(t=Es.uniqueId("_root")););return t}var IQ=xt,MQ=OQ;function OQ(e,t,n){var r={},o;IQ.forEach(n,function(a){for(var i=e.parent(a),s,c;i;){if(s=e.parent(i),s?(c=r[s],r[s]=i):(c=o,o=i),c&&c!==i){t.setEdge(c,i);return}i=s}})}var ko=xt,LQ=uQ,FQ=fQ,zQ=RQ,qQ=AQ,BQ=MQ,VQ=dr.Graph,vj=yn,HQ=UQ;function UQ(e){var t=vj.maxRank(e),n=xj(e,ko.range(1,t+1),"inEdges"),r=xj(e,ko.range(t-1,-1,-1),"outEdges"),o=LQ(e);_j(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,c=0;c<4;++s,++c){GQ(s%2?n:r,s%4>=2),o=vj.buildLayerMatrix(e);var u=FQ(e,o);u<a&&(c=0,i=ko.cloneDeep(o),a=u)}_j(e,i)}function xj(e,t,n){return ko.map(t,function(r){return qQ(e,r,n)})}function GQ(e,t){var n=new VQ;ko.forEach(e,function(r){var o=r.graph().root,a=zQ(r,o,n,t);ko.forEach(a.vs,function(i,s){r.node(i).order=s}),BQ(r,n,a.vs)})}function _j(e,t){ko.forEach(t,function(n){ko.forEach(n,function(r,o){e.node(r).order=o})})}var Ue=xt,WQ=dr.Graph,KQ=yn,YQ={positionX:QQ,findType1Conflicts:YR,findType2Conflicts:XR,addConflict:R_,hasConflict:ZR,verticalAlignment:QR,horizontalCompaction:JR,alignCoordinates:tT,findSmallestWidthAlignment:eT,balance:nT};function YR(e,t){var n={};function r(o,a){var i=0,s=0,c=o.length,u=Ue.last(a);return Ue.forEach(a,function(d,p){var m=XQ(e,d),h=m?e.node(m).order:c;(m||d===u)&&(Ue.forEach(a.slice(s,p+1),function(g){Ue.forEach(e.predecessors(g),function(y){var w=e.node(y),v=w.order;(v<i||h<v)&&!(w.dummy&&e.node(g).dummy)&&R_(n,y,g)})}),s=p+1,i=h)}),a}return Ue.reduce(t,r),n}function XR(e,t){var n={};function r(a,i,s,c,u){var d;Ue.forEach(Ue.range(i,s),function(p){d=a[p],e.node(d).dummy&&Ue.forEach(e.predecessors(d),function(m){var h=e.node(m);h.dummy&&(h.order<c||h.order>u)&&R_(n,m,d)})})}function o(a,i){var s=-1,c,u=0;return Ue.forEach(i,function(d,p){if(e.node(d).dummy==="border"){var m=e.predecessors(d);m.length&&(c=e.node(m[0]).order,r(i,u,p,s,c),u=p,s=c)}r(i,u,i.length,c,a.length)}),i}return Ue.reduce(t,o),n}function XQ(e,t){if(e.node(t).dummy)return Ue.find(e.predecessors(t),function(n){return e.node(n).dummy})}function R_(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function ZR(e,t,n){if(t>n){var r=t;t=n,n=r}return Ue.has(e[t],n)}function QR(e,t,n,r){var o={},a={},i={};return Ue.forEach(t,function(s){Ue.forEach(s,function(c,u){o[c]=c,a[c]=c,i[c]=u})}),Ue.forEach(t,function(s){var c=-1;Ue.forEach(s,function(u){var d=r(u);if(d.length){d=Ue.sortBy(d,function(y){return i[y]});for(var p=(d.length-1)/2,m=Math.floor(p),h=Math.ceil(p);m<=h;++m){var g=d[m];a[u]===u&&c<i[g]&&!ZR(n,u,g)&&(a[g]=u,a[u]=o[u]=o[g],c=i[g])}}})}),{root:o,align:a}}function JR(e,t,n,r,o){var a={},i=ZQ(e,t,n,o),s=o?"borderLeft":"borderRight";function c(p,m){for(var h=i.nodes(),g=h.pop(),y={};g;)y[g]?p(g):(y[g]=!0,h.push(g),h=h.concat(m(g))),g=h.pop()}function u(p){a[p]=i.inEdges(p).reduce(function(m,h){return Math.max(m,a[h.v]+i.edge(h))},0)}function d(p){var m=i.outEdges(p).reduce(function(g,y){return Math.min(g,a[y.w]-i.edge(y))},Number.POSITIVE_INFINITY),h=e.node(p);m!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(a[p]=Math.max(a[p],m))}return c(u,i.predecessors.bind(i)),c(d,i.successors.bind(i)),Ue.forEach(r,function(p){a[p]=a[n[p]]}),a}function ZQ(e,t,n,r){var o=new WQ,a=e.graph(),i=JQ(a.nodesep,a.edgesep,r);return Ue.forEach(t,function(s){var c;Ue.forEach(s,function(u){var d=n[u];if(o.setNode(d),c){var p=n[c],m=o.edge(p,d);o.setEdge(p,d,Math.max(i(e,u,c),m||0))}c=u})}),o}function eT(e,t){return Ue.minBy(Ue.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return Ue.forIn(n,function(a,i){var s=eJ(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function tT(e,t){var n=Ue.values(t),r=Ue.min(n),o=Ue.max(n);Ue.forEach(["u","d"],function(a){Ue.forEach(["l","r"],function(i){var s=a+i,c=e[s],u;if(c!==t){var d=Ue.values(c);u=i==="l"?r-Ue.min(d):o-Ue.max(d),u&&(e[s]=Ue.mapValues(c,function(p){return p+u}))}})})}function nT(e,t){return Ue.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=Ue.sortBy(Ue.map(e,r));return(o[1]+o[2])/2})}function QQ(e){var t=KQ.buildLayerMatrix(e),n=Ue.merge(YR(e,t),XR(e,t)),r={},o;Ue.forEach(["u","d"],function(i){o=i==="u"?t:Ue.values(t).reverse(),Ue.forEach(["l","r"],function(s){s==="r"&&(o=Ue.map(o,function(p){return Ue.values(p).reverse()}));var c=(i==="u"?e.predecessors:e.successors).bind(e),u=QR(e,o,n,c),d=JR(e,o,u.root,u.align,s==="r");s==="r"&&(d=Ue.mapValues(d,function(p){return-p})),r[i+s]=d})});var a=eT(e,r);return tT(r,a),nT(r,e.graph().align)}function JQ(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),c=0,u;if(c+=i.width/2,Ue.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":u=-i.width/2;break;case"r":u=i.width/2;break}if(u&&(c+=n?u:-u),u=0,c+=(i.dummy?t:e)/2,c+=(s.dummy?t:e)/2,c+=s.width/2,Ue.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(c+=n?u:-u),u=0,c}}function eJ(e,t){return e.node(t).width}var $s=xt,rT=yn,tJ=YQ.positionX,nJ=rJ;function rJ(e){e=rT.asNonCompoundGraph(e),oJ(e),$s.forEach(tJ(e),function(t,n){e.node(n).x=t})}function oJ(e){var t=rT.buildLayerMatrix(e),n=e.graph().ranksep,r=0;$s.forEach(t,function(o){var a=$s.max($s.map(o,function(i){return e.node(i).height}));$s.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var Ke=xt,wj=nZ,bj=xZ,aJ=VZ,iJ=yn.normalizeRanks,sJ=WZ,lJ=yn.removeEmptyRanks,Cj=ZZ,cJ=rQ,Sj=aQ,uJ=HQ,dJ=nJ,Oo=yn,fJ=dr.Graph,pJ=hJ;function hJ(e,t){var n=t&&t.debugTiming?Oo.time:Oo.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return jJ(e)});n("  runLayout",function(){mJ(r,n)}),n("  updateInputGraph",function(){gJ(e,r)})})}function mJ(e,t){t("    makeSpaceForEdgeLabels",function(){EJ(e)}),t("    removeSelfEdges",function(){IJ(e)}),t("    acyclic",function(){wj.run(e)}),t("    nestingGraph.run",function(){Cj.run(e)}),t("    rank",function(){aJ(Oo.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){$J(e)}),t("    removeEmptyRanks",function(){lJ(e)}),t("    nestingGraph.cleanup",function(){Cj.cleanup(e)}),t("    normalizeRanks",function(){iJ(e)}),t("    assignRankMinMax",function(){RJ(e)}),t("    removeEdgeLabelProxies",function(){TJ(e)}),t("    normalize.run",function(){bj.run(e)}),t("    parentDummyChains",function(){sJ(e)}),t("    addBorderSegments",function(){cJ(e)}),t("    order",function(){uJ(e)}),t("    insertSelfEdges",function(){MJ(e)}),t("    adjustCoordinateSystem",function(){Sj.adjust(e)}),t("    position",function(){dJ(e)}),t("    positionSelfEdges",function(){OJ(e)}),t("    removeBorderNodes",function(){PJ(e)}),t("    normalize.undo",function(){bj.undo(e)}),t("    fixupEdgeLabelCoords",function(){AJ(e)}),t("    undoCoordinateSystem",function(){Sj.undo(e)}),t("    translateGraph",function(){NJ(e)}),t("    assignNodeIntersects",function(){kJ(e)}),t("    reversePoints",function(){DJ(e)}),t("    acyclic.undo",function(){wj.undo(e)})}function gJ(e,t){Ke.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),Ke.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,Ke.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var yJ=["nodesep","edgesep","ranksep","marginx","marginy"],vJ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},xJ=["acyclicer","ranker","rankdir","align"],_J=["width","height"],wJ={width:0,height:0},bJ=["minlen","weight","width","height","labeloffset"],CJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},SJ=["labelpos"];function jJ(e){var t=new fJ({multigraph:!0,compound:!0}),n=b1(e.graph());return t.setGraph(Ke.merge({},vJ,w1(n,yJ),Ke.pick(n,xJ))),Ke.forEach(e.nodes(),function(r){var o=b1(e.node(r));t.setNode(r,Ke.defaults(w1(o,_J),wJ)),t.setParent(r,e.parent(r))}),Ke.forEach(e.edges(),function(r){var o=b1(e.edge(r));t.setEdge(r,Ke.merge({},CJ,w1(o,bJ),Ke.pick(o,SJ)))}),t}function EJ(e){var t=e.graph();t.ranksep/=2,Ke.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function $J(e){Ke.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Oo.addDummyNode(e,"edge-proxy",a,"_ep")}})}function RJ(e){var t=0;Ke.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Ke.max(t,r.maxRank))}),e.graph().maxRank=t}function TJ(e){Ke.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function NJ(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function c(u){var d=u.x,p=u.y,m=u.width,h=u.height;t=Math.min(t,d-m/2),n=Math.max(n,d+m/2),r=Math.min(r,p-h/2),o=Math.max(o,p+h/2)}Ke.forEach(e.nodes(),function(u){c(e.node(u))}),Ke.forEach(e.edges(),function(u){var d=e.edge(u);Ke.has(d,"x")&&c(d)}),t-=i,r-=s,Ke.forEach(e.nodes(),function(u){var d=e.node(u);d.x-=t,d.y-=r}),Ke.forEach(e.edges(),function(u){var d=e.edge(u);Ke.forEach(d.points,function(p){p.x-=t,p.y-=r}),Ke.has(d,"x")&&(d.x-=t),Ke.has(d,"y")&&(d.y-=r)}),a.width=n-t+i,a.height=o-r+s}function kJ(e){Ke.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Oo.intersectRect(r,a)),n.points.push(Oo.intersectRect(o,i))})}function AJ(e){Ke.forEach(e.edges(),function(t){var n=e.edge(t);if(Ke.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function DJ(e){Ke.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function PJ(e){Ke.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(Ke.last(n.borderLeft)),i=e.node(Ke.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),Ke.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function IJ(e){Ke.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function MJ(e){var t=Oo.buildLayerMatrix(e);Ke.forEach(t,function(n){var r=0;Ke.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,Ke.forEach(i.selfEdges,function(s){Oo.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function OJ(e){Ke.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function w1(e,t){return Ke.mapValues(Ke.pick(e,t),Number)}function b1(e){var t={};return Ke.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Ic=xt,LJ=yn,FJ=dr.Graph,zJ={debugOrdering:qJ};function qJ(e){var t=LJ.buildLayerMatrix(e),n=new FJ({compound:!0,multigraph:!0}).setGraph({});return Ic.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Ic.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Ic.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),Ic.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var BJ="0.8.5",VJ={graphlib:dr,layout:pJ,debug:zJ,util:{time:yn.time,notime:yn.notime},version:BJ};const oT=gl(VJ),HJ=({data:e,selected:t})=>{var j;const{table:n,onEdit:r,onDelete:o,onResize:a,onGenerateDDL:i,onApply:s,selected:c}=e,u=c!==void 0?c:t,[d,p]=f.useState(!1),[m,h]=f.useState(n.height||180),{isDragAndDropFK:g,getPKFieldForFK:y,catalogName:w,schemaName:v}=ct();f.useEffect(()=>{!d&&n.height!==m&&h(n.height||180)},[n.height,d,m]);const x=P=>{var Q;const B=(P||180)-80-40-20,X=Math.max(1,Math.floor(B/28));return Math.min(X,((Q=n.fields)==null?void 0:Q.length)||0)},_=((j=n.fields)==null?void 0:j.length)||0,b=x(m);if(!n)return l.jsx(te,{className:"table-node error",children:l.jsx(R,{children:"Error: Table data missing"})});const S=f.useCallback(()=>{r&&r(n)},[r,n]),$=f.useCallback(P=>{},[n.id,u]),N=f.useCallback(()=>{r&&r(n)},[r,n]),T=f.useCallback(()=>{o&&o(n)},[o,n]),C=f.useCallback(()=>{i&&i(n)},[i,n]),D=f.useCallback(()=>{s&&s(n)},[s,n]),L=f.useCallback(P=>{console.log("=== RESIZE START ==="),console.log("Resize handle clicked",{tableId:n.id,currentSize:{width:n.width,height:n.height}}),console.log("Resize event:",P),console.log("onResize function available:",!!a),a?(console.log("Testing onResize immediately..."),a(n.id,(n.width||220)+10,(n.height||180)+10)):console.log("onResize function NOT available!"),P.stopPropagation(),P.preventDefault(),p(!0),console.log("Set isResizing to true");const I=P.clientX,A=P.clientY,z=n.width||220,U=n.height||180,F=X=>{const Q=X.clientX-I,J=X.clientY-A,ee=Math.max(180,z+Q),ie=Math.max(120,U+J);h(ie),a&&a(n.id,ee,ie)},B=X=>{console.log("Resize pointer up",{tableId:n.id}),p(!1),document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",B),document.removeEventListener("pointercancel",B)};document.addEventListener("pointermove",F),document.addEventListener("pointerup",B),document.addEventListener("pointercancel",B)},[n,a]),K=f.useCallback(P=>{P.preventDefault()},[]),H=P=>{let I=P.data_type;return P.type_parameters&&(I+=`(${P.type_parameters})`),I},M=P=>P.is_primary_key?l.jsx(Qq,{size:"12",className:"field-icon pk-icon"}):P.is_foreign_key?l.jsx(u7,{size:"12",className:"field-icon fk-icon"}):null,V=P=>{let I=["table-field"];return P.is_primary_key&&I.push("primary-key"),P.is_foreign_key&&(I.push("foreign-key"),g(P,n.id)&&I.push("inherited-fk")),P.nullable||I.push("not-null"),I.join(" ")};return l.jsxs(te,{className:`table-node ${u?"selected":""} ${d?"resizing":""}`,style:{width:n.width||220,height:m,position:"relative"},onDoubleClick:S,onContextMenu:K,onClick:$,children:[l.jsx(Ln,{type:"target",position:Me.Top,className:"connection-handle",style:{background:"#94a3b8"}}),l.jsx(Ln,{type:"source",position:Me.Bottom,className:"connection-handle",style:{background:"#94a3b8"}}),l.jsx(Ln,{type:"target",position:Me.Left,className:"connection-handle",style:{background:"#94a3b8"}}),l.jsx(Ln,{type:"source",position:Me.Right,className:"connection-handle",style:{background:"#94a3b8"}}),l.jsxs(te,{className:"table-header",children:[l.jsxs(O,{align:"center",gap:"2",children:[l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsx(xe,{variant:"ghost",size:"1",className:"table-menu-button",children:l.jsx(Ou,{})})}),l.jsxs(Le.Content,{children:[l.jsxs(Le.Item,{onClick:N,children:[l.jsx(il,{})," Edit Table"]}),l.jsxs(Le.Item,{onClick:C,children:[l.jsx(Lu,{})," Generate DDL"]}),l.jsxs(Le.Item,{onClick:D,children:[l.jsx(Dd,{})," Apply to Databricks"]}),l.jsx(Le.Separator,{}),l.jsxs(Le.Item,{onClick:T,color:"red",children:[l.jsx(gn,{})," Delete"]})]})]}),l.jsxs(te,{flex:"1",style:{minWidth:0},children:[l.jsx(R,{size:"3",weight:"bold",className:"table-name",children:n.name}),l.jsxs(O,{gap:"1",mt:"1",wrap:"wrap",align:"center",children:[l.jsx(we,{color:"blue",size:"1",children:n.table_type||"MANAGED"}),n.catalog_name&&n.catalog_name!==w&&l.jsxs(we,{color:"purple",size:"1",title:`Catalog: ${n.catalog_name}`,children:["C: ",n.catalog_name]}),n.schema_name&&n.schema_name!==v&&l.jsxs(we,{color:"orange",size:"1",title:`Schema: ${n.schema_name}`,children:["S: ",n.schema_name]})]})]})]}),n.logical_name&&l.jsx(R,{size:"1",className:"table-logical-name",children:n.logical_name}),n.comment&&l.jsx(R,{size:"1",className:"table-comment",style:{marginTop:"4px"},children:n.comment})]}),l.jsxs(te,{className:"table-fields",children:[(n.fields||[]).slice(0,b).map((P,I)=>l.jsxs(te,{className:V(P),children:[l.jsxs(O,{align:"center",gap:"1",children:[M(P),l.jsx(R,{size:"2",className:"field-name",children:P.name}),l.jsx(R,{size:"1",className:"field-type",children:H(P)}),!P.nullable&&l.jsx(we,{color:"red",size:"1",className:"not-null-badge",children:"NOT NULL"})]}),P.comment&&l.jsx(R,{size:"1",className:"field-comment",style:{marginTop:"2px"},children:P.comment})]},P.id||I)),_>b&&l.jsx(te,{className:"more-fields",style:{padding:"4px 8px",textAlign:"center"},children:l.jsxs(R,{size:"1",color:"gray",style:{fontStyle:"italic"},children:["+",_-b," more field",_-b!==1?"s":""]})}),(!n.fields||n.fields.length===0)&&l.jsx(te,{className:"no-fields",children:l.jsx(R,{size:"2",color:"gray",children:"No fields defined"})})]}),l.jsx(te,{className:"table-footer",children:l.jsxs(O,{justify:"between",align:"center",children:[n.file_format&&n.file_format!=="DELTA"&&l.jsx(we,{color:"orange",size:"1",children:n.file_format}),Object.keys(n.tags||{}).length>0&&l.jsxs(we,{color:"green",size:"1",children:[Object.keys(n.tags).length," tag(s)"]}),l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsx(xe,{variant:"ghost",size:"1",className:"table-menu-button",children:l.jsx(Ou,{})})}),l.jsxs(Le.Content,{children:[l.jsxs(Le.Item,{onClick:()=>r&&r(n),children:[l.jsx(il,{})," Edit Table"]}),l.jsx(Le.Separator,{}),l.jsxs(Le.Item,{color:"red",onClick:()=>o&&o(n.id),children:[l.jsx(gn,{})," Delete Table"]})]})]})]})}),l.jsx("div",{className:"resize-handle",onPointerDown:P=>{console.log("Resize handle pointerdown fired",{tableId:n.id}),L(P)},style:{opacity:u?.9:.7},title:"Drag to resize table"})]})},UJ=f.memo(HJ),GJ=({data:e,selected:t})=>{var M,V,j;const{metricView:n,onEdit:r,onDelete:o,onResize:a,onApply:i,onGenerateDDL:s,selected:c}=e,u=c!==void 0?c:t,[d,p]=f.useState(!1),[m,h]=f.useState(n.height||220),{catalogName:g,schemaName:y}=ct();f.useEffect(()=>{!d&&n.height!==m&&h(n.height||220)},[n.height,d,m]);const w=((M=n.dimensions)==null?void 0:M.length)||0,v=((V=n.measures)==null?void 0:V.length)||0,x=((j=n.joins)==null?void 0:j.length)||0;if(!n)return l.jsx(te,{className:"metric-view-node error",children:l.jsx(R,{children:"Error: Metric View data missing"})});const _=f.useCallback(()=>{r&&r(n)},[r,n]),b=f.useCallback(P=>{},[n.id,u]),S=f.useCallback(P=>{if(P.preventDefault(),P.stopPropagation(),!a){console.error("❌ onResize function not provided!");return}p(!0);const I=P.clientX,A=P.clientY,z=n.width||280,U=n.height||220,F=X=>{const Q=X.clientX-I,J=X.clientY-A,ee=Math.max(250,z+Q),ie=Math.max(200,U+J);h(ie),a&&a(n.id,ee,ie)},B=X=>{p(!1),document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",B),document.removeEventListener("pointercancel",B)};document.addEventListener("pointermove",F),document.addEventListener("pointerup",B),document.addEventListener("pointercancel",B)},[n,a]),$=f.useCallback(()=>{r&&r(n)},[r,n]),N=f.useCallback(()=>{o&&o(n)},[o,n]),T=f.useCallback(()=>{i&&i(n)},[i,n]),C=f.useCallback(()=>{s&&s(n)},[s,n]),L=(P=>{const I=P||220,A=90,z=40,U=50,F=30,B=35,Q=I-A-z-U-F*2-20,J=Math.max(2,Math.floor(Q/B)),ee=Math.floor(J/2);return{dimensions:Math.min(ee,w),measures:Math.min(ee,v)}})(m),K=L.dimensions,H=L.measures;return l.jsxs(l.Fragment,{children:[l.jsx(Ln,{type:"target",position:Me.Left,className:"connection-handle metric-handle",style:{background:"#8b5cf6",border:"2px solid white",top:"50%"}}),l.jsx(Ln,{type:"source",position:Me.Right,className:"connection-handle metric-handle",style:{background:"#8b5cf6",border:"2px solid white",top:"50%"}}),l.jsxs(te,{className:`metric-view-node ${u?"selected":""} ${d?"resizing":""}`,onClick:b,onDoubleClick:_,"data-draggable":!d,style:{width:n.width||280,height:m,pointerEvents:d?"none":"auto"},children:[l.jsxs(O,{className:"metric-view-header",align:"center",gap:"2",children:[l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsx(xe,{variant:"ghost",size:"1",className:"metric-view-menu-button",children:l.jsx(Ou,{})})}),l.jsxs(Le.Content,{children:[l.jsxs(Le.Item,{onClick:$,children:[l.jsx(il,{})," Edit Metric View"]}),l.jsxs(Le.Item,{onClick:C,children:[l.jsx(Lu,{})," Generate DDL"]}),l.jsxs(Le.Item,{onClick:T,children:[l.jsx(Dd,{})," Apply to Databricks"]}),l.jsx(Le.Separator,{}),l.jsxs(Le.Item,{onClick:N,color:"red",children:[l.jsx(gn,{})," Delete"]})]})]}),l.jsx(en,{className:"metric-view-icon"}),l.jsxs(te,{flex:"1",style:{minWidth:0},children:[l.jsx(R,{className:"metric-view-name",children:n.name}),n.description&&l.jsx(R,{className:"metric-view-description",children:n.description}),n.catalog_name&&n.catalog_name!==g||n.schema_name&&n.schema_name!==y?l.jsxs(O,{gap:"1",mt:"1",wrap:"wrap",children:[n.catalog_name&&n.catalog_name!==g&&l.jsxs(we,{color:"purple",size:"1",title:`Catalog: ${n.catalog_name}`,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#8b5cf6",fontWeight:"600",border:"1px solid rgba(255, 255, 255, 0.3)"},children:["C: ",n.catalog_name]}),n.schema_name&&n.schema_name!==y&&l.jsxs(we,{color:"orange",size:"1",title:`Schema: ${n.schema_name}`,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#f97316",fontWeight:"600",border:"1px solid rgba(255, 255, 255, 0.3)"},children:["S: ",n.schema_name]})]}):null]})]}),l.jsxs(te,{className:"metric-view-content",children:[l.jsx(te,{className:"metric-view-info",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(we,{variant:"soft",color:"purple",children:["v",n.version]}),l.jsx(R,{className:"source-info",children:"Source Table"})]})}),w>0&&l.jsxs(te,{className:"metric-section",children:[l.jsxs(O,{align:"center",gap:"2",className:"section-header",children:[l.jsx(dn,{className:"section-icon dimensions-icon"}),l.jsxs(R,{className:"section-title",children:["Dimensions (",w,")"]})]}),l.jsxs(te,{className:"section-items",children:[n.dimensions.slice(0,K).map((P,I)=>l.jsxs(te,{className:"metric-item dimension-item",children:[l.jsx(R,{className:"item-name",children:P.name}),l.jsx(R,{className:"item-expr",children:P.expr})]},`dim-${P.id||I}`)),w>K&&l.jsxs(R,{className:"more-items",children:["+",w-K," more"]})]})]}),v>0&&l.jsxs(te,{className:"metric-section",children:[l.jsxs(O,{align:"center",gap:"2",className:"section-header",children:[l.jsx(en,{className:"section-icon measures-icon"}),l.jsxs(R,{className:"section-title",children:["Measures (",v,")"]})]}),l.jsxs(te,{className:"section-items",children:[n.measures.slice(0,H).map((P,I)=>l.jsxs(te,{className:"metric-item measure-item",children:[l.jsx(R,{className:"item-name",children:P.name}),l.jsx(R,{className:"item-expr",children:P.expr})]},`meas-${P.id||I}`)),v>H&&l.jsxs(R,{className:"more-items",children:["+",v-H," more"]})]})]}),w===0&&v===0&&l.jsxs(te,{className:"empty-metric-view",children:[l.jsx(en,{className:"empty-icon"}),l.jsx(R,{className:"empty-text",children:"No dimensions or measures defined"}),l.jsx(R,{className:"empty-subtext",children:"Double-click to configure"})]})]}),l.jsx(te,{className:"metric-view-footer",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(O,{gap:"2",children:[x>0&&l.jsxs(we,{variant:"outline",size:"1",children:[x," join",x!==1?"s":""]}),n.filter&&l.jsx(we,{variant:"outline",size:"1",color:"orange",children:"filtered"})]}),l.jsx(R,{className:"metric-view-type",children:"Metric View"})]})}),l.jsx("div",{className:"resize-handle",onPointerDown:P=>{S(P)},style:{opacity:u?.9:.7},title:"Drag to resize metric view"})]})]})},WJ=f.memo(GJ),KJ=({data:e,selected:t})=>{const{traditionalView:n,onEdit:r,onDelete:o,onResize:a,onApply:i,onGenerateDDL:s,width:c=250,height:u=180}=e,[d,p]=f.useState(!1),{catalogName:m,schemaName:h}=ct(),g=f.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),!a){console.error("❌ onResize function not provided!");return}p(!0);const v=w.clientX,x=w.clientY,_=c||250,b=u||180,S=N=>{const T=N.clientX-v,C=N.clientY-x,D=Math.max(200,_+T),L=Math.max(150,b+C);a&&a(n.id,D,L)},$=N=>{p(!1),document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",$),document.removeEventListener("pointercancel",$)};document.addEventListener("pointermove",S),document.addEventListener("pointerup",$),document.addEventListener("pointercancel",$)},[n.id,a,c,u]);if(!n)return l.jsx(Card,{style:{width:c,height:u,border:"2px solid #ef4444"},children:l.jsx(O,{direction:"column",align:"center",justify:"center",style:{height:"100%"},children:l.jsx(R,{color:"red",children:"Invalid View Data"})})});const y=n.sql_query&&n.sql_query.length>100?n.sql_query.substring(0,100)+"...":n.sql_query||"No SQL query defined";return l.jsxs(l.Fragment,{children:[l.jsx(Ln,{type:"target",position:Me.Left,className:"connection-handle traditional-handle",style:{background:"#FF6B54",border:"2px solid white",top:"50%"}}),l.jsx(Ln,{type:"source",position:Me.Right,className:"connection-handle traditional-handle",style:{background:"#FF6B54",border:"2px solid white",top:"50%"}}),l.jsxs(te,{className:`traditional-view-node ${t?"selected":""} ${d?"resizing":""}`,"data-draggable":!d,style:{width:c||250,height:u||180,pointerEvents:d?"none":"auto",cursor:d?"nw-resize":"pointer"},children:[l.jsxs(O,{className:"traditional-view-header",align:"center",gap:"2",children:[l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsx(jn,{variant:"ghost",size:"1",className:"traditional-view-menu-button",children:l.jsx(Ou,{})})}),l.jsxs(Le.Content,{children:[l.jsxs(Le.Item,{onClick:()=>r&&r(n),children:[l.jsx(il,{})," Edit View"]}),l.jsxs(Le.Item,{onClick:()=>s&&s(n),children:[l.jsx(Db,{})," Generate DDL"]}),l.jsxs(Le.Item,{onClick:()=>i&&i(n),children:[l.jsx(Dd,{})," Apply to Databricks"]}),l.jsx(Le.Separator,{}),l.jsxs(Le.Item,{onClick:()=>o&&o(n.id),color:"red",children:[l.jsx(gn,{})," Delete View"]})]})]}),l.jsx(dn,{className:"traditional-view-icon"}),l.jsxs(te,{flex:"1",style:{minWidth:0},children:[l.jsx(R,{className:"traditional-view-name",children:n.name||"Unnamed View"}),n.description&&l.jsx(R,{className:"traditional-view-description",children:n.description}),n.catalog_name&&n.catalog_name!==m||n.schema_name&&n.schema_name!==h?l.jsxs(O,{gap:"1",mt:"1",wrap:"wrap",children:[n.catalog_name&&n.catalog_name!==m&&l.jsxs(we,{color:"purple",size:"1",title:`Catalog: ${n.catalog_name}`,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#8b5cf6",fontWeight:"600",border:"1px solid rgba(255, 255, 255, 0.3)"},children:["C: ",n.catalog_name]}),n.schema_name&&n.schema_name!==h&&l.jsxs(we,{color:"orange",size:"1",title:`Schema: ${n.schema_name}`,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#f97316",fontWeight:"600",border:"1px solid rgba(255, 255, 255, 0.3)"},children:["S: ",n.schema_name]})]}):null]})]}),l.jsxs(te,{className:"traditional-view-content",children:[l.jsx(te,{className:"traditional-view-info",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(we,{variant:"soft",color:"green",children:"Traditional View"}),l.jsx(R,{className:"source-info",children:"SQL View"})]})}),l.jsxs(te,{className:"traditional-section",children:[l.jsxs(O,{align:"center",gap:"2",className:"section-header",children:[l.jsx(Db,{className:"section-icon sql-icon"}),l.jsx(R,{className:"section-title",children:"SQL Query"})]}),l.jsx(te,{className:"section-items",children:l.jsx(te,{className:"traditional-item sql-item",children:l.jsx(R,{className:"item-query",children:y})})})]}),n.referenced_table_names&&n.referenced_table_names.length>0&&l.jsxs(te,{className:"traditional-section",children:[l.jsxs(O,{align:"center",gap:"2",className:"section-header",children:[l.jsx(dn,{className:"section-icon references-icon"}),l.jsxs(R,{className:"section-title",children:["References (",n.referenced_table_names.length,")"]})]}),l.jsxs(te,{className:"section-items",children:[n.referenced_table_names.slice(0,3).map((w,v)=>l.jsx(te,{className:"traditional-item reference-item",children:l.jsx(R,{className:"item-name",children:w})},v)),n.referenced_table_names.length>3&&l.jsxs(R,{className:"more-items",children:["+",n.referenced_table_names.length-3," more"]})]})]}),!n.sql_query&&l.jsxs(te,{className:"empty-traditional-view",children:[l.jsx(dn,{className:"empty-icon"}),l.jsx(R,{className:"empty-text",children:"No SQL query defined"}),l.jsx(R,{className:"empty-subtext",children:"Double-click to configure"})]})]}),l.jsx(te,{className:"traditional-view-footer",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(O,{gap:"2",children:n.tags&&Object.keys(n.tags).length>0&&l.jsxs(we,{variant:"outline",size:"1",children:[Object.keys(n.tags).length," tag",Object.keys(n.tags).length!==1?"s":""]})}),l.jsx(R,{className:"traditional-view-type",children:"Traditional View"})]})}),l.jsx("div",{className:"resize-handle",onPointerDown:w=>{g(w)},style:{position:"absolute",bottom:"0px",right:"0px",width:"20px",height:"20px",cursor:"nw-resize",background:"rgba(255, 255, 255, 0.2)",borderRadius:"12px 0 12px 0",display:"flex",alignItems:"center",justifyContent:"center",opacity:t?.9:.7,transition:"opacity 0.2s ease",zIndex:10},title:"Drag to resize traditional view",children:l.jsx("div",{style:{width:"8px",height:"8px",background:"white",borderRadius:"50%",opacity:.8}})})]})]})},YJ=({showDialog:e,setShowDialog:t,sourceTable:n,targetTable:r,onConfirm:o})=>{var w;ct();const[a,i]=f.useState({fkFieldName:"",useExistingField:!1,existingFieldId:null,createNewField:!0}),[s,c]=f.useState({});f.useEffect(()=>{var v,x;if(e&&n&&r){const _=(v=n.fields)==null?void 0:v.find($=>$.is_primary_key),b=_?_.name:`${n.name.toLowerCase()}_id`,S=(x=r.fields)==null?void 0:x.find($=>$.name===b);i({fkFieldName:b,useExistingField:!!S,existingFieldId:(S==null?void 0:S.id)||null,createNewField:!S}),c({})}},[e,n,r]);const u=()=>{var x;const v={};return a.createNewField?a.fkFieldName.trim()?(x=r.fields)!=null&&x.find(b=>b.name.toLowerCase()===a.fkFieldName.toLowerCase())&&(v.fkFieldName="A field with this name already exists in the target table"):v.fkFieldName="FK field name is required":a.useExistingField?a.existingFieldId||(v.existingField="Please select an existing field to convert to FK"):v.general="Please choose to either create a new field or use an existing field",c(v),Object.keys(v).length===0},d=()=>{var b;if(!u())return;const v=(b=n.fields)==null?void 0:b.find(S=>S.is_primary_key);if(!v){c({general:"Source table must have a primary key"});return}let x=a.fkFieldName;if(a.useExistingField&&a.existingFieldId){const S=g.find($=>$.id===a.existingFieldId);S&&(x=S.name)}const _={sourceTable:n,targetTable:r,primaryKey:v,fkFieldName:x,useExistingField:a.useExistingField,existingFieldId:a.existingFieldId,createNewField:a.createNewField};o(_),t(!1)},p=()=>{t(!1),i({fkFieldName:"",useExistingField:!1,existingFieldId:null,createNewField:!0}),c({})},m=()=>{var v;return r?((v=r.fields)==null?void 0:v.filter(x=>!x.is_primary_key&&!x.is_foreign_key))||[]:[]},h=v=>{var _;const x=(_=n==null?void 0:n.fields)==null?void 0:_.find(b=>b.is_primary_key);return x&&v.data_type===x.data_type},g=m();if(!e||!n||!r)return null;const y=(w=n.fields)==null?void 0:w.find(v=>v.is_primary_key);return l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:"500px"},children:[l.jsx(be.Title,{children:"Create Relationship"}),l.jsxs(be.Description,{size:"2",mb:"4",children:["Configure the foreign key relationship between ",n.name," and ",r.name]}),s.general&&l.jsx(te,{mb:"3",children:l.jsx(R,{size:"2",color:"red",children:s.general})}),l.jsx(te,{mb:"4",children:l.jsx(Je,{children:l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"bold",children:"Relationship Details"}),l.jsxs(R,{size:"1",color:"gray",children:["From: ",l.jsx("strong",{children:n.name})," (Primary Key: ",(y==null?void 0:y.name)||"None",")"]}),l.jsxs(R,{size:"1",color:"gray",children:["To: ",l.jsx("strong",{children:r.name})," (Foreign Key will be created)"]})]})})}),y?l.jsx(l.Fragment,{children:l.jsxs(te,{mb:"4",children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Field Creation Options"}),l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Vt,{checked:a.createNewField,onCheckedChange:v=>{var x;return i({...a,createNewField:v,useExistingField:!v,existingFieldId:v?null:((x=g[0])==null?void 0:x.id)||null})}}),l.jsx(R,{size:"2",children:"Create new field"})]}),a.createNewField&&l.jsxs(te,{ml:"4",children:[l.jsx(R,{size:"1",color:"gray",mb:"1",children:"Field Name"}),l.jsx(Ae.Input,{value:a.fkFieldName,onChange:v=>i({...a,fkFieldName:v.target.value}),placeholder:"Enter FK field name",size:"2"}),s.fkFieldName&&l.jsx(R,{size:"1",color:"red",mt:"1",children:s.fkFieldName})]}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Vt,{checked:a.useExistingField,onCheckedChange:v=>{var x;return i({...a,useExistingField:v,createNewField:!v,existingFieldId:v&&((x=g[0])==null?void 0:x.id)||null})}}),l.jsx(R,{size:"2",children:"Use existing field"})]}),a.useExistingField&&l.jsx(te,{ml:"4",children:g.length>0?l.jsxs(l.Fragment,{children:[l.jsx(R,{size:"1",color:"gray",mb:"1",children:"Select Field"}),l.jsxs(W.Root,{value:a.existingFieldId||"",onValueChange:v=>i({...a,existingFieldId:v}),children:[l.jsx(W.Trigger,{placeholder:"Select existing field"}),l.jsx(W.Content,{children:g.map(v=>{const x=h(v);return l.jsx(W.Item,{value:v.id,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsxs(R,{children:[v.name," (",v.data_type,")"]}),!x&&l.jsx(R,{size:"1",color:"orange",children:"⚠️ Type mismatch"})]})},v.id)})})]}),s.existingField&&l.jsx(R,{size:"1",color:"red",mt:"1",children:s.existingField})]}):l.jsx(R,{size:"1",color:"gray",children:"No existing fields available (all fields are either PK or FK)"})})]})]})}):l.jsx(te,{mb:"4",children:l.jsxs(R,{size:"2",color:"red",children:['Cannot create relationship: Table "',n.name,'" must have a primary key.']})}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:p,children:"Cancel"})}),l.jsx(xe,{onClick:d,disabled:!y,children:"Create Relationship"})]})]})})},XJ=({isOpen:e,onClose:t,title:n="Operation Failed",message:r="An error occurred",details:o=null,errors:a=[]})=>l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:"600px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(c7,{color:"red",width:"20",height:"20"}),l.jsx(R,{size:"4",weight:"bold",color:"red",children:n})]})}),l.jsx(be.Description,{size:"2",mb:"4",color:"gray",children:r}),o&&l.jsx(te,{mb:"4",children:l.jsx(Je,{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",padding:"12px"},children:l.jsx(R,{size:"2",color:"red",children:o})})}),a&&a.length>0&&l.jsxs(te,{mb:"4",children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Error Details:"}),l.jsx(Xt,{style:{maxHeight:"300px"},children:l.jsx(O,{direction:"column",gap:"2",children:a.map((i,s)=>l.jsx(Je,{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",padding:"8px"},children:l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"bold",color:"red",children:i.title||`Error ${s+1}`}),l.jsx(R,{size:"1",color:"red",style:{fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.message||i})]})},s))})})]}),l.jsx(O,{gap:"3",mt:"4",justify:"end",children:l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",children:"Close"})})})]})}),ZJ=({open:e,onClose:t,sourceTable:n=null,targetMetricView:r=null,onSave:o})=>{const{createMetricRelationship:a}=ct(),[i,s]=f.useState([]),[c,u]=f.useState(new Set);f.useEffect(()=>{if(e&&n){console.log("🎯 Initializing field mapping dialog:",{sourceTable:n.name,targetMetricView:r==null?void 0:r.name});const j=n.fields.map(P=>({field_id:P.id,field_name:P.name,field_type:P.data_type,field_comment:P.comment||"",mapping_type:"ignore",dimension_name:P.name,dimension_expr:P.name,measure_name:`${d(P.data_type).toLowerCase()}_${P.name}`,measure_expr:p(P),aggregation_type:d(P.data_type),is_window_measure:!1,window_type:"moving_average",window_size:7,window_unit:"day",partition_by:[],order_by:"",offset_periods:1,window_frame:""}));s(j),u(new Set)}},[e,n,r]);const d=j=>["BIGINT","INT","SMALLINT","TINYINT","FLOAT","DOUBLE","DECIMAL"].includes(j)?"SUM":"COUNT",p=j=>["BIGINT","INT","SMALLINT","TINYINT","FLOAT","DOUBLE","DECIMAL"].includes(j.data_type)?j.name:`COUNT(${j.name})`,m=j=>{switch(j){case"dimension":return l.jsx(dn,{style:{color:"#059669"}});case"measure":return l.jsx(en,{style:{color:"#dc2626"}});case"window_measure":return l.jsx(en,{style:{color:"#8b5cf6"}});default:return l.jsx(wo,{style:{color:"#6b7280"}})}},h=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,mapping_type:P}:A))},[]),g=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,dimension_name:P}:A))},[]),y=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,dimension_expr:P}:A))},[]),w=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,measure_name:P}:A))},[]),v=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,measure_expr:P}:A))},[]),x=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,aggregation_type:P}:A))},[]),_=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,window_type:P,is_window_measure:!0,mapping_type:"window_measure"}:A))},[]),b=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,window_size:parseInt(P)||1}:A))},[]);f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,window_unit:P}:A))},[]);const S=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,partition_by:P.split(",").map(z=>z.trim()).filter(Boolean)}:A))},[]),$=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,order_by:P}:A))},[]),N=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,offset_periods:parseInt(P)||1}:A))},[]),T=f.useCallback((j,P)=>{s(I=>I.map(A=>A.field_id===j?{...A,window_frame:P}:A))},[]),C=f.useCallback(j=>{s(P=>P.map(I=>({...I,mapping_type:j})))},[]),D=f.useCallback(()=>{if(!n||!r){console.error("❌ Missing source table or target metric view");return}const j=i.filter(z=>z.mapping_type!=="ignore");console.log("💾 Saving field mappings:",{sourceTable:n.name,targetMetricView:r.name,activeMappings:j.length});const P=a(n.id,r.id,j),I=j.filter(z=>z.mapping_type==="dimension").map(z=>({id:`dim_${z.field_id}_${Date.now()}`,name:z.dimension_name,expr:z.dimension_expr,description:z.field_comment,data_type:z.field_type})),A=j.filter(z=>z.mapping_type==="measure").map(z=>({id:`measure_${z.field_id}_${Date.now()}`,name:z.measure_name,expr:z.measure_expr,description:z.field_comment,aggregation_type:z.aggregation_type,is_window_measure:!1,data_type:z.field_type}));o&&o({relationship:P,newDimensions:I,newMeasures:A,fieldMappings:j}),t()},[n,r,i,a,o,t]),L=f.useCallback(()=>{t()},[t]),K=i.filter(j=>j.mapping_type==="dimension").length,H=i.filter(j=>j.mapping_type==="measure").length,M=i.filter(j=>j.mapping_type==="window_measure").length,V=i.filter(j=>j.mapping_type==="ignore").length;return n?l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:"1000px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(kq,{}),"Map Fields to Metric View"]})}),l.jsxs(be.Description,{children:["Map fields from ",l.jsx("strong",{children:n.name})," to dimensions and measures in"," ",l.jsx("strong",{children:(r==null?void 0:r.name)||"the metric view"})]}),l.jsxs(O,{gap:"3",style:{marginTop:"16px"},children:[l.jsxs(we,{variant:"soft",color:"green",children:[l.jsx(dn,{})," ",K," Dimensions"]}),l.jsxs(we,{variant:"soft",color:"red",children:[l.jsx(en,{})," ",H," Measures"]}),l.jsxs(we,{variant:"soft",color:"purple",children:[l.jsx(en,{})," ",M," Window Measures"]}),l.jsxs(we,{variant:"soft",color:"gray",children:[l.jsx(wo,{})," ",V," Ignored"]})]}),l.jsxs(O,{gap:"2",style:{marginTop:"12px"},children:[l.jsxs(xe,{size:"1",variant:"soft",color:"green",onClick:()=>C("dimension"),children:[l.jsx(dn,{})," All as Dimensions"]}),l.jsxs(xe,{size:"1",variant:"soft",color:"red",onClick:()=>C("measure"),children:[l.jsx(en,{})," All as Measures"]}),l.jsxs(xe,{size:"1",variant:"soft",color:"gray",onClick:()=>C("ignore"),children:[l.jsx(wo,{})," Ignore All"]})]}),l.jsx(ar,{style:{margin:"16px 0"}}),l.jsx(Xt,{style:{height:"400px"},children:l.jsx(O,{direction:"column",gap:"3",children:i.map(j=>{var P;return l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(O,{align:"center",gap:"3",children:[m(j.mapping_type),l.jsxs(te,{children:[l.jsx(R,{weight:"medium",size:"2",children:j.field_name}),l.jsxs(O,{gap:"2",align:"center",style:{marginTop:"2px"},children:[l.jsx(we,{variant:"soft",size:"1",children:j.field_type}),j.field_comment&&l.jsx(R,{size:"1",color:"gray",children:j.field_comment})]})]})]}),l.jsxs(W.Root,{value:j.mapping_type,onValueChange:I=>h(j.field_id,I),children:[l.jsx(W.Trigger,{style:{minWidth:"120px"}}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"ignore",children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(wo,{})," Ignore"]})}),l.jsx(W.Item,{value:"dimension",children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(dn,{})," Dimension"]})}),l.jsx(W.Item,{value:"measure",children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(en,{})," Measure"]})}),l.jsx(W.Item,{value:"window_measure",children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(en,{style:{color:"#8b5cf6"}})," Window Measure"]})})]})]})]}),j.mapping_type==="dimension"&&l.jsxs(te,{style:{padding:"12px",background:"var(--green-2)",borderRadius:"6px",border:"1px solid var(--green-6)"},children:[l.jsx(R,{size:"1",weight:"medium",style:{marginBottom:"8px",display:"block"},children:"Dimension Configuration"}),l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Name"}),l.jsx("input",{type:"text",value:j.dimension_name,onChange:I=>g(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Expression"}),l.jsx("input",{type:"text",value:j.dimension_expr,onChange:I=>y(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]})]})]}),j.mapping_type==="measure"&&l.jsxs(te,{style:{padding:"12px",background:"var(--red-2)",borderRadius:"6px",border:"1px solid var(--red-6)"},children:[l.jsx(R,{size:"1",weight:"medium",style:{marginBottom:"8px",display:"block"},children:"Measure Configuration"}),l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Name"}),l.jsx("input",{type:"text",value:j.measure_name,onChange:I=>w(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Aggregation"}),l.jsxs(W.Root,{value:j.aggregation_type,onValueChange:I=>x(j.field_id,I),children:[l.jsx(W.Trigger,{style:{fontSize:"12px"}}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"SUM",children:"SUM"}),l.jsx(W.Item,{value:"COUNT",children:"COUNT"}),l.jsx(W.Item,{value:"AVG",children:"AVG"}),l.jsx(W.Item,{value:"MIN",children:"MIN"}),l.jsx(W.Item,{value:"MAX",children:"MAX"}),l.jsx(W.Item,{value:"COUNT_DISTINCT",children:"COUNT DISTINCT"})]})]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:2},children:[l.jsx(R,{size:"1",children:"Expression"}),l.jsx("input",{type:"text",value:j.measure_expr,onChange:I=>v(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]})]})]}),j.mapping_type==="window_measure"&&l.jsxs(te,{style:{padding:"12px",background:"var(--purple-2)",borderRadius:"6px",border:"1px solid var(--purple-6)"},children:[l.jsx(R,{size:"1",weight:"medium",style:{marginBottom:"8px",display:"block"},children:"Window Measure Configuration"}),l.jsxs(O,{gap:"3",style:{marginBottom:"12px"},children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Name"}),l.jsx("input",{type:"text",value:j.measure_name,onChange:I=>w(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Base Expression"}),l.jsx("input",{type:"text",value:j.measure_expr,onChange:I=>v(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]})]}),l.jsxs(O,{gap:"3",style:{marginBottom:"12px"},children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Window Type"}),l.jsxs("select",{value:j.window_type,onChange:I=>_(j.field_id,I.target.value),style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"},children:[l.jsx("option",{value:"moving_average",children:"Moving Average"}),l.jsx("option",{value:"running_total",children:"Running Total"}),l.jsx("option",{value:"period_over_period",children:"Period over Period"}),l.jsx("option",{value:"cumulative_sum",children:"Cumulative Sum"}),l.jsx("option",{value:"rank",children:"Rank"}),l.jsx("option",{value:"row_number",children:"Row Number"}),l.jsx("option",{value:"percent_of_total",children:"Percent of Total"}),l.jsx("option",{value:"custom",children:"Custom Window Frame"})]})]}),j.window_type==="moving_average"&&l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Window Size"}),l.jsx("input",{type:"number",value:j.window_size,onChange:I=>b(j.field_id,I.target.value),min:"1",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"}})]}),j.window_type==="period_over_period"&&l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Offset Periods"}),l.jsx("input",{type:"number",value:j.offset_periods,onChange:I=>N(j.field_id,I.target.value),min:"1",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px"}})]})]}),l.jsxs(O,{gap:"3",style:{marginBottom:"12px"},children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Partition By (comma-separated)"}),l.jsx("input",{type:"text",value:((P=j.partition_by)==null?void 0:P.join(", "))||"",onChange:I=>S(j.field_id,I.target.value),placeholder:"e.g., customer_id, region",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Order By"}),l.jsx("input",{type:"text",value:j.order_by,onChange:I=>$(j.field_id,I.target.value),placeholder:"e.g., date_column, created_at",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]})]}),j.window_type==="custom"&&l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",children:"Custom Window Frame"}),l.jsx("input",{type:"text",value:j.window_frame,onChange:I=>T(j.field_id,I.target.value),placeholder:"e.g., ROWS BETWEEN 6 PRECEDING AND CURRENT ROW",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]}),l.jsxs(te,{style:{marginTop:"12px",padding:"8px",background:"rgba(0,0,0,0.05)",borderRadius:"4px",fontSize:"11px",fontFamily:"monospace"},children:[l.jsx(R,{size:"1",weight:"medium",style:{marginBottom:"4px",display:"block"},children:"Generated SQL Preview:"}),l.jsx(R,{size:"1",style:{color:"#6b7280"},children:(()=>{var U;const I=j.measure_expr||j.field_name,A=(U=j.partition_by)!=null&&U.length?`PARTITION BY ${j.partition_by.join(", ")}`:"",z=j.order_by?`ORDER BY ${j.order_by}`:"";switch(j.window_type){case"moving_average":const F=j.window_size?`ROWS BETWEEN ${j.window_size-1} PRECEDING AND CURRENT ROW`:"";return`AVG(${I}) OVER (${A} ${z} ${F})`.trim();case"running_total":return`SUM(${I}) OVER (${A} ${z} ROWS UNBOUNDED PRECEDING)`.trim();case"period_over_period":const B=j.offset_periods||1;return`(${I} - LAG(${I}, ${B}) OVER (${A} ${z})) / LAG(${I}, ${B}) OVER (${A} ${z}) * 100`;default:return`${I} OVER (${A} ${z})`.trim()}})()})]})]})]})},j.field_id)})})}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:L,children:"Cancel"})}),l.jsxs(xe,{onClick:D,disabled:K===0&&H===0&&M===0,children:[l.jsx(Oy,{}),"Create Relationship (",K+H+M," fields mapped)"]})]})]})}):null},QJ=(e,t,n)=>{const r=(e==null?void 0:e.catalog_name)||(t==null?void 0:t.catalog_name)||"main",o=(e==null?void 0:e.schema_name)||(t==null?void 0:t.schema_name)||"default",a=`\`${r}\`.\`${o}\`.\`${e.name}\``;let i="your_source_table";if(e.source_table_id){if(n){const h=n.find(g=>g.id===e.source_table_id);if(h){const g=h.catalog_name||(t==null?void 0:t.catalog_name)||"main",y=h.schema_name||(t==null?void 0:t.schema_name)||"default";i=`${g}.${y}.${h.name}`}}i==="your_source_table"&&e.source_table_id.includes(".")&&(i=e.source_table_id)}const s=[];e.dimensions&&e.dimensions.length>0&&e.dimensions.forEach(h=>{const g=h.description?` COMMENT "${h.description}"`:"";s.push(`\`${h.name}\`${g}`)}),e.measures&&e.measures.length>0&&e.measures.forEach(h=>{const g=h.description?` COMMENT "${h.description}"`:"";s.push(`\`${h.name}\`${g}`)});const c=s.length>0?`
  (${s.join(`,
   `)})`:"",u=e.description?`
  COMMENT '${e.description}'`:"",d={version:e.version||"1.0",source:i,...e.joins&&e.joins.length>0&&{joins:e.joins.map(h=>{var b;const g=h.name||h.join_alias||(h.joined_table_name?h.joined_table_name.split(".").pop():"unknown");let y=h.joined_table_name||`${r}.${o}.${g}`;const w=y.split(".");w.length>3&&(y=w.slice(-3).join("."),console.log(`🔧 Fixed duplicate catalog/schema: ${h.joined_table_name} -> ${y}`));let v=h.sql_on||h.join_condition||(h.using&&h.using.length>0?null:`source.id = ${g}.id  -- TODO: Configure join condition`);v&&(v=v.replace(/\bbase\./g,"source.").replace(/\bfact_vendas\./g,"source.").replace(/\b\w+\.source\./g,"source.").replace(new RegExp(`\\b${(b=h.joined_table_name)==null?void 0:b.split(".").pop()}\\b`,"g"),g).replace(/\b\w+\.\w+\.(\w+\.\w+)/g,"$1").replace(/\b\w+\.(\w+\.\w+)/g,"$1"));const x={name:g,source:y};h.using&&h.using.length>0?x.using=h.using:v&&(x.on=v),h.join_type&&h.join_type!=="LEFT"&&(x.type=h.join_type.toLowerCase());const _=S=>S.map($=>{var L;const N=$.name||$.join_alias||($.joined_table_name?$.joined_table_name.split(".").pop():"nested");let T=$.joined_table_name||`${r}.${o}.${N}`;const C=T.split(".");C.length>3&&(T=C.slice(-3).join("."));const D={name:N,source:T};if($.using&&$.using.length>0)D.using=$.using;else{let K=$.sql_on||$.join_condition||($.using&&$.using.length>0?null:`${g}.id = ${N}.id`);K&&(K=K.replace(/\bbase\./g,"source.").replace(/\bfact_vendas\./g,"source.").replace(/\b\w+\.source\./g,"source.").replace(new RegExp(`\\b${(L=$.joined_table_name)==null?void 0:L.split(".").pop()}\\b`,"g"),N).replace(/\b\w+\.\w+\.(\w+\.\w+)/g,"$1").replace(/\b\w+\.(\w+\.\w+)/g,"$1"),D.on=K)}return $.join_type&&$.join_type!=="LEFT"&&(D.type=$.join_type.toLowerCase()),$.joins&&$.joins.length>0&&(D.joins=_($.joins)),D});return h.joins&&h.joins.length>0&&(x.joins=_(h.joins)),x})},...e.filter&&{filter:e.filter},...e.dimensions&&e.dimensions.length>0&&{dimensions:e.dimensions.map(h=>{var w;let g=h.expr||h.name;if(g.includes(".")&&!g.includes("(")&&!g.includes(" ")){const v=g.split(".");if(v.length===2){const[x,_]=v;x===i.split(".").pop()?g=`source.${_}`:g=`${x}.${_}`}else if(v.length===3){const[x,_,b]=v;g=`${_}.${b}`}}else!g.includes(".")&&!g.includes("(")&&!g.includes(" ")&&((w=e.joins)!=null&&w.find(x=>x.name===g))&&console.info(`ℹ️ Dimension '${h.name}' uses join reference '${g}' - this is valid for Databricks metric views with nested joins`);return{name:h.name,expr:g}}).filter(h=>h!==null)},...e.measures&&e.measures.length>0&&{measures:e.measures.map(h=>{let g=h.expr||"COUNT(*)";g.includes(".")&&!g.includes("MEASURE(")&&(g=g.replace(/\b(\w+)\.(\w+)\.(\w+)\b/g,(w,v,x,_)=>`${x}.${_}`),g=g.replace(/\b(\w+)\.(\w+)\b/g,(w,v,x)=>v===i.split(".").pop()?`source.${x}`:`${v}.${x}`)),g&&g.includes("MEASURE(")&&(g=g.replace(/MEASURE\(([^)]+)\)/g,(w,v)=>v.includes(" ")&&!v.startsWith('"')&&!v.endsWith('"')?`MEASURE("${v}")`:w));const y={name:h.name,expr:g};return h.window&&h.window.length>0&&(y.window=h.window.map(w=>({order:w.order,range:w.range,...w.semiadditive&&{semiadditive:w.semiadditive}}))),y})}},p=(h,g=0)=>{const y="  ".repeat(g);return typeof h=="string"?h.includes(`
`)||h.length>80?`>
${y}  ${h.split(`
`).join(`
${y}  `)}`:h.includes(" ")||h.includes(":")||h.includes("#")?`"${h}"`:h:Array.isArray(h)?h.map(w=>{if(typeof w=="object"&&w!==null){const v=Object.entries(w).map(([x,_])=>{if(x==="using"&&Array.isArray(_)){const b=_.map(S=>`${y}      - ${S}`).join(`
`);return`${y}    ${x}:
${b}`}if(x==="joins"&&Array.isArray(_)){const b=p(_,g+2);return`${y}    ${x}:
${b}`}return`${y}    ${x}: ${p(_,g+2)}`}).join(`
`);return`${y}  -
${v}`}return`${y}  - ${p(w,g+1)}`}).join(`
`):h},m=Object.entries(d).map(([h,g])=>Array.isArray(g)?`${h}:
${p(g,0)}`:`${h}: ${p(g,0)}`).join(`
`);return`CREATE VIEW ${a}${c}
WITH METRICS
LANGUAGE YAML${u}
AS $$
${m}
$$`},Va=new oT.graphlib.Graph;Va.setDefaultEdgeLabel(()=>({}));const jj=220,Ej=180,JJ=(e,t,n="TB")=>{const r=n==="LR";return Va.setGraph({rankdir:n,nodesep:50,ranksep:100,marginx:20,marginy:20}),e.forEach(o=>{var a,i;Va.setNode(o.id,{width:((a=o.data)==null?void 0:a.width)||jj,height:((i=o.data)==null?void 0:i.height)||Ej})}),t.forEach(o=>{Va.setEdge(o.source,o.target)}),oT.layout(Va),e.forEach(o=>{var i,s;const a=Va.node(o.id);return o.targetPosition=r?"left":"top",o.sourcePosition=r?"right":"bottom",o.position={x:a.x-(((i=o.data)==null?void 0:i.width)||jj)/2,y:a.y-(((s=o.data)==null?void 0:s.height)||Ej)/2},o}),{nodes:e,edges:t}},eee=(e,t,n,r,o,a,i=[])=>{if(!e||!Array.isArray(e))return console.log("🔧 tablesToNodes: returning empty array - invalid tables"),[];try{return e.map((c,u)=>{if(!c||!c.id)return console.warn("Invalid table data:",c),null;const d=Array.isArray(i)?i.some(m=>m&&m.id===c.id):!1;return{id:String(c.id),type:"table",position:{x:Number(c.position_x)||100,y:Number(c.position_y)||100},data:{table:c,width:Number(c.width)||220,height:Number(c.height)||180,onEdit:t,onDelete:n,onResize:r,onGenerateDDL:o,onApply:a,selected:d},style:{width:Number(c.width)||220,height:Number(c.height)||180},selected:d,selectable:!0,focusable:!0,draggable:!0}}).filter(Boolean)}catch(s){return console.error("❌ Error in tablesToNodes:",s),[]}},tee=(e,t,n,r,o,a,i=[])=>{if(!e||!Array.isArray(e))return console.log("🔧 metricViewsToNodes: returning empty array - invalid metricViews"),[];try{return e.map((c,u)=>{if(!c||!c.id)return console.warn("Invalid metric view data:",c),null;const d=Array.isArray(i)?i.some(m=>m&&m.id===c.id):!1;return{id:String(c.id),type:"metricView",position:{x:Number(c.position_x)||400,y:Number(c.position_y)||100},data:{metricView:c,width:Number(c.width)||280,height:Number(c.height)||220,onEdit:t,onDelete:n,onResize:r,onApply:o,onGenerateDDL:a,selected:d},style:{width:Number(c.width)||280,height:Number(c.height)||220},selected:d,selectable:!0,focusable:!0,draggable:!0}}).filter(Boolean)}catch(s){return console.error("❌ Error in metricViewsToNodes:",s),[]}},nee=(e,t=[])=>!e||!Array.isArray(e)?[]:e.map(n=>{if(!n||!n.id||!n.source_table_id||!n.target_table_id)return console.warn("Invalid relationship data:",n),null;const r=t.some(o=>o.id===n.id);return{id:String(n.id),source:String(n.target_table_id),target:String(n.source_table_id),type:"smoothstep",animated:!1,style:{stroke:r?"#ef4444":"#94a3b8",strokeWidth:r?3:2},markerEnd:{type:"arrowclosed",color:r?"#ef4444":"#94a3b8"},selected:r,selectable:!0,focusable:!0,data:{relationship:n}}}).filter(Boolean),ree=(e,t=[])=>!e||!Array.isArray(e)?[]:e.map(n=>{if(!n||!n.id||!n.source_table_id||!n.metric_view_id)return console.warn("Invalid metric relationship data:",n),null;const r=t.some(o=>o.id===n.id);return{id:String(n.id),source:String(n.source_table_id),target:String(n.metric_view_id),type:"smoothstep",animated:!0,style:{stroke:"#8b5cf6",strokeWidth:3,strokeDasharray:"5,5"},markerEnd:{type:"arrowclosed",color:"#8b5cf6",width:20,height:20},label:"Metric Source",labelStyle:{fontSize:"10px",fontWeight:"bold",color:"#8b5cf6",background:"rgba(255, 255, 255, 0.9)",padding:"2px 6px",borderRadius:"4px",border:"1px solid #8b5cf6"},labelBgStyle:{fill:"rgba(255, 255, 255, 0.9)",fillOpacity:.9},selected:r,selectable:!0,focusable:!0,data:{relationship:n}}}).filter(Boolean),oee=(e,t,n,r,o,a,i=[])=>{if(!e||!Array.isArray(e))return console.log("🔧 traditionalViewsToNodes: returning empty array - invalid traditionalViews"),[];try{return e.map((c,u)=>{if(!c||!c.id)return console.warn("Invalid traditional view data:",c),null;const d=Array.isArray(i)?i.some(m=>m&&m.id===c.id):!1;return{id:String(c.id),type:"traditionalView",position:{x:Number(c.position_x)||600,y:Number(c.position_y)||100},data:{traditionalView:c,width:Number(c.width)||250,height:Number(c.height)||180,onEdit:t,onDelete:n,onResize:r,onApply:o,onGenerateDDL:a,selected:d},style:{width:Number(c.width)||250,height:Number(c.height)||180},selected:d,selectable:!0,focusable:!0,draggable:!0}}).filter(Boolean)}catch(s){return console.error("❌ Error in traditionalViewsToNodes:",s),[]}},aee=({onTableCreate:e,onMetricViewCreate:t,onTraditionalViewCreate:n,onDragStart:r})=>{const{tables:o}=ct(),a=(i,s)=>{i.dataTransfer.setData("application/reactflow",s),i.dataTransfer.effectAllowed="move",r&&r(i,s)};return l.jsxs(te,{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3,width:"240px",background:"linear-gradient(135deg, #FBFAF8 0%, #FFFFFF 100%)",borderRadius:"12px",boxShadow:"0 8px 25px rgba(255, 54, 33, 0.15), 0 4px 12px rgba(0, 0, 0, 0.1)",border:"2px solid #FF3621",overflow:"hidden"},children:[l.jsx(te,{style:{padding:"12px 16px",background:"linear-gradient(135deg, #FF3621 0%, #FF6B54 100%)",color:"white"},children:l.jsx(R,{size:"3",weight:"bold",style:{color:"white",textShadow:"0 1px 3px rgba(0, 0, 0, 0.3)"},children:"Components"})}),l.jsx(te,{style:{padding:"12px"},children:l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"2px solid #FF3621",background:"linear-gradient(135deg, #FBFAF8 0%, #FFFFFF 100%)",borderRadius:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(255, 54, 33, 0.1)"},draggable:!0,onDragStart:i=>a(i,"new_table"),onClick:e,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(te,{style:{color:"white",fontSize:"14px",background:"linear-gradient(135deg, #FF3621 0%, #FF6B54 100%)",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Mn,{})}),l.jsx(R,{size:"2",weight:"bold",style:{color:"#FF3621",flex:1},children:"New Table"}),l.jsx(te,{style:{color:"#FF3621",fontSize:"12px"},children:l.jsx(Sc,{})})]})}),l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"2px solid #FF3621",background:"linear-gradient(135deg, #FBFAF8 0%, #FFFFFF 100%)",borderRadius:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(255, 54, 33, 0.1)"},draggable:!0,onDragStart:i=>a(i,"new_metric_view"),onClick:t,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(te,{style:{color:"white",fontSize:"14px",background:"linear-gradient(135deg, #FF3621 0%, #FF6B54 100%)",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(en,{})}),l.jsx(R,{size:"2",weight:"bold",style:{color:"#FF3621",flex:1},children:"New Metric View"}),l.jsx(te,{style:{color:"#FF3621",fontSize:"12px"},children:l.jsx(Sc,{})})]})}),l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"2px solid #FF3621",background:"linear-gradient(135deg, #FBFAF8 0%, #FFFFFF 100%)",borderRadius:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(255, 54, 33, 0.1)"},draggable:!0,onDragStart:i=>a(i,"new_traditional_view"),onClick:n,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(te,{style:{color:"white",fontSize:"14px",background:"linear-gradient(135deg, #FF3621 0%, #FF6B54 100%)",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(dn,{})}),l.jsx(R,{size:"2",weight:"bold",style:{color:"#FF3621",flex:1},children:"New Traditional View"}),l.jsx(te,{style:{color:"#FF3621",fontSize:"12px"},children:l.jsx(Sc,{})})]})}),l.jsx(ar,{}),o&&o.length>0&&l.jsxs(te,{children:[l.jsxs(R,{size:"2",weight:"bold",style:{color:"#374151",marginBottom:"8px"},children:["Existing Tables (",o.length,")"]}),l.jsx(O,{direction:"column",gap:"2",style:{maxHeight:"300px",overflowY:"auto"},children:o.map(i=>{var s;return l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"1px solid #e2e8f0",background:"white"},draggable:!0,onDragStart:c=>a(c,`existing_${i.id}`),children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"blue",size:"1",children:i.name}),l.jsxs(R,{size:"1",style:{color:"#64748b",flex:1},children:[((s=i.fields)==null?void 0:s.length)||0," fields"]}),l.jsx(te,{style:{color:"#94a3b8"},children:l.jsx(Sc,{})})]})},i.id)})})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",style:{color:"#374151",marginBottom:"8px"},children:"Quick Templates"}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"1px solid #e2e8f0",background:"#fef3c7"},draggable:!0,onDragStart:i=>a(i,"template_customer"),children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"amber",size:"1",children:"Customer"}),l.jsx(R,{size:"1",style:{color:"#92400e"},children:"ID, Name, Email"})]})}),l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"1px solid #e2e8f0",background:"#dbeafe"},draggable:!0,onDragStart:i=>a(i,"template_order"),children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"blue",size:"1",children:"Order"}),l.jsx(R,{size:"1",style:{color:"#1e40af"},children:"ID, Customer ID, Amount"})]})}),l.jsx(Je,{style:{cursor:"grab",padding:"8px 12px",border:"1px solid #e2e8f0",background:"#dcfce7"},draggable:!0,onDragStart:i=>a(i,"template_product"),children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"green",size:"1",children:"Product"}),l.jsx(R,{size:"1",style:{color:"#166534"},children:"ID, Name, Price"})]})})]})]})]})})]})},iee=()=>{const e=ct(),{tables:t=[],metricViews:n=[],traditionalViews:r=[],relationships:o=[],metricRelationships:a=[],selectedTables:i=[],selectedMetricViews:s=[],selectedTraditionalViews:c=[],selectedRelationships:u=[],currentProject:d=null,catalogName:p="",schemaName:m="",updateTable:h=()=>{},addRelationship:g=()=>{},deleteRelationship:y=()=>{},setSelectedTables:w=()=>{},setSelectedMetricViews:v=()=>{},setSelectedTraditionalViews:x=()=>{},setSelectedRelationships:_=()=>{},generateDDL:b=()=>Promise.resolve({}),applyChanges:S=()=>Promise.resolve({}),applyMetricView:$=()=>Promise.resolve({}),setShowTableDialog:N=()=>{},setShowMetricViewDialog:T=()=>{},setShowTraditionalViewDialog:C=()=>{},setShowFieldMappingDialog:D=()=>{},setShowImportDialog:L=()=>{},showTraditionalViewDialog:K=!1,editingTraditionalView:H=null,addTable:M=()=>{},deleteTable:V=()=>{},createMetricView:j=()=>{},updateMetricView:P=()=>{},deleteMetricView:I=()=>{},updateMetricViewPosition:A=()=>{},updateMetricViewSize:z=()=>{},createTraditionalView:U=()=>{},updateTraditionalView:F=()=>{},deleteTraditionalView:B=()=>{},updateTraditionalViewPosition:X=()=>{},updateTraditionalViewSize:Q=()=>{},applyTraditionalView:J=()=>Promise.resolve({}),generateTraditionalViewDDL:ee=()=>Promise.resolve({}),createMetricRelationship:ie=()=>{},deleteMetricRelationship:fe=()=>{}}=e||{},ue=f.useMemo(()=>({table:UJ,metricView:WJ,traditionalView:KJ}),[]),[Ce,me]=f.useState(!1),[Oe,Fe]=f.useState(null),[oe,E]=f.useState(!1),[q,k]=f.useState({sourceTable:null,targetMetricView:null}),[G,Y]=f.useState(!1),[Z,le]=f.useState(null),[ge,Ee]=f.useState(!1),[ye,_e]=f.useState(null),[Pe,ne]=f.useState(!1),[Se,je]=f.useState(null),[De,Ge]=f.useState(!1),[Be,Ne]=f.useState(!1),[We,at]=f.useState(null),ot=f.useCallback(ae=>{ct.getState().setShowTableDialog(!0,ae)},[]),ze=f.useCallback(()=>{ct.getState().setShowTableDialog(!0,null)},[]),st=f.useCallback(()=>{ct.getState().setShowMetricViewDialog(!0,null)},[]),At=f.useCallback(()=>{ct.getState().setShowTraditionalViewDialog(!0,null)},[]),_n=f.useCallback(ae=>{window.confirm("Are you sure you want to delete this table?")&&V(ae)},[V]),ln=f.useCallback((ae,se,he)=>{h(ae,{width:se,height:he})},[h]),Ta=f.useCallback(ae=>{console.log("🔧 Opening DDL progress dialog for table:",ae.name),je(ae.id),ne(!0)},[]),Wi=f.useCallback(ae=>{console.log("🚀 Opening apply progress dialog for table:",ae.name),_e(ae.id),Ee(!0)},[]),sf=f.useCallback(async(ae,se,he)=>(console.log("🚀 ERDCanvas: handleApplyProgressWithTable called"),console.log("🏭 Selected warehouse:",se),console.log("🔗 Session ID:",he),console.log("📋 Table ID to apply:",ye),await S(ye?[ye]:[],!0,se,he)),[S,ye]),lf=f.useCallback(async ae=>(console.log("🔧 ERDCanvas: handleGenerateDDLWithProgress called"),console.log("📋 Table IDs:",ae),await b(ae||(Se?[Se]:[]))),[b,Se]),cf=f.useCallback(async ae=>{console.log("🔧 ERDCanvas: handleMetricViewGenerateDDLWithProgress called"),console.log("📋 Metric View IDs:",ae);const se=ae||(We?[We]:[]),he=n.find(Te=>Te.id===se[0]);if(!he)throw new Error("Metric view not found");const pe=QJ(he,d,t);return{ddl_statements:[{table_name:he.name,ddl:pe,warnings:[]}]}},[We,n,d,t]);f.useCallback(async ae=>{var se,he;console.log("🚀 ERDCanvas: handleMetricViewApplySimple called"),console.log("📋 Metric View to apply:",ae.name);try{const pe=await $(ae.id,!0,null);console.log("✅ Metric view applied successfully:",pe),alert(`✅ Metric view "${ae.name}" applied successfully to ${pe.catalog_name}.${pe.schema_name}`)}catch(pe){console.error("❌ Error applying metric view:",pe);let Te="Failed to apply metric view";(he=(se=pe.response)==null?void 0:se.data)!=null&&he.error?Te=pe.response.data.error:pe.message&&(Te=pe.message),alert(`❌ Error applying metric view "${ae.name}": ${Te}`)}},[$]);const Ll=f.useCallback(async ae=>{var se,he,pe,Te,Ve;console.log("🚀 ERDCanvas: handleMetricViewApplyDirect called"),console.log("📋 Metric View to apply:",ae.name);try{const Ie=await $(ae.id,!0,null);console.log("✅ Metric view applied successfully:",Ie),alert(`✅ Metric view "${ae.name}" applied successfully to ${Ie.catalog_name}.${Ie.schema_name}`)}catch(Ie){console.error("❌ Error applying metric view:",Ie);let tt="Failed to apply metric view";if(((se=Ie.response)==null?void 0:se.status)===400&&((pe=(he=Ie.response)==null?void 0:he.data)!=null&&pe.error)){const ht=Ie.response.data.error;ht.includes("TABLE_OR_VIEW_NOT_FOUND")?tt="The source table for this metric view was not found in the target catalog/schema. Please ensure the source table exists or choose a different catalog/schema.":ht.includes("SCHEMA_NOT_FOUND")?tt="The target schema was not found. Please check the schema name and permissions.":ht.includes("CATALOG_NOT_FOUND")?tt="The target catalog was not found. Please check the catalog name and permissions.":tt=ht}else(Ve=(Te=Ie.response)==null?void 0:Te.data)!=null&&Ve.error?tt=Ie.response.data.error:Ie.message&&(tt=Ie.message);alert(`❌ Error applying metric view "${ae.name}": ${tt}`)}},[$]),uf=f.useCallback(async(ae,se,he)=>{if(console.log("🚀 ERDCanvas: handleMetricViewApplyWithProgress called - redirecting to simple apply"),Ne(!1),at(null),We){const pe=n.find(Te=>Te.id===We);pe&&await Ll(pe)}return{message:"Metric view apply completed"}},[We,n,Ll]),df=f.useCallback(ae=>{T(!0,ae)},[T]),ff=f.useCallback(ae=>{window.confirm(`Are you sure you want to delete the metric view "${ae.name}"?`)&&(console.log("🗑️ Deleting metric view:",ae.name),I(ae.id))},[I]),pf=f.useCallback((ae,se,he)=>{z(ae,se,he)},[z]),hf=f.useCallback(ae=>{console.log("🚀 Opening apply progress dialog for metric view:",ae.name),at(ae.id),Ne(!0)},[]),mf=f.useCallback(ae=>{console.log("🔧 Opening DDL progress dialog for metric view:",ae.name),at(ae.id),Ge(!0)},[]),gf=f.useCallback(ae=>{console.log("🎯 Editing traditional view:",ae.name),C(!0,ae)},[C]),Fl=f.useCallback(ae=>{const se=r.find(pe=>pe.id===ae),he=(se==null?void 0:se.name)||"Unknown View";window.confirm(`Are you sure you want to delete the traditional view "${he}"?`)&&(console.log("🗑️ Deleting traditional view:",he),B(ae))},[B,r]),yf=f.useCallback((ae,se,he)=>{console.log("📏 Resizing traditional view:",ae,{newWidth:se,newHeight:he}),Q(ae,se,he)},[Q]),vf=f.useCallback(async ae=>{var se,he;console.log("🚀 Applying traditional view:",ae.name);try{const pe=await J(ae.id,!0,null);console.log("✅ Traditional view applied successfully:",pe),alert(`✅ Traditional view "${ae.name}" applied successfully to ${pe.catalog_name}.${pe.schema_name}`)}catch(pe){console.error("❌ Error applying traditional view:",pe);let Te="Failed to apply traditional view";(he=(se=pe.response)==null?void 0:se.data)!=null&&he.error?Te=pe.response.data.error:pe.message&&(Te=pe.message),alert(`❌ Error applying traditional view "${ae.name}": ${Te}`)}},[J]),xf=f.useCallback(async ae=>{var se,he;console.log("🔧 Generating DDL for traditional view:",ae.name);try{const pe=await ee(ae.id);console.log("✅ Traditional view DDL generated successfully:",pe);const Te=new Blob([pe.ddl],{type:"text/sql"}),Ve=window.URL.createObjectURL(Te),Ie=document.createElement("a");Ie.href=Ve,Ie.setAttribute("download",`${ae.name}_ddl.sql`),document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),window.URL.revokeObjectURL(Ve),console.log(`📥 DDL file downloaded: ${ae.name}_ddl.sql`)}catch(pe){console.error("❌ Error generating traditional view DDL:",pe);let Te="Failed to generate DDL for traditional view";(he=(se=pe.response)==null?void 0:se.data)!=null&&he.error?Te=pe.response.data.error:pe.message&&(Te=pe.message),alert(`❌ Error generating DDL for "${ae.name}": ${Te}`)}},[ee]),_f=f.useCallback(ae=>{console.log("🔗 Saving field mapping:",ae);const{relationship:se,newDimensions:he,newMeasures:pe}=ae;if(q.targetMetricView){const Te={...q.targetMetricView,dimensions:[...q.targetMetricView.dimensions||[],...he],measures:[...q.targetMetricView.measures||[],...pe]};P(q.targetMetricView.id,Te)}E(!1),k({sourceTable:null,targetMetricView:null})},[q,P]),zl=f.useRef(null),[ql,wf]=f.useState(null),[Ki,Ho,bf]=kW([]),[Yi,Na,Cf]=AW([]),[ro,Bl]=f.useState(null);f.useEffect(()=>{try{const ae=Array.isArray(t)?t:[],se=Array.isArray(n)?n:[],he=Array.isArray(r)?r:[],pe=Array.isArray(o)?o:[],Te=Array.isArray(a)?a:[],Ve=Array.isArray(i)?i:[],Ie=Array.isArray(s)?s:[],tt=Array.isArray(c)?c:[],ht=Array.isArray(u)?u:[],$t=eee(ae,ot,_n,ln,Ta,Wi,Ve),oo=tee(se,df,ff,pf,hf,mf,Ie),T_=oee(he,gf,Fl,yf,vf,xf,tt),N_=nee(pe,ht),k_=ree(Te,ht),cT=[...Array.isArray($t)?$t:[],...Array.isArray(oo)?oo:[],...Array.isArray(T_)?T_:[]],uT=[...Array.isArray(N_)?N_:[],...Array.isArray(k_)?k_:[]];Ho(cT),Na(uT)}catch(ae){console.error("❌ Error updating canvas nodes/edges:",ae),console.error("❌ Error stack:",ae.stack),Ho([]),Na([])}},[t,n,r,o,a,i,s,c,u]);const Vl=f.useCallback((ae,{nodeId:se,handleType:he,handleId:pe})=>{console.log("🔗 Connection START:",{nodeId:se,handleType:he,handleId:pe});const Te=t.find(Ie=>Ie.id===se),Ve=n.find(Ie=>Ie.id===se);Bl({sourceNodeId:se,sourceTableName:Te==null?void 0:Te.name,sourceMetricViewName:Ve==null?void 0:Ve.name,nodeType:Te?"table":Ve?"metricView":"unknown",handleType:he,handleId:pe})},[t,n]),Sf=f.useCallback(ae=>{console.log("🔗 Connection END:",ae),setTimeout(()=>Bl(null),100)},[]),jf=f.useCallback(ae=>{try{console.log("🔗 onConnect called with params:",ae),console.log("🔗 Connection drag state:",ro);const se=t.find(tt=>tt.id===ae.source),he=t.find(tt=>tt.id===ae.target),pe=n.find(tt=>tt.id===ae.source),Te=n.find(tt=>tt.id===ae.target);if(console.log("🔗 Connection types:",{sourceTable:se==null?void 0:se.name,targetTable:he==null?void 0:he.name,sourceMetricView:pe==null?void 0:pe.name,targetMetricView:Te==null?void 0:Te.name}),se&&Te){console.log("🎯 Table → Metric View connection detected!"),k({sourceTable:se,targetMetricView:Te}),E(!0);return}if(pe&&he){console.log("🎯 Metric View → Table connection detected (reversing)!"),k({sourceTable:he,targetMetricView:pe}),E(!0);return}if(!se||!he){console.warn("🔗 Invalid connection: both nodes must be tables for FK relationships");return}console.log("🔗 ReactFlow params.source:",ae.source,"(",se==null?void 0:se.name,")"),console.log("🔗 ReactFlow params.target:",ae.target,"(",he==null?void 0:he.name,")");let Ve,Ie;if(ro&&ro.sourceNodeId){const tt=t.find($t=>$t.id===ro.sourceNodeId),ht=t.find($t=>$t.id!==ro.sourceNodeId&&($t.id===ae.source||$t.id===ae.target));tt&&ht?(Ve=tt,Ie=ht,console.log("🔗 Using CONNECTION DRAG STATE:",`${tt.name} -> ${ht.name}`)):(Ve=table1,Ie=table2,console.log("🔗 Fallback to Interpretation 1 (drag state incomplete)"))}else Ve=table1,Ie=table2,console.log("🔗 Fallback to Interpretation 1 (no drag state)");Ve&&Ie?(Fe({sourceTable:Ve,targetTable:Ie,params:ae}),me(!0)):console.warn("❌ PK table or FK table not found")}catch(se){console.error("❌ Error preparing relationship dialog:",se)}},[t,ro]),Ef=f.useCallback(ae=>{try{const{sourceTable:se,targetTable:he,primaryKey:pe,fkFieldName:Te,useExistingField:Ve,existingFieldId:Ie,createNewField:tt}=ae;console.log("🔗 Creating relationship with config:",ae);let ht;if(Ve&&Ie){if(ht=he.fields.find($t=>$t.id===Ie),ht){const $t=he.fields.map(oo=>oo.id===Ie?{...oo,is_foreign_key:!0,foreign_key_reference:{referenced_table_id:se.id,referenced_field_id:pe.id,constraint_name:`fk_${he.name}_${Te}`,on_delete:"NO ACTION",on_update:"NO ACTION"}}:oo);h(he.id,{fields:$t}),ht=$t.find(oo=>oo.id===Ie)}}else tt&&(ht={id:lt(),name:Te,data_type:pe.data_type,type_parameters:pe.type_parameters,nullable:!0,is_foreign_key:!0,foreign_key_reference:{referenced_table_id:se.id,referenced_field_id:pe.id,constraint_name:`fk_${he.name}_${Te}`,on_delete:"NO ACTION",on_update:"NO ACTION"},comment:`Foreign key to ${se.name}.${pe.name}`,logical_name:pe.logical_name||pe.name},h(he.id,{fields:[...he.fields||[],ht]}));if(ht){const $t=g({id:lt(),source_table_id:se.id,target_table_id:he.id,source_field_id:pe.id,target_field_id:ht.id,relationship_type:"one_to_many",constraint_name:`fk_${he.name}_${Te}`,fk_table_id:he.id,fk_field_id:ht.id,foreign_key_reference:{referenced_table_id:se.id,referenced_field_id:pe.id,constraint_name:`fk_${he.name}_${Te}`,on_delete:"NO ACTION",on_update:"NO ACTION"}});console.log("✅ Relationship created successfully!",$t)}Fe(null)}catch(se){console.error("❌ Error creating relationship:",se)}},[h,g]),Xi=f.useCallback(ae=>{ae.preventDefault(),ae.dataTransfer.dropEffect="move"},[]),aT=f.useCallback(ae=>{ae.preventDefault();const se=zl.current.getBoundingClientRect(),he=ae.dataTransfer.getData("application/reactflow");if(typeof he>"u"||!he)return;const pe=ql.screenToFlowPosition({x:ae.clientX-se.left,y:ae.clientY-se.top});if(he==="new_table")ze();else if(he==="new_metric_view")st();else if(he==="new_traditional_view")At();else if(he.startsWith("existing_"))console.log("Existing table drag:",he);else if(he.startsWith("template_")){const Te=he.replace("template_","");iT(Te,pe)}},[ql,N]),iT=(ae,se)=>{let he="",pe=[];switch(ae){case"customer":he="customers",pe=[{id:lt(),name:"customer_id",data_type:"BIGINT",nullable:!1,is_primary_key:!0,comment:"Unique customer identifier"},{id:lt(),name:"first_name",data_type:"STRING",nullable:!1,comment:"Customer first name"},{id:lt(),name:"last_name",data_type:"STRING",nullable:!1,comment:"Customer last name"},{id:lt(),name:"email",data_type:"STRING",nullable:!0,comment:"Customer email address"}];break;case"order":he="orders",pe=[{id:lt(),name:"order_id",data_type:"BIGINT",nullable:!1,is_primary_key:!0,comment:"Unique order identifier"},{id:lt(),name:"customer_id",data_type:"BIGINT",nullable:!1,is_foreign_key:!0,comment:"Reference to customer"},{id:lt(),name:"order_date",data_type:"TIMESTAMP",nullable:!1,comment:"Order date and time"},{id:lt(),name:"total_amount",data_type:"DECIMAL",type_parameters:{precision:10,scale:2},nullable:!1,comment:"Total order amount"}];break;case"product":he="products",pe=[{id:lt(),name:"product_id",data_type:"BIGINT",nullable:!1,is_primary_key:!0,comment:"Unique product identifier"},{id:lt(),name:"product_name",data_type:"STRING",nullable:!1,comment:"Product name"},{id:lt(),name:"price",data_type:"DECIMAL",type_parameters:{precision:10,scale:2},nullable:!1,comment:"Product price"},{id:lt(),name:"category",data_type:"STRING",nullable:!0,comment:"Product category"}];break;default:return}const Te={id:lt(),name:he,logical_name:he.charAt(0).toUpperCase()+he.slice(1),comment:`Template ${ae} table`,table_type:"MANAGED",file_format:"DELTA",position_x:se.x,position_y:se.y,width:220,height:180,fields:pe};M(Te)},sT=f.useCallback((ae,se)=>{try{se.type==="table"?(h(se.id,{position_x:se.position.x,position_y:se.position.y}),console.log("🔧 Updated table position:",se.id)):se.type==="metricView"?P(se.id,{position_x:se.position.x,position_y:se.position.y}):se.type==="traditionalView"&&(F(se.id,{position_x:se.position.x,position_y:se.position.y}),console.log("🔧 Updated traditional view position:",se.id))}catch(he){console.error("Error updating node position:",he)}},[h,P,F]),Hl=f.useCallback(ae=>{try{const{nodes:se,edges:he}=JJ(Ki,Yi,ae);Ho([...se]),Na([...he]),se.forEach(pe=>{h(pe.id,{position_x:pe.position.x,position_y:pe.position.y})})}catch(se){console.error("Error applying layout:",se)}},[Ki,Yi,Ho,Na,h]),lT=f.useCallback(ae=>{try{const se=(ae==null?void 0:ae.nodes)||[],he=(ae==null?void 0:ae.edges)||[],pe=se.filter(Ie=>Ie.type==="table"),Te=se.filter(Ie=>Ie.type==="metricView"),Ve=se.filter(Ie=>Ie.type==="traditionalView");if(w(pe),v(Te),x(Ve),he&&Array.isArray(he)){const Ie=he.map(tt=>{var ht;return(ht=tt.data)==null?void 0:ht.relationship}).filter(Boolean);_(Ie)}else _([])}catch(se){console.error("Error handling selection change:",se),w([]),v([]),x([]),_([])}},[w,v,x,_]),$f=f.useCallback(ae=>{if(ae.key==="Delete"||ae.key==="Backspace"){let se=!1,he="";if(i&&i.length>0){se=!0;const pe=i.map(Te=>{var Ve,Ie;return((Ie=(Ve=Te.data)==null?void 0:Ve.table)==null?void 0:Ie.name)||"Unknown"}).join(", ");he+=i.length===1?`Delete table "${pe}"`:`Delete ${i.length} tables (${pe})`}if(s&&s.length>0){se=!0,he&&(he+=" and ");const pe=s.map(Te=>{var Ve,Ie;return((Ie=(Ve=Te.data)==null?void 0:Ve.metricView)==null?void 0:Ie.name)||"Unknown"}).join(", ");he+=s.length===1?`metric view "${pe}"`:`${s.length} metric views (${pe})`}if(c&&c.length>0){se=!0,he&&(he+=" and ");const pe=c.map(Te=>{var Ve,Ie;return((Ie=(Ve=Te.data)==null?void 0:Ve.traditionalView)==null?void 0:Ie.name)||"Unknown"}).join(", ");he+=c.length===1?`traditional view "${pe}"`:`${c.length} traditional views (${pe})`}u&&u.length>0&&(se=!0,he&&(he+=" and "),he+=u.length===1?"1 relationship":`${u.length} relationships`),se&&window.confirm(`Are you sure you want to ${he}?`)&&(i.forEach(pe=>{var Te,Ve;(Ve=(Te=pe.data)==null?void 0:Te.table)!=null&&Ve.id&&V(pe.data.table.id)}),s.forEach(pe=>{var Te,Ve;(Ve=(Te=pe.data)==null?void 0:Te.metricView)!=null&&Ve.id&&I(pe.data.metricView.id)}),c.forEach(pe=>{var Te,Ve;(Ve=(Te=pe.data)==null?void 0:Te.traditionalView)!=null&&Ve.id&&B(pe.data.traditionalView.id)}),u.forEach(pe=>{pe.id&&y(pe.id)}),w([]),v([]),x([]),_([])),ae.preventDefault()}},[i,c,u,V,B,y,w,x,_]);return f.useEffect(()=>{const ae=se=>{["INPUT","TEXTAREA","SELECT"].includes(se.target.tagName)||$f(se)};return document.addEventListener("keydown",ae),()=>{document.removeEventListener("keydown",ae)}},[$f]),f.useCallback(async()=>{var ae;console.log("handleGenerateDDL called, selectedTables:",i);try{const se=i.map(tt=>tt.id);console.log("Selected table IDs:",se);const pe=((ae=(await b(se.length>0?se:[])).ddl_statements)==null?void 0:ae.map(tt=>tt.ddl).join(`

`))||"No DDL generated",Te=new Blob([pe],{type:"text/sql"}),Ve=URL.createObjectURL(Te),Ie=document.createElement("a");Ie.href=Ve,Ie.download=`${(d==null?void 0:d.name)||"tables"}_ddl.sql`,Ie.click(),URL.revokeObjectURL(Ve)}catch(se){console.error("Error generating DDL:",se)}},[i,b,d]),f.useCallback(async()=>{console.log("🚀 handleApplyChanges called, selectedTables:",i),console.log("🚀 Current project:",d),console.log("🚀 Catalog/Schema:",p,"/",m);try{const ae=i.map(he=>he.id);console.log("🚀 Selected table IDs for apply:",ae),console.log("🚀 Calling applyChanges...");const se=await S(ae.length>0?ae:[],!0);if(console.log("📋 Apply changes result:",se),se&&se.results){const he=se.results.filter(Ve=>Ve.success).length,pe=se.results.length,Te=pe-he;if(console.log(`📊 Apply results: ${he}/${pe} tables successful to ${se.catalog_name}.${se.schema_name}`),he===pe){const Ve=se.results.filter(Ie=>Ie.success&&Ie.warnings&&Ie.warnings.length>0);if(Ve.length>0){const Ie=Ve.map(tt=>({title:`Table: ${tt.table_name}`,message:tt.warnings.join("; ")}));le({title:"Applied with Warnings",message:`✅ Successfully applied all ${pe} tables to ${se.catalog_name}.${se.schema_name}, but some operations had warnings.`,details:`Target: ${se.catalog_name}.${se.schema_name}`,errors:Ie}),Y(!0)}else alert(`✅ Successfully applied all ${pe} tables to ${se.catalog_name}.${se.schema_name}`)}else if(Te>0){const Ie=se.results.filter($t=>!$t.success).map($t=>({title:`Table: ${$t.table_name}`,message:$t.error||"Unknown error occurred"})),tt=he>0?"Partial Failure":"Apply Failed",ht=he>0?`${he} of ${pe} tables were applied successfully, but ${Te} failed.`:`Failed to apply any of the ${pe} selected tables to ${se.catalog_name}.${se.schema_name}.`;le({title:tt,message:ht,details:`Target: ${se.catalog_name}.${se.schema_name}`,errors:Ie}),Y(!0)}}}catch(ae){console.error("❌ Error applying changes:",ae),alert(`Error applying changes: ${ae.message||ae}`)}},[i,S,d,p,m]),(!t||t.length===0)&&(!n||n.length===0)&&(!r||r.length===0)?l.jsx(te,{style:{width:"100%",height:"95vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"20px"},children:l.jsxs(te,{style:{textAlign:"center",maxWidth:"700px"},children:[l.jsx("h1",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#FF3621",fontWeight:"700",letterSpacing:"-0.02em",textShadow:"0 2px 4px rgba(255, 54, 33, 0.1)"},children:"Welcome to Bricks Data Modeler"}),l.jsxs("p",{style:{fontSize:"1.3rem",color:"#0B2026",marginBottom:"3rem",lineHeight:"1.5",fontWeight:"400"},children:["Entity Relationship Diagram tool for Databricks Unity Catalog.",l.jsx("br",{}),"Start by creating tables, metric views, or importing existing data structures."]}),l.jsx(te,{style:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap",marginBottom:"3rem"},children:l.jsx(R,{size:"4",style:{color:"#6B7280",textAlign:"center",fontStyle:"italic"},children:"Use the dropdown menus above to create tables, views, or import from Databricks"})}),l.jsxs(te,{className:"welcome-features-box",children:[l.jsx("h3",{className:"welcome-features-title",children:"Key Features"}),l.jsxs("div",{className:"welcome-features-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",textAlign:"left"},children:[l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"Visual ERD:"})," Drag-and-drop table design with intuitive interface"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"Data Types:"})," Databricks type support including some complex types"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"Constraints:"})," Primary keys, foreign keys & relationships"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"Metric Views:"})," Advanced analytics with nested joins & USING clauses"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"DDL Export:"})," Generate & apply SQL scripts to Databricks"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#FF3621"},children:"Unity Catalog:"})," Direct Databricks integration & import"]})]})]})]})}):l.jsxs(s_,{children:[l.jsxs(te,{style:{width:"100%",height:"95vh",position:"relative"},children:[l.jsx(aee,{onTableCreate:ze,onMetricViewCreate:st,onTraditionalViewCreate:At,onDragStart:(ae,se)=>{console.log("Dragging:",se)}}),l.jsxs(N9,{ref:zl,nodes:Ki,edges:Yi,onNodesChange:bf,onEdgesChange:Cf,onConnect:jf,onConnectStart:Vl,onConnectEnd:Sf,onInit:wf,onDrop:aT,onDragOver:Xi,onNodeDragStop:sT,onNodeDrag:(ae,se)=>{},onSelectionChange:lT,nodeTypes:ue,connectionLineType:kr.SmoothStep,multiSelectionKeyCode:["Meta","Ctrl"],selectNodesOnDrag:!0,fitView:!0,style:{background:"#FFFFFF"},children:[l.jsx(YW,{}),l.jsx(BW,{nodeColor:ae=>{switch(ae.type){case"table":return"#e0f2fe";default:return"#eee"}}}),l.jsx(tK,{variant:"dots",gap:12,size:1}),l.jsx(fl,{position:"top-right",children:l.jsx(O,{gap:"2",children:l.jsxs(Le.Root,{children:[l.jsx(Le.Trigger,{children:l.jsxs(xe,{variant:"surface",size:"2",children:[l.jsx($i,{})," Layout"]})}),l.jsxs(Le.Content,{children:[l.jsx(Le.Item,{onClick:()=>Hl("TB"),children:"Top to Bottom"}),l.jsx(Le.Item,{onClick:()=>Hl("BT"),children:"Bottom to Top"}),l.jsx(Le.Item,{onClick:()=>Hl("LR"),children:"Left to Right"}),l.jsx(Le.Item,{onClick:()=>Hl("RL"),children:"Right to Left"})]})]})})}),(i&&i.length>0||s&&s.length>0||c&&c.length>0||u&&u.length>0)&&l.jsx(fl,{position:"top-center",children:l.jsx(Je,{children:l.jsxs(O,{align:"center",gap:"3",px:"3",py:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:(()=>{const ae=[];return i.length>0&&ae.push(`${i.length} table${i.length>1?"s":""}`),s.length>0&&ae.push(`${s.length} metric view${s.length>1?"s":""}`),c.length>0&&ae.push(`${c.length} view${c.length>1?"s":""}`),u.length>0&&ae.push(`${u.length} relationship${u.length>1?"s":""}`),ae.join(" and ")+" selected"})()}),l.jsx(R,{size:"1",color:"gray",children:"(Press Delete key or use the button)"}),l.jsxs(xe,{variant:"surface",color:"red",size:"2",onClick:()=>$f({key:"Delete",preventDefault:()=>{}}),children:[l.jsx(gn,{})," Delete"]}),l.jsx(xe,{variant:"ghost",size:"2",onClick:()=>{w([]),v([]),x([]),_([])},children:"Clear Selection"})]})})})]})]}),l.jsx(YJ,{showDialog:Ce,setShowDialog:me,sourceTable:Oe==null?void 0:Oe.sourceTable,targetTable:Oe==null?void 0:Oe.targetTable,onConfirm:Ef}),l.jsx(ZJ,{open:oe,onClose:()=>{E(!1),k({sourceTable:null,targetMetricView:null})},sourceTable:q.sourceTable,targetMetricView:q.targetMetricView,onSave:_f}),l.jsx(zy,{isOpen:ge,onClose:()=>{Ee(!1),_e(null)},onApply:sf,projectData:d}),l.jsx(qy,{isOpen:Pe,onClose:()=>{ne(!1),je(null)},onGenerateDDL:lf,projectData:d,tableIds:Se?[Se]:null}),l.jsx(qy,{isOpen:De,onClose:()=>{Ge(!1),at(null)},onGenerateDDL:cf,projectData:d,tableIds:We?[We]:null}),l.jsx(zy,{isOpen:Be,onClose:()=>{Ne(!1),at(null)},onApply:uf,projectData:d}),l.jsx(XJ,{isOpen:G,onClose:()=>Y(!1),title:Z==null?void 0:Z.title,message:Z==null?void 0:Z.message,details:Z==null?void 0:Z.details,errors:Z==null?void 0:Z.errors})]})},see=()=>{const{displayAlertDialog:e,currentAlertDialogErrorType:t,errors:n,toggleAlertDialog:r}=ct();let o,a=()=>l.jsx(l.Fragment,{}),i={loadCatalogs:n.loadCatalogs,loadSchemas:n.loadSchemas,loadTables:n.loadTables,importTables:n.importTables,saveProject:n.saveProject,loadProject:n.loadProject,generateDDL:n.generateDDL,applyChanges:n.applyChanges};return t==="loadCatalogs"?(o="Error Loading Catalogs",a=()=>l.jsx(R,{children:"Failed to load Databricks catalogs. Please check your connection and permissions."})):t==="loadSchemas"?(o="Error Loading Schemas",a=()=>l.jsx(R,{children:"Failed to load schemas from the selected catalog. Please try again."})):t==="loadTables"?(o="Error Loading Tables",a=()=>l.jsx(R,{children:"Failed to load tables from the selected schema. Please try again."})):t==="importTables"?(o="Error Importing Tables",a=()=>{const s=i[t];return s&&s.validation_errors?l.jsxs(ta,{columns:"1",gap:"3",children:[l.jsx(R,{children:"Failed to import tables:"}),s.validation_errors.map((c,u)=>{var d;return l.jsx(te,{children:l.jsxs(R,{size:"2",color:"red",children:['Field: "',((d=c.loc)==null?void 0:d.join("."))||"unknown",'" - ',c.msg]})},u)})]}):l.jsx(R,{children:"Failed to import tables. Please check the selected tables and try again."})}):t==="saveProject"?(o="Error Saving Project",a=()=>l.jsx(R,{children:"Failed to save the project. Please check the project name and try again."})):t==="loadProject"?(o="Error Loading Project",a=()=>l.jsx(R,{children:"Failed to load the selected project. The file may be corrupted or inaccessible."})):t==="generateDDL"?(o="Error Generating DDL",a=()=>l.jsx(R,{children:"Failed to generate DDL for the selected tables. Please check your table definitions."})):t==="applyChanges"&&(o="Error Applying Changes",a=()=>l.jsx(R,{children:"Failed to apply changes to Databricks. Please check your permissions and connection."})),l.jsx("div",{className:"alert-dialog-component-ctr",children:l.jsx(xc.Root,{open:e,children:l.jsxs(xc.Content,{children:[l.jsx(xc.Title,{children:o}),l.jsx(a,{}),l.jsx(O,{gap:"3",mt:"4",justify:"end",children:l.jsx(xc.Action,{children:l.jsx(xe,{variant:"solid",color:"blue",onClick:()=>r(),children:"Dismiss"})})})]})})})},lee=({isOpen:e,onClose:t,field:n,tableId:r,onSave:o})=>{var S,$,N,T;const{availableDatatypes:a,tables:i}=ct(),[s,c]=f.useState({id:"",name:"",logical_name:"",data_type:"STRING",type_parameters:"",nullable:!0,comment:"",is_primary_key:!1,is_foreign_key:!1,foreign_key_reference:null,tags:{}}),[u,d]=f.useState([]),[p,m]=f.useState(""),[h,g]=f.useState("");f.useEffect(()=>{if(e&&n){c({id:n.id||lt(),name:n.name||"",logical_name:n.logical_name||"",data_type:n.data_type||"STRING",type_parameters:n.type_parameters||"",nullable:n.nullable!==!1,comment:n.comment||"",is_primary_key:n.is_primary_key||!1,is_foreign_key:n.is_foreign_key||!1,foreign_key_reference:n.foreign_key_reference||null,tags:n.tags||{}});const C=n.tags||{},D=Object.entries(C).filter(([L])=>L!=="logical_name").map(([L,K])=>({id:lt(),key:L,value:K||""}));d(D)}},[e,n]);const y=()=>{console.log("💾 handleSave called"),console.log("💾 Current customTags:",u),console.log("💾 Current fieldData.logical_name:",s.logical_name);const C={};s.logical_name&&s.logical_name.trim()&&(C.logical_name=s.logical_name.trim(),console.log("💾 Added logical_name tag:",s.logical_name.trim())),u.forEach(L=>{console.log("💾 Processing custom tag:",L),L.key&&L.key.trim()&&(C[L.key.trim()]=L.value&&L.value.trim()?L.value.trim():null,console.log("💾 Added custom tag:",L.key.trim(),"=",L.value))});const D={...s,tags:C};console.log("💾 Final allTags:",C),console.log("💾 Saving field with tags:",C),o(D),t()},w=()=>{if(p.trim()){const C={id:lt(),key:p.trim(),value:h.trim()||""};console.log("🏷️ Adding new custom tag:",C),console.log("🏷️ Current customTags before add:",u),d([...u,C]),console.log("🏷️ CustomTags after add:",[...u,C]),m(""),g("")}},v=C=>{d(u.filter(D=>D.id!==C))},x=(C,D,L)=>{d(u.map(K=>K.id===C?{...K,[D]:L}:K))},b=i.find(D=>D.id===r)?i.filter(D=>D.id!==r).flatMap(D=>D.fields.filter(L=>L.is_primary_key).map(L=>({table_id:D.id,table_name:D.name,field_id:L.id,field_name:L.name,data_type:L.data_type,reference_string:`${D.name}.${L.name}`}))):[];return e?l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},children:[l.jsx(be.Title,{children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"5",weight:"bold",children:"Field Details"}),l.jsx(jn,{variant:"ghost",onClick:t,children:l.jsx(wo,{})})]})}),l.jsx(be.Description,{size:"2",mb:"4",color:"gray",children:"Configure field properties, constraints, and Unity Catalog tags."}),l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(Je,{style:{padding:"16px"},children:[l.jsx(Et,{size:"3",mb:"3",children:"Basic Properties"}),l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Field Name *"}),l.jsx(Ae.Input,{value:s.name,onChange:C=>c({...s,name:C.target.value}),placeholder:"Enter field name"})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Logical Name"}),l.jsx(Ae.Input,{value:s.logical_name,onChange:C=>c({...s,logical_name:C.target.value}),placeholder:"Enter logical/display name"}),l.jsx(R,{size:"1",color:"gray",mt:"1",children:"Will be automatically added as 'logical_name' tag"})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Data Type *"}),l.jsxs(W.Root,{value:s.data_type,onValueChange:C=>c({...s,data_type:C}),children:[l.jsx(W.Trigger,{}),l.jsx(W.Content,{children:a.map(C=>l.jsx(W.Item,{value:C.name,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(R,{children:C.name}),l.jsx(we,{size:"1",color:"gray",children:C.category})]})},C.name))})]})]}),((S=a.find(C=>C.name===s.data_type))==null?void 0:S.requires_parameters)&&l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:s.data_type==="DECIMAL"?"Precision & Scale":["VARCHAR","CHAR"].includes(s.data_type)?"Length":["GEOGRAPHY","GEOMETRY"].includes(s.data_type)?"SRID":s.data_type==="ARRAY"?"Element Type":s.data_type==="MAP"?"Key & Value Types":s.data_type==="STRUCT"?"Field Definitions":s.data_type==="INTERVAL"?"Interval Qualifier":"Parameters"}),s.data_type==="DECIMAL"?l.jsxs(O,{gap:"2",align:"center",children:[l.jsx(Ae.Input,{value:(($=s.type_parameters)==null?void 0:$.precision)||"",onChange:C=>c({...s,type_parameters:{...s.type_parameters,precision:C.target.value?parseInt(C.target.value):void 0}}),placeholder:"10",style:{width:"80px"}}),l.jsx(R,{size:"2",children:","}),l.jsx(Ae.Input,{value:((N=s.type_parameters)==null?void 0:N.scale)||"",onChange:C=>c({...s,type_parameters:{...s.type_parameters,scale:C.target.value?parseInt(C.target.value):void 0}}),placeholder:"2",style:{width:"60px"}})]}):l.jsx(Ae.Input,{value:s.type_parameters||"",onChange:C=>c({...s,type_parameters:C.target.value}),placeholder:((T=a.find(C=>C.name===s.data_type))==null?void 0:T.parameter_description)||"Enter parameters"}),l.jsx(R,{size:"1",color:"gray",mt:"1",children:s.data_type==="DECIMAL"?"Precision (1-38), Scale (0-precision)":["VARCHAR","CHAR"].includes(s.data_type)?"Maximum length (1-65535)":s.data_type==="GEOGRAPHY"?"SRID: Must be 4326 (only supported value)":s.data_type==="GEOMETRY"?"SRID: Integer value (e.g., 4326, 3857, 0 for unknown)":s.data_type==="ARRAY"?"Element data type (e.g., STRING, INT)":s.data_type==="MAP"?"Key type, Value type (e.g., STRING,INT)":s.data_type==="STRUCT"?"Field definitions (e.g., field1:STRING,field2:INT)":s.data_type==="INTERVAL"?"Interval qualifier (e.g., YEAR TO MONTH, DAY TO SECOND)":"Enter required parameters"})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Comment"}),l.jsx(Ae.Input,{value:s.comment,onChange:C=>c({...s,comment:C.target.value}),placeholder:"Optional field description"})]}),l.jsx(O,{align:"center",gap:"4",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Vt,{checked:s.nullable,onCheckedChange:C=>c({...s,nullable:C})}),l.jsx(R,{size:"2",children:"Nullable"})]})})]})]}),l.jsxs(Je,{style:{padding:"16px"},children:[l.jsx(Et,{size:"3",mb:"3",children:"Constraints"}),l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(O,{align:"center",gap:"4",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Vt,{checked:s.is_primary_key,onCheckedChange:C=>c({...s,is_primary_key:C,is_foreign_key:C?!1:s.is_foreign_key}),disabled:s.is_foreign_key}),l.jsx(R,{size:"2",children:"Primary Key"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Vt,{checked:s.is_foreign_key,onCheckedChange:C=>c({...s,is_foreign_key:C,is_primary_key:C?!1:s.is_primary_key,foreign_key_reference:C?s.foreign_key_reference:null}),disabled:s.is_primary_key}),l.jsx(R,{size:"2",children:"Foreign Key"})]})]}),s.is_foreign_key&&l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Foreign Key Reference"}),l.jsxs(W.Root,{value:s.foreign_key_reference?typeof s.foreign_key_reference=="string"?s.foreign_key_reference:`${s.foreign_key_reference.referenced_table_id}.${s.foreign_key_reference.referenced_field_id}`:"",onValueChange:C=>{if(C){const D=b.find(L=>L.reference_string===C);D&&c({...s,foreign_key_reference:{referenced_table_id:D.table_id,referenced_field_id:D.field_id,constraint_name:`fk_${s.name}`,on_delete:"NO ACTION",on_update:"NO ACTION"}})}else c({...s,foreign_key_reference:null})},children:[l.jsx(W.Trigger,{placeholder:"Select primary key to reference"}),l.jsx(W.Content,{children:b.map(C=>l.jsx(W.Item,{value:C.reference_string,children:l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"bold",children:C.reference_string}),l.jsx(R,{size:"1",color:"gray",children:C.data_type})]})},C.reference_string))})]})]})]})]}),l.jsxs(Je,{style:{padding:"16px"},children:[l.jsx(Et,{size:"3",mb:"3",children:"Unity Catalog Tags"}),s.logical_name&&l.jsxs(te,{mb:"3",children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Automatic Tags"}),l.jsxs(O,{align:"center",gap:"2",p:"2",style:{backgroundColor:"var(--gray-2)",borderRadius:"6px"},children:[l.jsx(we,{color:"blue",children:"logical_name"}),l.jsx(R,{size:"2",children:"="}),l.jsxs(R,{size:"2",style:{fontFamily:"monospace"},children:['"',s.logical_name,'"']})]})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Custom Tags"}),u.length>0&&l.jsx(O,{direction:"column",gap:"2",mb:"3",children:u.map(C=>l.jsxs(O,{align:"center",gap:"2",p:"2",style:{backgroundColor:"var(--gray-1)",borderRadius:"6px"},children:[l.jsx(Ae.Input,{value:C.key,onChange:D=>x(C.id,"key",D.target.value),placeholder:"Tag name",style:{flex:1}}),l.jsx(R,{size:"2",children:"="}),l.jsx(Ae.Input,{value:C.value,onChange:D=>x(C.id,"value",D.target.value),placeholder:"Tag value (optional)",style:{flex:1}}),l.jsx(jn,{size:"1",variant:"ghost",color:"red",onClick:()=>v(C.id),children:l.jsx(gn,{})})]},C.id))}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Add New Tag"}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Ae.Input,{value:p,onChange:C=>m(C.target.value),placeholder:"Tag name",style:{flex:1}}),l.jsx(R,{size:"2",children:"="}),l.jsx(Ae.Input,{value:h,onChange:C=>g(C.target.value),placeholder:"Tag value (optional)",style:{flex:1}}),l.jsx(xe,{size:"1",onClick:w,disabled:!p.trim(),children:l.jsx(Mn,{})})]})]})]})]})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(xe,{variant:"soft",color:"gray",onClick:t,children:"Cancel"}),l.jsx(xe,{onClick:y,disabled:!s.name.trim(),children:"Save Field"})]})]})}):null},cee=()=>{var Oe,Fe,oe;const{showTableDialog:e,setShowTableDialog:t,addTable:n,updateTable:r,tables:o,availableDatatypes:a,loadDatatypes:i,editingTable:s,setEditingTable:c,addRelationship:u,deleteRelationship:d,removeRelationshipLine:p,relationships:m,isDragAndDropFK:h,getPKFieldForFK:g,catalogName:y,schemaName:w,availableCatalogs:v,availableSchemas:x,loadCatalogs:_,loadSchemas:b}=ct(),[S,$]=f.useState({name:"",logical_name:"",comment:"",table_type:"MANAGED",file_format:"DELTA",catalog_name:"",schema_name:"",cluster_by_auto:!1,tags:{},height:180}),[N,T]=f.useState([]),[C,D]=f.useState({name:"",data_type:"STRING",type_parameters:{},nullable:!0,comment:"",logical_name:"",tags:{},is_primary_key:!1,is_foreign_key:!1,foreign_key_reference:null}),[L,K]=f.useState("table"),[H,M]=f.useState({}),[V,j]=f.useState(null),[P,I]=f.useState(!1),[A,z]=f.useState(null),U=E=>{var q;if(!E)return"";if(typeof E=="string")return E;if(typeof E=="object"){const k=o.find(Y=>Y.id===E.referenced_table_id),G=(q=k==null?void 0:k.fields)==null?void 0:q.find(Y=>Y.id===E.referenced_field_id);return k&&G?`${k.name}.${G.name}`:""}return""},F=E=>{var Z;if(!E||!E.includes("."))return null;const[q,k]=E.split("."),G=o.find(le=>le.name===q),Y=(Z=G==null?void 0:G.fields)==null?void 0:Z.find(le=>le.name===k);return G&&Y?{referenced_table_id:G.id,referenced_field_id:Y.id,constraint_name:`fk_${S.name}_${q}`,on_delete:"NO ACTION",on_update:"NO ACTION"}:null};f.useEffect(()=>{e&&(i(),_())},[e,i,_]),f.useEffect(()=>{V&&j(null)},[S.name,S.logical_name,N]),f.useEffect(()=>{S.catalog_name&&b(S.catalog_name)},[S.catalog_name,b]),f.useEffect(()=>{var E;if(e){if(s){const q=((E=s.fields)==null?void 0:E.length)||0;$({name:s.name||"",logical_name:s.logical_name||"",comment:s.comment||"",table_type:"MANAGED",file_format:"DELTA",catalog_name:s.catalog_name||"",schema_name:s.schema_name||"",cluster_by_auto:s.cluster_by_auto||!1,tags:s.tags||{},height:Math.max(180,120+q*25)});const k=s.fields||[];T(k)}else $({name:"",logical_name:"",comment:"",catalog_name:y||"",schema_name:w||"",table_type:"MANAGED",file_format:"DELTA",cluster_by_auto:!1,tags:{},height:180}),T([]);D({name:"",data_type:"STRING",type_parameters:{},nullable:!0,comment:"",logical_name:"",tags:{},is_primary_key:!1,is_foreign_key:!1,foreign_key_reference:null}),M({}),K("table")}},[e,s]);const B=()=>{const E={};let q=null,k=null;return S.name.trim()||(E.tableName="Table name is required",q="Table name is required. Please go to Table Details tab and enter a table name.",k="table"),!s&&!S.logical_name.trim()&&(E.logicalName="Logical name is required",q||(q="Logical name is required. Please go to Table Details tab and enter a logical name.",k="table")),o.find(Z=>Z.name.toLowerCase()===S.name.toLowerCase()&&(!s||Z.id!==s.id))&&(E.tableName="A table with this name already exists",q=`A table with the name "${S.name}" already exists. Please choose a different name.`,k="table"),N.filter(Z=>Z.is_primary_key).length>1&&(E.primaryKey="Only one field can be marked as primary key",q||(q="Only one field can be marked as primary key. Please go to Fields tab and fix this.",k="fields")),N.forEach((Z,le)=>{Z.is_foreign_key&&!Z.foreign_key_reference?(console.log("❌ FK validation failed for field:",Z.name,"is_foreign_key:",Z.is_foreign_key,"reference:",Z.foreign_key_reference),E[`fk_${le}`]="Foreign key must reference a primary key from another table",q||(q=`Field "${Z.name}" is marked as foreign key but has no reference. Please go to Fields tab and fix this.`,k="fields")):Z.is_foreign_key&&Z.foreign_key_reference}),M(E),j(q?{message:q,suggestedTab:k}:null),Object.keys(E).length===0},X=()=>{if(!C.name.trim()){M({...H,fieldName:"Field name is required"});return}if(N.find(G=>G.name.toLowerCase()===C.name.toLowerCase())){M({...H,fieldName:"A field with this name already exists"});return}const q=[...N,{...C,id:lt()}];T(q);const k=Math.max(180,120+q.length*25);$(G=>({...G,height:k})),D({name:"",data_type:"STRING",type_parameters:{},nullable:!0,comment:"",logical_name:"",tags:{},is_primary_key:!1,is_foreign_key:!1,foreign_key_reference:null}),M({...H,fieldName:void 0})},Q=E=>{const q=N.find(Y=>Y.id===E);q&&q.is_foreign_key&&(console.log("🗑️ Removing FK field and its relationships:",q.name),m.filter(Z=>Z.target_field_id===E).forEach(Z=>{console.log("🗑️ Removing relationship line for deleted FK field:",Z.id),p(Z.id)}));const k=N.filter(Y=>Y.id!==E);T(k);const G=Math.max(180,120+k.length*25);$(Y=>({...Y,height:G}))},J=(E,q)=>{T(N.map(k=>{if(k.id===E){const G={...k,...q};if(q.logical_name!==void 0){const Y=G.tags||{};q.logical_name&&q.logical_name.trim()?Y.logical_name=q.logical_name.trim():delete Y.logical_name,G.tags=Y}return G}return k}))},ee=E=>{z(E),I(!0)},ie=E=>{const q=N.map(k=>k.id===E.id?E:k);T(q),I(!1),z(null)},fe=(E,q)=>{q?T(N.map(k=>({...k,is_primary_key:k.id===E}))):J(E,{is_primary_key:!1})},ue=E=>{E.fields.filter(k=>k.is_foreign_key&&k.foreign_key_reference).forEach(k=>{var le,ge,Ee;const G=m.filter(ye=>ye.target_table_id===E.id&&ye.target_field_id===k.id);G.length>0&&G.forEach(ye=>{p(ye.id)});let Y,Z;if(typeof k.foreign_key_reference=="string"){const[ye,_e]=k.foreign_key_reference.split(".");Y=o.find(Pe=>Pe.name===ye),Z=(le=Y==null?void 0:Y.fields)==null?void 0:le.find(Pe=>Pe.name===_e)}else typeof k.foreign_key_reference=="object"&&(Y=o.find(ye=>ye.id===k.foreign_key_reference.referenced_table_id),Z=(ge=Y==null?void 0:Y.fields)==null?void 0:ge.find(ye=>ye.id===k.foreign_key_reference.referenced_field_id));if(!Y){console.warn("❌ Referenced table not found for FK:",k.foreign_key_reference),console.log("Available tables:",o.map(ye=>({id:ye.id,name:ye.name})));return}if(!Z){console.warn(`❌ Referenced field not found in table ${Y.name}`),console.log("Available fields in table:",(Ee=Y.fields)==null?void 0:Ee.map(ye=>({id:ye.id,name:ye.name})));return}console.log("✅ Creating new relationship (after cleanup):",{pk_table:Y.name,fk_table:E.name,pk_field:Z.name,fk_field:k.name}),u({id:lt(),source_table_id:Y.id,target_table_id:E.id,source_field_id:Z.id,target_field_id:k.id,relationship_type:"one_to_many",constraint_name:`fk_${E.name}_${k.name}`,fk_table_id:E.id,fk_field_id:k.id})})},Ce=()=>{if(!B()){console.log("❌ Validation failed");return}if(s){const E={...s,name:S.name,logical_name:S.logical_name,comment:S.comment,table_type:S.table_type,file_format:S.file_format,catalog_name:S.catalog_name,schema_name:S.schema_name,cluster_by_auto:S.cluster_by_auto,tags:S.tags,fields:N,height:S.height};r(s.id,E);try{ue(E)}catch(q){console.error("❌ Error creating relationships:",q)}}else{console.log("➕ Creating new table:",S.name);const E={id:lt(),name:S.name,logical_name:S.logical_name,comment:S.comment,table_type:S.table_type,file_format:S.file_format,catalog_name:S.catalog_name,schema_name:S.schema_name,cluster_by_auto:S.cluster_by_auto,tags:S.tags,fields:N,position_x:100,position_y:100,width:220,height:S.height};n(E);try{ue(E)}catch(q){console.error("❌ Error creating relationships:",q)}}t(!1),$({name:"",logical_name:"",comment:"",table_type:"MANAGED",file_format:"DELTA",cluster_by_auto:!1,tags:{}}),T([]),M({})},me=(E=null)=>{const q=s?s.name:S.name,k=o.filter(Z=>Z.name!==q),G=[],Y=new Set;return N.forEach(Z=>{var le,ge;if(Z.id!==E&&Z.is_foreign_key&&Z.foreign_key_reference){let Ee="",ye,_e;if(typeof Z.foreign_key_reference=="string"){Ee=Z.foreign_key_reference;const[Pe,ne]=Z.foreign_key_reference.split(".");ye=k.find(Se=>Se.name===Pe),_e=(le=ye==null?void 0:ye.fields)==null?void 0:le.find(Se=>Se.name===ne)}else typeof Z.foreign_key_reference=="object"&&(ye=k.find(Pe=>Pe.id===Z.foreign_key_reference.referenced_table_id),_e=(ge=ye==null?void 0:ye.fields)==null?void 0:ge.find(Pe=>Pe.id===Z.foreign_key_reference.referenced_field_id),ye&&_e&&(Ee=`${ye.name}.${_e.name}`));_e&&Z.name===_e.name&&Y.add(Ee)}}),k.forEach(Z=>{var le;(le=Z.fields)==null||le.forEach(ge=>{if(ge.is_primary_key){const Ee=`${Z.name}.${ge.name}`;Y.has(Ee)||G.push({value:Ee,label:`${Ee} (${ge.data_type})`})}})}),G};return e?l.jsxs(be.Root,{open:e,onOpenChange:E=>{E||c(null),t(E)},children:[l.jsxs(jl,{children:[l.jsx(El,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}),l.jsxs(be.Content,{style:{maxWidth:1200,maxHeight:"90vh",overflow:"auto"},"aria-describedby":void 0,onOpenAutoFocus:E=>E.preventDefault(),children:[l.jsx(be.Title,{children:s?`Edit Table: ${s.name}`:"Create New Table"}),l.jsx(be.Description,{size:"2",mb:"4",children:s?"Modify your table structure, fields, constraints, and relationships.":"Define your table structure with fields, constraints, and relationships."}),V&&l.jsx(te,{mb:"4",p:"3",style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px"},children:l.jsxs(O,{align:"start",justify:"between",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"2",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"bold",color:"red",children:"Validation Error"}),l.jsx(R,{size:"2",color:"red",children:V.message}),V.suggestedTab&&l.jsxs(xe,{size:"1",variant:"soft",color:"red",onClick:()=>{K(V.suggestedTab),j(null)},style:{alignSelf:"flex-start"},children:["Go to ",V.suggestedTab==="table"?"Table Details":"Fields"," Tab"]})]}),l.jsx(xe,{size:"1",variant:"ghost",color:"red",onClick:()=>j(null),children:"✕"})]})}),l.jsxs(Qe.Root,{value:L,onValueChange:K,children:[l.jsxs(Qe.List,{children:[l.jsx(Qe.Trigger,{value:"table",children:"Table Details"}),l.jsxs(Qe.Trigger,{value:"fields",children:["Fields (",N.length,")"]})]}),l.jsxs(te,{pt:"3",children:[l.jsx(Qe.Content,{value:"table",children:l.jsxs(ta,{columns:"2",gap:"4",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Table Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., customers, orders, products",value:S.name,onChange:E=>$({...S,name:E.target.value})}),H.tableName&&l.jsx(R,{size:"1",color:"red",children:H.tableName})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Logical Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., Customer Master, Order Details",value:S.logical_name,onChange:E=>$({...S,logical_name:E.target.value})}),H.logicalName&&l.jsx(R,{size:"1",color:"red",children:H.logicalName})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Catalog"}),l.jsxs(W.Root,{value:S.catalog_name||"__project_default_catalog__",onValueChange:E=>$({...S,catalog_name:E==="__project_default_catalog__"?"":E,schema_name:""}),children:[l.jsx(W.Trigger,{placeholder:"Select catalog (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_catalog__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",y,")"]})}),v==null?void 0:v.map(E=>l.jsx(W.Item,{value:E.name,children:E.name},E.name))]})]})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Schema"}),l.jsxs(W.Root,{value:S.schema_name||"__project_default_schema__",onValueChange:E=>$({...S,schema_name:E==="__project_default_schema__"?"":E}),children:[l.jsx(W.Trigger,{placeholder:"Select schema (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_schema__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",w,")"]})}),x==null?void 0:x.map(E=>l.jsx(W.Item,{value:E.name,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsx(R,{children:E.name}),E.is_imported&&l.jsx(we,{color:"orange",size:"1",style:{marginLeft:"8px"},children:"imported"})]})},E.name))]})]})]}),l.jsx(te,{style:{gridColumn:"span 2"},children:l.jsxs(O,{align:"center",gap:"2",mt:"3",mb:"3",children:[l.jsx(Vt,{checked:S.cluster_by_auto,onCheckedChange:E=>$({...S,cluster_by_auto:E})}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",children:"Enable Automatic Liquid Clustering"}),l.jsx(R,{size:"1",color:"gray",style:{display:"block",marginTop:"2px"},children:"Automatically optimizes data layout for better query performance"})]})]})}),l.jsxs(te,{style:{gridColumn:"span 2"},children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Description"}),l.jsx(rr,{placeholder:"Optional table description",value:S.comment,onChange:E=>$({...S,comment:E.target.value}),rows:3,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Table Type"}),l.jsx(R,{size:"2",color:"gray",children:"Managed (Unity Catalog)"})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"File Format"}),l.jsx(R,{size:"2",color:"gray",children:"Delta Lake"})]})]})}),l.jsxs(Qe.Content,{value:"fields",children:[H.primaryKey&&l.jsx(R,{size:"2",color:"red",mb:"3",children:H.primaryKey}),l.jsxs(Je,{mb:"4",children:[l.jsx(Et,{size:"4",mb:"3",children:"Add New Field"}),l.jsxs(ta,{columns:"4",gap:"3",mb:"3",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Field Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., id, name, email",value:C.name,onChange:E=>D({...C,name:E.target.value})}),H.fieldName&&l.jsx(R,{size:"1",color:"red",children:H.fieldName})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Data Type"}),l.jsxs(W.Root,{value:C.data_type,onValueChange:E=>D({...C,data_type:E,type_parameters:E==="DECIMAL"?C.type_parameters:null}),children:[l.jsx(W.Trigger,{}),l.jsx(W.Content,{children:a.map(E=>l.jsx(W.Item,{value:E.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(R,{children:E.name}),l.jsx(we,{size:"1",color:"gray",children:E.category})]})},E.value))})]})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Logical Name"}),l.jsx(Ae.Input,{placeholder:"e.g., Customer ID, Full Name",value:C.logical_name,onChange:E=>D({...C,logical_name:E.target.value})})]})]}),C.data_type==="DECIMAL"&&l.jsxs(ta,{columns:"2",gap:"3",mb:"3",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Precision (1-38)"}),l.jsx(Ae.Input,{type:"number",min:"1",max:"38",placeholder:"10",value:((Oe=C.type_parameters)==null?void 0:Oe.precision)||"",onChange:E=>D({...C,type_parameters:{...C.type_parameters,precision:E.target.value?parseInt(E.target.value):void 0}})})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Scale (0-precision)"}),l.jsx(Ae.Input,{type:"number",min:"0",max:((Fe=C.type_parameters)==null?void 0:Fe.precision)||38,placeholder:"2",value:((oe=C.type_parameters)==null?void 0:oe.scale)||"",onChange:E=>D({...C,type_parameters:{...C.type_parameters,scale:E.target.value?parseInt(E.target.value):void 0}})})]})]}),l.jsx(ta,{columns:"1",gap:"3",mb:"3",children:l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"Comment"}),l.jsx(Ae.Input,{placeholder:"Field description",value:C.comment,onChange:E=>D({...C,comment:E.target.value})})]})}),l.jsxs(O,{gap:"3",align:"center",mb:"3",children:[l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Vt,{checked:C.is_primary_key,onCheckedChange:E=>D({...C,is_primary_key:E})}),l.jsx(R,{size:"2",children:"Primary Key"})]}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Vt,{checked:C.is_foreign_key,onCheckedChange:E=>D({...C,is_foreign_key:E})}),l.jsx(R,{size:"2",children:"Foreign Key"})]}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Vt,{checked:C.nullable,onCheckedChange:E=>D({...C,nullable:E})}),l.jsx(R,{size:"2",children:"Nullable"})]})]}),C.is_foreign_key&&l.jsxs(te,{mb:"3",children:[l.jsx(R,{size:"2",weight:"bold",mb:"1",children:"References Primary Key"}),l.jsxs(W.Root,{value:U(C.foreign_key_reference),onValueChange:E=>D({...C,foreign_key_reference:F(E)}),onOpenChange:E=>{E&&me(C.id)},children:[l.jsx(W.Trigger,{placeholder:"Select primary key to reference"}),l.jsx(W.Content,{children:me(C.id).map(E=>l.jsx(W.Item,{value:E.value,children:E.label},E.value))})]})]}),l.jsxs(O,{gap:"2",children:[l.jsxs(xe,{onClick:X,children:[l.jsx(Mn,{})," Add Field"]}),N.length>0&&!N.some(E=>E.is_primary_key)&&l.jsx(xe,{variant:"soft",color:"blue",onClick:()=>{N.length>0&&J(N[0].id,{is_primary_key:!0})},children:"Make First Field PK (Optional)"})]})]}),N.length>0&&l.jsxs(Je,{children:[l.jsxs(O,{justify:"between",align:"center",mb:"3",children:[l.jsx(Et,{size:"4",children:"Table Fields"}),l.jsx(R,{size:"1",color:"gray",children:"Fields with same name as referenced PK are inherited and read-only"})]}),l.jsxs(St.Root,{style:{width:"100%",tableLayout:"fixed"},children:[l.jsx(St.Header,{children:l.jsxs(St.Row,{children:[l.jsx(St.ColumnHeaderCell,{style:{width:"15%"},children:"Name"}),l.jsx(St.ColumnHeaderCell,{style:{width:"15%"},children:"Logical Name"}),l.jsx(St.ColumnHeaderCell,{style:{width:"12%"},children:"Type"}),l.jsx(St.ColumnHeaderCell,{style:{width:"8%"},children:"Parameters"}),l.jsx(St.ColumnHeaderCell,{style:{width:"15%"},children:"Comment"}),l.jsx(St.ColumnHeaderCell,{style:{width:"25%"},children:"Constraints"}),l.jsx(St.ColumnHeaderCell,{style:{width:"5%"},children:"Nullable"}),l.jsx(St.ColumnHeaderCell,{style:{width:"5%"},children:"Actions"})]})}),l.jsx(St.Body,{children:N.map((E,q)=>{var Y,Z;const k=h(E,s==null?void 0:s.id),G=k?g(E):null;return l.jsxs(St.Row,{children:[l.jsx(St.Cell,{children:l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(Ae.Input,{value:E.name,onChange:le=>J(E.id,{name:le.target.value}),size:"1",disabled:k,style:{width:"100%",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}}}),k&&l.jsxs(R,{size:"1",color:"gray",style:{fontSize:"10px"},children:["Inherited from ",(G==null?void 0:G.name)||"PK"]})]})}),l.jsx(St.Cell,{children:l.jsx(Ae.Input,{value:E.logical_name||"",onChange:le=>J(E.id,{logical_name:le.target.value}),size:"1",placeholder:"Logical name",disabled:k,style:{width:"100%",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}}})}),l.jsx(St.Cell,{children:l.jsxs(W.Root,{value:E.data_type,onValueChange:le=>J(E.id,{data_type:le,type_parameters:le==="DECIMAL"?E.type_parameters:null}),size:"1",disabled:k,children:[l.jsx(W.Trigger,{style:k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}}),l.jsx(W.Content,{children:a.map(le=>l.jsx(W.Item,{value:le.value,children:le.name},le.value))})]})}),l.jsx(St.Cell,{children:E.data_type==="DECIMAL"?l.jsxs(O,{gap:"1",align:"center",children:[l.jsx(Ae.Input,{value:((Y=E.type_parameters)==null?void 0:Y.precision)||"",onChange:le=>J(E.id,{type_parameters:{...E.type_parameters,precision:le.target.value?parseInt(le.target.value):void 0}}),size:"1",placeholder:"10",style:{width:"50px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k}),l.jsx(R,{size:"1",children:","}),l.jsx(Ae.Input,{value:((Z=E.type_parameters)==null?void 0:Z.scale)||"",onChange:le=>J(E.id,{type_parameters:{...E.type_parameters,scale:le.target.value?parseInt(le.target.value):void 0}}),size:"1",placeholder:"2",style:{width:"40px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k})]}):["VARCHAR","CHAR"].includes(E.data_type)?l.jsx(Ae.Input,{value:E.type_parameters||"",onChange:le=>J(E.id,{type_parameters:le.target.value}),size:"1",placeholder:"50",style:{width:"60px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k}):["GEOGRAPHY","GEOMETRY"].includes(E.data_type)?l.jsx(Ae.Input,{value:E.type_parameters||"",onChange:le=>J(E.id,{type_parameters:le.target.value}),size:"1",placeholder:"4326",style:{width:"60px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k}):E.data_type==="INTERVAL"?l.jsx(Ae.Input,{value:E.type_parameters||"",onChange:le=>J(E.id,{type_parameters:le.target.value}),size:"1",placeholder:"YEAR TO MONTH",style:{width:"120px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k}):["ARRAY","MAP","STRUCT"].includes(E.data_type)?l.jsx(Ae.Input,{value:E.type_parameters||"",onChange:le=>J(E.id,{type_parameters:le.target.value}),size:"1",placeholder:E.data_type==="ARRAY"?"STRING":E.data_type==="MAP"?"STRING,INT":"field1:STRING",style:{width:"100px",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}},disabled:k}):l.jsx(R,{size:"1",color:"gray",children:"-"})}),l.jsx(St.Cell,{children:l.jsx(Ae.Input,{value:E.comment||"",onChange:le=>J(E.id,{comment:le.target.value}),size:"1",placeholder:"Field comment",disabled:k,style:{width:"100%",...k?{backgroundColor:"#f8f9fa",color:"#6c757d"}:{}}})}),l.jsx(St.Cell,{children:l.jsxs(O,{gap:"1",direction:"column",children:[l.jsxs(O,{gap:"1",align:"center",children:[l.jsx(Vt,{checked:E.is_primary_key||!1,onCheckedChange:le=>fe(E.id,le),disabled:k||E.is_foreign_key}),l.jsx(R,{size:"1",color:k||E.is_foreign_key?"gray":void 0,children:"PK"}),l.jsx(Vt,{checked:E.is_foreign_key||!1,onCheckedChange:le=>{J(E.id,{is_foreign_key:le})},disabled:k||E.is_primary_key}),l.jsx(R,{size:"1",color:k||E.is_primary_key?"gray":void 0,children:"FK"})]}),E.is_foreign_key&&l.jsxs(W.Root,{value:U(E.foreign_key_reference),onValueChange:le=>{J(E.id,{foreign_key_reference:F(le)})},onOpenChange:le=>{U(E.foreign_key_reference),me(E.id)},disabled:k,children:[l.jsx(W.Trigger,{placeholder:"Select PK reference",size:"1",style:{width:"100%",minWidth:"200px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),l.jsx(W.Content,{style:{minWidth:"250px",maxWidth:"400px"},children:me(E.id).map(le=>l.jsx(W.Item,{value:le.value,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"380px"},children:le.label},le.value))})]})]})}),l.jsx(St.Cell,{children:l.jsx(Vt,{checked:E.nullable!==!1,onCheckedChange:le=>J(E.id,{nullable:le}),disabled:k})}),l.jsx(St.Cell,{children:l.jsxs(O,{gap:"1",children:[l.jsx(jn,{size:"1",color:"blue",variant:"ghost",onClick:()=>ee(E),title:"Edit field details",children:l.jsx($i,{})}),l.jsx(jn,{size:"1",color:"red",variant:"ghost",onClick:()=>Q(E.id),disabled:k,title:"Remove field",children:l.jsx(gn,{})})]})})]},E.id)})})]})]})]})]})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",children:"Cancel"})}),l.jsx(xe,{onClick:()=>{Ce()},disabled:!1,children:s?"Update Table":"Create Table"})]})]})]}),l.jsx(lee,{isOpen:P,onClose:()=>{I(!1),z(null)},field:A,tableId:(s==null?void 0:s.id)||S.id,onSave:ie})]}):null},uee=({isOpen:e,onClose:t,onImport:n,catalogName:r,schemaName:o,tableNames:a,allSelectedTables:i,objectType:s="tables"})=>{const[c,u]=f.useState(!1),[d,p]=f.useState([]),[m,h]=f.useState(0),[g,y]=f.useState(""),[w,v]=f.useState(null),[x,_]=f.useState(!1),[b,S]=f.useState(!1),[$,N]=f.useState(null),T=f.useRef(!1),C=(j,P="info")=>{const I=new Date().toLocaleTimeString();p(A=>[...A,{message:j,type:P,timestamp:I}])},D=async()=>{if(!(!$||b)){if(S(!0),s==="views"){try{C("🛑 Cancellation requested...","warning"),window.importProgressCallback&&(window.importProgressCallback({type:"cancelled",message:"View import cancelled by user"}),window.importProgressCallback=null),u(!1),S(!1),_(!0),T.current=!0,y("Cancelled")}catch(j){console.error("Error cancelling view import:",j),C("❌ Error cancelling view import","error"),S(!1)}return}try{(await fetch(`${dt()}/api/data_modeling/cancel_import/${$}`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?C("🛑 Cancellation requested...","warning"):(C("❌ Failed to cancel import","error"),S(!1))}catch(j){console.error("Error cancelling import:",j),C("❌ Error cancelling import","error"),S(!1)}}},L=j=>{try{switch(j.type){case"connected":C("📡 Connected to import progress stream","info");break;case"cancelled":C("🛑 Import cancelled by user","warning"),u(!1),S(!1),_(!0),T.current=!0;break;case"started":const P=j.total_tables||a.length,I=s==="tables"?"tables":"views";j.total_groups&&j.total_groups>1?(C(`🚀 Starting cross-catalog import of ${P} ${I} from ${j.total_groups} catalog/schema combinations`,"info"),j.table_groups&&j.table_groups.forEach(ue=>{C(`📋 Group: ${ue.table_count} ${I} from ${ue.catalog}.${ue.schema}`,"info")})):(C(`🚀 Starting import of ${P} ${I} from ${r}.${o}`,"info"),C(`📋 ${s==="tables"?"Tables":"Views"}: ${a.join(", ")}`,"info")),y(`Importing ${s==="tables"?"Tables":"Views"}`);break;case"table_started":const A=j.table_name||j.view_name||j.object_name;C(`⏳ Processing ${s==="tables"?"table":"view"} ${A}...`,"info"),h(j.progress||0);break;case"table_completed":const U=j.result,F=(U==null?void 0:U.table_name)||(U==null?void 0:U.view_name)||(U==null?void 0:U.object_name)||"Unknown",B=s==="tables"?"Table":"View";U&&U.success?(C(`✅ ${B} ${F}: imported successfully`,"success"),U.columns_count&&C(`   📊 ${U.columns_count} columns imported`,"info"),U.constraints_count&&C(`   🔗 ${U.constraints_count} constraints imported`,"info")):(C(`❌ ${B} ${F}: import failed`,"error"),U!=null&&U.error&&C(`   📝 Error: ${U.error}`,"error")),h(j.progress||0);break;case"group_started":console.log("🌐 Group started:",j),C(`🚀 Starting import ${j.group_number}/${j.total_groups}: ${j.table_count} tables from ${j.catalog_name}.${j.schema_name}`,"info"),y(`Group ${j.group_number} of ${j.total_groups}`);break;case"group_completed":console.log("🌐 Group completed:",j);const Q=(j.results||[]).filter(ue=>ue&&ue.success).length;C(`✅ Group ${j.group_number}: ${Q} tables from ${j.catalog_name}.${j.schema_name}`,"success"),j.overall_progress&&h(j.overall_progress);break;case"group_failed":console.log("🌐 Group failed:",j),C(`❌ Group ${j.group_number}: Failed to import from ${j.catalog_name}.${j.schema_name}`,"error"),j.error&&C(`   📝 Error: ${j.error}`,"error");break;case"table_failed":console.log("🌐 Table failed:",j),C(`❌ Table ${j.table_name}: import failed`,"error"),j.error&&C(`   📝 Error: ${j.error}`,"error"),h(j.overall_progress||j.group_progress||0);break;case"heartbeat":console.log("💓 Heartbeat:",j.message),j.message&&y(j.message);break;case"completed":if(j.total_groups&&j.total_groups>1){const ue=j.total_tables,Ce=j.imported_tables||j.total_tables;if(Ce>ue?C(`🎉 Import completed! ${ue} requested tables + ${Ce-ue} related tables = ${Ce} total tables imported from ${j.total_groups} catalog/schema combinations!`,"success"):C(`🎉 All ${ue} tables imported successfully from ${j.total_groups} catalog/schema combinations!`,"success"),j.project_data){if(console.log("📦 Processing cross-catalog project data:",j.project_data),j.project_data.tables){const{addTable:me}=ct.getState();j.project_data.tables.forEach(Oe=>{me&&(me(Oe),console.log(`✅ Added cross-catalog table to store: ${Oe.name}`))})}if(j.project_data.relationships){const{addRelationship:me}=ct.getState();j.project_data.relationships.forEach(Oe=>{me&&(me(Oe),console.log(`✅ Added cross-catalog relationship to store: ${Oe.id}`))})}}y("Completed"),h(100),_(!0),T.current=!0,v({catalog_name:"Multiple Catalogs",schema_name:"Multiple Schemas",total:j.total_tables,success:j.total_tables,failure:0}),window.crossCatalogImport=null,u(!1);return}y("Completed"),h(100),_(!0),T.current=!0;const J=j.results||[],ee=J.length,ie=J.filter(ue=>ue&&ue.success).length,fe=ee-ie;v({catalog_name:r,schema_name:o,total:ee,success:ie,failure:fe}),ie===ee?C(`🎉 All ${ee} tables imported successfully!`,"success"):C(`⚠️ Import completed with ${ie} successes and ${fe} failures`,"warning"),u(!1);break;case"error":C(`❌ Import Error: ${j.message}`,"error"),u(!1);break;default:console.log("Unknown import progress update type:",j.type,j)}}catch(P){console.error("Error processing import progress update:",P,"Update data:",j),C(`⚠️ Error processing progress update: ${P.message}`,"warning")}},K=async()=>{if(!r||!o||!a||a.length===0){C("❌ Invalid import parameters","error");return}u(!0),p([]),h(0),v(null),_(!1),T.current=!1;let j=null;try{C("🚀 Starting Import process...","info"),y("Initializing"),h(10);const P=`import_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;N(P),s==="views"?window.importProgressCallback=L:j=new EventSource(`${dt()}/api/data_modeling/import_progress/${P}`),j&&(j.onmessage=z=>{try{const U=JSON.parse(z.data);L(U)}catch(U){console.error("Error parsing Import SSE data:",U,"Raw data:",z.data),C(`⚠️ Error parsing progress data: ${U.message}`,"warning")}},j.onerror=z=>{T.current?console.log("Import SSE connection closed after successful completion"):(console.error("Import SSE Error:",z),C("⚠️ Connection to import progress stream lost","warning"),u(!1)),j&&(j.close(),j=null)});let I=!1;i&&i.length>0&&(I=new Set(i.map(U=>`${U.catalog}.${U.schema}`)).size>1);const A=I?await n(r,o,a,P,i):await n(r,o,a,P)}catch(P){console.error("Import error:",P),C(`❌ Import failed: ${P.message}`,"error"),u(!1),j&&(j.close(),j=null),s==="views"&&window.importProgressCallback&&(window.importProgressCallback=null)}},H=()=>{(!c||x)&&(t(),p([]),h(0),v(null),y(""),_(!1),S(!1),N(null),u(!1),T.current=!1,s==="views"&&window.importProgressCallback&&(window.importProgressCallback=null))},M=j=>{switch(j){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":default:return"ℹ️"}},V=j=>`log-entry log-${j}`;return l.jsx(be.Root,{open:e,onOpenChange:H,children:l.jsxs(be.Content,{className:"import-progress-dialog",style:{maxWidth:"600px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:"Import Tables Progress"}),l.jsxs(O,{direction:"column",gap:"4",style:{height:"500px"},children:[l.jsxs(O,{direction:"column",gap:"2",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"2",weight:"medium",children:g||"Ready to Import"}),l.jsxs(we,{variant:"soft",color:x?"green":c?"blue":"gray",children:[m,"%"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})}),w&&l.jsxs(O,{gap:"2",wrap:"wrap",children:[l.jsxs(we,{variant:"soft",color:"blue",children:["Total: ",w.total]}),l.jsxs(we,{variant:"soft",color:"green",children:["Success: ",w.success]}),w.failure>0&&l.jsxs(we,{variant:"soft",color:"red",children:["Failed: ",w.failure]})]})]}),l.jsx(Xt,{style:{flex:1,border:"1px solid var(--gray-6)",borderRadius:"6px",padding:"8px"},children:l.jsx(O,{direction:"column",gap:"1",children:d.map((j,P)=>l.jsx("div",{className:V(j.type),children:l.jsxs(R,{size:"1",style:{fontFamily:"monospace"},children:[l.jsx("span",{style:{color:"var(--gray-9)",marginRight:"8px"},children:j.timestamp}),l.jsx("span",{style:{marginRight:"4px"},children:M(j.type)}),j.message]})},P))})}),l.jsxs(O,{gap:"2",justify:"end",children:[!c&&!x&&l.jsxs(l.Fragment,{children:[l.jsx(xe,{variant:"soft",onClick:H,children:"Cancel"}),l.jsx(xe,{onClick:K,children:"Start Import"})]}),c&&l.jsxs(l.Fragment,{children:[l.jsx(xe,{variant:"soft",color:"red",onClick:D,disabled:b,children:b?"Cancelling...":"🛑 Stop Import"}),l.jsx(xe,{variant:"soft",disabled:!0,children:"Importing..."})]}),x&&l.jsx(xe,{onClick:H,children:"Close"})]})]})]})})},dee=()=>{const{showImportDialog:e,setShowImportDialog:t,addTable:n,addMetricView:r,createTraditionalView:o,createMetricRelationship:a,addRelationship:i,availableCatalogs:s,availableSchemas:c,availableTables:u,loadCatalogs:d,loadSchemas:p,loadTables:m,importExistingTables:h,importExistingTablesCrossCatalog:g,errors:y,tables:w}=ct(),[v,x]=f.useState(""),[_,b]=f.useState(""),[S,$]=f.useState([]),[N,T]=f.useState([]),[C,D]=f.useState([]),[L,K]=f.useState([]),[H,M]=f.useState(!1),[V,j]=f.useState(!1),[P,I]=f.useState(!1),[A,z]=f.useState(!1),[U,F]=f.useState("catalog"),[B,X]=f.useState("tables"),[Q,J]=f.useState(""),[ee,ie]=f.useState(""),[fe,ue]=f.useState(""),[Ce,me]=f.useState(""),[Oe,Fe]=f.useState([]),[oe,E]=f.useState(!1);f.useEffect(()=>{e&&s.length===0&&d()},[e,s.length,d]);const q=async(ne,Se)=>{try{z(!0);const je=await fetch(`${dt()}/api/data_modeling/views/${ne}/${Se}`);if(je.ok){const De=await je.json();Fe(De)}else console.error("Failed to load views"),Fe([])}catch(je){console.error("Error loading views:",je),Fe([])}finally{z(!1)}};f.useEffect(()=>{v&&(j(!0),p(v).finally(()=>j(!1)),F("schema"),ie(""))},[v,p]),f.useEffect(()=>{if(_){I(!0),m(v,_).finally(()=>I(!1)),F("tables"),ue("");const ne=C.filter(Se=>Se.catalog===v&&Se.schema===_).map(Se=>Se.name);$(ne)}},[_,v,m]);const k=(ne,Se)=>{if(Se){$([...S,ne]);const je={catalog:v,schema:_,name:ne},De=[...C,je];D(De)}else{$(S.filter(De=>De!==ne));const je=C.filter(De=>!(De.catalog===v&&De.schema===_&&De.name===ne));D(je)}},G=s.filter(ne=>ne.name.toLowerCase().includes(Q.toLowerCase())||ne.comment&&ne.comment.toLowerCase().includes(Q.toLowerCase())),Y=c.filter(ne=>ne.name.toLowerCase().includes(ee.toLowerCase())||ne.comment&&ne.comment.toLowerCase().includes(ee.toLowerCase())),Z=u.filter(ne=>ne.name.toLowerCase().includes(fe.toLowerCase())||ne.comment&&ne.comment.toLowerCase().includes(fe.toLowerCase())),le=async()=>{if(B==="tables"){if(C.length===0){alert("Please select at least one table to import");return}}else if(N.length===0){alert("Please select at least one view to import");return}const ne=new Set(w.map(je=>je.name.toLowerCase())),Se=C.filter(je=>ne.has(je.name.toLowerCase()));if(Se.length>0){const je=Se.map(Ge=>`${Ge.catalog}.${Ge.schema}.${Ge.name}`);if(!window.confirm(`The following tables already exist in the canvas and will be skipped: ${je.join(", ")}

Do you want to continue importing the remaining ${C.length-Se.length} tables?`))return;if(Se.length===C.length){alert("All selected tables already exist in the canvas. No tables will be imported.");return}}if(B==="tables"&&C.length>0){const je=new Set(C.map(De=>`${De.catalog}.${De.schema}`)).size;je>1?(console.log("🌐 Cross-catalog import detected - using custom progress handling"),window.crossCatalogImport={totalGroups:je,totalTables:C.length,completedGroups:0}):window.crossCatalogImport=null}E(!0)},ge=async(ne,Se,je,De,Ge=null)=>{const Be=Ge||C;if(Be&&Be.length>0){if(new Set(Be.map(We=>`${We.catalog}.${We.schema}`)).size>1)return await Ee(De,Be);{const We=Be[0];return await h(We.catalog,We.schema,Be.map(at=>at.name),De)}}return console.log("🔄 Using single catalog/schema import"),await h(ne,Se,je,De)},Ee=async(ne,Se=null)=>{const je=Se||C;console.log("🌐 Starting cross-catalog import for tables:",je),console.log("🔍 Debug: selectedTables structure:",JSON.stringify(je,null,2));const De=je.reduce((Be,Ne)=>{const We=`${Ne.catalog}.${Ne.schema}`;return Be[We]||(Be[We]={catalog:Ne.catalog,schema:Ne.schema,tables:[]}),Be[We].tables.push(Ne.name),Be},{}),Ge=Object.values(De);console.log("🗂️ Prepared table groups for unified backend endpoint:",Ge);try{console.log("🚀 Calling unified cross-catalog import endpoint...");const Be=await g(Ge,ne);return console.log("✅ Unified cross-catalog import endpoint successful:",Be),Be}catch(Be){throw console.error("❌ Unified cross-catalog import endpoint failed:",Be),Be}},ye=async(ne,Se,je,De)=>{var Ge,Be;try{window.importProgressCallback&&window.importProgressCallback({type:"started",total_tables:je.length,message:`Starting import of ${je.length} views`});const{tables:Ne}=ct.getState(),We=Ne.map(ze=>({id:ze.id,name:ze.name,catalog_name:ze.catalog_name,schema_name:ze.schema_name,fields:ze.fields||[]}));window.importProgressCallback&&window.importProgressCallback({type:"progress",progress:20,message:"Connecting to Databricks..."});const at=await fetch(`${dt()}/api/data_modeling/import_views`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({catalog_name:ne,schema_name:Se,view_names:je,auto_import_dependencies:!0,existing_tables:We})});if(!at.ok)throw new Error(`HTTP error! status: ${at.status}`);window.importProgressCallback&&window.importProgressCallback({type:"progress",progress:60,message:"Processing view definitions..."});const ot=await at.json();if(ot.views&&ot.views.length>0){for(const ze of ot.views)if(ze.type==="metric"){const st={id:ze.id,name:ze.name,description:ze.description||"",version:ze.version||"0.1",source_table_id:ze.source_table_id,catalog_name:ze.catalog_name||ne,schema_name:ze.schema_name||Se,dimensions:ze.dimensions||[],measures:ze.measures||[],joins:ze.joins||[],tags:ze.tags||{},position_x:ze.position_x||100,position_y:ze.position_y||100,width:ze.width||280,height:ze.height||220},{addMetricView:At,createMetricRelationship:_n}=ct.getState();if(At){if(At(st),console.log(`✅ Added metric view to store: ${st.name}`),st.source_table_id&&_n){const ln=_n(st.source_table_id,st.id,[]);console.log(`✅ Created metric relationship: ${st.source_table_id} -> ${st.id} (${ln})`)}}else console.warn("addMetricView action not found in store")}else if(ze.type==="traditional"){const st={id:ze.id,name:ze.name,description:ze.description||"",sql_query:ze.sql_query||"",logical_name:ze.logical_name||null,catalog_name:ze.catalog_name||ne,schema_name:ze.schema_name||Se,referenced_table_names:ze.referenced_table_names||[],tags:ze.tags||{},position_x:ze.position_x||600,position_y:ze.position_y||100,width:ze.width||250,height:ze.height||180},{createTraditionalView:At}=ct.getState();At?(At(st),console.log(`✅ Added traditional view to store: ${st.name}`)):console.warn("createTraditionalView action not found in store")}}if(window.importProgressCallback&&window.importProgressCallback({type:"progress",progress:80,message:"Adding views to canvas..."}),ot.referenced_tables&&ot.referenced_tables.length>0){const{addTable:ze}=ct.getState();for(const st of ot.referenced_tables)ze&&(ze(st),console.log(`✅ Added imported table to store: ${st.name}`))}if(ot.relationships&&ot.relationships.length>0)for(const ze of ot.relationships)i(ze),console.log("✅ Added relationship to store:",ze.constraint_name);if(window.importProgressCallback){const ze=je.map((st,At)=>({table_name:st,success:ot.views&&At<ot.views.length,message:ot.views&&At<ot.views.length?"View imported successfully":"View import failed"}));window.importProgressCallback({type:"completed",progress:100,results:ze,catalog_name:ne,schema_name:Se,message:`Successfully imported ${((Ge=ot.views)==null?void 0:Ge.length)||0} views and ${((Be=ot.referenced_tables)==null?void 0:Be.length)||0} dependency tables`})}return ot}catch(Ne){throw console.error("❌ Error importing views:",Ne),window.importProgressCallback&&(window.importProgressCallback({type:"error",message:Ne.message,progress:0}),window.importProgressCallback=null),Ne}},_e=()=>{E(!1),t(!1),x(""),b(""),$([]),T([]),D([]),K([]),Fe([]),X("tables"),F("catalog")},Pe=()=>{x(""),b(""),$([]),T([]),D([]),K([]),Fe([]),X("tables"),F("catalog"),J(""),ie(""),ue(""),me(""),j(!1),I(!1),z(!1)};return f.useEffect(()=>{e&&Pe()},[e]),e?l.jsxs(l.Fragment,{children:[l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(jl,{children:[l.jsx(El,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}),l.jsxs(be.Content,{style:{maxWidth:1e3,maxHeight:"90vh",overflow:"auto"},"aria-describedby":void 0,onOpenAutoFocus:ne=>ne.preventDefault(),children:[l.jsx(be.Title,{children:"Import Objects from Databricks"}),l.jsx(be.Description,{size:"2",mb:"4",children:"Import existing tables and views from your Databricks Unity Catalog workspace."}),l.jsxs(O,{gap:"2",mb:"4",children:[l.jsx(we,{color:U==="catalog"?"blue":"gray",children:"1. Select Catalog"}),l.jsx(we,{color:U==="schema"?"blue":"gray",children:"2. Select Schema"}),l.jsx(we,{color:U==="tables"?"blue":"gray",children:"3. Choose Objects"}),l.jsx(we,{color:U==="import"?"blue":"gray",children:"4. Import"})]}),l.jsx(ar,{mb:"4"}),U==="catalog"&&l.jsxs(te,{children:[l.jsx(Et,{size:"4",mb:"3",children:"Step 1: Select Catalog"}),l.jsx(R,{mb:"3",children:"Choose a catalog from your Databricks workspace:"}),s.length===0?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{children:"⏳ Loading catalogs..."})}):l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(Ae.Root,{children:[l.jsx(Ae.Slot,{children:l.jsx(vs,{height:"16",width:"16"})}),l.jsx(Ae.Input,{placeholder:"Search catalogs by name or description...",value:Q,onChange:ne=>J(ne.target.value)})]}),l.jsx(O,{direction:"column",gap:"2",style:{maxHeight:"400px",overflowY:"auto"},children:G.length===0?l.jsxs(R,{color:"gray",style:{textAlign:"center",padding:"20px"},children:['No catalogs found matching "',Q,'"']}):G.map(ne=>l.jsx(Je,{style:{cursor:"pointer",padding:"12px",border:"2px solid transparent"},onClick:()=>x(ne.name),children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",children:ne.name}),ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px"},children:ne.comment}),!ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px",fontStyle:"italic"},children:"No description"})]}),l.jsx(we,{color:"blue",children:ne.type||"CATALOG"})]})},ne.name))})]})]}),U==="schema"&&l.jsxs(te,{children:[l.jsx(Et,{size:"4",mb:"3",children:"Step 2: Select Schema"}),l.jsxs(R,{mb:"3",children:["Selected catalog: ",l.jsx(we,{color:"blue",children:v})]}),l.jsx(R,{mb:"3",children:"Choose a schema from the selected catalog:"}),V?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{children:"⏳ Loading schemas..."})}):c.length===0?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{color:"gray",children:"📭 No schemas found in this catalog"})}):l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(Ae.Root,{children:[l.jsx(Ae.Slot,{children:l.jsx(vs,{height:"16",width:"16"})}),l.jsx(Ae.Input,{placeholder:"Search schemas by name or description...",value:ee,onChange:ne=>ie(ne.target.value)})]}),l.jsx(O,{direction:"column",gap:"2",style:{maxHeight:"400px",overflowY:"auto"},children:Y.length===0?l.jsxs(R,{color:"gray",style:{textAlign:"center",padding:"20px"},children:['No schemas found matching "',ee,'"']}):Y.map(ne=>l.jsx(Je,{style:{cursor:"pointer",padding:"12px",border:"2px solid transparent"},onClick:()=>{b(ne.name),I(!0),Promise.all([m(v,ne.name),q(v,ne.name)]).finally(()=>I(!1)),F("tables")},children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",children:ne.name}),ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px"},children:ne.comment}),!ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px",fontStyle:"italic"},children:"No description"})]}),l.jsx(we,{color:"green",children:"SCHEMA"})]})},ne.name))})]}),l.jsx(xe,{variant:"ghost",mt:"3",onClick:()=>F("catalog"),children:"← Back to Catalogs"})]}),U==="tables"&&l.jsxs(te,{children:[l.jsx(Et,{size:"4",mb:"3",children:"Step 3: Select Objects"}),l.jsxs(O,{justify:"between",align:"center",mb:"3",children:[l.jsxs(R,{children:["Selected: ",l.jsx(we,{color:"blue",children:v})," → ",l.jsx(we,{color:"green",children:_})]}),C.length>0&&l.jsxs(we,{color:"purple",size:"2",children:[C.length," table(s) selected across catalogs"]})]}),l.jsxs(Qe.Root,{value:B,onValueChange:ne=>{X(ne)},children:[l.jsxs(Qe.List,{children:[l.jsx(Qe.Trigger,{value:"tables",children:"Tables"}),l.jsx(Qe.Trigger,{value:"views",children:"Views"})]}),l.jsxs(Qe.Content,{value:"tables",children:[l.jsx(R,{mb:"3",children:"Choose tables to import from the selected schema:"}),P?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{children:"⏳ Loading tables..."})}):u.length===0?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{color:"gray",children:"📭 No tables found in this schema"})}):l.jsxs(te,{children:[l.jsxs(Ae.Root,{style:{marginBottom:"12px"},children:[l.jsx(Ae.Slot,{children:l.jsx(vs,{height:"16",width:"16"})}),l.jsx(Ae.Input,{placeholder:"Search tables by name or description...",value:fe,onChange:ne=>ue(ne.target.value)})]}),l.jsx(Je,{mb:"3",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(R,{size:"2",children:["Select All ",Z.length>0&&Z.length!==u.length?`(${Z.length} filtered)`:""]}),l.jsx(Vt,{checked:Z.length>0&&Z.every(ne=>S.includes(ne.name)),onCheckedChange:ne=>{if(console.log("🔍 Select All tables:",{checked:ne,filteredTablesCount:Z.length,currentSelectedTables:S.length,allSelectedTablesBefore:C.length}),ne){const Se=[...new Set([...S,...Z.map(Ge=>Ge.name)])];$(Se);const je=Z.filter(Ge=>!C.some(Be=>Be.catalog===v&&Be.schema===_&&Be.name===Ge.name)).map(Ge=>({catalog:v,schema:_,name:Ge.name})),De=[...C,...je];D(De)}else{const Se=Z.map(De=>De.name);$(S.filter(De=>!Se.includes(De)));const je=C.filter(De=>!(De.catalog===v&&De.schema===_&&Se.includes(De.name)));console.log("🔍 Removing from allSelectedTables via Select All:",Se.length,"New total:",je.length),D(je)}}})]})}),l.jsx(O,{direction:"column",gap:"2",style:{maxHeight:"400px",overflowY:"auto"},children:Z.length===0?l.jsxs(R,{color:"gray",style:{textAlign:"center",padding:"20px"},children:['No tables found matching "',fe,'"']}):Z.map(ne=>l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",children:ne.name}),ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px"},children:ne.comment}),!ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px",fontStyle:"italic"},children:"No description"}),l.jsxs(O,{gap:"2",mt:"1",children:[l.jsx(we,{color:"orange",children:ne.table_type}),l.jsx(we,{color:"purple",children:ne.data_source_format})]})]}),l.jsx(Vt,{checked:S.includes(ne.name),onCheckedChange:Se=>k(ne.name,Se)})]})},ne.name))})]})]}),l.jsxs(Qe.Content,{value:"views",children:[l.jsx(R,{mb:"3",children:"Choose views to import from the selected schema:"}),l.jsx(Je,{mb:"3",style:{backgroundColor:"var(--amber-2)",borderColor:"var(--amber-6)"},children:l.jsxs(O,{gap:"2",align:"start",children:[l.jsx(R,{size:"2",color:"amber",children:"⚠️"}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",color:"amber",children:"Views Import Notice:"}),l.jsx(R,{size:"2",color:"amber",mt:"1",children:"Views can only be imported from a single catalog/schema at a time. Cross-catalog view import is not currently supported."})]})]})}),A?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{children:"⏳ Loading views..."})}):Oe.length===0?l.jsx(O,{justify:"center",align:"center",gap:"2",p:"4",children:l.jsx(R,{color:"gray",children:"📭 No views found in this schema"})}):l.jsxs(te,{children:[l.jsxs(Ae.Root,{style:{marginBottom:"12px"},children:[l.jsx(Ae.Slot,{children:l.jsx(vs,{height:"16",width:"16"})}),l.jsx(Ae.Input,{placeholder:"Search views by name or description...",value:Ce,onChange:ne=>me(ne.target.value)})]}),l.jsx(Je,{mb:"3",children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"2",children:"Select All Views"}),l.jsx(Vt,{checked:Oe.length>0&&Oe.every(ne=>N.includes(ne.name)),onCheckedChange:ne=>{T(ne?Oe.map(Se=>Se.name):[])}})]})}),l.jsx(O,{direction:"column",gap:"2",style:{maxHeight:"400px",overflowY:"auto"},children:Oe.length===0?l.jsx(R,{color:"gray",style:{textAlign:"center",padding:"20px"},children:"No views found"}):Oe.filter(ne=>ne.name.toLowerCase().includes(Ce.toLowerCase())).map(ne=>l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",children:ne.name}),ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px"},children:ne.comment}),!ne.comment&&l.jsx(R,{size:"2",color:"gray",style:{marginTop:"4px",fontStyle:"italic"},children:"No description"}),l.jsxs(O,{gap:"2",mt:"1",children:[l.jsx(we,{color:"blue",children:ne.type}),l.jsx(we,{color:"green",children:"VIEW"})]})]}),l.jsx(Vt,{checked:N.includes(ne.name),onCheckedChange:Se=>{T(Se?[...N,ne.name]:N.filter(je=>je!==ne.name))}})]})},ne.name))})]})]})]}),l.jsxs(O,{gap:"2",mt:"3",children:[l.jsx(xe,{variant:"ghost",onClick:()=>F("schema"),children:"← Back to Schemas"}),l.jsxs(xe,{onClick:()=>F("import"),disabled:B==="tables"?C.length===0:N.length===0,children:["Continue (",B==="tables"?C.length:N.length," selected)"]})]})]}),U==="import"&&l.jsxs(te,{children:[l.jsxs(Et,{size:"4",mb:"3",children:["Step 4: Import ",B==="tables"?"Tables":"Views"]}),B==="tables"&&C.length>0?l.jsxs(l.Fragment,{children:[l.jsxs(R,{mb:"3",children:["Ready to import ",C.length," table(s) from ",new Set(C.map(ne=>`${ne.catalog}.${ne.schema}`)).size," catalog/schema combination(s)"]}),l.jsxs(Je,{mb:"4",children:[l.jsx(Et,{size:"3",mb:"2",children:"Tables to Import (Cross-Catalog/Schema):"}),l.jsx(O,{direction:"column",gap:"2",children:Object.entries(C.reduce((ne,Se)=>{const je=`${Se.catalog}.${Se.schema}`;return ne[je]||(ne[je]=[]),ne[je].push(Se.name),ne},{})).map(([ne,Se])=>l.jsxs(te,{children:[l.jsxs(R,{size:"2",weight:"bold",color:"blue",children:[ne,":"]}),l.jsx(O,{direction:"column",gap:"1",ml:"3",children:Se.map(je=>l.jsxs(R,{size:"2",children:["• ",je]},`${ne}.${je}`))})]},ne))})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(R,{mb:"3",children:["Ready to import ",B==="tables"?S.length:N.length," ",B==="tables"?"table(s)":"view(s)"," from ",l.jsx(we,{color:"blue",children:v}),".",l.jsx(we,{color:"green",children:_})]}),l.jsxs(Je,{mb:"4",children:[l.jsxs(Et,{size:"3",mb:"2",children:[B==="tables"?"Tables":"Views"," to Import:"]}),l.jsx(O,{direction:"column",gap:"1",children:(B==="tables"?S:N).map(ne=>l.jsxs(R,{size:"2",children:["• ",ne]},ne))})]})]}),l.jsxs(R,{size:"2",color:"gray",mb:"4",children:["Note: This will create ",B==="tables"?"table":"view"," nodes in your data model with the same structure as the existing Databricks ",B==="tables"?"tables":"views",". You can then modify the fields, add relationships, and generate DDL as needed."]}),l.jsxs(O,{gap:"2",mt:"3",children:[l.jsxs(xe,{variant:"ghost",onClick:()=>F("tables"),children:["← Back to ",B==="tables"?"Tables":"Views"]}),l.jsx(xe,{onClick:le,disabled:H,children:H?"⏳ Importing...":B==="tables"?`Import ${C.length} Table${C.length!==1?"s":""}`:`Import ${N.length} View${N.length!==1?"s":""}`})]})]}),l.jsx(O,{gap:"3",mt:"4",justify:"end",children:l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",children:"Cancel"})})})]})]})}),l.jsx(uee,{isOpen:oe,onClose:_e,onImport:B==="tables"?ge:ye,catalogName:v,schemaName:_,tableNames:B==="tables"?S:N,allSelectedTables:B==="tables"?C:void 0,objectType:B==="tables"?"tables":"views"})]}):null},fee=()=>{const{showProjectDialog:e,setShowProjectDialog:t}=ct();return l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:450},children:[l.jsx(be.Title,{children:"Create New Project"}),l.jsx(be.Description,{size:"2",mb:"4",children:"Create a new data modeling project."}),l.jsx(R,{children:"Project creation dialog coming soon..."}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",children:"Cancel"})}),l.jsx(xe,{onClick:()=>t(!1),children:"Create Project"})]})]})})},pee=({isOpen:e,onClose:t,project:n,onConfirmDelete:r})=>{const[o,a]=f.useState(""),[i,s]=f.useState(!1),c=async()=>{if(o===(n==null?void 0:n.name)){s(!0);try{await r(n),u()}catch(p){console.error("Error deleting project:",p)}finally{s(!1)}}},u=()=>{a(""),s(!1),t()},d=o===(n==null?void 0:n.name);return!e||!n?null:l.jsx(be.Root,{open:e,onOpenChange:u,children:l.jsxs(be.Content,{style:{maxWidth:"500px"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(c7,{color:"red",width:"20",height:"20"}),l.jsx(R,{size:"4",weight:"bold",color:"red",children:"Delete Project"})]})}),l.jsx(be.Description,{size:"2",mb:"4",color:"gray",children:"This action cannot be undone. This will permanently delete the project and all its data."}),l.jsx(te,{mb:"4",children:l.jsx(Je,{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",padding:"16px"},children:l.jsxs(O,{direction:"column",gap:"3",children:[l.jsx(R,{size:"2",weight:"bold",color:"red",children:"You are about to delete:"}),l.jsx(te,{style:{backgroundColor:"#fff",padding:"12px",borderRadius:"6px",border:"1px solid #e5e7eb"},children:l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"3",weight:"bold",children:n.name}),l.jsxs(R,{size:"1",color:"gray",children:["Created: ",new Date(n.created_at).toLocaleDateString()]}),l.jsxs(R,{size:"1",color:"gray",children:["Last modified: ",new Date(n.saved_at).toLocaleDateString()]})]})})]})})}),l.jsxs(te,{mb:"4",children:[l.jsxs(R,{size:"2",weight:"bold",mb:"2",children:["Type the project name ",l.jsxs(R,{weight:"bold",style:{fontFamily:"monospace"},children:['"',n.name,'"']})," to confirm:"]}),l.jsx(Ae.Input,{value:o,onChange:p=>a(p.target.value),placeholder:`Type "${n.name}" here`,size:"2",style:{border:o&&!d?"1px solid #ef4444":void 0}}),o&&!d&&l.jsxs(R,{size:"1",color:"red",mt:"1",children:["Project name doesn't match. Please type exactly: ",n.name]})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",disabled:i,children:"Cancel"})}),l.jsx(xe,{color:"red",onClick:c,disabled:!d||i,children:i?"Deleting...":"Delete Project"})]})]})})},hee=()=>{const e=l7("ProjectStartupDialog"),{showProjectStartupDialog:t,setShowProjectStartupDialog:n,projectStartupMode:r,savedProjects:o,getSavedProjects:a,getAppState:i,appState:s,loadProject:c,createNewProject:u,loadCatalogs:d,loadSchemas:p,availableCatalogs:m,availableSchemas:h,deleteProject:g,downloadProject:y,importProject:w,currentProject:v}=ct(),[x,_]=f.useState(r),[b,S]=f.useState(null),[$,N]=f.useState({name:"",description:"",catalog_name:"",schema_name:""}),[T,C]=f.useState({}),[D,L]=f.useState(!1),[K,H]=f.useState(null),[M,V]=f.useState(""),[j,P]=f.useState(""),[I,A]=f.useState("yaml");f.useEffect(()=>{t&&(_(r),i(),a(),d().catch(oe=>{console.error("Failed to load catalogs:",oe)}))},[t,r]),f.useEffect(()=>{$.catalog_name&&p($.catalog_name)},[$.catalog_name]),f.useEffect(()=>{e.debug("Available catalogs:",{length:m==null?void 0:m.length,type:typeof m,withNames:Array.isArray(m)?m.filter(oe=>oe&&oe.name).length:0,withoutNames:Array.isArray(m)?m.filter(oe=>oe&&!oe.name).length:0})},[m,e]);const z=oe=>{const E={};return oe.trim()?o.find(k=>k.name.toLowerCase()===oe.trim().toLowerCase())&&(E.name=`A project named "${oe.trim()}" already exists`):E.name="Project name is required",C(q=>({...q,name:E.name})),!E.name},U=oe=>{const E=oe.target.value;N({...$,name:E}),z(E)},F=async()=>{try{if(!$.name||!$.catalog_name||!$.schema_name){alert("Please fill in all required fields");return}if(!z($.name)){alert("Please fix the project name error before creating the project.");return}const E=u($.name,$.description,$.catalog_name,$.schema_name);n(!1)}catch(oe){console.error("Error creating project:",oe),alert("Error creating project: "+oe.message)}},B=async()=>{try{if(!b){alert("Please select a project to load");return}await c(b.name),n(!1)}catch(oe){console.error("Error loading project:",oe),alert("Error loading project: "+oe.message)}},X=(oe,E)=>{E.stopPropagation(),H(oe),L(!0)},Q=async oe=>{try{await g(oe.name),(b==null?void 0:b.name)===oe.name&&S(null),await i()}catch(E){throw console.error("Failed to delete project:",E),E}},J=async(oe,E)=>{E.stopPropagation();try{await y(oe.name)}catch(q){console.error("Failed to download project:",q),alert("Error downloading project: "+q.message)}},ee=oe=>{oe?n(!0):x==="load"&&v?n(!1):(_("select"),x==="select"&&n(!1))},ie=()=>{v?n(!1):_("select")},fe=async(oe=!1)=>{var E,q,k,G,Y,Z;if(!M.trim()||!j.trim()){alert("Please provide both project name and file content");return}if(!oe&&T.importName){alert("Please fix the project name error before importing.");return}try{await w(j,M,oe,I),V(""),P(""),_("load"),await i(),alert(`Project "${M}" imported successfully!`)}catch(le){if(console.error("Failed to import project:",le),((E=le.response)==null?void 0:E.status)===409&&((k=(q=le.response)==null?void 0:q.data)==null?void 0:k.code)==="DUPLICATE_NAME"){if(window.confirm(`A project named "${M}" already exists. This will overwrite the existing project.

Are you sure you want to continue?`))return fe(!0)}else{const ge=((Y=(G=le.response)==null?void 0:G.data)==null?void 0:Y.error)||le.message||"Unknown error occurred";console.error("Import error details:",(Z=le.response)==null?void 0:Z.data),alert("Error importing project: "+ge)}}},ue=oe=>{const E=oe.target.files[0];if(E){const q=new FileReader;q.onload=k=>{const G=k.target.result,Y=String(G);P(Y),E.name.toLowerCase().endsWith(".json")?A("json"):A("yaml");const le=E.name.replace(/\.(yaml|yml|json)$/i,"");M||V(le)},q.readAsText(E)}},Ce=oe=>new Date(oe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),me=Array.isArray(m)?m.filter(oe=>oe&&typeof oe=="object"):[],Oe=Array.isArray(h)?h.filter(oe=>oe&&typeof oe=="object"):[],Fe=Array.isArray(o)?o.filter(oe=>oe&&typeof oe=="object"):[];return t?l.jsxs(l.Fragment,{children:[l.jsx(be.Root,{open:t,onOpenChange:ee,children:l.jsxs(jl,{children:[l.jsx(El,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}),l.jsxs(be.Content,{style:{maxWidth:800,maxHeight:"90vh",overflow:"auto"},onOpenAutoFocus:oe=>{oe.preventDefault()},"aria-describedby":void 0,children:[l.jsx(be.Title,{style:{fontSize:"2rem",fontWeight:"700",color:"#FF3621",textAlign:"center",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"Welcome to Bricks Data Modeler"}),l.jsxs(be.Description,{size:"3",mb:"6",style:{textAlign:"center",color:"#0B2026",fontSize:"1.1rem",lineHeight:"1.5"},children:["Entity Relationship Diagram tool for Databricks Unity Catalog.",l.jsx("br",{}),"Choose how you would like to get started with your data modeling project."]}),x==="select"&&l.jsx(O,{direction:"column",gap:"6",children:l.jsxs(ta,{columns:"3",gap:"5",children:[l.jsx(Je,{className:"startup-card startup-card-create",style:{cursor:"pointer",padding:"28px 24px",background:"#FBFAF8",border:"2px solid #FF3621",borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(255, 54, 33, 0.1)"},onClick:()=>_("create"),children:l.jsxs(O,{direction:"column",align:"center",gap:"4",children:[l.jsx(te,{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #FF3621 0%, #E02D1A 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"28px",fontWeight:"300"},children:"+"}),l.jsx(Et,{size:"5",style:{color:"#FF3621",fontWeight:"600",textAlign:"center"},children:"Create New Project"}),l.jsx(R,{style:{color:"#0B2026",textAlign:"center",lineHeight:"1.4"},children:"Start fresh with a new data modeling project. Define your catalog, schema, and begin designing your data model."})]})}),l.jsx(Je,{className:`startup-card startup-card-load ${s!=null&&s.has_existing_projects?"":"startup-card-disabled"}`,style:{cursor:s!=null&&s.has_existing_projects?"pointer":"not-allowed",opacity:s!=null&&s.has_existing_projects?1:.6,padding:"28px 24px",background:s!=null&&s.has_existing_projects?"#F9F7F4":"#F5F4F1",border:`2px solid ${s!=null&&s.has_existing_projects?"#FF6B54":"#D1D0CC"}`,borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:s!=null&&s.has_existing_projects?"0 4px 12px rgba(255, 107, 84, 0.1)":"none"},onClick:()=>(s==null?void 0:s.has_existing_projects)&&_("load"),children:l.jsxs(O,{direction:"column",align:"center",gap:"4",children:[l.jsx(te,{style:{width:"64px",height:"64px",borderRadius:"50%",background:s!=null&&s.has_existing_projects?"linear-gradient(135deg, #FF6B54 0%, #FF5A42 100%)":"#D1D0CC",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px"},children:"📂"}),l.jsx(Et,{size:"5",style:{color:s!=null&&s.has_existing_projects?"#FF6B54":"#8A8A8A",fontWeight:"600",textAlign:"center"},children:"Load Existing Project"}),l.jsx(R,{style:{color:s!=null&&s.has_existing_projects?"#0B2026":"#8A8A8A",textAlign:"center",lineHeight:"1.4"},children:"Continue working on a previously saved data modeling project."}),(s==null?void 0:s.has_existing_projects)&&l.jsxs(we,{color:"blue",size:"2",style:{background:"#FF6B54",color:"white",border:"none"},children:[s.project_count," projects available"]}),!(s!=null&&s.has_existing_projects)&&l.jsx(R,{size:"2",style:{color:"#8A8A8A",fontStyle:"italic"},children:"No saved projects found"})]})}),l.jsx(Je,{className:"startup-card startup-card-import",style:{cursor:"pointer",padding:"28px 24px",background:"#F1F0EC",border:"2px solid #E02D1A",borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(224, 45, 26, 0.1)"},onClick:()=>_("import"),children:l.jsxs(O,{direction:"column",align:"center",gap:"4",children:[l.jsx(te,{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #E02D1A 0%, #C7251A 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px"},children:"📤"}),l.jsx(Et,{size:"5",style:{color:"#E02D1A",fontWeight:"600",textAlign:"center"},children:"Import Project"}),l.jsx(R,{style:{color:"#0B2026",textAlign:"center",lineHeight:"1.4"},children:"Import an existing project from a YAML or JSON file and create a new project with a different name."})]})})]})}),x==="create"&&l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(Et,{size:"4",children:"Create New Project"}),l.jsx(xe,{variant:"ghost",onClick:ie,children:"Back"})]}),l.jsx(ar,{}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Project Name *"}),l.jsx(Ae.Root,{color:T.name?"red":void 0,children:l.jsx(Ae.Input,{placeholder:"Enter project name",value:$.name,onChange:U,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})}),T.name&&l.jsx(R,{size:"1",color:"red",mt:"1",children:T.name})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Description"}),l.jsx(rr,{placeholder:"Optional project description",value:$.description,onChange:oe=>N({...$,description:oe.target.value}),rows:3,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})]}),l.jsxs(te,{children:[l.jsxs(R,{size:"2",weight:"bold",mb:"2",children:["Catalog * (Debug: ",me.length," catalogs)"]}),l.jsxs(W.Root,{value:$.catalog_name,onValueChange:oe=>N({...$,catalog_name:oe,schema_name:""}),children:[l.jsx(W.Trigger,{placeholder:"Select catalog"}),l.jsx(W.Content,{children:me.filter(oe=>oe&&oe.name).map(oe=>l.jsx(W.Item,{value:oe.name,children:oe.name},oe.name))})]}),me.length===0&&l.jsx(R,{size:"1",color:"gray",mt:"1",children:"Loading catalogs..."})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Schema *"}),l.jsxs(W.Root,{value:$.schema_name,onValueChange:oe=>N({...$,schema_name:oe}),disabled:!$.catalog_name,children:[l.jsx(W.Trigger,{placeholder:$.catalog_name?"Select schema":"Select catalog first"}),l.jsx(W.Content,{children:Oe.filter(oe=>oe&&oe.name).map(oe=>l.jsx(W.Item,{value:oe.name,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsx(R,{children:oe.name}),oe.is_imported&&l.jsx(we,{color:"orange",size:"1",style:{marginLeft:"8px"},children:"imported"})]})},oe.name))})]}),$.catalog_name&&Oe.length===0&&l.jsx(R,{size:"1",color:"gray",mt:"1",children:"Loading schemas..."})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(xe,{variant:"soft",color:"gray",onClick:ie,children:"Cancel"}),l.jsx(xe,{onClick:F,disabled:!!T.name||!$.name||!$.catalog_name||!$.schema_name,children:"Create Project"})]})]}),x==="import"&&l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(Et,{size:"4",children:"Import Project"}),l.jsx(xe,{variant:"ghost",onClick:ie,children:"Back"})]}),l.jsx(ar,{}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"New Project Name *"}),l.jsx(Ae.Root,{color:T.importName?"red":void 0,children:l.jsx(Ae.Input,{placeholder:"Enter new project name",value:M,onChange:oe=>{const E=oe.target.value;V(E);const q={};E.trim()?o.find(G=>G.name.toLowerCase()===E.trim().toLowerCase())&&(q.importName=`A project named "${E.trim()}" already exists`):q.importName="Project name is required",C(k=>({...k,importName:q.importName}))}})}),T.importName&&l.jsx(R,{size:"1",color:"red",mt:"1",children:T.importName})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:"Upload Project File"}),l.jsx("input",{type:"file",accept:".yaml,.yml,.json",onChange:ue,style:{width:"100%",padding:"8px",border:"1px solid var(--gray-6)",borderRadius:"6px",backgroundColor:"var(--color-surface)"}}),l.jsx(R,{size:"1",color:"gray",mt:"1",children:"Supports YAML (.yaml, .yml) and JSON (.json) project files"}),I&&l.jsxs(R,{size:"1",color:"blue",mt:"1",children:["Detected file type: ",I.toUpperCase()]})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"bold",mb:"2",children:I==="json"?"JSON Content":"YAML Content"}),l.jsx(rr,{placeholder:`Paste ${I.toUpperCase()} content here or upload a file above`,value:j,onChange:oe=>P(oe.target.value),rows:10,style:{fontFamily:"monospace",fontSize:"12px"}})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(xe,{variant:"soft",color:"gray",onClick:ie,children:"Cancel"}),l.jsxs(xe,{onClick:()=>fe(),disabled:!M.trim()||!j.trim(),children:[l.jsx(aB,{})," Import Project"]})]})]}),x==="load"&&l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(Et,{size:"4",children:"Load Existing Project"}),l.jsx(xe,{variant:"ghost",onClick:ie,children:"Back"})]}),l.jsx(ar,{}),l.jsx(te,{style:{maxHeight:"400px",overflow:"auto"},children:Fe.length===0?l.jsx(R,{color:"gray",children:"No saved projects found."}):l.jsx(O,{direction:"column",gap:"2",children:Fe.map(oe=>l.jsx(Je,{style:{cursor:"pointer",padding:"16px",border:(b==null?void 0:b.name)===oe.name?"3px solid #FF3621":"1px solid var(--gray-6)",backgroundColor:(b==null?void 0:b.name)===oe.name?"rgba(255, 54, 33, 0.1)":"transparent",transition:"all 0.2s ease"},onClick:()=>{S(oe)},children:l.jsxs(O,{direction:"column",gap:"2",children:[l.jsxs(O,{justify:"between",align:"start",children:[l.jsx(R,{size:"3",weight:"bold",children:oe.name}),l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"gray",children:oe.format}),l.jsx(jn,{size:"1",variant:"ghost",color:"blue",onClick:E=>J(oe,E),style:{opacity:.7},children:l.jsx(Os,{})}),l.jsx(jn,{size:"1",variant:"ghost",color:"red",onClick:E=>X(oe,E),style:{opacity:.7},children:l.jsx(gn,{})})]})]}),l.jsxs(R,{size:"2",color:"gray",children:["Last modified: ",Ce(oe.saved_at)]})]})},oe.name))})}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(xe,{variant:"soft",color:"gray",onClick:ie,children:"Cancel"}),l.jsx(xe,{onClick:B,disabled:!b,children:"Load Project"})]})]})]})]})}),l.jsx(pee,{isOpen:D,onClose:()=>L(!1),project:K,onConfirmDelete:Q})]}):null},mee=({open:e,onClose:t,onSave:n,traditionalView:r=null})=>{const{catalogName:o,schemaName:a,availableCatalogs:i,availableSchemas:s,loadCatalogs:c,loadSchemas:u}=ct(),[d,p]=f.useState({name:"",description:"",sql_query:"",logical_name:"",tags:{},catalog_name:o,schema_name:a,position_x:600,position_y:100,width:250,height:180}),[m,h]=f.useState({}),[g,y]=f.useState(""),[w,v]=f.useState("");f.useEffect(()=>{e&&c()},[e,c]),f.useEffect(()=>{d.catalog_name&&u(d.catalog_name)},[d.catalog_name,u]),f.useEffect(()=>{if(r){const T=r.sql_query||"",C=T.split(`
`).length;p({name:r.name||"",description:r.description||"",sql_query:T,logical_name:r.logical_name||"",tags:r.tags||{},catalog_name:r.catalog_name||o,schema_name:r.schema_name||a,position_x:r.position_x||600,position_y:r.position_y||100,width:r.width||250,height:r.height||Math.max(180,120+C*15)})}else p({name:"",description:"",sql_query:"",logical_name:"",tags:{},catalog_name:o,schema_name:a,position_x:600,position_y:100,width:250,height:180});h({})},[r,o,a,e]);const x=(T,C)=>{p(D=>{const L={...D,[T]:C};if(T==="catalog_name"&&(L.schema_name=""),T==="sql_query"){const K=C.split(`
`).length;L.height=Math.max(180,120+K*15)}return L}),m[T]&&h(D=>({...D,[T]:null}))},_=()=>{g.trim()&&w.trim()&&(p(T=>({...T,tags:{...T.tags,[g.trim()]:w.trim()}})),y(""),v(""))},b=T=>{p(C=>({...C,tags:Object.fromEntries(Object.entries(C.tags).filter(([D])=>D!==T))}))},S=()=>{const T={};d.name.trim()||(T.name="View name is required"),d.sql_query.trim()||(T.sql_query="SQL query is required");const C=d.sql_query.trim().toUpperCase();return d.sql_query.trim()&&!C.startsWith("SELECT")&&(T.sql_query="Traditional views must contain a SELECT statement"),h(T),Object.keys(T).length===0},$=()=>{S()&&n(d)},N=()=>{p({name:"",description:"",sql_query:"",logical_name:"",tags:{},catalog_name:o,schema_name:a,position_x:600,position_y:100,width:250,height:180}),h({}),t()};return l.jsx(be.Root,{open:e,onOpenChange:T=>!T&&N(),children:l.jsxs(be.Content,{style:{maxWidth:"600px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(dn,{style:{color:"#10b981"}}),l.jsx(R,{size:"5",weight:"bold",children:r?"Edit Traditional View":"Create Traditional View"})]})}),l.jsxs(be.Description,{size:"2",mb:"4",color:"gray",children:["Traditional views are standard SQL views that can reference tables and other views.",!r&&" Unlike metric views, they don't require relationships and work with any SQL query."]}),l.jsx(Xt,{style:{maxHeight:"60vh"},children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"2px"},children:[l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",mb:"3",children:"Basic Information"}),l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"View Name *"}),l.jsx(Ae.Root,{color:m.name?"red":void 0,children:l.jsx(Ae.Input,{placeholder:"e.g., customer_summary_view",value:d.name,onChange:T=>x("name",T.target.value)})}),m.name&&l.jsx(R,{size:"1",color:"red",mt:"1",children:m.name})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Logical Name"}),l.jsx(Ae.Root,{children:l.jsx(Ae.Input,{placeholder:"e.g., Customer Summary View",value:d.logical_name,onChange:T=>x("logical_name",T.target.value)})})]}),l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Description"}),l.jsx(rr,{placeholder:"Describe what this view represents...",value:d.description,onChange:T=>x("description",T.target.value),rows:2})]})]})]}),l.jsx(ar,{}),l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",mb:"3",children:"SQL Query *"}),l.jsx(rr,{placeholder:`SELECT 
  customer_id,
  customer_name,
  COUNT(*) as order_count,
  SUM(total_amount) as total_spent
FROM orders o
JOIN customers c ON o.customer_id = c.id
GROUP BY customer_id, customer_name`,value:d.sql_query,onChange:T=>x("sql_query",T.target.value),rows:8,style:{fontFamily:"monospace",fontSize:"13px"},color:m.sql_query?"red":void 0}),m.sql_query&&l.jsx(R,{size:"1",color:"red",mt:"1",children:m.sql_query}),l.jsx(R,{size:"1",color:"gray",mt:"1",children:"Enter the complete SELECT statement for your view. Traditional views support any valid SQL query."})]}),l.jsx(ar,{}),l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",mb:"3",children:"Target Location"}),l.jsxs(O,{gap:"3",children:[l.jsxs(te,{style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Catalog"}),l.jsxs(W.Root,{value:d.catalog_name||"__project_default_catalog__",onValueChange:T=>{x("catalog_name",T==="__project_default_catalog__"?"":T)},children:[l.jsx(W.Trigger,{placeholder:"Select catalog (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_catalog__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",o,")"]})}),i==null?void 0:i.map(T=>l.jsx(W.Item,{value:T.name,children:T.name},T.name))]})]})]}),l.jsxs(te,{style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Schema"}),l.jsxs(W.Root,{value:d.schema_name||"__project_default_schema__",onValueChange:T=>{x("schema_name",T==="__project_default_schema__"?"":T)},children:[l.jsx(W.Trigger,{placeholder:"Select schema (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_schema__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",a,")"]})}),s==null?void 0:s.map(T=>l.jsx(W.Item,{value:T.name,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsx(R,{children:T.name}),T.is_imported&&l.jsx(we,{color:"orange",size:"1",style:{marginLeft:"8px"},children:"imported"})]})},T.name))]})]})]})]})]}),l.jsx(ar,{}),l.jsxs(te,{children:[l.jsx(R,{size:"3",weight:"bold",mb:"3",children:"Tags"}),Object.keys(d.tags).length>0&&l.jsx(O,{gap:"2",wrap:"wrap",mb:"3",children:Object.entries(d.tags).map(([T,C])=>l.jsxs(we,{variant:"soft",color:"gray",children:[T,": ",C,l.jsx(xe,{size:"1",variant:"ghost",color:"red",style:{marginLeft:"4px",padding:"0 2px"},onClick:()=>b(T),children:l.jsx(wo,{})})]},T))}),l.jsxs(O,{gap:"2",align:"end",children:[l.jsxs(te,{style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Key"}),l.jsx(Ae.Root,{children:l.jsx(Ae.Input,{placeholder:"e.g., department",value:g,onChange:T=>y(T.target.value)})})]}),l.jsxs(te,{style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",mb:"1",children:"Value"}),l.jsx(Ae.Root,{children:l.jsx(Ae.Input,{placeholder:"e.g., finance",value:w,onChange:T=>v(T.target.value)})})]}),l.jsx(xe,{variant:"soft",onClick:_,disabled:!g.trim()||!w.trim(),children:"Add Tag"})]})]})]})}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:N,children:"Cancel"})}),l.jsx(xe,{onClick:$,style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white"},children:r?"Update View":"Create View"})]})]})})},gee=({open:e,onClose:t,onSave:n,initialJoin:r=null,availableTables:o=[],sourceTableColumns:a=[],mode:i="create"})=>{const[s,c]=f.useState({name:"",description:"",joined_table_name:"",join_alias:"",join_type:"LEFT",sql_on:"",using:[],joins:[],left_columns:[""],right_columns:[""],join_operators:["="],additional_conditions:"",broadcast_hint:!1,bucket_hint:"",sort_merge_hint:!1}),[u,d]=f.useState("basic"),[p,m]=f.useState([{left_column:"",operator:"=",right_column:""}]),[h,g]=f.useState([]),[y,w]=f.useState("on"),[v,x]=f.useState([]),[_,b]=f.useState(null),[S,$]=f.useState([]),[N,T]=f.useState({leftColumns:[],rightColumns:[],parentJoin:null,currentJoin:null,parentName:""});f.useEffect(()=>{if(e)if(r&&i==="edit")if(console.log("🔧 Loading join for editing:",r),console.log("🔧 Join left_columns:",r.left_columns),console.log("🔧 Join right_columns:",r.right_columns),console.log("🔧 Join join_operators:",r.join_operators),c({name:r.name||"",description:r.description||"",joined_table_name:r.joined_table_name||"",join_alias:r.join_alias||"",join_type:r.join_type||"LEFT",sql_on:r.sql_on||"",using:r.using||[],joins:r.joins||[],left_columns:r.left_columns||[""],right_columns:r.right_columns||[""],join_operators:r.join_operators||["="],additional_conditions:r.additional_conditions||"",broadcast_hint:r.broadcast_hint||!1,bucket_hint:r.bucket_hint||"",sort_merge_hint:r.sort_merge_hint||!1}),r.using&&r.using.length>0)w("using"),x(r.using);else if(w("on"),r.left_columns&&r.right_columns){const F=r.left_columns.map((B,X)=>{var ee;const Q=r.right_columns[X]||"",J=Q.includes(".")?Q.split(".").pop():Q;return{left_column:B,operator:((ee=r.join_operators)==null?void 0:ee[X])||"=",right_column:J}});console.log("🔧 Parsed join conditions:",F),m(F.length>0?F:[{left_column:"",operator:"=",right_column:""}])}else console.log("🔧 No structured join conditions found, using default"),m([{left_column:"",operator:"=",right_column:""}]);else c({name:"",description:"",joined_table_name:"",join_alias:"",join_type:"LEFT",sql_on:"",using:[],joins:[],left_columns:[""],right_columns:[""],join_operators:["="],additional_conditions:"",broadcast_hint:!1,bucket_hint:"",sort_merge_hint:!1}),m([{left_column:"",operator:"=",right_column:""}]),w("on"),x([])},[e,r,i]),f.useEffect(()=>{if(s.joined_table_name){const F=o.find(B=>`${B.catalog_name||"catalog"}.${B.schema_name||"schema"}.${B.name}`===s.joined_table_name||B.name===s.joined_table_name);g(F?F.fields||[]:[])}},[s.joined_table_name,o]);const C=f.useCallback((F,B)=>{c(X=>({...X,[F]:B}))},[]),D=f.useCallback((F,B)=>{if(B.length===0)return null;let X=F;for(let Q=0;Q<B.length;Q++){const J=B[Q];if(!X||!X[J])return null;if(Q===B.length-1)return X[J];X=X[J].joins||[]}return null},[]),L=f.useCallback((F,B,X)=>{if(B.length===0)return F;const Q=[...F];let J=Q;for(let ee=0;ee<B.length;ee++){const ie=B[ee];ee===B.length-1?J[ie]={...J[ie],...X}:(J[ie]={...J[ie]},J[ie].joins||(J[ie].joins=[]),J=J[ie].joins)}return Q},[]),K=f.useCallback((F,B)=>{if(B.length===0)return F;const X=[...F];let Q=X;for(let ee=0;ee<B.length-1;ee++){const ie=B[ee];Q[ie]={...Q[ie]},Q[ie].joins||(Q[ie].joins=[]),Q=Q[ie].joins}const J=B[B.length-1];return Q.splice(J,1),X},[]),H=f.useCallback((F,B,X)=>{const Q=[...F];let J=Q;for(let ee=0;ee<B.length;ee++){const ie=B[ee];J[ie]={...J[ie]},J[ie].joins||(J[ie].joins=[]),J=J[ie].joins}return J.push(X),Q},[]),M=f.useCallback(F=>{var ue,Ce;let B,X,Q;F.length===1?(Q=s.name||"source",X=o.find(me=>`${me.catalog_name}.${me.schema_name}.${me.name}`===s.joined_table_name)):(B=D(s.joins,F.slice(0,-1)),Q=B==null?void 0:B.name,X=B?o.find(me=>`${me.catalog_name}.${me.schema_name}.${me.name}`===B.joined_table_name):null);const J=D(s.joins,F),ee=J?o.find(me=>`${me.catalog_name}.${me.schema_name}.${me.name}`===J.joined_table_name):null,ie=X?((ue=X.fields)==null?void 0:ue.map(me=>({value:`${Q}.${me.name}`,label:`${me.name} (${me.data_type||"UNKNOWN"})`,table:Q})))||[]:[],fe=ee?((Ce=ee.fields)==null?void 0:Ce.map(me=>({value:`${(J==null?void 0:J.name)||"current"}.${me.name}`,label:`${me.name} (${me.data_type||"UNKNOWN"})`,table:(J==null?void 0:J.name)||"current"})))||[]:[];return{leftColumns:ie,rightColumns:fe,parentJoin:B||{name:Q},currentJoin:J,parentName:Q}},[s.joins,s.name,s.joined_table_name,o,D]);f.useEffect(()=>{if(_&&S.length>0){const F=M(S);T(F)}},[_,S,M,_==null?void 0:_.joined_table_name,s.joins]);const V=f.useCallback((F,B,X)=>{m(Q=>Q.map((J,ee)=>ee===F?{...J,[B]:X}:J))},[]),j=f.useCallback(()=>{m(F=>[...F,{left_column:"",operator:"=",right_column:""}])},[]),P=f.useCallback(F=>{p.length>1&&m(B=>B.filter((X,Q)=>Q!==F))},[p.length]);f.useCallback(()=>{if(!s.joined_table_name)return"";let F=s.join_type+" JOIN";const B=[];s.broadcast_hint&&B.push("BROADCAST"),s.bucket_hint&&B.push(`BUCKET(${s.bucket_hint})`),s.sort_merge_hint&&B.push("MERGE"),B.length>0&&(F+=` /*+ ${B.join(", ")} */`);let X=s.joined_table_name;s.join_alias&&(X+=` AS ${s.join_alias}`);let Q="";return s.sql_on.trim()?Q=s.sql_on:(Q=p.filter(ee=>ee.left_column&&ee.right_column).map(ee=>{const ie="source",fe=s.name||s.join_alias||s.joined_table_name.split(".").pop();return`${ie}.${ee.left_column} ${ee.operator} ${fe}.${ee.right_column}`}).join(" AND "),s.additional_conditions.trim()&&(Q+=Q?` AND ${s.additional_conditions}`:s.additional_conditions)),`${F} ${X} ON ${Q}`},[s,p]);const I=f.useCallback(()=>{console.log("💾 Saving join configuration:",s);const F={...s};if(y==="using")F.using=v.filter(B=>B.trim()),F.sql_on="",F.left_columns=[],F.right_columns=[],F.join_operators=[];else{const B=p.map(ee=>ee.left_column).filter(Boolean),X=p.map(ee=>ee.operator),Q=s.name||s.joined_table_name.split(".").pop(),J=p.map(ee=>ee.right_column?`${Q}.${ee.right_column}`:"").filter(Boolean);if(F.left_columns=B,F.right_columns=J,F.join_operators=X,!s.sql_on.trim()&&B.length>0&&J.length>0){const ee=B.map((ie,fe)=>{const ue=J[fe],Ce=X[fe]||"=";return`source.${ie} ${Ce} ${ue}`});F.sql_on=ee.join(" AND ")}F.using=[]}n(F),t()},[s,p,v,y,n,t]),A=f.useCallback(()=>{t()},[t]),z=s.name.trim()&&s.joined_table_name.trim()&&(y==="using"?v.some(F=>F.trim()):s.sql_on.trim()||p.some(F=>F.left_column&&F.right_column)),U=["=","!=","<","<=",">",">=","LIKE","NOT LIKE"];return l.jsx(be.Root,{open:e,onOpenChange:t,children:l.jsxs(be.Content,{style:{maxWidth:"900px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(Fy,{}),i==="edit"?"Edit Join Configuration":"Configure Advanced Join"]})}),l.jsx(be.Description,{children:"Configure joins using ON clauses with boolean expressions or USING clauses with common column names."}),l.jsxs(Qe.Root,{value:u,onValueChange:d,style:{marginTop:"16px"},children:[l.jsxs(Qe.List,{children:[l.jsxs(Qe.Trigger,{value:"basic",children:[l.jsx(Kq,{})," Basic Info"]}),l.jsxs(Qe.Trigger,{value:"conditions",children:[l.jsx(Fy,{})," Join Conditions"]}),l.jsxs(Qe.Trigger,{value:"nested",children:[l.jsx($i,{})," Nested Joins",(()=>{const F=X=>{if(!X||X.length===0)return 0;let Q=X.length;return X.forEach(J=>{J.joins&&J.joins.length>0&&(Q+=F(J.joins))}),Q},B=F(s.joins);return B>0&&l.jsx(we,{size:"1",color:"blue",style:{marginLeft:"4px"},children:B})})()]})]}),l.jsx(Qe.Content,{value:"basic",children:l.jsx(te,{style:{padding:"16px 0"},children:l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Join Name *"}),l.jsx("input",{type:"text",value:s.name,onChange:F=>C("name",F.target.value),placeholder:"e.g., customer_orders",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}}),l.jsxs(R,{size:"1",color:"gray",children:['💡 This name will be used in ON clauses (e.g., "source.id = ',s.name||"join_name",'.id")']})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Description"}),l.jsx("input",{type:"text",value:s.description,onChange:F=>C("description",F.target.value),placeholder:"Purpose of this join",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}})]})]}),l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:2},children:[l.jsx(R,{size:"2",weight:"medium",children:"Joined Table *"}),l.jsxs(W.Root,{value:s.joined_table_name,onValueChange:F=>C("joined_table_name",F),children:[l.jsx(W.Trigger,{style:{width:"100%"}}),l.jsx(W.Content,{children:o.map(F=>{const B=`${F.catalog_name||"catalog"}.${F.schema_name||"schema"}.${F.name}`;return l.jsx(W.Item,{value:B,children:F.name},F.id)})})]}),l.jsx("input",{type:"text",value:s.joined_table_name,onChange:F=>C("joined_table_name",F.target.value),placeholder:"Or enter: catalog.schema.table",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Table Alias"}),l.jsx("input",{type:"text",value:s.join_alias,onChange:F=>C("join_alias",F.target.value),placeholder:"e.g., cust",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:"Join Type"}),l.jsx(R,{size:"2",color:"gray",style:{padding:"8px 12px",backgroundColor:"var(--gray-2)",borderRadius:"6px",border:"1px solid var(--gray-6)"},children:"LEFT OUTER JOIN (fixed for metric views)"})]})]})})}),l.jsx(Qe.Content,{value:"conditions",children:l.jsx(te,{style:{padding:"16px 0"},children:l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"medium",style:{marginBottom:"8px"},children:"Join Method"}),l.jsxs(O,{gap:"4",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[l.jsx("input",{type:"radio",name:"joinMethod",value:"on",checked:y==="on",onChange:F=>w(F.target.value)}),l.jsx(R,{size:"2",children:"ON clause (boolean expression)"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[l.jsx("input",{type:"radio",name:"joinMethod",value:"using",checked:y==="using",onChange:F=>w(F.target.value)}),l.jsx(R,{size:"2",children:"USING clause (common columns)"})]})]})]}),y==="on"&&l.jsxs(te,{children:[l.jsxs(O,{align:"center",justify:"between",style:{marginBottom:"12px"},children:[l.jsx(R,{size:"2",weight:"medium",children:"Join Conditions"}),l.jsxs(xe,{size:"1",onClick:j,children:[l.jsx(Mn,{})," Add Condition"]})]}),l.jsx(O,{direction:"column",gap:"2",children:p.map((F,B)=>l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{align:"center",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Left Column (Source)"}),l.jsxs(W.Root,{value:F.left_column,onValueChange:X=>V(B,"left_column",X),children:[l.jsx(W.Trigger,{}),l.jsx(W.Content,{children:a.map(X=>l.jsxs(W.Item,{value:X.name,children:[X.name," (",X.data_type,")"]},X.name))})]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{minWidth:"80px"},children:[l.jsx(R,{size:"1",children:"Operator"}),l.jsxs(W.Root,{value:F.operator,onValueChange:X=>V(B,"operator",X),children:[l.jsx(W.Trigger,{}),l.jsx(W.Content,{children:U.map(X=>l.jsx(W.Item,{value:X,children:X},X))})]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Right Column (Joined)"}),l.jsxs(W.Root,{value:F.right_column,onValueChange:X=>V(B,"right_column",X),children:[l.jsx(W.Trigger,{}),l.jsx(W.Content,{children:h.length>0?h.map(X=>l.jsxs(W.Item,{value:X.name,children:[X.name," (",X.data_type,")"]},X.name)):l.jsx(W.Item,{value:"__placeholder__",disabled:!0,children:"Select a table first"})})]})]}),l.jsx(xe,{size:"1",variant:"ghost",color:"red",onClick:()=>P(B),disabled:p.length===1,children:l.jsx(gn,{})})]})},B))}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:"Additional Conditions (Optional)"}),l.jsx(rr,{value:s.additional_conditions,onChange:F=>C("additional_conditions",F.target.value),placeholder:"e.g., joined_table.status = 'ACTIVE' AND joined_table.created_date > '2023-01-01'",style:{fontFamily:"monospace",fontSize:"12px"},rows:3})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:"Manual SQL ON Condition (Override)"}),l.jsx(R,{size:"1",color:"gray",children:"If specified, this will override the visual conditions above"}),l.jsx(rr,{value:s.sql_on,onChange:F=>C("sql_on",F.target.value),placeholder:"e.g., source.customer_id = customer.id AND source.region = customer.region",style:{fontFamily:"monospace",fontSize:"12px"},rows:2})]})]}),y==="using"&&l.jsxs(te,{children:[l.jsxs(O,{align:"center",justify:"between",style:{marginBottom:"12px"},children:[l.jsx(R,{size:"2",weight:"medium",children:"Common Columns"}),l.jsxs(xe,{size:"1",onClick:()=>x([...v,""]),children:[l.jsx(Mn,{})," Add Column"]})]}),l.jsx(R,{size:"1",color:"gray",style:{marginBottom:"12px"},children:"Select columns that exist in both tables with the same name and data type."}),l.jsxs(O,{direction:"column",gap:"2",children:[v.map((F,B)=>{const X=a.filter(Q=>h.some(J=>J.name===Q.name&&J.data_type===Q.data_type));return l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{align:"center",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",children:"Common Column"}),l.jsxs(W.Root,{value:F||"__placeholder__",onValueChange:Q=>{if(Q!=="__placeholder__"&&Q!=="__no_common__"){const J=[...v];J[B]=Q,x(J)}},children:[l.jsx(W.Trigger,{}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__placeholder__",disabled:!0,children:"Select a common column..."}),X.length>0?X.map(Q=>l.jsxs(W.Item,{value:Q.name,children:[Q.name," (",Q.data_type,")"]},Q.name)):l.jsx(W.Item,{value:"__no_common__",disabled:!0,children:"No common columns found"})]})]})]}),l.jsx(xe,{size:"1",color:"red",variant:"ghost",onClick:()=>{const Q=v.filter((J,ee)=>ee!==B);x(Q)},children:l.jsx(gn,{})})]})},B)}),v.length===0&&l.jsx(R,{size:"1",color:"gray",style:{textAlign:"center",padding:"20px"},children:'No columns added yet. Click "Add Column" to specify common columns.'})]})]})]})})}),l.jsx(Qe.Content,{value:"nested",children:l.jsx(te,{style:{padding:"16px 0"},children:l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(te,{children:[l.jsx(R,{size:"2",weight:"medium",style:{marginBottom:"8px"},children:"Nested Joins (Snowflake Schema)"}),l.jsx(R,{size:"1",color:"gray",style:{marginBottom:"12px"},children:"Add nested joins to create multi-level relationships for snowflake schemas. Each nested join extends from this join's table to another dimension table."})]}),l.jsx(te,{children:s.joins&&s.joins.length>0?l.jsx(O,{direction:"column",gap:"3",children:(()=>{const F=(B,X=0,Q=[])=>B.map((J,ee)=>{const ie=[...Q,ee];return l.jsxs(te,{style:{marginLeft:`${X*16}px`},children:[l.jsx(Je,{style:{padding:"12px"},children:l.jsxs(O,{align:"center",justify:"between",children:[l.jsxs(O,{direction:"column",gap:"1",children:[l.jsxs(R,{size:"2",weight:"medium",children:[X>0&&"└─ ",J.name||`Nested Join ${ee+1}`]}),l.jsx(R,{size:"1",color:"gray",children:J.joined_table_name||"No table selected"}),J.sql_on&&l.jsxs(R,{size:"1",color:"gray",style:{fontFamily:"monospace"},children:["ON: ",J.sql_on]}),J.using&&J.using.length>0&&l.jsxs(R,{size:"1",color:"gray",style:{fontFamily:"monospace"},children:["USING: ",J.using.join(", ")]})]}),l.jsxs(O,{gap:"2",children:[l.jsxs(xe,{size:"1",variant:"soft",onClick:()=>{b(J),$(ie),d("nested-edit")},children:[l.jsx($i,{}),"Edit"]}),l.jsxs(xe,{size:"1",variant:"soft",color:"green",onClick:()=>{const fe={id:`nested_${Date.now()}`,name:"",joined_table_name:"",join_type:"LEFT",sql_on:"",using:[],left_columns:[],right_columns:[],join_operators:[],joins:[]},ue=H(s.joins,ie,fe);C("joins",ue)},children:[l.jsx(Mn,{}),"Add Nested"]}),l.jsx(xe,{size:"1",variant:"soft",color:"red",onClick:()=>{if(confirm(`Are you sure you want to delete "${J.name||"this nested join"}" and all its nested joins?`)){const fe=K(s.joins,ie);C("joins",fe)}},children:l.jsx(gn,{})})]})]})}),J.joins&&J.joins.length>0&&l.jsx(te,{style:{marginTop:"8px"},children:F(J.joins,X+1,ie)})]},`${X}-${ee}`)});return F(s.joins)})()}):l.jsxs(te,{style:{padding:"24px",textAlign:"center",border:"2px dashed var(--gray-6)",borderRadius:"8px",backgroundColor:"var(--gray-1)"},children:[l.jsx(R,{size:"2",color:"gray",children:"No nested joins configured"}),l.jsx(R,{size:"1",color:"gray",style:{display:"block",marginTop:"4px"},children:"Add nested joins to model snowflake schemas with multi-level relationships"})]})}),l.jsx(te,{children:l.jsxs(xe,{variant:"soft",onClick:()=>{const F={id:`nested_${Date.now()}`,name:"",joined_table_name:"",join_type:"LEFT",sql_on:"",using:[],left_columns:[],right_columns:[],join_operators:[],joins:[]},B=[...s.joins||[],F];C("joins",B),b(F),$([B.length-1]),d("nested-edit")},children:[l.jsx(Mn,{}),"Add Top-Level Nested Join"]})})]})})}),u==="nested-edit"&&_&&l.jsx(Qe.Content,{value:"nested-edit",children:l.jsx(te,{style:{padding:"16px 0"},children:l.jsxs(O,{direction:"column",gap:"4",children:[l.jsxs(O,{align:"center",justify:"between",children:[l.jsxs(R,{size:"3",weight:"medium",children:["Edit Nested Join: ",_.name||"Unnamed"]}),l.jsxs(xe,{size:"1",variant:"soft",onClick:()=>{d("nested"),b(null),$([])},children:[l.jsx(wo,{}),"Back to List"]})]}),l.jsxs(O,{direction:"column",gap:"3",children:[l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Join Name *"}),l.jsx("input",{type:"text",value:_.name||"",onChange:F=>{const B={..._,name:F.target.value};b(B)},placeholder:"e.g., nation, region",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Description"}),l.jsx("input",{type:"text",value:_.description||"",onChange:F=>{const B={..._,description:F.target.value};b(B)},placeholder:"Purpose of this nested join",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:"Joined Table *"}),l.jsxs(W.Root,{value:_.joined_table_name||"",onValueChange:F=>{const B={..._,joined_table_name:F};b(B);const X=L(s.joins,S,B);C("joins",X)},children:[l.jsx(W.Trigger,{style:{width:"100%"}}),l.jsx(W.Content,{children:l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Available Tables"}),o.map(F=>{const B=`${F.catalog_name||"catalog"}.${F.schema_name||"schema"}.${F.name}`;return l.jsx(W.Item,{value:B,children:B},F.id)})]})})]}),l.jsx("input",{type:"text",value:_.joined_table_name||"",onChange:F=>{const B={..._,joined_table_name:F.target.value};b(B);const X=L(s.joins,S,B);C("joins",X)},placeholder:"Or enter manually: catalog.schema.table",style:{padding:"6px 8px",border:"1px solid var(--gray-6)",borderRadius:"4px",fontSize:"12px",color:"var(--gray-11)"}})]}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:"Join Condition *"}),(()=>{const{leftColumns:F,rightColumns:B,parentJoin:X,currentJoin:Q,parentName:J}=N,ie=(fe=>{if(!fe)return{left:"",operator:"=",right:""};const ue=fe.match(/^(.+?)\s*(=|!=|<|>|<=|>=)\s*(.+)$/);return ue?{left:ue[1].trim(),operator:ue[2].trim(),right:ue[3].trim()}:{left:"",operator:"=",right:""}})(_.sql_on);return l.jsxs(O,{direction:"column",gap:"2",children:[l.jsxs(O,{align:"center",gap:"2",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsxs(R,{size:"1",color:"gray",children:["Left Column (",J||"Parent",")"]}),l.jsxs(W.Root,{value:ie.left,onValueChange:fe=>{const ue=`${fe} ${ie.operator} ${ie.right}`,Ce={..._,sql_on:ue};b(Ce)},children:[l.jsx(W.Trigger,{style:{width:"100%"}}),l.jsx(W.Content,{children:l.jsxs(W.Group,{children:[l.jsxs(W.Label,{children:[J||"Parent"," Columns"]}),F.map(fe=>l.jsx(W.Item,{value:fe.value,children:fe.label},fe.value))]})})]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{width:"80px"},children:[l.jsx(R,{size:"1",color:"gray",children:"Op"}),l.jsxs(W.Root,{value:ie.operator,onValueChange:fe=>{const ue=`${ie.left} ${fe} ${ie.right}`,Ce={..._,sql_on:ue};b(Ce)},children:[l.jsx(W.Trigger,{style:{width:"100%"}}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"=",children:"="}),l.jsx(W.Item,{value:"!=",children:"!="}),l.jsx(W.Item,{value:"<",children:"<"}),l.jsx(W.Item,{value:">",children:">"}),l.jsx(W.Item,{value:"<=",children:"<="}),l.jsx(W.Item,{value:">=",children:">="})]})]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsxs(R,{size:"1",color:"gray",children:["Right Column (",(Q==null?void 0:Q.name)||"Current",")"]}),l.jsxs(W.Root,{value:ie.right,onValueChange:fe=>{const ue=`${ie.left} ${ie.operator} ${fe}`,Ce={..._,sql_on:ue};b(Ce)},children:[l.jsx(W.Trigger,{style:{width:"100%"}}),l.jsx(W.Content,{children:l.jsxs(W.Group,{children:[l.jsxs(W.Label,{children:[(Q==null?void 0:Q.name)||"Current"," Columns"]}),B.map(fe=>l.jsx(W.Item,{value:fe.value,children:fe.label},fe.value))]})})]})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",color:"gray",children:"Or enter manually:"}),l.jsx(rr,{value:_.sql_on||"",onChange:fe=>{const ue={..._,sql_on:fe.target.value};b(ue)},placeholder:"e.g., customer.c_nationkey = nation.n_nationkey",style:{fontFamily:"monospace",fontSize:"11px",minHeight:"40px"},rows:2})]})]})})()]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:"Or USING Clause (comma-separated)"}),l.jsx("input",{type:"text",value:_.using?_.using.join(", "):"",onChange:F=>{const B=F.target.value.split(",").map(Q=>Q.trim()).filter(Q=>Q),X={..._,using:B,sql_on:B.length>0?"":_.sql_on};b(X)},placeholder:"e.g., nation_key, region_id",style:{padding:"8px 12px",border:"1px solid var(--gray-6)",borderRadius:"6px",fontSize:"14px"}}),l.jsx(R,{size:"1",color:"gray",children:"For equi-joins on columns with the same name. Leave empty to use ON condition above."})]}),l.jsxs(O,{gap:"2",justify:"end",style:{marginTop:"16px"},children:[l.jsx(xe,{variant:"soft",color:"gray",onClick:()=>{d("nested"),b(null),$([])},children:"Cancel"}),l.jsxs(xe,{onClick:()=>{const F=L(s.joins,S,_);C("joins",F),d("nested"),b(null),$([])},disabled:!_.name||!_.joined_table_name||!_.sql_on&&(!_.using||_.using.length===0),children:[l.jsx(Oy,{}),"Save Changes"]})]})]})]})})})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:A,children:"Cancel"})}),l.jsxs(xe,{onClick:I,disabled:!z,children:[l.jsx(Oy,{}),i==="edit"?"Update Join":"Create Join"]})]})]})})},yee=({open:e,onClose:t,metricView:n=null,sourceTableId:r=null,onSave:o})=>{var Fe,oe;const{tables:a,currentProject:i,catalogName:s,schemaName:c,availableCatalogs:u,availableSchemas:d,loadCatalogs:p,loadSchemas:m}=ct(),[h,g]=f.useState({name:"",description:"",version:"1.0",source_table_id:r||"",filter:"",catalog_name:"",schema_name:"",dimensions:[],measures:[],joins:[],tags:{},height:220}),[y,w]=f.useState("basic"),[v,x]=f.useState({}),[_,b]=f.useState(!1),[S,$]=f.useState(null),[N,T]=f.useState("create"),C=f.useCallback((E,q,k)=>{const G=E.length+q.length+k.length;return Math.max(220,150+G*20)},[]),D=f.useCallback(()=>{var k;const E=[],q=a.find(G=>G.id===h.source_table_id);if(q&&q.fields){const G=(k=h.dimensions)==null?void 0:k.some(Y=>Y.expr&&!Y.expr.includes(".")&&!Y.expr.includes("(")&&q.fields.some(Z=>Z.name===Y.expr));q.fields.forEach(Y=>{G?(E.push({value:Y.name,label:`${Y.name} (${Y.data_type||"UNKNOWN"}) - from ${q.name}`,description:Y.comment||"",table:q.name,type:Y.data_type||"UNKNOWN",category:"source_raw",fieldName:Y.name}),E.push({value:`source.${Y.name}`,label:`source.${Y.name} (${Y.data_type||"UNKNOWN"}) - from ${q.name}`,description:Y.comment||"",table:q.name,type:Y.data_type||"UNKNOWN",category:"source",fieldName:Y.name})):(E.push({value:`source.${Y.name}`,label:`${Y.name} (${Y.data_type||"UNKNOWN"}) - from ${q.name}`,description:Y.comment||"",table:q.name,type:Y.data_type||"UNKNOWN",category:"source",fieldName:Y.name}),E.push({value:Y.name,label:`${Y.name} (${Y.data_type||"UNKNOWN"}) - raw format`,description:Y.comment||"",table:q.name,type:Y.data_type||"UNKNOWN",category:"source_raw",fieldName:Y.name}))})}return h.joins.forEach(G=>{let Y=null;if(G.joined_table_name){if(Y=a.find(Z=>Z.name===G.joined_table_name),!Y&&G.joined_table_name.includes(".")){const Z=G.joined_table_name.split("."),le=Z[Z.length-1];Y=a.find(ge=>ge.name===le)}Y||(Y=a.find(Z=>Z.catalog_name&&Z.schema_name&&Z.name?`${Z.catalog_name}.${Z.schema_name}.${Z.name}`===G.joined_table_name:!1))}if(Y&&Y.fields){const Z=G.name||G.join_alias||Y.name;Y.fields.forEach(ge=>{E.push({value:`${Z}.${ge.name}`,label:`${ge.name} (${ge.data_type||"UNKNOWN"}) from ${Z}`,description:ge.comment||"",table:Y.name,type:ge.data_type||"UNKNOWN",category:"joined"})}),E.push({value:Z,label:`${Z} (entire row as struct)`,description:`Full row from ${Y.name} as a struct`,table:Y.name,type:"STRUCT",category:"joined_struct",uniqueKey:`${Y.id||Y.name}_struct_${Z}`});const le=(ge,Ee=Z)=>{!ge||ge.length===0||ge.forEach(ye=>{let _e=null;if(ye.joined_table_name){if(_e=a.find(Pe=>Pe.name===ye.joined_table_name),!_e&&ye.joined_table_name.includes(".")){const Pe=ye.joined_table_name.split("."),ne=Pe[Pe.length-1];_e=a.find(Se=>Se.name===ne)}_e||(_e=a.find(Pe=>Pe.catalog_name&&Pe.schema_name&&Pe.name?`${Pe.catalog_name}.${Pe.schema_name}.${Pe.name}`===ye.joined_table_name:!1))}if(_e&&_e.fields){const Pe=ye.name||ye.join_alias||_e.name,ne=`${Ee}.${Pe}`;_e.fields.forEach(Se=>{E.push({value:`${ne}.${Se.name}`,label:`${Se.name} (${Se.data_type||"UNKNOWN"}) from ${ne}`,description:Se.comment||"",table:_e.name,type:Se.data_type||"UNKNOWN",category:"nested_joined"})}),E.push({value:ne,label:`${ne} (nested struct)`,description:`Nested struct from ${_e.name}`,table:_e.name,type:"STRUCT",category:"nested_joined_struct",uniqueKey:`${_e.id||_e.name}_nested_struct_${ne.replace(/\./g,"_")}`}),ye.joins&&ye.joins.length>0&&le(ye.joins,ne)}})};G.joins&&G.joins.length>0&&le(G.joins)}}),E},[a,h.source_table_id,h.joins,h.dimensions]);f.useEffect(()=>{e&&p()},[e,p]),f.useEffect(()=>{h.catalog_name&&m(h.catalog_name)},[h.catalog_name,m]),f.useEffect(()=>{if(e){if(n){const E=(n.dimensions||[]).map(G=>({...G,name:G.name||"",expr:G.expr||"",description:G.description||"",data_type:G.data_type||""})),q=(n.measures||[]).map(G=>({...G,name:G.name||"",expr:G.expr||"",description:G.description||"",aggregation_type:G.aggregation_type||"SUM",is_window_measure:G.is_window_measure||!1,data_type:G.data_type||""})),k=n.joins||[];g({name:n.name||"",description:n.description||"",version:n.version||"0.1",source_table_id:n.source_table_id||r||"",filter:n.filter||"",catalog_name:n.catalog_name||"",schema_name:n.schema_name||"",dimensions:E,measures:q,joins:k,tags:n.tags||{},height:n.height||Math.max(220,150+(E.length+q.length+k.length)*20)})}else g({name:"",description:"",catalog_name:s||"",schema_name:c||"",version:"0.1",source_table_id:r||"",filter:"",dimensions:[],measures:[],joins:[],tags:{},height:220});x({})}},[e,n,r]);const L=a.find(E=>E.id===h.source_table_id),K=(()=>{const E=[];return L&&L.fields&&L.fields.forEach(q=>{E.push({id:`${L.id}_${q.name}`,name:`${q.name} (from ${L.name})`,fieldName:q.name,data_type:q.data_type||"UNKNOWN",comment:q.comment||"",table:L.name,category:"source"})}),h.joins.forEach(q=>{let k=null;if(q.joined_table_name){if(k=a.find(G=>G.name===q.joined_table_name),!k&&q.joined_table_name.includes(".")){const G=q.joined_table_name.split("."),Y=G[G.length-1];k=a.find(Z=>Z.name===Y)}k||(k=a.find(G=>G.catalog_name&&G.schema_name&&G.name?`${G.catalog_name}.${G.schema_name}.${G.name}`===q.joined_table_name:!1))}if(k&&k.fields){const G=q.name||q.join_alias||k.name;k.fields.forEach(Z=>{E.push({id:`${k.id}_${Z.name}`,name:`${Z.name} (from ${G})`,fieldName:Z.name,data_type:Z.data_type||"UNKNOWN",comment:Z.comment||"",table:k.name,category:"joined"})}),E.push({id:`${k.id}_struct`,name:`${G} (entire row as struct)`,data_type:"STRUCT",comment:`Full row from ${k.name} as a struct`,table:k.name,category:"joined_struct"});const Y=(Z,le=G)=>{!Z||Z.length===0||Z.forEach(ge=>{let Ee=null;if(ge.joined_table_name){if(Ee=a.find(ye=>ye.name===ge.joined_table_name),!Ee&&ge.joined_table_name.includes(".")){const ye=ge.joined_table_name.split("."),_e=ye[ye.length-1];Ee=a.find(Pe=>Pe.name===_e)}Ee||(Ee=a.find(ye=>ye.catalog_name&&ye.schema_name&&ye.name?`${ye.catalog_name}.${ye.schema_name}.${ye.name}`===ge.joined_table_name:!1))}if(Ee&&Ee.fields){const ye=ge.name||ge.join_alias||Ee.name,_e=`${le}.${ye}`;Ee.fields.forEach(Pe=>{E.push({id:`${Ee.id}_${Pe.name}_nested_${le.replace(/\./g,"_")}`,name:`${Pe.name} (from ${_e})`,fieldName:Pe.name,data_type:Pe.data_type||"UNKNOWN",comment:Pe.comment||"",table:Ee.name,category:"nested_joined"})}),E.push({id:`${Ee.id}_nested_struct_${le.replace(/\./g,"_")}`,name:`${_e} (nested struct)`,data_type:"STRUCT",comment:`Nested struct from ${Ee.name}`,table:Ee.name,category:"nested_joined_struct"}),ge.joins&&ge.joins.length>0&&Y(ge.joins,_e)}})};q.joins&&q.joins.length>0&&Y(q.joins)}}),E})(),H=f.useCallback(()=>{const E={};h.name.trim()||(E.name="Name is required"),h.source_table_id||(E.source_table_id="Source table is required");const q=[],k=(G,Y="")=>{G.forEach((Z,le)=>{var ge;if((ge=Z.name)!=null&&ge.trim()){const Ee=Y?`${Y}.${Z.name}`:Z.name;q.includes(Z.name)?E[`join_${le}_name`]=`Duplicate join name "${Z.name}". Join names must be unique to avoid field conflicts.`:q.push(Z.name),Z.joins&&Z.joins.length>0&&k(Z.joins,Ee)}})};return h.joins&&h.joins.length>0&&k(h.joins),h.dimensions.length===0&&h.measures.length===0&&(E.content="At least one dimension or measure is required"),h.dimensions.forEach((G,Y)=>{var Z,le,ge,Ee;if((Z=G.name)!=null&&Z.trim()||(E[`dimension_${Y}_name`]="Dimension name is required"),!((le=G.expr)!=null&&le.trim()))E[`dimension_${Y}_expr`]="Dimension expression is required";else{const ye=G.expr.trim();if(ye.includes("(")||ye.includes(" ")||ye.includes("+")||ye.includes("-")||ye.includes("*")||ye.includes("/"))return;const _e=D().map(De=>De.value),Pe=_e.includes(ye)||_e.includes(`source.${ye}`)||_e.some(De=>De.endsWith(`.${ye}`)),Se=(((ge=h.joins)==null?void 0:ge.map(De=>De.name))||[]).includes(ye),je=ye.includes(".")&&((Ee=h.joins)==null?void 0:Ee.some(De=>{var Be;const Ge=ye.split(".");return Ge.length===2&&Ge[0]===De.name?(Be=De.joins)==null?void 0:Be.some(Ne=>Ne.name===Ge[1]):!1}));!Pe&&!Se&&!je&&(E[`dimension_${Y}_expr`]=`Expression '${ye}' not found in available fields. Use the dropdown to select a valid field.`)}}),h.measures.forEach((G,Y)=>{var Z,le;(Z=G.name)!=null&&Z.trim()||(E[`measure_${Y}_name`]="Measure name is required"),(le=G.expr)!=null&&le.trim()||(E[`measure_${Y}_expr`]="Measure expression is required")}),x(E),Object.keys(E).length===0},[h]),M=f.useCallback((E,q)=>{g(k=>{const G={...k,[E]:q};return E==="catalog_name"&&(G.schema_name=""),G}),v[E]&&x(k=>({...k,[E]:void 0}))},[v]),V=f.useCallback(()=>{if(!L||!L.fields)return;const E=[],q=[];L.fields.forEach(k=>{var Y;const G=((Y=k.type)==null?void 0:Y.toUpperCase())||"";G.includes("STRING")||G.includes("VARCHAR")||G.includes("CHAR")?E.push({id:`dim_${Date.now()}_${k.name}`,name:k.name.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase()),expr:`source.${k.name}`,description:k.comment||`Dimension based on ${k.name}`,data_type:k.data_type||""}):(G.includes("DATE")||G.includes("TIMESTAMP"))&&(E.push({id:`dim_${Date.now()}_${k.name}`,name:`${k.name.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())}`,expr:`source.${k.name}`,description:k.comment||`Date dimension based on ${k.name}`,data_type:k.data_type||""}),E.push({id:`dim_${Date.now()}_${k.name}_month`,name:`${k.name.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())} Month`,expr:`DATE_TRUNC('MONTH', source.${k.name})`,description:`Monthly grouping of ${k.name}`,data_type:"DATE"})),["INT","BIGINT","FLOAT","DOUBLE","DECIMAL","NUMERIC"].some(Z=>G.includes(Z))&&!k.name.toLowerCase().includes("key")&&!k.name.toLowerCase().includes("id")&&(q.push({id:`msr_${Date.now()}_${k.name}_sum`,name:`Total ${k.name.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())}`,expr:`SUM(${k.name})`,aggregation_type:"SUM",description:k.comment||`Sum of ${k.name}`,is_window_measure:!1,data_type:k.data_type||""}),q.push({id:`msr_${Date.now()}_${k.name}_avg`,name:`Average ${k.name.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())}`,expr:`AVG(${k.name})`,aggregation_type:"AVG",description:k.comment||`Average of ${k.name}`,is_window_measure:!1,data_type:k.data_type||""}))}),q.push({id:`msr_${Date.now()}_count`,name:"Record Count",expr:"COUNT(*)",aggregation_type:"COUNT",description:"Total number of records",is_window_measure:!1,data_type:"BIGINT"}),g(k=>{const G=[...k.dimensions,...E],Y=[...k.measures,...q];return{...k,dimensions:G,measures:Y,height:C(G,Y,k.joins)}}),alert(`🚀 Smart Setup Complete!

Added:
• ${E.length} dimensions
• ${q.length} measures

You can customize them in the Dimensions and Measures tabs.`)},[L,C]),j=f.useCallback(()=>{const E={id:`dim_${Date.now()}`,name:"",expr:"",description:"",data_type:""};g(q=>{const k=[...q.dimensions,E];return{...q,dimensions:k,height:C(k,q.measures,q.joins)}})},[C]),P=f.useCallback((E,q,k)=>{g(G=>({...G,dimensions:G.dimensions.map((Y,Z)=>Z===E?{...Y,[q]:k}:Y)}))},[]),I=f.useCallback(E=>{g(q=>{const k=q.dimensions.filter((G,Y)=>Y!==E);return{...q,dimensions:k,height:C(k,q.measures,q.joins)}})},[C]),A=f.useCallback(()=>{const E={id:`measure_${Date.now()}`,name:"",expr:"",description:"",aggregation_type:"SUM",is_window_measure:!1,data_type:""};g(q=>{const k=[...q.measures,E];return{...q,measures:k,height:C(q.dimensions,k,q.joins)}})},[C]),z=f.useCallback((E,q,k)=>{g(G=>({...G,measures:G.measures.map((Y,Z)=>{if(Z===E){const le={...Y,[q]:k};if(q==="expr"&&k&&!k.includes("(")&&Y.aggregation_type){const ge=Y.aggregation_type||"SUM",Ee=k.includes(".")?k.split(".").pop():k;le.expr=`${ge}(${Ee})`}if(q==="aggregation_type"&&Y.expr&&Y.expr.includes("(")){const ge=Y.expr.match(/\(([^)]+)\)/);if(ge){const Ee=ge[1];le.expr=`${k}(${Ee})`}}return le}return Y})}))},[]),U=f.useCallback(E=>{g(q=>{const k=q.measures.filter((G,Y)=>Y!==E);return{...q,measures:k,height:C(q.dimensions,k,q.joins)}})},[C]),F=f.useCallback(()=>{$(null),T("create"),b(!0)},[]),B=f.useCallback((E,q)=>{$({...E,_index:q}),T("edit"),b(!0)},[]),X=f.useCallback(E=>{var q;if(console.log("💾 Saving join data:",E),N==="create"){const k={id:`join_${Date.now()}`,name:E.name||((q=E.joined_table_name)==null?void 0:q.split(".").pop())||"unnamed_join",...E};g(G=>({...G,joins:[...G.joins,k]}))}else if(N==="edit"&&S){const k=S._index;g(G=>({...G,joins:G.joins.map((Y,Z)=>{var le;return Z===k?{...Y,...E,name:E.name||Y.name||((le=E.joined_table_name)==null?void 0:le.split(".").pop())||"unnamed_join"}:Y})}))}b(!1),$(null)},[N,S]),Q=f.useCallback(()=>{b(!1),$(null)},[]),J=f.useCallback(E=>{g(q=>({...q,joins:q.joins.filter((k,G)=>G!==E)}))},[]),ee=f.useCallback((E,q,k)=>{g(G=>({...G,joins:G.joins.map((Y,Z)=>{if(Z===E){const le={...Y,[q]:k};return!le.name&&le.joined_table_name&&(le.name=le.joined_table_name.split(".").pop()),le}return Y})}))},[]),ie=f.useCallback(()=>{if(!H())return;const E={...h,id:(n==null?void 0:n.id)||`mv_${Date.now()}`,created_at:(n==null?void 0:n.created_at)||new Date().toISOString(),updated_at:new Date().toISOString()};console.log("💾 Saving metric view:",E),o&&o(E),t()},[h,n,H,o,t]),fe=f.useCallback(()=>{t()},[t]),Ce=f.useCallback(()=>{var E;try{const q={version:h.version,source:L?`${L.catalog_name||(i==null?void 0:i.catalog_name)||"catalog"}.${L.schema_name||(i==null?void 0:i.schema_name)||"schema"}.${L.name}`:"source_table"};(E=h.filter)!=null&&E.trim()&&(q.filter=h.filter),h.joins.length>0&&(q.joins=h.joins.filter(G=>{var Y,Z,le,ge,Ee;return((Y=G.name)==null?void 0:Y.trim())&&(((Z=G.sql_on)==null?void 0:Z.trim())||((le=G.left_columns)==null?void 0:le.length)&&((ge=G.right_columns)==null?void 0:ge.length)||((Ee=G.using)==null?void 0:Ee.length))}).map(G=>{var Z,le,ge,Ee,ye;const Y={name:G.name};if(G.joined_table_name&&(Y.source=G.joined_table_name),G.using&&G.using.length>0)Y.using=G.using;else if((Z=G.sql_on)!=null&&Z.trim())Y.on=G.sql_on;else if(G.joined_table_name&&((le=G.left_columns)!=null&&le.length)&&((ge=G.right_columns)!=null&&ge.length)){const _e=[];for(let ne=0;ne<Math.min(G.left_columns.length,G.right_columns.length);ne++){const Se=G.left_columns[ne],je=G.right_columns[ne],De=((Ee=G.join_operators)==null?void 0:Ee[ne])||"=",Ge="source",Be=G.name||G.joined_table_name.split(".").pop();Se&&je&&_e.push(`${Ge}.${Se} ${De} ${Be}.${je}`)}let Pe=_e.join(" AND ");(ye=G.additional_conditions)!=null&&ye.trim()&&(Pe+=Pe?` AND ${G.additional_conditions}`:G.additional_conditions),Pe&&(Y.on=Pe)}return G.join_type!=="LEFT"&&(Y.type=G.join_type.toLowerCase()),G.joins&&G.joins.length>0&&(Y.joins=G.joins.filter(_e=>{var Pe,ne,Se,je,De;return((Pe=_e.name)==null?void 0:Pe.trim())&&(((ne=_e.sql_on)==null?void 0:ne.trim())||((Se=_e.left_columns)==null?void 0:Se.length)&&((je=_e.right_columns)==null?void 0:je.length)||((De=_e.using)==null?void 0:De.length))}).map(_e=>{var ne,Se,je,De;const Pe={name:_e.name};if(_e.joined_table_name&&(Pe.source=_e.joined_table_name),_e.using&&_e.using.length>0)Pe.using=_e.using;else if(_e.joined_table_name&&((ne=_e.left_columns)!=null&&ne.length)&&((Se=_e.right_columns)!=null&&Se.length)){const Ge=[];for(let Ne=0;Ne<Math.min(_e.left_columns.length,_e.right_columns.length);Ne++){const We=_e.left_columns[Ne],at=_e.right_columns[Ne],ot=((je=_e.join_operators)==null?void 0:je[Ne])||"=";We&&at&&Ge.push(`${We} ${ot} ${at}`)}let Be=Ge.join(" AND ");(De=_e.additional_conditions)!=null&&De.trim()&&(Be+=Be?` AND ${_e.additional_conditions}`:_e.additional_conditions),Pe.on=Be||_e.sql_on}else Pe.on=_e.sql_on;if(_e.join_type!=="LEFT"&&(Pe.type=_e.join_type.toLowerCase()),_e.joins&&_e.joins.length>0){const Ge=Be=>Be.filter(Ne=>{var We,at,ot,ze,st;return((We=Ne.name)==null?void 0:We.trim())&&(((at=Ne.sql_on)==null?void 0:at.trim())||((ot=Ne.left_columns)==null?void 0:ot.length)&&((ze=Ne.right_columns)==null?void 0:ze.length)||((st=Ne.using)==null?void 0:st.length))}).map(Ne=>{var at,ot,ze,st;const We={name:Ne.name,source:Ne.joined_table_name};if(Ne.using&&Ne.using.length>0)We.using=Ne.using;else if((at=Ne.sql_on)!=null&&at.trim())We.on=Ne.sql_on;else if((ot=Ne.left_columns)!=null&&ot.length&&((ze=Ne.right_columns)!=null&&ze.length)){const At=[];for(let _n=0;_n<Math.min(Ne.left_columns.length,Ne.right_columns.length);_n++){const ln=Ne.left_columns[_n],Ta=Ne.right_columns[_n],Wi=((st=Ne.join_operators)==null?void 0:st[_n])||"=";ln&&Ta&&At.push(`${ln} ${Wi} ${Ta}`)}At.length>0&&(We.on=At.join(" AND "))}return Ne.join_type!=="LEFT"&&(We.type=Ne.join_type.toLowerCase()),Ne.joins&&Ne.joins.length>0&&(We.joins=Ge(Ne.joins)),We});Pe.joins=Ge(_e.joins)}return Pe})),Y})),h.dimensions.length>0&&(q.dimensions=h.dimensions.filter(G=>{var Y,Z;return((Y=G.name)==null?void 0:Y.trim())&&((Z=G.expr)==null?void 0:Z.trim())}).map(G=>{var Y;return{name:G.name,expr:G.expr,...((Y=G.description)==null?void 0:Y.trim())&&{description:G.description}}})),h.measures.length>0&&(q.measures=h.measures.filter(G=>{var Y,Z;return((Y=G.name)==null?void 0:Y.trim())&&((Z=G.expr)==null?void 0:Z.trim())}).map(G=>{var Y;return{name:G.name,expr:G.expr,...((Y=G.description)==null?void 0:Y.trim())&&{description:G.description}}}));const k=[];return Object.entries(q).forEach(([G,Y])=>{typeof Y=="string"?k.push(`${G}: "${Y}"`):Array.isArray(Y)&&(k.push(`${G}:`),Y.forEach(Z=>{if(k.push(`  - name: "${Z.name}"`),G==="joins"){const le=(ge,Ee="    ")=>{ge.source&&k.push(`${Ee}source: "${ge.source}"`),ge.using&&ge.using.length>0?(k.push(`${Ee}using:`),ge.using.forEach(ye=>{k.push(`${Ee}  - ${ye}`)})):ge.on&&k.push(`${Ee}on: "${ge.on}"`),ge.type&&ge.type!=="left"&&k.push(`${Ee}type: "${ge.type}"`),ge.joins&&ge.joins.length>0&&(k.push(`${Ee}joins:`),ge.joins.forEach(ye=>{k.push(`${Ee}  - name: "${ye.name}"`),le(ye,`${Ee}    `)}))};le(Z)}else Z.expr&&k.push(`    expr: "${Z.expr}"`),Z.description&&k.push(`    description: "${Z.description}"`)}))}),k.join(`
`)}catch(q){return console.error("Error generating YAML preview:",q),`# Error generating YAML preview
# ${q.message}`}},[h,L,i])(),me=f.useCallback(E=>{const q=E.fieldName||E.name,k=E.category==="source"?`source.${q}`:`${E.table}.${q}`,G={id:`dim_${Date.now()}`,name:q,expr:k,description:E.comment||"",data_type:E.data_type};g(Y=>({...Y,dimensions:[...Y.dimensions,G]}))},[L]),Oe=f.useCallback(E=>{const q=["BIGINT","INT","SMALLINT","TINYINT","FLOAT","DOUBLE","DECIMAL"].includes(E.data_type),k=q?"SUM":"COUNT",G=E.fieldName||E.name,Y=q?`${k}(${G})`:`COUNT(${G})`,Z={id:`measure_${Date.now()}`,name:`${k.toLowerCase()}_${G}`,expr:Y,description:E.comment||"",aggregation_type:k,is_window_measure:!1,data_type:q?E.data_type:"BIGINT"};g(le=>({...le,measures:[...le.measures,Z]}))},[]);return l.jsxs(be.Root,{open:e,onOpenChange:t,children:[l.jsxs(be.Content,{style:{maxWidth:"900px",maxHeight:"80vh"},children:[l.jsx(be.Title,{children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(en,{}),n?"Edit Metric View":"Create Metric View"]})}),l.jsx(be.Description,{children:n?`Edit the metric view "${n.name}"`:"Create a new metric view to define dimensions and measures for analytics"}),l.jsxs(Qe.Root,{value:y,onValueChange:w,children:[l.jsxs(Qe.List,{children:[l.jsx(Qe.Trigger,{value:"basic",children:l.jsxs(O,{align:"center",gap:"1",children:["Basic Info",(v.name||v.source_table_id)&&l.jsx(we,{color:"red",size:"1",children:"!"})]})}),l.jsx(Qe.Trigger,{value:"dimensions",children:l.jsxs(O,{align:"center",gap:"1",children:["Dimensions (",h.dimensions.length,")",Object.keys(v).some(E=>E.startsWith("dimension_"))&&l.jsx(we,{color:"red",size:"1",children:"!"})]})}),l.jsx(Qe.Trigger,{value:"measures",children:l.jsxs(O,{align:"center",gap:"1",children:["Measures (",h.measures.length,")",Object.keys(v).some(E=>E.startsWith("measure_"))&&l.jsx(we,{color:"red",size:"1",children:"!"})]})}),l.jsxs(Qe.Trigger,{value:"joins",children:["Joins (",h.joins.length,")"]}),l.jsx(Qe.Trigger,{value:"advanced",children:"Advanced"}),l.jsxs(Qe.Trigger,{value:"yaml",children:[l.jsx(Lu,{})," YAML Preview"]})]}),l.jsx(Qe.Content,{value:"basic",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:"Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., sales_metrics, customer_analytics",value:h.name,onChange:E=>M("name",E.target.value)}),v.name&&l.jsx(R,{size:"1",color:"red",children:v.name})]}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:"Description"}),l.jsx(rr,{placeholder:"Describe what this metric view measures...",value:h.description,onChange:E=>M("description",E.target.value),rows:3})]}),l.jsxs(O,{gap:"4",children:[l.jsxs(O,{direction:"column",gap:"2",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Catalog"}),l.jsxs(W.Root,{value:h.catalog_name||"__project_default_catalog__",onValueChange:E=>{M("catalog_name",E==="__project_default_catalog__"?"":E)},children:[l.jsx(W.Trigger,{placeholder:"Select catalog (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_catalog__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",s,")"]})}),u==null?void 0:u.map(E=>l.jsx(W.Item,{value:E.name,children:E.name},E.name))]})]})]}),l.jsxs(O,{direction:"column",gap:"2",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Schema"}),l.jsxs(W.Root,{value:h.schema_name||"__project_default_schema__",onValueChange:E=>{M("schema_name",E==="__project_default_schema__"?"":E)},children:[l.jsx(W.Trigger,{placeholder:"Select schema (or leave empty for project default)"}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"__project_default_schema__",children:l.jsxs(R,{color:"gray",children:["(Use project default: ",c,")"]})}),d==null?void 0:d.map(E=>l.jsx(W.Item,{value:E.name,children:l.jsxs(O,{align:"center",justify:"between",style:{width:"100%"},children:[l.jsx(R,{children:E.name}),E.is_imported&&l.jsx(we,{color:"orange",size:"1",style:{marginLeft:"8px"},children:"imported"})]})},E.name))]})]})]})]}),l.jsxs(O,{gap:"4",children:[l.jsxs(O,{direction:"column",gap:"2",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Source Table *"}),l.jsxs(W.Root,{value:h.source_table_id,onValueChange:E=>M("source_table_id",E),children:[l.jsx(W.Trigger,{placeholder:"Select source table..."}),l.jsx(W.Content,{children:a.map(E=>l.jsx(W.Item,{value:E.id,children:E.name},E.id))})]}),v.source_table_id&&l.jsx(R,{size:"1",color:"red",children:v.source_table_id})]}),l.jsxs(O,{direction:"column",gap:"2",style:{flex:1},children:[l.jsx(R,{size:"2",weight:"medium",children:"Version"}),l.jsx(Ae.Input,{value:h.version,onChange:E=>M("version",E.target.value)})]})]}),L&&l.jsxs(te,{children:[l.jsxs(O,{justify:"between",align:"center",style:{marginBottom:"12px"},children:[l.jsxs(R,{size:"2",weight:"medium",children:["Available Fields from ",L.name]}),l.jsx(xe,{size:"1",variant:"solid",onClick:V,style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white"},children:"🚀 Smart Setup"})]}),l.jsx(Xt,{style:{height:"200px"},children:l.jsx(O,{direction:"column",gap:"2",children:K.map(E=>l.jsxs(O,{justify:"between",align:"center",style:{padding:"8px",background:"var(--gray-2)",borderRadius:"6px"},children:[l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"2",weight:"medium",children:E.name}),l.jsxs(O,{gap:"2",align:"center",children:[l.jsx(we,{variant:"soft",size:"1",children:E.data_type}),E.comment&&l.jsx(R,{size:"1",color:"gray",children:E.comment})]})]}),l.jsxs(O,{gap:"1",children:[l.jsxs(xe,{size:"1",variant:"soft",onClick:()=>me(E),children:[l.jsx(dn,{})," Dimension"]}),l.jsxs(xe,{size:"1",variant:"soft",color:"red",onClick:()=>Oe(E),children:[l.jsx(en,{})," Measure"]})]})]},E.id))})})]}),v.content&&l.jsx(R,{size:"1",color:"red",children:v.content})]})}),l.jsx(Qe.Content,{value:"dimensions",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"3",weight:"medium",children:"Dimensions"}),l.jsxs(xe,{onClick:j,children:[l.jsx(Mn,{})," Add Dimension"]})]}),l.jsx(Xt,{style:{height:"400px"},children:l.jsxs(O,{direction:"column",gap:"3",children:[h.dimensions.map((E,q)=>l.jsx(te,{style:{padding:"12px",border:"1px solid var(--gray-6)",borderRadius:"8px"},children:l.jsxs(O,{justify:"between",align:"start",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"3",style:{flex:1},children:[l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., customer_segment, product_category",value:E.name,onChange:k=>P(q,"name",k.target.value)}),v[`dimension_${q}_name`]&&l.jsx(R,{size:"1",color:"red",children:v[`dimension_${q}_name`]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Expression *"}),l.jsxs(W.Root,{value:E.expr,onValueChange:k=>P(q,"expr",k),children:[l.jsx(W.Trigger,{placeholder:"Select a field or enter custom expression"}),l.jsxs(W.Content,{children:[D().some(k=>k.category==="source_raw")&&l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Source Table Fields"}),D().filter(k=>k.category==="source_raw").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"blue",size:"1",children:k.table}),l.jsx(R,{children:k.label})]})},k.value))]}),D().some(k=>k.category==="source")&&l.jsxs(l.Fragment,{children:[D().some(k=>k.category==="source_raw")&&l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:D().some(k=>k.category==="source_raw")?"Alternative Format":"Source Table Fields"}),D().filter(k=>k.category==="source").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"gray",size:"1",children:"ALT"}),l.jsx(R,{children:k.label})]})},k.value))]})]}),D().some(k=>k.category==="joined")&&l.jsxs(l.Fragment,{children:[l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Joined Table Fields"}),D().filter(k=>k.category==="joined").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"green",size:"1",children:k.table}),l.jsx(R,{children:k.label})]})},k.value))]})]}),D().some(k=>k.category==="joined_struct")&&l.jsxs(l.Fragment,{children:[l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Joined Table Structs"}),D().filter(k=>k.category==="joined_struct").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"purple",size:"1",children:"STRUCT"}),l.jsx(R,{children:k.label})]})},k.uniqueKey||k.value))]})]}),D().some(k=>k.category==="nested_joined")&&l.jsxs(l.Fragment,{children:[l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Nested Joined Fields"}),D().filter(k=>k.category==="nested_joined").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"orange",size:"1",children:k.table}),l.jsx(R,{children:k.label})]})},k.value))]})]}),D().some(k=>k.category==="nested_joined_struct")&&l.jsxs(l.Fragment,{children:[l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Nested Structs"}),D().filter(k=>k.category==="nested_joined_struct").map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:"crimson",size:"1",children:"NESTED"}),l.jsx(R,{children:k.label})]})},k.uniqueKey||k.value))]})]}),l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Common Expressions"}),l.jsx(W.Item,{value:"DATE_TRUNC('MONTH', ${field})",children:"Monthly grouping"}),l.jsx(W.Item,{value:"DATE_TRUNC('YEAR', ${field})",children:"Yearly grouping"}),l.jsx(W.Item,{value:"UPPER(${field})",children:"Uppercase"}),l.jsx(W.Item,{value:"LOWER(${field})",children:"Lowercase"})]})]})]}),l.jsx(Ae.Input,{placeholder:"Or enter custom expression...",value:E.expr,onChange:k=>P(q,"expr",k.target.value),style:{marginTop:"4px"}}),v[`dimension_${q}_expr`]&&l.jsx(R,{size:"1",color:"red",children:v[`dimension_${q}_expr`]})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",weight:"medium",children:"Description"}),l.jsx(Ae.Input,{placeholder:"Describe this dimension...",value:E.description,onChange:k=>P(q,"description",k.target.value)})]})]}),l.jsx(jn,{color:"red",variant:"soft",onClick:()=>I(q),children:l.jsx(gn,{})})]})},E.id)),h.dimensions.length===0&&l.jsxs(te,{style:{textAlign:"center",padding:"40px",color:"var(--gray-9)"},children:[l.jsx(dn,{style:{width:"32px",height:"32px",margin:"0 auto 8px"}}),l.jsx(R,{children:"No dimensions defined"}),l.jsx(R,{size:"1",children:"Dimensions are categorical fields for grouping data"})]})]})})]})}),l.jsx(Qe.Content,{value:"measures",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"3",weight:"medium",children:"Measures"}),l.jsxs(xe,{onClick:A,children:[l.jsx(Mn,{})," Add Measure"]})]}),l.jsx(Xt,{style:{height:"400px"},children:l.jsxs(O,{direction:"column",gap:"3",children:[h.measures.map((E,q)=>l.jsx(te,{style:{padding:"12px",border:"1px solid var(--gray-6)",borderRadius:"8px"},children:l.jsxs(O,{justify:"between",align:"start",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"3",style:{flex:1},children:[l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Name *"}),l.jsx(Ae.Input,{placeholder:"e.g., total_sales, avg_order_value",value:E.name,onChange:k=>z(q,"name",k.target.value)}),v[`measure_${q}_name`]&&l.jsx(R,{size:"1",color:"red",children:v[`measure_${q}_name`]})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Aggregation"}),l.jsxs(W.Root,{value:E.aggregation_type,onValueChange:k=>z(q,"aggregation_type",k),children:[l.jsx(W.Trigger,{}),l.jsxs(W.Content,{children:[l.jsx(W.Item,{value:"SUM",children:"SUM"}),l.jsx(W.Item,{value:"COUNT",children:"COUNT"}),l.jsx(W.Item,{value:"AVG",children:"AVG"}),l.jsx(W.Item,{value:"MIN",children:"MIN"}),l.jsx(W.Item,{value:"MAX",children:"MAX"}),l.jsx(W.Item,{value:"COUNT_DISTINCT",children:"COUNT DISTINCT"})]})]})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",weight:"medium",children:"Expression *"}),l.jsxs(W.Root,{value:E.expr,onValueChange:k=>z(q,"expr",k),children:[l.jsx(W.Trigger,{placeholder:"Select a field for aggregation"}),l.jsxs(W.Content,{children:[l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Numeric Fields"}),D().filter(k=>k.type&&["INT","BIGINT","FLOAT","DOUBLE","DECIMAL"].some(G=>k.type.includes(G))).map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:k.category==="source"?"blue":"green",size:"1",children:k.table}),l.jsx(R,{children:k.label})]})},k.value))]}),l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"All Fields"}),D().map(k=>l.jsx(W.Item,{value:k.value,children:l.jsxs(O,{align:"center",gap:"2",children:[l.jsx(we,{color:k.category==="source"?"blue":"green",size:"1",children:k.table}),l.jsx(R,{children:k.label})]})},`all_${k.value}`))]}),l.jsx(W.Separator,{}),l.jsxs(W.Group,{children:[l.jsx(W.Label,{children:"Common Patterns"}),l.jsx(W.Item,{value:"COUNT(*)",children:"Count all rows"}),l.jsx(W.Item,{value:"COUNT(DISTINCT ${field})",children:"Count distinct values"})]})]})]}),l.jsx(Ae.Input,{placeholder:"Or enter custom expression (e.g., SUM(amount * (1 - discount)))",value:E.expr,onChange:k=>z(q,"expr",k.target.value),style:{marginTop:"4px"}}),v[`measure_${q}_expr`]&&l.jsx(R,{size:"1",color:"red",children:v[`measure_${q}_expr`]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",weight:"medium",children:"Description"}),l.jsx(Ae.Input,{placeholder:"Describe this measure...",value:E.description,onChange:k=>z(q,"description",k.target.value)})]})]}),l.jsx(jn,{color:"red",variant:"soft",onClick:()=>U(q),children:l.jsx(gn,{})})]})},E.id)),h.measures.length===0&&l.jsxs(te,{style:{textAlign:"center",padding:"40px",color:"var(--gray-9)"},children:[l.jsx(en,{style:{width:"32px",height:"32px",margin:"0 auto 8px"}}),l.jsx(R,{children:"No measures defined"}),l.jsx(R,{size:"1",children:"Measures are numeric aggregations for analysis"})]})]})})]})}),l.jsx(Qe.Content,{value:"joins",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"3",weight:"medium",children:"Advanced Joins"}),l.jsx(R,{size:"1",color:"gray",children:"Configure complex joins with multiple conditions and performance hints"})]}),l.jsxs(xe,{onClick:F,children:[l.jsx(Fy,{})," Configure Join"]})]}),l.jsx(Xt,{style:{height:"400px"},children:l.jsxs(O,{direction:"column",gap:"3",children:[h.joins.map((E,q)=>l.jsx(te,{style:{padding:"12px",border:"1px solid var(--gray-6)",borderRadius:"8px"},children:l.jsxs(O,{justify:"between",align:"start",gap:"3",children:[l.jsxs(O,{direction:"column",gap:"3",style:{flex:1},children:[l.jsxs(O,{gap:"3",children:[l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Join Name"}),l.jsx(Ae.Input,{placeholder:"e.g., customers, products",value:E.name,onChange:k=>ee(q,"name",k.target.value)})]}),l.jsxs(O,{direction:"column",gap:"1",style:{flex:1},children:[l.jsx(R,{size:"1",weight:"medium",children:"Join Type"}),l.jsx(R,{size:"1",color:"gray",style:{padding:"8px 12px",backgroundColor:"var(--gray-2)",borderRadius:"6px",border:"1px solid var(--gray-6)"},children:"LEFT OUTER JOIN (fixed)"})]})]}),l.jsxs(O,{direction:"column",gap:"1",children:[l.jsx(R,{size:"1",weight:"medium",children:"Join Condition (SQL ON)"}),l.jsx(Ae.Input,{placeholder:"e.g., main.customer_id = customers.id",value:E.sql_on,onChange:k=>ee(q,"sql_on",k.target.value)})]})]}),l.jsxs(O,{gap:"2",children:[l.jsx(jn,{color:"blue",variant:"soft",onClick:()=>B(E,q),title:"Edit join in advanced dialog",children:l.jsx(il,{})}),l.jsx(jn,{color:"red",variant:"soft",onClick:()=>J(q),title:"Remove join",children:l.jsx(gn,{})})]})]})},E.id)),h.joins.length===0&&l.jsxs(te,{style:{textAlign:"center",padding:"40px",color:"var(--gray-9)"},children:[l.jsx(u7,{style:{width:"32px",height:"32px",margin:"0 auto 8px"}}),l.jsx(R,{children:"No joins defined"}),l.jsx(R,{size:"1",children:"Joins allow you to include data from other tables"})]})]})})]})}),l.jsx(Qe.Content,{value:"advanced",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:"Global Filter (WHERE clause)"}),l.jsx(rr,{placeholder:"e.g., status = 'active' AND created_date >= '2023-01-01'",value:h.filter,onChange:E=>M("filter",E.target.value),rows:3}),l.jsx(R,{size:"1",color:"gray",children:"Optional WHERE clause applied to all queries using this metric view"})]}),l.jsx(ar,{}),l.jsxs(O,{direction:"column",gap:"2",children:[l.jsx(R,{size:"2",weight:"medium",children:"Tags"}),l.jsx(R,{size:"1",color:"gray",children:"Tags will be applied to the metric view in Databricks"})]})]})}),l.jsx(Qe.Content,{value:"yaml",children:l.jsxs(O,{direction:"column",gap:"4",style:{padding:"16px 0"},children:[l.jsxs(O,{justify:"between",align:"center",children:[l.jsx(R,{size:"3",weight:"medium",children:"YAML Preview"}),l.jsx(we,{variant:"soft",color:"purple",children:"Real-time Preview"})]}),l.jsx(R,{size:"1",color:"gray",children:"This is how your metric view will be defined in Databricks. The YAML updates automatically as you make changes."}),l.jsx(te,{style:{background:"#1e1e1e",border:"1px solid #333",borderRadius:"8px",padding:"16px",fontFamily:'Monaco, Consolas, "Courier New", monospace',fontSize:"12px",lineHeight:"1.5",color:"#d4d4d4",maxHeight:"400px",overflow:"auto"},children:l.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:Ce})}),h.dimensions.length===0&&h.measures.length===0&&l.jsx(O,{align:"center",gap:"2",style:{padding:"12px",background:"var(--amber-2)",borderRadius:"6px",border:"1px solid var(--amber-6)"},children:l.jsx(R,{size:"1",color:"amber",children:"⚠️ Add at least one dimension or measure to create a valid metric view"})}),!((Fe=h.name)!=null&&Fe.trim())&&l.jsx(O,{align:"center",gap:"2",style:{padding:"12px",background:"var(--red-2)",borderRadius:"6px",border:"1px solid var(--red-6)"},children:l.jsx(R,{size:"1",color:"red",children:"❌ Metric view name is required"})}),!L&&l.jsx(O,{align:"center",gap:"2",style:{padding:"12px",background:"var(--red-2)",borderRadius:"6px",border:"1px solid var(--red-6)"},children:l.jsx(R,{size:"1",color:"red",children:"❌ Source table is required"})}),(h.dimensions.length>0||h.measures.length>0)&&((oe=h.name)==null?void 0:oe.trim())&&L&&l.jsx(O,{align:"center",gap:"2",style:{padding:"12px",background:"var(--green-2)",borderRadius:"6px",border:"1px solid var(--green-6)"},children:l.jsx(R,{size:"1",color:"green",children:"✅ Metric view is valid and ready to be created"})})]})})]}),l.jsxs(O,{gap:"3",mt:"4",justify:"end",children:[l.jsx(be.Close,{children:l.jsx(xe,{variant:"soft",color:"gray",onClick:fe,children:"Cancel"})}),l.jsxs(xe,{onClick:ie,children:[l.jsx(Lu,{}),n?"Update Metric View":"Create Metric View"]})]})]}),l.jsx(gee,{open:_,onClose:Q,onSave:X,initialJoin:S,availableTables:a,sourceTableColumns:(L==null?void 0:L.fields)||[],mode:N})]})};class $j extends re.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t),console.error("Error info:",n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?l.jsxs("div",{style:{padding:"20px",backgroundColor:"#fee",border:"1px solid #fcc"},children:[l.jsx("h2",{children:"Something went wrong!"}),l.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[l.jsx("summary",{children:"Error details (click to expand)"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Error:"})," ",this.state.error&&this.state.error.toString()]}),l.jsx("p",{children:l.jsx("strong",{children:"Stack trace:"})}),l.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function vee(){const{loadCatalogs:e,loadDatatypes:t,getAppState:n,showProjectStartupDialog:r,currentProject:o,showTraditionalViewDialog:a,editingTraditionalView:i,setShowTraditionalViewDialog:s,createTraditionalView:c,updateTraditionalView:u,showMetricViewDialog:d,editingMetricView:p,setShowMetricViewDialog:m,createMetricView:h,updateMetricView:g}=ct();return f.useEffect(()=>{e(),t(),n()},[e,t,n]),l.jsx($j,{children:l.jsxs("div",{id:"app",children:[l.jsx(lB,{}),o&&l.jsx($j,{children:l.jsx(iee,{})}),!o&&!r&&l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 80px)",color:"#888",fontSize:"18px"},children:"Welcome! Please create or load a project to get started."}),l.jsx(see,{}),l.jsx(cee,{}),l.jsx(dee,{}),l.jsx(fee,{}),l.jsx(hee,{}),l.jsx(mee,{open:a,onClose:()=>s(!1),traditionalView:i,onSave:y=>{i?u(i.id,y):c(y)}}),l.jsx(yee,{open:d,onClose:()=>m(!1),metricView:p,onSave:y=>{p?g(p.id,y):h(y)}})]})})}C1.createRoot(document.getElementById("root")).render(l.jsx(re.StrictMode,{children:l.jsx(wa,{children:l.jsx(vee,{})})}));
